<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://www.schneider-electric.com/Calaos/Case/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.schneider-electric.com/Calaos/Case/2.0 file://ProjectSchema.xsd">
  <FileHeader Company="Schneider Electric" CreationDateTime="2025-12-24T00:00:00" Creator="PLCAutoPilot" Product="EcoStruxure Machine Expert - Basic V1.2" ProductVersion="1.2.0.5" />
  <ContentHeader Name="DualTank_LevelControl.smbp" ModificationDateTime="2025-12-24T00:00:00">
    <Comment>Sequential lights template for M221 PLC programs</Comment>
  </ContentHeader>
  <Workspace>
    <GraphicalLayout>
      <Diagram Name="Rungs">
        <DrawingOrder>
          <Node Name="Sequential_Lights_Main" />
        </DrawingOrder>
      </Diagram>
    </GraphicalLayout>
  </Workspace>
  <Project>
    <POU Name="Sequential_Lights_Main" Type="program">
      <interface>
        <localVars>
          <variable name="START_BTN">
            <type>
              <BOOL />
            </type>
            <initialValue>
              <simpleValue value="FALSE" />
            </initialValue>
            <comment>Start button input</comment>
          </variable>
          <variable name="STOP_BTN">
            <type>
              <BOOL />
            </type>
            <initialValue>
              <simpleValue value="FALSE" />
            </initialValue>
            <comment>Stop button input</comment>
          </variable>
        </localVars>
      </interface>
      <body>
        <LD>
          <Rungs>
          <RungEntity>
            <LadderElements />
            <InstructionLines>
              <InstructionLineEntity>
                <InstructionLine>LD    %I0.0</InstructionLine>
                <Comment>Load AUTO MODE switch</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ST    %M0</InstructionLine>
                <Comment>Store to auto active flag</Comment>
              </InstructionLineEntity>
            </InstructionLines>
            <Name>Rung 1</Name>
            <MainComment>Auto Mode Control</MainComment>
            <Label />
            <IsLadderSelected>false</IsLadderSelected>
          </RungEntity>
          <RungEntity>
            <LadderElements />
            <InstructionLines>
              <InstructionLineEntity>
                <InstructionLine>LD    %M0</InstructionLine>
                <Comment>Load auto mode active</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ANDN  %I0.1</InstructionLine>
                <Comment>AND NOT Tank 1 LOW (L1 - NC sensor opens when LOW)</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>OR    %M1</InstructionLine>
                <Comment>OR with Pump 1 seal-in</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>OR    %I0.2</InstructionLine>
                <Comment>OR with manual Pump 1 start</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ANDN  %I0.3</InstructionLine>
                <Comment>AND NOT Tank 1 HIGH (L2 - stop at HIGH)</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ST    %M1</InstructionLine>
                <Comment>Store to Pump 1 run flag</Comment>
              </InstructionLineEntity>
            </InstructionLines>
            <Name>Rung 2</Name>
            <MainComment>Tank 1 Level Control (L1-L2 sensors)</MainComment>
            <Label />
            <IsLadderSelected>false</IsLadderSelected>
          </RungEntity>
          <RungEntity>
            <LadderElements />
            <InstructionLines>
              <InstructionLineEntity>
                <InstructionLine>LD    %M1</InstructionLine>
                <Comment>Load Pump 1 run flag</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ST    %Q0.0</InstructionLine>
                <Comment>Turn ON Pump 1</Comment>
              </InstructionLineEntity>
            </InstructionLines>
            <Name>Rung 3</Name>
            <MainComment>Pump 1 Output Control</MainComment>
            <Label />
            <IsLadderSelected>false</IsLadderSelected>
          </RungEntity>
          <RungEntity>
            <LadderElements />
            <InstructionLines>
              <InstructionLineEntity>
                <InstructionLine>LD    %M0</InstructionLine>
                <Comment>Load auto mode active</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ANDN  %I0.5</InstructionLine>
                <Comment>AND NOT Tank 2 LOW (L3 - NC sensor opens when LOW)</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>OR    %M2</InstructionLine>
                <Comment>OR with Pump 2 seal-in</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>OR    %I0.4</InstructionLine>
                <Comment>OR with manual Pump 2 start</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ANDN  %I0.6</InstructionLine>
                <Comment>AND NOT Tank 2 HIGH (L4 - stop at HIGH)</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ST    %M2</InstructionLine>
                <Comment>Store to Pump 2 run flag</Comment>
              </InstructionLineEntity>
            </InstructionLines>
            <Name>Rung 4</Name>
            <MainComment>Tank 2 Level Control (L3-L4 sensors)</MainComment>
            <Label />
            <IsLadderSelected>false</IsLadderSelected>
          </RungEntity>
          <RungEntity>
            <LadderElements />
            <InstructionLines>
              <InstructionLineEntity>
                <InstructionLine>LD    %M2</InstructionLine>
                <Comment>Load Pump 2 run flag</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ST    %Q0.1</InstructionLine>
                <Comment>Turn ON Pump 2</Comment>
              </InstructionLineEntity>
            </InstructionLines>
            <Name>Rung 5</Name>
            <MainComment>Pump 2 Output Control</MainComment>
            <Label />
            <IsLadderSelected>false</IsLadderSelected>
          </RungEntity>
        </Rungs>
        </LD>
      </body>
      <addData>
        <data name="GridLayout" handleUnknown="implementation">
          <Grid Rows="20" Columns="11" />
        </data>
      </addData>
    </POU>
  </Project>
  <Device>
    <Name>TM221CE16T</Name>
    <Type>Modicon M221 Logic Controller</Type>
    <Comment>Compact PLC 16 I/O</Comment>
  </Device>
  <Configuration>
    <GlobalVars name="GlobalVariables">
      <variable name="SEQUENCE_RUN">
        <type>
          <BOOL />
        </type>
        <initialValue>
          <simpleValue value="FALSE" />
        </initialValue>
        <comment>Sequence running flag</comment>
        <address>%M0</address>
      </variable>
      <variable name="Timer_1">
        <type>
          <TIMER />
        </type>
        <comment>Timer 1</comment>
        <address>%TM0</address>
      </variable>
      <variable name="Timer_2">
        <type>
          <TIMER />
        </type>
        <comment>Timer 2</comment>
        <address>%TM1</address>
      </variable>
      <variable name="Timer_3">
        <type>
          <TIMER />
        </type>
        <comment>Timer 3</comment>
        <address>%TM2</address>
      </variable>
    </GlobalVars>
  </Configuration>
</Project>
