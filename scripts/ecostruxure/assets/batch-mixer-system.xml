<?xml version="1.0" ?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="PLCArchitect" productName="Machine Expert Logic Builder" productVersion="V19.2.3.0" creationDateTime="2026-02-05T20:35:55.192173"/>
  <contentHeader name="EnhancedSystemWithCounter" version="1.0.0.0">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1"/>
      </fbd>
      <ld>
        <scaling x="1" y="1"/>
      </ld>
      <sfc>
        <scaling x="1" y="1"/>
      </sfc>
    </coordinateInfo>
  </contentHeader>
  <types>
    <dataTypes/>
    <pous>
      <pou name="EnhancedSystemWithCounter" pouType="program">
        <interface>
          <localVars>
            <variable name="StartBtn">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="ProcessActive">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="AgitatorMotor">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="HeatingElement">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="MixingTimer">
              <type>
                <derived name="TON"/>
              </type>
            </variable>
            <variable name="HeatingTimer">
              <type>
                <derived name="TON"/>
              </type>
            </variable>
            <variable name="MixingTime">
              <type>
                <TIME/>
              </type>
            </variable>
            <variable name="HeatingTime">
              <type>
                <TIME/>
              </type>
            </variable>
            <variable name="BatchCounter">
              <type>
                <derived name="CTU"/>
              </type>
            </variable>
            <variable name="CounterReset">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="BatchTarget">
              <type>
                <INT/>
              </type>
            </variable>
            <variable name="BatchComplete">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="TempController">
              <type>
                <derived name="PID_FIXCYCLE"/>
              </type>
            </variable>
            <variable name="actual_temp">
              <type>
                <REAL/>
              </type>
            </variable>
            <variable name="setpoint_temp">
              <type>
                <REAL/>
              </type>
            </variable>
            <variable name="Manual">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="reset">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="y_manual">
              <type>
                <REAL/>
              </type>
            </variable>
            <variable name="y_offset">
              <type>
                <REAL/>
              </type>
            </variable>
            <variable name="y_min">
              <type>
                <REAL/>
              </type>
            </variable>
            <variable name="y_max">
              <type>
                <REAL/>
              </type>
            </variable>
            <variable name="cycle">
              <type>
                <REAL/>
              </type>
            </variable>
            <variable name="limits_active">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="Overflow">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="heater_output">
              <type>
                <REAL/>
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <LD>
            <leftPowerRail localId="0">
              <position x="0" y="0"/>
              <connectionPointOut formalParameter="none"/>
            </leftPowerRail>
            <contact localId="1">
              <position x="100" y="100"/>
              <connectionPointIn>
                <connection refLocalId="0"/>
              </connectionPointIn>
              <connectionPointOut/>
              <variable>StartBtn</variable>
            </contact>
            <inVariable localId="10">
              <position x="200" y="120"/>
              <connectionPointOut/>
              <expression>MixingTime</expression>
            </inVariable>
            <block localId="2" typeName="TON" instanceName="MixingTimer">
              <position x="300" y="80"/>
              <inputVariables>
                <variable formalParameter="IN">
                  <connectionPointIn>
                    <connection refLocalId="1"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="PT">
                  <connectionPointIn>
                    <connection refLocalId="10"/>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="Q">
                  <connectionPointOut/>
                </variable>
              </outputVariables>
            </block>
            <contact localId="3">
              <position x="500" y="100"/>
              <connectionPointIn>
                <connection refLocalId="2" formalParameter="Q"/>
              </connectionPointIn>
              <connectionPointOut/>
              <variable>ProcessActive</variable>
            </contact>
            <inVariable localId="11">
              <position x="600" y="120"/>
              <connectionPointOut/>
              <expression>HeatingTime</expression>
            </inVariable>
            <block localId="4" typeName="TON" instanceName="HeatingTimer">
              <position x="700" y="80"/>
              <inputVariables>
                <variable formalParameter="IN">
                  <connectionPointIn>
                    <connection refLocalId="3"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="PT">
                  <connectionPointIn>
                    <connection refLocalId="11"/>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="Q">
                  <connectionPointOut/>
                </variable>
              </outputVariables>
            </block>
            <coil localId="5">
              <position x="900" y="100"/>
              <connectionPointIn>
                <connection refLocalId="4" formalParameter="Q"/>
              </connectionPointIn>
              <variable>AgitatorMotor</variable>
            </coil>
            <contact localId="20">
              <position x="500" y="200"/>
              <connectionPointIn>
                <connection refLocalId="0"/>
              </connectionPointIn>
              <connectionPointOut/>
              <variable>ProcessActive</variable>
            </contact>
            <coil localId="21">
              <position x="700" y="200"/>
              <connectionPointIn>
                <connection refLocalId="20"/>
              </connectionPointIn>
              <variable>HeatingElement</variable>
            </coil>
            <contact localId="30" edge="falling">
              <position x="100" y="300"/>
              <connectionPointIn>
                <connection refLocalId="0"/>
              </connectionPointIn>
              <connectionPointOut/>
              <variable>AgitatorMotor</variable>
            </contact>
            <contact localId="31">
              <position x="100" y="330"/>
              <connectionPointIn>
                <connection refLocalId="0"/>
              </connectionPointIn>
              <connectionPointOut/>
              <variable>CounterReset</variable>
            </contact>
            <inVariable localId="32">
              <position x="200" y="340"/>
              <connectionPointOut/>
              <expression>BatchTarget</expression>
            </inVariable>
            <block localId="33" typeName="CTU" instanceName="BatchCounter">
              <position x="300" y="300"/>
              <inputVariables>
                <variable formalParameter="CU">
                  <connectionPointIn>
                    <connection refLocalId="30"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="R">
                  <connectionPointIn>
                    <connection refLocalId="31"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="PV">
                  <connectionPointIn>
                    <connection refLocalId="32"/>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="Q">
                  <connectionPointOut/>
                </variable>
                <variable formalParameter="CV">
                  <connectionPointOut/>
                </variable>
              </outputVariables>
            </block>
            <coil localId="34">
              <position x="500" y="320"/>
              <connectionPointIn>
                <connection refLocalId="33" formalParameter="Q"/>
              </connectionPointIn>
              <variable>BatchComplete</variable>
            </coil>
            <inVariable localId="50">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>actual_temp</expression>
            </inVariable>
            <inVariable localId="51">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>setpoint_temp</expression>
            </inVariable>
            <inVariable localId="52">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>1.5</expression>
            </inVariable>
            <inVariable localId="53">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>10.0</expression>
            </inVariable>
            <inVariable localId="54">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>2.0</expression>
            </inVariable>
            <inVariable localId="55">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>y_manual</expression>
            </inVariable>
            <inVariable localId="56">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>y_offset</expression>
            </inVariable>
            <inVariable localId="57">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>y_min</expression>
            </inVariable>
            <inVariable localId="58">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>y_max</expression>
            </inVariable>
            <inVariable localId="59">
              <position x="0" y="0"/>
              <connectionPointOut/>
              <expression>cycle</expression>
            </inVariable>
            <contact localId="60" negated="false" storage="none" edge="none">
              <position x="0" y="0"/>
              <connectionPointIn>
                <connection refLocalId="0"/>
              </connectionPointIn>
              <connectionPointOut/>
              <variable>Manual</variable>
            </contact>
            <contact localId="61" negated="false" storage="none" edge="none">
              <position x="0" y="0"/>
              <connectionPointIn>
                <connection refLocalId="0"/>
              </connectionPointIn>
              <connectionPointOut/>
              <variable>reset</variable>
            </contact>
            <block localId="70" typeName="PID_FIXCYCLE" instanceName="TempController">
              <position x="200" y="400"/>
              <inputVariables>
                <variable formalParameter="ACTUAL">
                  <connectionPointIn>
                    <connection refLocalId="50"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="SET_POINT">
                  <connectionPointIn>
                    <connection refLocalId="51"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="KP">
                  <connectionPointIn>
                    <connection refLocalId="52"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="TN">
                  <connectionPointIn>
                    <connection refLocalId="53"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="TV">
                  <connectionPointIn>
                    <connection refLocalId="54"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Y_MANUAL">
                  <connectionPointIn>
                    <connection refLocalId="55"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Y_OFFSET">
                  <connectionPointIn>
                    <connection refLocalId="56"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Y_MIN">
                  <connectionPointIn>
                    <connection refLocalId="57"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Y_MAX">
                  <connectionPointIn>
                    <connection refLocalId="58"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="MANUAL">
                  <connectionPointIn>
                    <connection refLocalId="60"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="RESET">
                  <connectionPointIn>
                    <connection refLocalId="61"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="CYCLE">
                  <connectionPointIn>
                    <connection refLocalId="59"/>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="Y">
                  <connectionPointOut/>
                </variable>
                <variable formalParameter="LIMITS_ACTIVE">
                  <connectionPointOut>
                    <expression>limits_active</expression>
                  </connectionPointOut>
                </variable>
                <variable formalParameter="OVERFLOW">
                  <connectionPointOut>
                    <expression>Overflow</expression>
                  </connectionPointOut>
                </variable>
              </outputVariables>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/fbdcalltype" handleUnknown="implementation">
                  <CallType xmlns="">functionblock</CallType>
                </data>
              </addData>
            </block>
            <outVariable localId="80">
              <position x="600" y="420"/>
              <connectionPointIn>
                <connection refLocalId="70" formalParameter="Y"/>
              </connectionPointIn>
              <expression>heater_output</expression>
            </outVariable>
            <rightPowerRail localId="2147483646">
              <position x="0" y="0"/>
              <connectionPointIn>
                <connection refLocalId="70" formalParameter=""/>
              </connectionPointIn>
            </rightPowerRail>
          </LD>
        </body>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations/>
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/projectstructure" handleUnknown="discard">
      <ProjectStructure xmlns="">
        <Object Name="EnhancedSystemWithCounter"/>
      </ProjectStructure>
    </data>
  </addData>
</project>
