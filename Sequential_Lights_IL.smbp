<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://www.schneider-electric.com/Calaos/Case/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.schneider-electric.com/Calaos/Case/2.0 file://ProjectSchema.xsd">
  <FileHeader Company="Schneider Electric" CreationDateTime="2025-12-24T00:00:00" Creator="PLCAutoPilot" Product="EcoStruxure Machine Expert - Basic V1.2" ProductVersion="1.2.0.5" />
  <ContentHeader Name="Sequential_Lights_IL.smbp" ModificationDateTime="2025-12-24T00:00:00">
    <Comment>Sequential lights template for M221 PLC programs</Comment>
  </ContentHeader>
  <Workspace>
    <GraphicalLayout>
      <Diagram Name="Rungs">
        <DrawingOrder>
          <Node Name="Sequential_Lights_Main" />
        </DrawingOrder>
      </Diagram>
    </GraphicalLayout>
  </Workspace>
  <Project>
    <POU Name="Sequential_Lights_Main" Type="program">
      <interface>
        <localVars>
          <variable name="START_BTN">
            <type>
              <BOOL />
            </type>
            <initialValue>
              <simpleValue value="FALSE" />
            </initialValue>
            <comment>Start button input</comment>
          </variable>
          <variable name="STOP_BTN">
            <type>
              <BOOL />
            </type>
            <initialValue>
              <simpleValue value="FALSE" />
            </initialValue>
            <comment>Stop button input</comment>
          </variable>
        </localVars>
      </interface>
      <body>
        <LD>
          <Rungs>
          <RungEntity>
            <LadderElements />
            <InstructionLines>
              <InstructionLineEntity>
                <InstructionLine>LD    %I0.0</InstructionLine>
                <Comment>Load START button</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>OR    %M0</InstructionLine>
                <Comment>OR with sequence run flag (seal-in)</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ANDN  %I0.1</InstructionLine>
                <Comment>AND NOT STOP button</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ST    %M0</InstructionLine>
                <Comment>Store to sequence run flag</Comment>
              </InstructionLineEntity>
            </InstructionLines>
            <Name>Rung 1</Name>
            <MainComment>Sequence Start/Stop Control</MainComment>
            <Label />
            <IsLadderSelected>false</IsLadderSelected>
          </RungEntity>
          <RungEntity>
            <LadderElements />
            <InstructionLines>
              <InstructionLineEntity>
                <InstructionLine>LD    %M0</InstructionLine>
                <Comment>Load sequence run flag</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ST    %Q0.0</InstructionLine>
                <Comment>Turn ON Light 1</Comment>
              </InstructionLineEntity>
            </InstructionLines>
            <Name>Rung 2</Name>
            <MainComment>Light 1 - ON immediately</MainComment>
            <Label />
            <IsLadderSelected>false</IsLadderSelected>
          </RungEntity>
          <RungEntity>
            <LadderElements />
            <InstructionLines>
              <InstructionLineEntity>
                <InstructionLine>BLK   %TM0</InstructionLine>
                <Comment>Begin Timer 1 block</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>LD    %M0</InstructionLine>
                <Comment>Load sequence run flag</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>IN</InstructionLine>
                <Comment>Timer input</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>OUT_BLK</InstructionLine>
                <Comment>Output from timer block</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>LD    Q</InstructionLine>
                <Comment>Load timer Q output</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ST    %Q0.1</InstructionLine>
                <Comment>Turn ON Light 2</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>END_BLK</InstructionLine>
                <Comment>End timer block</Comment>
              </InstructionLineEntity>
            </InstructionLines>
            <Name>Rung 3</Name>
            <MainComment>Timer 1 + Light 2 (3 seconds)</MainComment>
            <Label />
            <IsLadderSelected>false</IsLadderSelected>
          </RungEntity>
          <RungEntity>
            <LadderElements />
            <InstructionLines>
              <InstructionLineEntity>
                <InstructionLine>BLK   %TM1</InstructionLine>
                <Comment>Begin Timer 2 block</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>LD    %TM0.Q</InstructionLine>
                <Comment>Load Timer 1 done bit</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>IN</InstructionLine>
                <Comment>Timer input</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>OUT_BLK</InstructionLine>
                <Comment>Output from timer block</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>LD    Q</InstructionLine>
                <Comment>Load timer Q output</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>ST    %Q0.2</InstructionLine>
                <Comment>Turn ON Light 3</Comment>
              </InstructionLineEntity>
              <InstructionLineEntity>
                <InstructionLine>END_BLK</InstructionLine>
                <Comment>End timer block</Comment>
              </InstructionLineEntity>
            </InstructionLines>
            <Name>Rung 4</Name>
            <MainComment>Timer 2 + Light 3 (3 seconds)</MainComment>
            <Label />
            <IsLadderSelected>false</IsLadderSelected>
          </RungEntity>
        </Rungs>
        </LD>
      </body>
      <addData>
        <data name="GridLayout" handleUnknown="implementation">
          <Grid Rows="20" Columns="11" />
        </data>
      </addData>
    </POU>
  </Project>
  <Device>
    <Name>TM221CE16T</Name>
    <Type>Modicon M221 Logic Controller</Type>
    <Comment>Compact PLC 16 I/O</Comment>
  </Device>
  <Configuration>
    <GlobalVars name="GlobalVariables">
      <variable name="SEQUENCE_RUN">
        <type>
          <BOOL />
        </type>
        <initialValue>
          <simpleValue value="FALSE" />
        </initialValue>
        <comment>Sequence running flag</comment>
        <address>%M0</address>
      </variable>
      <variable name="Timer_1">
        <type>
          <TIMER />
        </type>
        <comment>Timer 1</comment>
        <address>%TM0</address>
      </variable>
      <variable name="Timer_2">
        <type>
          <TIMER />
        </type>
        <comment>Timer 2</comment>
        <address>%TM1</address>
      </variable>
      <variable name="Timer_3">
        <type>
          <TIMER />
        </type>
        <comment>Timer 3</comment>
        <address>%TM2</address>
      </variable>
    </GlobalVars>
  </Configuration>
</Project>
