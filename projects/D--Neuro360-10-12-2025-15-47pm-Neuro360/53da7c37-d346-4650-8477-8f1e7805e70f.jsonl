{"type":"summary","summary":"I don't have access to the conversation content. Please provide the actual messages or context you'd like me to create a title for.","leafUuid":"ad20c169-7c93-49bc-a7a9-354cfc952001"}
{"type":"summary","summary":"NeuroSense Platform Complete Documentation Summary","leafUuid":"4d7f3133-c329-400b-ab70-ee133deb9d29"}
{"type":"file-history-snapshot","messageId":"e974a2ee-1853-4c80-b3e9-871b93337650","snapshot":{"messageId":"e974a2ee-1853-4c80-b3e9-871b93337650","trackedFileBackups":{},"timestamp":"2025-12-18T12:09:41.899Z"},"isSnapshotUpdate":false}
{"parentUuid":null,"isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":"parameter stress me condition dalo like agar agar stress me arousal score ,Relaxation Score , Regeneration & Repair (Alpha modulation) ye tino normal score aaya hai stress me to usko green me indicat kro agar score score jada ho to to red me show kro jo highlight kiya hai screenhsort me  & 'c:\\Users\\Hp\\OneDrive\\Pictures\\Screenshots 1\\Screenshot 2025-12-18 173223.png'"},"uuid":"e974a2ee-1853-4c80-b3e9-871b93337650","timestamp":"2025-12-18T12:09:41.861Z","thinkingMetadata":{"level":"high","disabled":false,"triggers":[]}}
{"parentUuid":"e974a2ee-1853-4c80-b3e9-871b93337650","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01WjJdy4ua93vNVBQ7KLW9AL","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"The user is asking me to implement a feature where stress condition parameters are conditionally colored based on scores:\n- If Arousal Score, Relaxation Score, and Regeneration & Repair (Alpha modulation) are normal in stress condition, show them in green\n- If the scores are high/abnormal, show them in red\n\nThey've also provided a screenshot path that I should look at to understand the UI context.\n\nLet me:\n1. First read the screenshot to understand the current UI\n2. Check the NEUROSENSE_FEATURES_SUMMARY.md file to understand the context\n3. Look for the relevant code files that handle stress condition scoring\n4. Implement the conditional coloring logic\n\nLet me start by reading the screenshot and the markdown file.","signature":"EvYGCkYIChgCKkCTLPfgOGlRai9foflT+2UgaUOPWlW7EfDVc4N6MFOSE6HM8CffxwWIbHg9Jgpfo0x9z7fkLb1tOZFNQYc2pDR8EgycMv/nEtSdEvRO2aYaDHJsagMwARulONvWXyIw8SAsEtsa0AgW17aQ+C+EMo9pcLrQ9Y6F8wHMcAo8UYfbt9DiH6TT705yzSNuMlfgKt0FjoJ+qjcWv8CPzLGSEkXnFTZ93rJfhrVS1pw2Wiu28s47jA+4Jf/Q0L6Jt4LJdfxP1P+T6gd3Wea48jYo+UzNxhCLBT/EqvHAj76QjNDCX9Pr05fKx/1yJ2p7AHUYLaKBAyCsNFOe7sApLPwU46fep+bCX/B2aJcDzRYaLdj+u2t1UyDckHPTYYx0uTpDWzu71ExVmLSu3FA9j17Jq+YLLIVDVkdK/lrmIXoCWbB3eYuvsgi5zi3k9HWemIpaSb1fOEa7WQyh3lBYdo+OYs6XE4ACXsK8e6L/0TkPVHOG3r4sg7M5ZwV2vssfQg11CCX5IfL9BFVXbmTkb1/QPSShDcBNgAmp22mzn2ODR61gouFfhFhY9dP70YGAqOhrxBr+NczuWU6KLsL5tLmj2TQZxUQDIKGnEC+UW1TELvLGEBKBAvhF3/zbWf5aXRqzl9ghK7La0ChOxUkj7YDq8qX42DG2at0lhjTSGvdCcp9fLp+5Rww4aAbzqcUElMLq4QeSOq+G+WiQFJncoOhLJNFdzadCXMhzR8mS0JlwnLjjeXTJlTUhWsQ/TOXp0iBKRPGe0DsSYifplBRcvlCsZJ0x8iNsZUGgWycl91FI00ejq0Oa72Ov+xrhEzYPKppd99UO+iWqfkZrEpYNbpwvRUaiJ1rQ0LKW3qQ8AffUU5pFn6aHqagw6V9Ot0ufSO7l3tbnOGWrM7VdR4EkckGjldTD16+MObhPrTXsRJwPMcNjyYUdquB88iAvQ4Dq4OD/p/FJyRD5QMqCTCtV9dz57dM2/BnwCeoOYvG/kvxG10dcZk9ldGx+3eZV36RG/hPM5im+EpjWUK7cE4suFJG/6b9w/A7F/3/dmWxasLPFx8IuEMV7s+bVvBrqaLBM1EyrEHu/97EfIqlX6sUHP30i9U1Sdo7j/FDM5fpvrZ6IieNYT6qe+EmLSfS7qxnzuEUUgn0gsPTlV5LymayHzRhk1RgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":16931,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":16931,"ephemeral_1h_input_tokens":0},"output_tokens":7,"service_tier":"standard"}},"requestId":"req_011CWE8Nmk9Khvvvs1U7x3t2","type":"assistant","uuid":"3c716dab-8303-4305-9169-0105c9fc5501","timestamp":"2025-12-18T12:09:48.538Z"}
{"parentUuid":"3c716dab-8303-4305-9169-0105c9fc5501","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01WjJdy4ua93vNVBQ7KLW9AL","type":"message","role":"assistant","content":[{"type":"text","text":"I'll help you implement conditional color indicators for stress condition parameters. Let me first check the screenshot and understand the current implementation."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":16931,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":16931,"ephemeral_1h_input_tokens":0},"output_tokens":7,"service_tier":"standard"}},"requestId":"req_011CWE8Nmk9Khvvvs1U7x3t2","type":"assistant","uuid":"1f08cec5-c2b2-469c-829c-6b1bdee42ddd","timestamp":"2025-12-18T12:09:49.052Z"}
{"parentUuid":"1f08cec5-c2b2-469c-829c-6b1bdee42ddd","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01WjJdy4ua93vNVBQ7KLW9AL","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01MCitPAnjJC1Bc9k1GzpS1Y","name":"Read","input":{"file_path":"c:\\Users\\Hp\\OneDrive\\Pictures\\Screenshots 1\\Screenshot 2025-12-18 173223.png"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":16931,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":16931,"ephemeral_1h_input_tokens":0},"output_tokens":7,"service_tier":"standard"}},"requestId":"req_011CWE8Nmk9Khvvvs1U7x3t2","type":"assistant","uuid":"ef5de136-4ca7-45e3-991d-25c690a02cb4","timestamp":"2025-12-18T12:09:49.827Z"}
{"parentUuid":"ef5de136-4ca7-45e3-991d-25c690a02cb4","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01WjJdy4ua93vNVBQ7KLW9AL","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_018dAbtzAjQD7ua3GV6FExtB","name":"Read","input":{"file_path":"d:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\NEUROSENSE_FEATURES_SUMMARY.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":16931,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":16931,"ephemeral_1h_input_tokens":0},"output_tokens":352,"service_tier":"standard"}},"requestId":"req_011CWE8Nmk9Khvvvs1U7x3t2","type":"assistant","uuid":"2a0a762b-22e8-4b13-9755-35b153c5b095","timestamp":"2025-12-18T12:09:50.240Z"}
{"parentUuid":"2a0a762b-22e8-4b13-9755-35b153c5b095","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_018dAbtzAjQD7ua3GV6FExtB","type":"tool_result","content":"     1‚Üí# NeuroSense360 - Complete Features Summary\n     2‚Üí\n     3‚Üí## üß† Platform Overview\n     4‚Üí**NeuroSense360** (Limitless Brain Wellness by Dr. Sweta Adatia) is a comprehensive brain health platform combining clinical qEEG assessments, AI-powered analysis, personalized protocols, coaching, and progress tracking.\n     5‚Üí\n     6‚Üí---\n     7‚Üí\n     8‚Üí## üë• User Roles & Dashboards\n     9‚Üí\n    10‚Üí### Super Admin\n    11‚Üí- Manage clinics (approve, activate, deactivate)\n    12‚Üí- View all patient reports across system\n    13‚Üí- Track payments and subscriptions\n    14‚Üí- System-wide analytics dashboard\n    15‚Üí- Algorithm data processor\n    16‚Üí- Branding configuration (white-label)\n    17‚Üí- Alert monitoring\n    18‚Üí- Agreement management\n    19‚Üí\n    20‚Üí### Clinic Admin\n    21‚Üí- Patient management (add, edit, delete)\n    22‚Üí- Upload and view patient reports\n    23‚Üí- Generate clinical reports\n    24‚Üí- Subscription management\n    25‚Üí- Usage tracking (reports used vs allocated)\n    26‚Üí- Clinic analytics\n    27‚Üí- Care plan generator\n    28‚Üí\n    29‚Üí### Patient\n    30‚Üí- View brain wellness reports\n    31‚Üí- Access clinical assessments\n    32‚Üí- Book coaching appointments\n    33‚Üí- Track progress and milestones\n    34‚Üí- Educational resources library\n    35‚Üí- Journey timeline\n    36‚Üí- Download reports\n    37‚Üí\n    38‚Üí---\n    39‚Üí\n    40‚Üí## üéØ Core Features\n    41‚Üí\n    42‚Üí### 1. Brain Assessments\n    43‚Üí**5 Evidence-Based Assessment Types:**\n    44‚Üí- ADHD Rating Scale (18 questions, 15 min)\n    45‚Üí- GAD-7 Anxiety Scale (7 questions, 5 min)\n    46‚Üí- Perceived Stress Scale PSS-10 (10 questions, 10 min)\n    47‚Üí- Memory & Cognitive Assessment (6 tasks, 20 min)\n    48‚Üí- Mood & Emotional Regulation (5 sections, 12 min)\n    49‚Üí\n    50‚Üí**Features:**\n    51‚Üí- Scientifically validated tools\n    52‚Üí- Personalized insights\n    53‚Üí- Progress tracking over time\n    54‚Üí- Complete assessment suite\n    55‚Üí\n    56‚Üí### 2. qEEG Brain Mapping\n    57‚Üí- 15-minute clinical-grade brain scan\n    58‚Üí- BMW (Brain & Mental Wellness) Report with 13+ parameters\n    59‚Üí- Brain performance measurement\n    60‚Üí- qEEG file upload management\n    61‚Üí- Visual brain mapping\n    62‚Üí- Normative database comparison\n    63‚Üí\n    64‚Üí### 3. Coaching Services\n    65‚Üí**Three Coaching Types:**\n    66‚Üí- **Brain Coaching** - Focus, executive function, cognitive performance ($80+/session)\n    67‚Üí- **Nervous System Coaching** - Stress regulation, trauma recovery ($90+/session)\n    68‚Üí- **qEEG Consultation** - Brain mapping, neurofeedback ($150+/session)\n    69‚Üí\n    70‚Üí**Coach Features:**\n    71‚Üí- Specialty areas (ADHD, Memory, Stress, Wellness)\n    72‚Üí- Ratings and session counts\n    73‚Üí- Availability calendar\n    74‚Üí- Bio and credentials\n    75‚Üí- Direct booking system\n    76‚Üí\n    77‚Üí### 4. Progress Tracking\n    78‚Üí- Weekly/Monthly performance trends\n    79‚Üí- Multiple metrics (Overall, Focus, Memory, Mood)\n    80‚Üí- Milestone achievements\n    81‚Üí- Goal tracking with progress bars\n    82‚Üí- Performance insights\n    83‚Üí- Best time analysis\n    84‚Üí- Achievement gamification\n    85‚Üí\n    86‚Üí### 5. Content Library\n    87‚Üí**Content Types:**\n    88‚Üí- Articles - Educational brain health content\n    89‚Üí- Videos - Guided exercises and tutorials\n    90‚Üí- Podcasts - Expert interviews\n    91‚Üí- Exercises - Interactive brain training\n    92‚Üí- Research - Latest scientific findings\n    93‚Üí\n    94‚Üí**Features:**\n    95‚Üí- Curated collections (Beginner, Advanced, etc.)\n    96‚Üí- Premium and free content\n    97‚Üí- Search and filtering\n    98‚Üí- Ratings and view counts\n    99‚Üí\n   100‚Üí---\n   101‚Üí\n   102‚Üí## üî¨ Unique Methodologies\n   103‚Üí\n   104‚Üí### MOVERS Protocol\n   105‚ÜíHolistic 6-pillar brain optimization:\n   106‚Üí- **M**editation - Mindfulness practices\n   107‚Üí- **O**xygenation - Breathing techniques\n   108‚Üí- **V**isualization - Mental imagery\n   109‚Üí- **E**xercises - Physical activity\n   110‚Üí- **R**elaxation - Stress reduction\n   111‚Üí- **S**leep - Sleep optimization\n   112‚Üí\n   113‚Üí### 3M Philosophy\n   114‚Üí- **Measure** - qEEG brain mapping\n   115‚Üí- **Monitor** - Track progress over time\n   116‚Üí- **Manage** - Personalized interventions\n   117‚Üí\n   118‚Üí---\n   119‚Üí\n   120‚Üí## üí≥ Payment & Subscriptions\n   121‚Üí- Razorpay payment gateway integration\n   122‚Üí- Subscription management\n   123‚Üí- Report-based pricing\n   124‚Üí- Usage tracking\n   125‚Üí- Payment history\n   126‚Üí- Invoice generation\n   127‚Üí- Multiple payment methods\n   128‚Üí\n   129‚Üí---\n   130‚Üí\n   131‚Üí## üìä Analytics & Reporting\n   132‚Üí\n   133‚Üí### Clinical Reports\n   134‚Üí- AI-powered report generation\n   135‚Üí- BMW 13-parameter analysis\n   136‚Üí- Personalized recommendations\n   137‚Üí- PDF downloads\n   138‚Üí- Report sharing with patients\n   139‚Üí- Clinical notes and observations\n   140‚Üí\n   141‚Üí### Analytics Dashboard\n   142‚Üí- System-wide metrics (Super Admin)\n   143‚Üí- Clinic-specific analytics (Clinic Admin)\n   144‚Üí- Patient progress charts (Patient)\n   145‚Üí- Real-time data visualization\n   146‚Üí- Custom date ranges\n   147‚Üí- Export capabilities\n   148‚Üí\n   149‚Üí---\n   150‚Üí\n   151‚Üí## üîê Security & Authentication\n   152‚Üí- Supabase authentication\n   153‚Üí- Role-based access control (RBAC)\n   154‚Üí- Cookie-based sessions\n   155‚Üí- Password reset functionality\n   156‚Üí- OTP verification\n   157‚Üí- Secure file storage\n   158‚Üí- HIPAA-compliant data handling\n   159‚Üí- Audit logging\n   160‚Üí\n   161‚Üí---\n   162‚Üí\n   163‚Üí## üé® Marketing & Public Pages\n   164‚Üí- Landing page with video background\n   165‚Üí- Goal-based navigation\n   166‚Üí- Brain health crisis statistics (animated counters)\n   167‚Üí- Dr. Sweta Adatia profile\n   168‚Üí- MOVERS protocol explanation\n   169‚Üí- 3M philosophy showcase\n   170‚Üí- Clinic locator\n   171‚Üí- AI chatbot integration\n   172‚Üí- Social media links\n   173‚Üí- Franchise inquiry form\n   174‚Üí\n   175‚Üí---\n   176‚Üí\n   177‚Üí## ü§ñ AI & Advanced Features\n   178‚Üí- **AI Analysis Service** - Automated report analysis\n   179‚Üí- **Care Plan Generator** - Personalized protocols\n   180‚Üí- **Algorithm Data Processor** - Brain wellness data processing\n   181‚Üí- **Alert Dashboard** - System monitoring\n   182‚Üí- **White-label Branding** - Custom clinic branding\n   183‚Üí- **Dr. Sweta AI Assistant** - AI-powered guidance\n   184‚Üí\n   185‚Üí---\n   186‚Üí\n   187‚Üí## üì± Technology Stack\n   188‚Üí\n   189‚Üí### Frontend\n   190‚Üí- React 18.2.0\n   191‚Üí- React Router 6.20.1\n   192‚Üí- Tailwind CSS 3.3.6\n   193‚Üí- Framer Motion (animations)\n   194‚Üí- Lucide React (icons)\n   195‚Üí- React Hook Form\n   196‚Üí- Recharts (analytics)\n   197‚Üí- Vite 4.5.0\n   198‚Üí\n   199‚Üí### Backend Services\n   200‚Üí- Supabase (Database, Auth, Storage)\n   201‚Üí- Razorpay (Payments)\n   202‚Üí- EmailJS/SendGrid (Emails)\n   203‚Üí- Google Gemini AI\n   204‚Üí\n   205‚Üí---\n   206‚Üí\n   207‚Üí## üè• For Clinics Page Features\n   208‚Üí- Easy to Use interface\n   209‚Üí- Real-Time Monitoring\n   210‚Üí- Professional Support\n   211‚Üí- Neurosense Reporting\n   212‚Üí- Protocol Customization\n   213‚Üí- Progress Tracking\n   214‚Üí- Secure Data Management (HIPAA compliant)\n   215‚Üí- Expert Training programs\n   216‚Üí- Clinical Resources library\n   217‚Üí- 24/7 Support\n   218‚Üí- Community Access\n   219‚Üí\n   220‚Üí---\n   221‚Üí\n   222‚Üí## üìö Educational Pages\n   223‚Üí- **Guide to Brainwaves** - Comprehensive brainwave education\n   224‚Üí  - Delta (0.5-4 Hz) - Deep sleep\n   225‚Üí  - Theta (4-8 Hz) - Meditation\n   226‚Üí  - Alpha (8-12 Hz) - Relaxation\n   227‚Üí  - Beta (12-30 Hz) - Focus\n   228‚Üí  - Gamma (30-100 Hz) - Peak performance\n   229‚Üí- **Science** - Scientific backing and research\n   230‚Üí- **FAQ** - Common questions answered\n   231‚Üí- **How It Works** - Step-by-step process guide\n   232‚Üí\n   233‚Üí---\n   234‚Üí\n   235‚Üí## üéØ Key Differentiators\n   236‚Üí1. **Clinical-Grade qEEG** - Professional brain mapping technology\n   237‚Üí2. **13+ Parameter Analysis** - Comprehensive brain assessment\n   238‚Üí3. **Evidence-Based Protocols** - Scientifically validated methods\n   239‚Üí4. **Multi-Tenant Architecture** - Supports unlimited clinics\n   240‚Üí5. **AI-Powered Insights** - Automated analysis and recommendations\n   241‚Üí6. **Gamification** - Progress tracking with achievements\n   242‚Üí7. **White-Label Ready** - Custom branding per clinic\n   243‚Üí8. **Integrated Ecosystem** - All-in-one brain wellness platform\n   244‚Üí9. **Expert Coaching Network** - Certified brain coaches\n   245‚Üí10. **MOVERS Protocol** - Unique holistic approach\n   246‚Üí\n   247‚Üí---\n   248‚Üí\n   249‚Üí## üìä Database Schema (Key Tables)\n   250‚Üí- `clinics` - Clinic information\n   251‚Üí- `patients` - Patient records\n   252‚Üí- `reports` - qEEG and assessment reports\n   253‚Üí- `clinical_reports` - Clinical analysis reports\n   254‚Üí- `payments` - Payment transactions\n   255‚Üí- `profiles` - User profiles\n   256‚Üí- `appointments` - Booking data\n   257‚Üí- `subscriptions` - Subscription plans\n   258‚Üí- `alerts` - System alerts\n   259‚Üí- `organizations` - Org hierarchy\n   260‚Üí\n   261‚Üí---\n   262‚Üí\n   263‚Üí## üöÄ Deployment & Hosting\n   264‚Üí- Vercel/Netlify ready\n   265‚Üí- Environment-based configuration\n   266‚Üí- Development and production modes\n   267‚Üí- Continuous deployment support\n   268‚Üí- SSL/HTTPS enabled\n   269‚Üí- CDN integration\n   270‚Üí\n   271‚Üí---\n   272‚Üí\n   273‚Üí## üìà Future Roadmap Potential\n   274‚Üí- Mobile app (React Native)\n   275‚Üí- Wearable device integration\n   276‚Üí- Live neurofeedback training\n   277‚Üí- Group coaching sessions\n   278‚Üí- Affiliate program\n   279‚Üí- Telemedicine integration\n   280‚Üí- Insurance billing support\n   281‚Üí- Multi-language support\n   282‚Üí- Advanced AI diagnostics\n   283‚Üí\n   284‚Üí---\n   285‚Üí\n   286‚Üí**Platform Status:** Production Ready\n   287‚Üí**Version:** 1.0.0\n   288‚Üí**Last Updated:** December 2025\n   289‚Üí**Founded By:** Dr. Sweta Adatia\n   290‚Üí\n   291‚Üí---\n   292‚Üí\n   293‚Üí## Contact & Support\n   294‚Üí**Email:** support@neurosense360.com\n   295‚Üí**Website:** www.neurosense360.com\n   296‚Üí**Emergency:** 24/7 support available\n   297‚Üí\n   298‚Üí---\n   299‚Üí\n   300‚Üí*This platform represents a comprehensive, enterprise-grade brain wellness ecosystem combining clinical neuroscience, AI-powered insights, personalized coaching, and evidence-based assessments in one unified platform.*\n   301‚Üí\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"026f4013-1d48-4888-9f5f-008c5b6caa78","timestamp":"2025-12-18T12:09:54.380Z","toolUseResult":{"type":"text","file":{"filePath":"d:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\NEUROSENSE_FEATURES_SUMMARY.md","content":"# NeuroSense360 - Complete Features Summary\n\n## üß† Platform Overview\n**NeuroSense360** (Limitless Brain Wellness by Dr. Sweta Adatia) is a comprehensive brain health platform combining clinical qEEG assessments, AI-powered analysis, personalized protocols, coaching, and progress tracking.\n\n---\n\n## üë• User Roles & Dashboards\n\n### Super Admin\n- Manage clinics (approve, activate, deactivate)\n- View all patient reports across system\n- Track payments and subscriptions\n- System-wide analytics dashboard\n- Algorithm data processor\n- Branding configuration (white-label)\n- Alert monitoring\n- Agreement management\n\n### Clinic Admin\n- Patient management (add, edit, delete)\n- Upload and view patient reports\n- Generate clinical reports\n- Subscription management\n- Usage tracking (reports used vs allocated)\n- Clinic analytics\n- Care plan generator\n\n### Patient\n- View brain wellness reports\n- Access clinical assessments\n- Book coaching appointments\n- Track progress and milestones\n- Educational resources library\n- Journey timeline\n- Download reports\n\n---\n\n## üéØ Core Features\n\n### 1. Brain Assessments\n**5 Evidence-Based Assessment Types:**\n- ADHD Rating Scale (18 questions, 15 min)\n- GAD-7 Anxiety Scale (7 questions, 5 min)\n- Perceived Stress Scale PSS-10 (10 questions, 10 min)\n- Memory & Cognitive Assessment (6 tasks, 20 min)\n- Mood & Emotional Regulation (5 sections, 12 min)\n\n**Features:**\n- Scientifically validated tools\n- Personalized insights\n- Progress tracking over time\n- Complete assessment suite\n\n### 2. qEEG Brain Mapping\n- 15-minute clinical-grade brain scan\n- BMW (Brain & Mental Wellness) Report with 13+ parameters\n- Brain performance measurement\n- qEEG file upload management\n- Visual brain mapping\n- Normative database comparison\n\n### 3. Coaching Services\n**Three Coaching Types:**\n- **Brain Coaching** - Focus, executive function, cognitive performance ($80+/session)\n- **Nervous System Coaching** - Stress regulation, trauma recovery ($90+/session)\n- **qEEG Consultation** - Brain mapping, neurofeedback ($150+/session)\n\n**Coach Features:**\n- Specialty areas (ADHD, Memory, Stress, Wellness)\n- Ratings and session counts\n- Availability calendar\n- Bio and credentials\n- Direct booking system\n\n### 4. Progress Tracking\n- Weekly/Monthly performance trends\n- Multiple metrics (Overall, Focus, Memory, Mood)\n- Milestone achievements\n- Goal tracking with progress bars\n- Performance insights\n- Best time analysis\n- Achievement gamification\n\n### 5. Content Library\n**Content Types:**\n- Articles - Educational brain health content\n- Videos - Guided exercises and tutorials\n- Podcasts - Expert interviews\n- Exercises - Interactive brain training\n- Research - Latest scientific findings\n\n**Features:**\n- Curated collections (Beginner, Advanced, etc.)\n- Premium and free content\n- Search and filtering\n- Ratings and view counts\n\n---\n\n## üî¨ Unique Methodologies\n\n### MOVERS Protocol\nHolistic 6-pillar brain optimization:\n- **M**editation - Mindfulness practices\n- **O**xygenation - Breathing techniques\n- **V**isualization - Mental imagery\n- **E**xercises - Physical activity\n- **R**elaxation - Stress reduction\n- **S**leep - Sleep optimization\n\n### 3M Philosophy\n- **Measure** - qEEG brain mapping\n- **Monitor** - Track progress over time\n- **Manage** - Personalized interventions\n\n---\n\n## üí≥ Payment & Subscriptions\n- Razorpay payment gateway integration\n- Subscription management\n- Report-based pricing\n- Usage tracking\n- Payment history\n- Invoice generation\n- Multiple payment methods\n\n---\n\n## üìä Analytics & Reporting\n\n### Clinical Reports\n- AI-powered report generation\n- BMW 13-parameter analysis\n- Personalized recommendations\n- PDF downloads\n- Report sharing with patients\n- Clinical notes and observations\n\n### Analytics Dashboard\n- System-wide metrics (Super Admin)\n- Clinic-specific analytics (Clinic Admin)\n- Patient progress charts (Patient)\n- Real-time data visualization\n- Custom date ranges\n- Export capabilities\n\n---\n\n## üîê Security & Authentication\n- Supabase authentication\n- Role-based access control (RBAC)\n- Cookie-based sessions\n- Password reset functionality\n- OTP verification\n- Secure file storage\n- HIPAA-compliant data handling\n- Audit logging\n\n---\n\n## üé® Marketing & Public Pages\n- Landing page with video background\n- Goal-based navigation\n- Brain health crisis statistics (animated counters)\n- Dr. Sweta Adatia profile\n- MOVERS protocol explanation\n- 3M philosophy showcase\n- Clinic locator\n- AI chatbot integration\n- Social media links\n- Franchise inquiry form\n\n---\n\n## ü§ñ AI & Advanced Features\n- **AI Analysis Service** - Automated report analysis\n- **Care Plan Generator** - Personalized protocols\n- **Algorithm Data Processor** - Brain wellness data processing\n- **Alert Dashboard** - System monitoring\n- **White-label Branding** - Custom clinic branding\n- **Dr. Sweta AI Assistant** - AI-powered guidance\n\n---\n\n## üì± Technology Stack\n\n### Frontend\n- React 18.2.0\n- React Router 6.20.1\n- Tailwind CSS 3.3.6\n- Framer Motion (animations)\n- Lucide React (icons)\n- React Hook Form\n- Recharts (analytics)\n- Vite 4.5.0\n\n### Backend Services\n- Supabase (Database, Auth, Storage)\n- Razorpay (Payments)\n- EmailJS/SendGrid (Emails)\n- Google Gemini AI\n\n---\n\n## üè• For Clinics Page Features\n- Easy to Use interface\n- Real-Time Monitoring\n- Professional Support\n- Neurosense Reporting\n- Protocol Customization\n- Progress Tracking\n- Secure Data Management (HIPAA compliant)\n- Expert Training programs\n- Clinical Resources library\n- 24/7 Support\n- Community Access\n\n---\n\n## üìö Educational Pages\n- **Guide to Brainwaves** - Comprehensive brainwave education\n  - Delta (0.5-4 Hz) - Deep sleep\n  - Theta (4-8 Hz) - Meditation\n  - Alpha (8-12 Hz) - Relaxation\n  - Beta (12-30 Hz) - Focus\n  - Gamma (30-100 Hz) - Peak performance\n- **Science** - Scientific backing and research\n- **FAQ** - Common questions answered\n- **How It Works** - Step-by-step process guide\n\n---\n\n## üéØ Key Differentiators\n1. **Clinical-Grade qEEG** - Professional brain mapping technology\n2. **13+ Parameter Analysis** - Comprehensive brain assessment\n3. **Evidence-Based Protocols** - Scientifically validated methods\n4. **Multi-Tenant Architecture** - Supports unlimited clinics\n5. **AI-Powered Insights** - Automated analysis and recommendations\n6. **Gamification** - Progress tracking with achievements\n7. **White-Label Ready** - Custom branding per clinic\n8. **Integrated Ecosystem** - All-in-one brain wellness platform\n9. **Expert Coaching Network** - Certified brain coaches\n10. **MOVERS Protocol** - Unique holistic approach\n\n---\n\n## üìä Database Schema (Key Tables)\n- `clinics` - Clinic information\n- `patients` - Patient records\n- `reports` - qEEG and assessment reports\n- `clinical_reports` - Clinical analysis reports\n- `payments` - Payment transactions\n- `profiles` - User profiles\n- `appointments` - Booking data\n- `subscriptions` - Subscription plans\n- `alerts` - System alerts\n- `organizations` - Org hierarchy\n\n---\n\n## üöÄ Deployment & Hosting\n- Vercel/Netlify ready\n- Environment-based configuration\n- Development and production modes\n- Continuous deployment support\n- SSL/HTTPS enabled\n- CDN integration\n\n---\n\n## üìà Future Roadmap Potential\n- Mobile app (React Native)\n- Wearable device integration\n- Live neurofeedback training\n- Group coaching sessions\n- Affiliate program\n- Telemedicine integration\n- Insurance billing support\n- Multi-language support\n- Advanced AI diagnostics\n\n---\n\n**Platform Status:** Production Ready\n**Version:** 1.0.0\n**Last Updated:** December 2025\n**Founded By:** Dr. Sweta Adatia\n\n---\n\n## Contact & Support\n**Email:** support@neurosense360.com\n**Website:** www.neurosense360.com\n**Emergency:** 24/7 support available\n\n---\n\n*This platform represents a comprehensive, enterprise-grade brain wellness ecosystem combining clinical neuroscience, AI-powered insights, personalized coaching, and evidence-based assessments in one unified platform.*\n","numLines":301,"startLine":1,"totalLines":301}}}
{"parentUuid":"026f4013-1d48-4888-9f5f-008c5b6caa78","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01MCitPAnjJC1Bc9k1GzpS1Y","type":"tool_result","content":[{"type":"image","source":{"type":"base64","data":"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","media_type":"image/png"}}]}]},"uuid":"388c498c-e04b-4e85-b479-c9a88575835f","timestamp":"2025-12-18T12:09:56.978Z","toolUseResult":{"type":"image","file":{"base64":"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","type":"image/png","originalSize":51422}}}
{"parentUuid":"388c498c-e04b-4e85-b479-c9a88575835f","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CEqPVD5xD21UtTxZ6zkp94","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! I can see from the screenshot:\n\n1. There's a \"Stress\" section with a score of 1/3 (Low)\n2. Three sub-parameters are shown:\n   - **Arousal Score**: 0/1 (marked with red circle and X) - Value 0.59 (normal is < 1)\n   - **Relaxation Score**: 0/1 (marked with red circle and X) - Value 3.13 (> 1 is healthy)\n   - **Regeneration (Alpha Modulation)**: 1/1 (marked with green circle and checkmark) - Value 11.4% (> 30% is healthy)\n\nThe user wants to implement conditional coloring where:\n- If the score is normal/good for stress condition, show GREEN\n- If the score is high/abnormal for stress condition, show RED\n\nLooking at the screenshot, it seems like the current implementation already has some conditional logic with checkmarks and X marks. But the user wants to enhance this with proper color coding.\n\nLet me search for the relevant component files that handle the stress condition display.","signature":"EqUICkYIChgCKkAifmOYpSQFZg/ad18PDn4meuf8l5mriZXuT4G2DhtcCoCkluZluZsYSUzG/WJ7z+SU1wNLAZrN8RdKAhUIcYyREgx47IaciIbvlXMWBygaDJiAVXaJOQSEDGbeKyIwYg70beQU/wyDh/8/IWRC5cku3sMfNToeX286YjbiJfjI84Kh+hyx6+x4i7qw9RDJKowHrU3CI2nhypEdPmdqAfBnUpFK4jzg1Q5evfmfrYy4kCl0t1B0xz2sIO8L5fUnPaW1ouYhbpqWoEOWfQJTk1VLwl7i+sNfGguyW/+Ra/XryE39Gq+2enBwC70hVyxPqnFJrO7A5GSqGkg52HSg9Tc7UHjcFCLmLCcvD/xIZj6UrH9H41ZoMFQB9E19waYiIVEBO10Tb6ZjLNPTpARCQXDA3Ykk60TtOgkB0pr1U40KNbsDCvIq06qD9+Ln7a8tPY4fVY6cHJsGpJyuCsNgpppJG3+inRXKXnoGlEgtPAn+qVdIc02ATVF7WnalJGL7LbO7dJ+t2bE3K3yCqEqp94KcdLitSaSl0vla98uCWJp8pRfyhV4rUGQ2cJ9rhKv/Gv0d3OvqvYUAxXVSMWYMC+N4qpUJG0wBaIl03c6h8rpC9FQR86HJmxdh+axzKBugUlhmN4vnvaIVHWvU85EBv4gJzqn4C6F0wQ/9rv0UwJvAZ71Br1EI0c1qPaTON+Nm7ZfHggbS6DVbfYevGiX75BdbAbiW1lJ+BKZXZ8HREcbMtTCE+j0vEOGFhlAyca0aA5p2pHsdWu+h/c8Pka+gDNVYNRU2W01vDuv6pJPnGAzvJZgzaROEuuR01FLrNcTxVQI6H5qCdoSveQ5EAgvSsvF9kQlt0nvGfaQWbMGpleKkP3QnKWZwLJNzOcJPVnNv5162RujMYWNld4MDwmwJsiN1Qihi8cqws2UQYimc8pwPMMgv6KlOOaRnYfeSDYqM37WLvSWtDixoEMzKNxAVThT7A/2qW75WoteNo0QwGUvgbhhGYlNISHQztCzxob9IFIm2RFkqjiuPyq2nrw+KECaAF65gQuYnPRt7FsyPSLeIsOM+dSiLhU/bN8cNfIRGavzrUx47LfQg/iEIFUdCJTtw5DoCLAv/g5cKYUjMrLlrJODJQcZQWDm5DZhLAg4hQFFDelDCYHP6cUA/VBifCxBkJER9wOvVn8aNptHKSgGdbMqFoTr1/aZ0Qw3SloAMSPOAJYzlBLmbE0l5C2YTKN2rLL52u+STHpTa7hqs2Irfl1F8/yeQNXwM5Qpd0nGS6Sr/H6Vh/RVw1PT+crc9brSwOj6Lbd4fzctgpJR6Yoq/2g5bG1wOeFnb4bLWv/q7yrKfZUzMpeOmE+LOfs9BSYoaEE7Y5IroeGyBvodKcwFPVFHWA2dFJHzcfZ4gUFAYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3241,"cache_creation_input_tokens":611,"cache_read_input_tokens":16931,"cache_creation":{"ephemeral_5m_input_tokens":611,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8PuDds8ySN9PsqapPH","type":"assistant","uuid":"70ae71bb-b27f-40c3-97e4-65ffb5567304","timestamp":"2025-12-18T12:10:06.416Z"}
{"parentUuid":"70ae71bb-b27f-40c3-97e4-65ffb5567304","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CEqPVD5xD21UtTxZ6zkp94","type":"message","role":"assistant","content":[{"type":"text","text":"I can see from the screenshot that you want to add conditional color indicators (green for normal, red for abnormal) to the stress condition parameters. Let me find the relevant code files that handle this display."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3241,"cache_creation_input_tokens":611,"cache_read_input_tokens":16931,"cache_creation":{"ephemeral_5m_input_tokens":611,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8PuDds8ySN9PsqapPH","type":"assistant","uuid":"9db1fe06-7cc6-4746-a230-27effff0025a","timestamp":"2025-12-18T12:10:07.685Z"}
{"parentUuid":"9db1fe06-7cc6-4746-a230-27effff0025a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CEqPVD5xD21UtTxZ6zkp94","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01N2izZ19anzNBxi5NaiaM6W","name":"TodoWrite","input":{"todos":[{"content":"Search for stress condition component files","status":"in_progress","activeForm":"Searching for stress condition component files"},{"content":"Implement conditional color coding for Arousal Score","status":"pending","activeForm":"Implementing conditional color coding for Arousal Score"},{"content":"Implement conditional color coding for Relaxation Score","status":"pending","activeForm":"Implementing conditional color coding for Relaxation Score"},{"content":"Implement conditional color coding for Regeneration & Repair (Alpha modulation)","status":"pending","activeForm":"Implementing conditional color coding for Regeneration & Repair"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3241,"cache_creation_input_tokens":611,"cache_read_input_tokens":16931,"cache_creation":{"ephemeral_5m_input_tokens":611,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8PuDds8ySN9PsqapPH","type":"assistant","uuid":"93853f16-9994-4c30-afd6-d5c3b8cbb277","timestamp":"2025-12-18T12:10:10.852Z"}
{"parentUuid":"93853f16-9994-4c30-afd6-d5c3b8cbb277","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CEqPVD5xD21UtTxZ6zkp94","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_011yMou18h75tEocDF5UaK9V","name":"Grep","input":{"pattern":"Arousal Score|Relaxation Score|Regeneration.*Alpha","type":"js","output_mode":"files_with_matches"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3241,"cache_creation_input_tokens":611,"cache_read_input_tokens":16931,"cache_creation":{"ephemeral_5m_input_tokens":611,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8PuDds8ySN9PsqapPH","type":"assistant","uuid":"a81a8ee0-fcca-48e9-ae99-4387ec19a1d4","timestamp":"2025-12-18T12:10:12.019Z"}
{"parentUuid":"a81a8ee0-fcca-48e9-ae99-4387ec19a1d4","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CEqPVD5xD21UtTxZ6zkp94","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01FDkCGnAVTexWqMpoSEttG4","name":"Grep","input":{"pattern":"Arousal Score|Relaxation Score|Regeneration.*Alpha","type":"ts","output_mode":"files_with_matches"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3241,"cache_creation_input_tokens":611,"cache_read_input_tokens":16931,"cache_creation":{"ephemeral_5m_input_tokens":611,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8PuDds8ySN9PsqapPH","type":"assistant","uuid":"98c1d0a0-3a85-4155-8027-fd4f454e511f","timestamp":"2025-12-18T12:10:12.690Z"}
{"parentUuid":"98c1d0a0-3a85-4155-8027-fd4f454e511f","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CEqPVD5xD21UtTxZ6zkp94","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01SayzCkEgrt1PqsninCsqEq","name":"Grep","input":{"pattern":"Arousal Score|Relaxation Score|Regeneration.*Alpha","glob":"*.jsx","output_mode":"files_with_matches"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3241,"cache_creation_input_tokens":611,"cache_read_input_tokens":16931,"cache_creation":{"ephemeral_5m_input_tokens":611,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8PuDds8ySN9PsqapPH","type":"assistant","uuid":"47d3b597-689b-4d9e-8e64-e7fbf1be7480","timestamp":"2025-12-18T12:10:13.477Z"}
{"parentUuid":"47d3b597-689b-4d9e-8e64-e7fbf1be7480","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01CEqPVD5xD21UtTxZ6zkp94","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0147gTGiwcRxLymRjoCKSrz6","name":"Grep","input":{"pattern":"Arousal Score|Relaxation Score|Regeneration.*Alpha","glob":"*.tsx","output_mode":"files_with_matches"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3241,"cache_creation_input_tokens":611,"cache_read_input_tokens":16931,"cache_creation":{"ephemeral_5m_input_tokens":611,"ephemeral_1h_input_tokens":0},"output_tokens":951,"service_tier":"standard"}},"requestId":"req_011CWE8PuDds8ySN9PsqapPH","type":"assistant","uuid":"ef5ae003-1847-4c6f-b553-22f89b8f24e8","timestamp":"2025-12-18T12:10:14.200Z"}
{"parentUuid":"ef5ae003-1847-4c6f-b553-22f89b8f24e8","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01N2izZ19anzNBxi5NaiaM6W","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"26c03a24-965c-41aa-9fad-49be2424aa17","timestamp":"2025-12-18T12:10:14.349Z","toolUseResult":{"oldTodos":[],"newTodos":[{"content":"Search for stress condition component files","status":"in_progress","activeForm":"Searching for stress condition component files"},{"content":"Implement conditional color coding for Arousal Score","status":"pending","activeForm":"Implementing conditional color coding for Arousal Score"},{"content":"Implement conditional color coding for Relaxation Score","status":"pending","activeForm":"Implementing conditional color coding for Relaxation Score"},{"content":"Implement conditional color coding for Regeneration & Repair (Alpha modulation)","status":"pending","activeForm":"Implementing conditional color coding for Regeneration & Repair"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}
{"parentUuid":"26c03a24-965c-41aa-9fad-49be2424aa17","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01SayzCkEgrt1PqsninCsqEq","type":"tool_result","content":"Found 1 file\nsrc\\components\\patient\\PatientDashboard.jsx"}]},"uuid":"d0168548-cd65-40ad-949c-8d95338c34cb","timestamp":"2025-12-18T12:10:21.524Z","toolUseResult":{"mode":"files_with_matches","filenames":["src\\components\\patient\\PatientDashboard.jsx"],"numFiles":1}}
{"parentUuid":"d0168548-cd65-40ad-949c-8d95338c34cb","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0147gTGiwcRxLymRjoCKSrz6","type":"tool_result","content":"No files found"}]},"uuid":"cff050ad-b98c-46c6-a395-d9f837736444","timestamp":"2025-12-18T12:10:21.726Z","toolUseResult":{"mode":"files_with_matches","filenames":[],"numFiles":0}}
{"parentUuid":"cff050ad-b98c-46c6-a395-d9f837736444","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01FDkCGnAVTexWqMpoSEttG4","type":"tool_result","content":"No files found"}]},"uuid":"06777598-25d4-44ed-a53b-39ab7b044e43","timestamp":"2025-12-18T12:10:21.787Z","toolUseResult":{"mode":"files_with_matches","filenames":[],"numFiles":0}}
{"parentUuid":"06777598-25d4-44ed-a53b-39ab7b044e43","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011yMou18h75tEocDF5UaK9V","type":"tool_result","content":"Found 9 files\nserver\\services\\algorithmCalculator.js\nsrc\\services\\wellnessAlgorithmService.js\nserver\\services\\aiPdfGenerator.js\nserver\\services\\openAIService.js\nserver\\services\\geminiService.js\nserver\\services\\pdf\\metricsPages.js\nserver\\services\\pdfGenerator.js\nsrc\\components\\patient\\PatientDashboard.jsx\nsrc\\services\\neuroSenseCloudService.js"}]},"uuid":"9b80d3da-381b-444b-a97a-73b176ca41b9","timestamp":"2025-12-18T12:10:22.122Z","toolUseResult":{"mode":"files_with_matches","filenames":["server\\services\\algorithmCalculator.js","src\\services\\wellnessAlgorithmService.js","server\\services\\aiPdfGenerator.js","server\\services\\openAIService.js","server\\services\\geminiService.js","server\\services\\pdf\\metricsPages.js","server\\services\\pdfGenerator.js","src\\components\\patient\\PatientDashboard.jsx","src\\services\\neuroSenseCloudService.js"],"numFiles":9}}
{"parentUuid":"9b80d3da-381b-444b-a97a-73b176ca41b9","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YErAbDqSSRjws5pzWshZYW","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Good! The main component file is `src\\components\\patient\\PatientDashboard.jsx`. Let me read this file to understand the current implementation.","signature":"ErgCCkYIChgCKkBfF7I9Zfj2BJ0NlGrBCWxcJi3WbmDvhk5vfAiz35FfXNnA8XfpMQBdb6l6Pr40+CljyzBUEEkeRYt2oXEj22S2EgxwyTchS/Iu0Y7H6XcaDF/rbzBTuLaVctIlESIwFnFw1sJi7nIrKMcRCbgKspQzPx4zdAjKk36eDNfNEAfubsZMAZo2ZYXupMbO/Nk4Kp8BlEklt3TJJhT2G1uGhauUaOQLYQ6ohNtK1yiihOD1g9z2Y4YQLwLbxg3tEHvdBq9AC8YVc7G3wzfZzst9NbUKbTsJsbMvdaGPXohXjrlInUUvyvtwZ9/Hu19dXTSt5MVBOIF4udNZVJSrzNvTnFaADNbJGabWUpIcyJeKS7Ufw47hZuKMPTo17j7K9i/6TjwuxRGzLHRr3sqaQDaL4aUfGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":111,"cache_creation_input_tokens":4331,"cache_read_input_tokens":17542,"cache_creation":{"ephemeral_5m_input_tokens":4331,"ephemeral_1h_input_tokens":0},"output_tokens":4,"service_tier":"standard"}},"requestId":"req_011CWE8Rj5k1KcVSUupobvVn","type":"assistant","uuid":"ba29be2c-3cf7-4b7d-b2e5-a013dcca7988","timestamp":"2025-12-18T12:10:26.096Z"}
{"parentUuid":"ba29be2c-3cf7-4b7d-b2e5-a013dcca7988","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YErAbDqSSRjws5pzWshZYW","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_017oFPB6q9phyq5HeJKmwH3h","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\patient\\PatientDashboard.jsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":111,"cache_creation_input_tokens":4331,"cache_read_input_tokens":17542,"cache_creation":{"ephemeral_5m_input_tokens":4331,"ephemeral_1h_input_tokens":0},"output_tokens":130,"service_tier":"standard"}},"requestId":"req_011CWE8Rj5k1KcVSUupobvVn","type":"assistant","uuid":"9b8495d0-f353-481e-a1e4-eb81418cec60","timestamp":"2025-12-18T12:10:27.245Z"}
{"parentUuid":"9b8495d0-f353-481e-a1e4-eb81418cec60","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"File content (27282 tokens) exceeds maximum allowed tokens (25000). Please use offset and limit parameters to read specific portions of the file, or use the GrepTool to search for specific content.","is_error":true,"tool_use_id":"toolu_017oFPB6q9phyq5HeJKmwH3h"}]},"uuid":"3b4e6f4b-710d-4d99-ac00-34e40a807a1e","timestamp":"2025-12-18T12:10:29.929Z","toolUseResult":"Error: File content (27282 tokens) exceeds maximum allowed tokens (25000). Please use offset and limit parameters to read specific portions of the file, or use the GrepTool to search for specific content."}
{"parentUuid":"3b4e6f4b-710d-4d99-ac00-34e40a807a1e","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_0196PzGepEzHRg7zXKUQMgyr","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"The file is too large. Let me search for the specific stress-related section in the file.","signature":"EoECCkYIChgCKkCmNSelhm7ool09DGL5cCYDXnhdfgJR3omYaBEWUWTt8pjMYbjHdQiqLwl55NoC/8qmpLRmbTdxlBl35unQp3WtEgx5Lgouv1PzrmuOfDwaDH6G4WDEaLTWWeKCyyIwRr9bufQuvI7uJDEsu0m9/vRhYpN+On/uuiHLP7yV/IJ0zj1cYClmoK7Q4z8tXw/sKmnJ8EZo7glpa6RVykm9gHw3riWOo3ogtyD9s8tsYdiK/iRrsDJCPur4zRDJlkWNB3q9GmwgpMRmfotVrCi7xQxX/Tj6bbr43L0eO0AOdr76RQ74Td5hoMyvSK8dQDhvSRiWWqp8ntEirnoYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":297,"cache_read_input_tokens":21873,"cache_creation":{"ephemeral_5m_input_tokens":297,"ephemeral_1h_input_tokens":0},"output_tokens":4,"service_tier":"standard"}},"requestId":"req_011CWE8SJMUxc8W5jiK95H8D","type":"assistant","uuid":"017bcb48-fc48-4694-9fbb-83fa8f879858","timestamp":"2025-12-18T12:10:33.589Z"}
{"parentUuid":"017bcb48-fc48-4694-9fbb-83fa8f879858","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_0196PzGepEzHRg7zXKUQMgyr","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01P8bcupYx6uGFRjdy6jxwAK","name":"Grep","input":{"pattern":"Sub-Parameters.*Calculations|Arousal Score.*Value|stress.*condition","path":"src\\components\\patient\\PatientDashboard.jsx","output_mode":"content","-i":true,"-C":10}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":297,"cache_read_input_tokens":21873,"cache_creation":{"ephemeral_5m_input_tokens":297,"ephemeral_1h_input_tokens":0},"output_tokens":180,"service_tier":"standard"}},"requestId":"req_011CWE8SJMUxc8W5jiK95H8D","type":"assistant","uuid":"9cb375c5-bc3e-4d5e-a9b2-a0c84b23d8dc","timestamp":"2025-12-18T12:10:35.179Z"}
{"parentUuid":"9cb375c5-bc3e-4d5e-a9b2-a0c84b23d8dc","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01P8bcupYx6uGFRjdy6jxwAK","type":"tool_result","content":"No matches found"}]},"uuid":"294ad51a-43be-49fa-aa31-d9f581ed7eed","timestamp":"2025-12-18T12:10:38.347Z","toolUseResult":{"mode":"content","numFiles":0,"filenames":[],"content":"","numLines":0}}
{"parentUuid":"294ad51a-43be-49fa-aa31-d9f581ed7eed","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_014q42Wufa43aWdC9TzM2iQD","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Let me try a different search pattern. I can see from the screenshot the text \"Sub-Parameters & Calculations:\" so let me search for that.","signature":"ErICCkYIChgCKkAQZPEthsrpl1JcTVTJyI8SXla4PBGxwMQOoo7yyS/+YhT4spW+cKe+XaUMld1BTwNEjbZGLy2FwJoTfI0TL4k5EgxvIjTHPqMBYgyDseQaDKILu9uX8kVRFXG89SIw2NwqG4vPsarLCfXfyl+f1aLbAz0RxWxXpixg0LOapdHN3zpZ8p/Gb4qJDSX7bIZuKpkBkfgyjNZVpmvR74yMiyeZJNyX2904nL5i79h/io6X6jTP2i7i5FSzjLi/l3wmuIn2nSm+8051ue4ur8/C20WyKHvhfQ/HOyR/OWbnKXX6tKxprZtZ3S+d4Wx8BXjSa3m9DgJAJMIKviLlkJzv29gOSLUPV2x/vbt7ph86DmyDV19kuaJ6pOiqb5AfpFp9CVyCethAWXTWNz8AGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":399,"cache_read_input_tokens":22170,"cache_creation":{"ephemeral_5m_input_tokens":399,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8SvLSKbBRKBmwjWVcB","type":"assistant","uuid":"30fc270d-87e5-4ca4-a7e9-6edf8e98fe0a","timestamp":"2025-12-18T12:10:42.993Z"}
{"parentUuid":"30fc270d-87e5-4ca4-a7e9-6edf8e98fe0a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_014q42Wufa43aWdC9TzM2iQD","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01QaT3q4aBMfgC1aGCNbfr1v","name":"Grep","input":{"pattern":"Sub-Parameters","path":"src\\components\\patient\\PatientDashboard.jsx","output_mode":"content","-C":30}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":399,"cache_read_input_tokens":22170,"cache_creation":{"ephemeral_5m_input_tokens":399,"ephemeral_1h_input_tokens":0},"output_tokens":159,"service_tier":"standard"}},"requestId":"req_011CWE8SvLSKbBRKBmwjWVcB","type":"assistant","uuid":"dbadb009-9643-4d1a-aa60-f84c27b7704e","timestamp":"2025-12-18T12:10:43.711Z"}
{"parentUuid":"dbadb009-9643-4d1a-aa60-f84c27b7704e","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01QaT3q4aBMfgC1aGCNbfr1v","type":"tool_result","content":"No matches found"}]},"uuid":"a8f630d0-3154-412e-9ecd-a9a5fa0a06ec","timestamp":"2025-12-18T12:10:47.087Z","toolUseResult":{"mode":"content","numFiles":0,"filenames":[],"content":"","numLines":0}}
{"parentUuid":"a8f630d0-3154-412e-9ecd-a9a5fa0a06ec","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_016w4UDR88E727SNGaAi5ceE","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Hmm, it's not finding it. Let me search for the specific text I can see in the screenshot like \"Arousal Score\"","signature":"EpYCCkYIChgCKkAXOpcAQptgg65hfwkQDYtdl8PShUVHMpoUZ3BeYAzsFIdS390EGF4rPjBCFXpIHNBDbfpUftV0je7KFZvx2XQFEgy2qmnELEnCNTNJ3WMaDK1xh2XfZ+uUovamUiIwt0uBeR+TeYFVULFtJGYGrbB/6AnWDal+DCEWfg238pKebP9FT6nuocWcdZMXCNZNKn5W3aZ2zyFODcwkFsCZc4HdSUZBC5AiWN2fAqUObM5TxuP1oBEKqsSFfr+urkdsdZi7YUKj6VXbBuh1j7BA/8sfmZn6GW/3X2pujVGI32xbori1XIt19RZjvyAmNZ7PU8sgOIGd4Mm8D7TAQFuWLSRjOjNuQcgUR0LXLTSg0j0YAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":181,"cache_read_input_tokens":22569,"cache_creation":{"ephemeral_5m_input_tokens":181,"ephemeral_1h_input_tokens":0},"output_tokens":6,"service_tier":"standard"}},"requestId":"req_011CWE8TZV6RXopL7XHYSJr1","type":"assistant","uuid":"e3a3d351-286c-412d-9776-0f9a6c9f0125","timestamp":"2025-12-18T12:10:50.624Z"}
{"parentUuid":"e3a3d351-286c-412d-9776-0f9a6c9f0125","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_016w4UDR88E727SNGaAi5ceE","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01DXpQjrRvET8VuWXqEZu9ic","name":"Grep","input":{"pattern":"Arousal Score","path":"src\\components\\patient\\PatientDashboard.jsx","output_mode":"content","-C":20,"-n":true}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":181,"cache_read_input_tokens":22569,"cache_creation":{"ephemeral_5m_input_tokens":181,"ephemeral_1h_input_tokens":0},"output_tokens":177,"service_tier":"standard"}},"requestId":"req_011CWE8TZV6RXopL7XHYSJr1","type":"assistant","uuid":"a7b5885e-abfc-4969-945c-b8c488560f19","timestamp":"2025-12-18T12:10:51.567Z"}
{"parentUuid":"a7b5885e-abfc-4969-945c-b8c488560f19","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01DXpQjrRvET8VuWXqEZu9ic","type":"tool_result","content":"No matches found"}]},"uuid":"30d59333-a547-434f-9abe-7c62ffccf25f","timestamp":"2025-12-18T12:10:54.791Z","toolUseResult":{"mode":"content","numFiles":0,"filenames":[],"content":"","numLines":0}}
{"parentUuid":"30d59333-a547-434f-9abe-7c62ffccf25f","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01EvNxwhRRMnSdgjMvMCQr7m","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"It's not finding it in PatientDashboard.jsx. Maybe this is rendered from a different component. Let me check if there's a BMW report component or something similar.","signature":"Es0CCkYIChgCKkCg9zFIvaqi0At0nPdQyYfZPjXR+X/zKCkYqHC2wc511bbGX19dDLMrpV5ngWywx5R9NBY584c+2BLNy7LeZCEsEgy8Y2N+cWU15IPihFcaDBfvM8G0/m7oDhFJ8CIwkTwcjCCt1irjuVzNOI1o/J5EauxCo/Dtun0R6eHxUYa0u66Nda6CYjnLvbWmjN4pKrQBJXsDP1Xdrfgl2uuOxye3fpt2yMkjkuQnkO76BqEYOAaaxS5gRxLyYyLjAt90v980IolRN4V7a9bOPMe67UaHuDWfsS+0DcjceqnRSytiDojYNa7K+AAxF7LqMYWFioYyOZ+emoAj4fakseb/L5wIgqOEIbw0RmBSQWsMkwKM0EG3PdBsuKmR0U5Yzck2gwNlQK5+ed0gWwigJhx6MmZCtoXOpQC/aSjGAA0ofzBvovrvC2YDGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":199,"cache_read_input_tokens":22750,"cache_creation":{"ephemeral_5m_input_tokens":199,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWE8U8aRNx15RQk1asngt","type":"assistant","uuid":"8aa6c5bb-400b-4e86-b3a1-896e6becd20c","timestamp":"2025-12-18T12:11:00.202Z"}
{"parentUuid":"8aa6c5bb-400b-4e86-b3a1-896e6becd20c","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01EvNxwhRRMnSdgjMvMCQr7m","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_016WAQTdMuZQxtqy8EthQHgF","name":"Glob","input":{"pattern":"**/*report*.{jsx,js,tsx,ts}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":199,"cache_read_input_tokens":22750,"cache_creation":{"ephemeral_5m_input_tokens":199,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWE8U8aRNx15RQk1asngt","type":"assistant","uuid":"e13fd0ac-f213-4539-b157-f739ed2b9049","timestamp":"2025-12-18T12:11:00.955Z"}
{"parentUuid":"e13fd0ac-f213-4539-b157-f739ed2b9049","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01EvNxwhRRMnSdgjMvMCQr7m","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01M8QyHML24Ez9sdi3ptaqDf","name":"Glob","input":{"pattern":"**/*stress*.{jsx,js,tsx,ts}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":199,"cache_read_input_tokens":22750,"cache_creation":{"ephemeral_5m_input_tokens":199,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWE8U8aRNx15RQk1asngt","type":"assistant","uuid":"769fd2c3-3b53-40ae-8ecf-14947e23057e","timestamp":"2025-12-18T12:11:01.303Z"}
{"parentUuid":"769fd2c3-3b53-40ae-8ecf-14947e23057e","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01EvNxwhRRMnSdgjMvMCQr7m","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_014aQt78j5TPWnchGgAsHH9F","name":"Glob","input":{"pattern":"**/*bmw*.{jsx,js,tsx,ts}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":199,"cache_read_input_tokens":22750,"cache_creation":{"ephemeral_5m_input_tokens":199,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWE8U8aRNx15RQk1asngt","type":"assistant","uuid":"1bf3968f-b2d5-40d0-81c5-8deb6d2d1dfa","timestamp":"2025-12-18T12:11:01.602Z"}
{"parentUuid":"1bf3968f-b2d5-40d0-81c5-8deb6d2d1dfa","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_016WAQTdMuZQxtqy8EthQHgF","type":"tool_result","content":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\utils\\verifyReports.js\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\UploadReportModal.jsx\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\ReportViewer.jsx\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\ClinicalReportView.jsx\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\ClinicalReportForm.jsx\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\PatientReports.jsx\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\eslint-plugin-react\\lib\\util\\report.js\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\eslint\\lib\\linter\\report-translator.js\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\eslint-plugin-react\\lib\\util\\report.d.ts\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\dist\\esm5\\internal\\util\\reportUnhandledError.js\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\dist\\esm\\internal\\util\\reportUnhandledError.js\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\dist\\cjs\\internal\\util\\reportUnhandledError.js\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\src\\internal\\util\\reportUnhandledError.ts\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\dist\\types\\internal\\util\\reportUnhandledError.d.ts\nD:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\reportWorkflowService.js"}]},"uuid":"d142bbea-631a-4b66-8192-5daa82308932","timestamp":"2025-12-18T12:11:07.780Z","toolUseResult":{"filenames":["D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\utils\\verifyReports.js","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\UploadReportModal.jsx","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\ReportViewer.jsx","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\ClinicalReportView.jsx","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\ClinicalReportForm.jsx","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\PatientReports.jsx","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\eslint-plugin-react\\lib\\util\\report.js","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\eslint\\lib\\linter\\report-translator.js","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\eslint-plugin-react\\lib\\util\\report.d.ts","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\dist\\esm5\\internal\\util\\reportUnhandledError.js","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\dist\\esm\\internal\\util\\reportUnhandledError.js","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\dist\\cjs\\internal\\util\\reportUnhandledError.js","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\src\\internal\\util\\reportUnhandledError.ts","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\node_modules\\rxjs\\dist\\types\\internal\\util\\reportUnhandledError.d.ts","D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\reportWorkflowService.js"],"durationMs":607,"numFiles":15,"truncated":false}}
{"parentUuid":"d142bbea-631a-4b66-8192-5daa82308932","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01M8QyHML24Ez9sdi3ptaqDf","type":"tool_result","content":"No files found"}]},"uuid":"a0187dd7-00a4-4f54-aa83-415622eaa047","timestamp":"2025-12-18T12:11:07.820Z","toolUseResult":{"filenames":[],"durationMs":624,"numFiles":0,"truncated":false}}
{"parentUuid":"a0187dd7-00a4-4f54-aa83-415622eaa047","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_014aQt78j5TPWnchGgAsHH9F","type":"tool_result","content":"No files found"}]},"uuid":"edc00853-2cd2-4480-b5c4-27e07e061ecd","timestamp":"2025-12-18T12:11:07.871Z","toolUseResult":{"filenames":[],"durationMs":656,"numFiles":0,"truncated":false}}
{"parentUuid":"edc00853-2cd2-4480-b5c4-27e07e061ecd","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01E4gBrC5UnjzXPkNc8h6FFQ","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Let me check the ReportViewer.jsx component as that's likely where the BMW report is displayed.","signature":"EocCCkYIChgCKkB1V2hcOWfFdyO87P6Kjbxd7yxVPiwIRPD6mgFKg609G+QOwZsqYqzxl4Hdkemag7nFTflJHcXn+ysWeZF0agUQEgxzxCAPCMP0cuVvJeMaDJ/MFUxtDM021lu46yIwF8PIJvDYQf3xp3O2duIkcLkwtz2iRsAn5bBiY5KrXSuNlLUSX8NS+5PiBgkfCVvbKm+1r2ijHKohiwKnyTH/f0nsB5+xVsusmGTLhQmqDIiGbYPqh1Dq4nAdaj9iWGPUYobATqmTIPDsvwxg0e4ySm/6QLUI6BtcYswNX4elNrz4qZ1a4WkLsBmyh5h7voM5IXDBZByzyx+NkajylXEBKnUYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1123,"cache_read_input_tokens":22949,"cache_creation":{"ephemeral_5m_input_tokens":1123,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8V6pn4FiRst7iEemcS","type":"assistant","uuid":"f5a067ab-3bee-4269-bb23-f698b8861aef","timestamp":"2025-12-18T12:11:11.978Z"}
{"parentUuid":"f5a067ab-3bee-4269-bb23-f698b8861aef","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01E4gBrC5UnjzXPkNc8h6FFQ","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Y2iFUQs7SnMJQCzpq1e69n","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\ReportViewer.jsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1123,"cache_read_input_tokens":22949,"cache_creation":{"ephemeral_5m_input_tokens":1123,"ephemeral_1h_input_tokens":0},"output_tokens":118,"service_tier":"standard"}},"requestId":"req_011CWE8V6pn4FiRst7iEemcS","type":"assistant","uuid":"55fe9ab4-b9db-4c99-9f8f-e71b6f109f8d","timestamp":"2025-12-18T12:11:12.345Z"}
{"parentUuid":"55fe9ab4-b9db-4c99-9f8f-e71b6f109f8d","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Y2iFUQs7SnMJQCzpq1e69n","type":"tool_result","content":"     1‚Üíimport React, { useState, useEffect } from 'react';\n     2‚Üíimport { \n     3‚Üí  FileText, \n     4‚Üí  Download, \n     5‚Üí  Eye, \n     6‚Üí  Search,\n     7‚Üí  Filter,\n     8‚Üí  Calendar,\n     9‚Üí  Users,\n    10‚Üí  Upload,\n    11‚Üí  X,\n    12‚Üí  AlertTriangle,\n    13‚Üí  CheckCircle,\n    14‚Üí  Lock\n    15‚Üí} from 'lucide-react';\n    16‚Üíimport toast from 'react-hot-toast';\n    17‚Üíimport { useAuth } from '../../contexts/AuthContext';\n    18‚Üíimport DatabaseService from '../../services/databaseService';\n    19‚Üíimport SubscriptionPopup from '../admin/SubscriptionPopup';\n    20‚Üí\n    21‚Üíconst ReportViewer = ({ clinicId, patients = [], reports: initialReports, onUpdate }) => {\n    22‚Üí  const { user } = useAuth();\n    23‚Üí  const [reports, setReports] = useState([]);\n    24‚Üí  const [filteredReports, setFilteredReports] = useState([]);\n    25‚Üí  const [responseReports, setResponseReports] = useState([]);\n    26‚Üí  const [searchTerm, setSearchTerm] = useState('');\n    27‚Üí  const [selectedPatient, setSelectedPatient] = useState('');\n    28‚Üí  const [dateFilter, setDateFilter] = useState('');\n    29‚Üí  const [selectedReport, setSelectedReport] = useState(null);\n    30‚Üí  const [showReportDetails, setShowReportDetails] = useState(false);\n    31‚Üí  const [loading, setLoading] = useState(false);\n    32‚Üí  const [showSubscriptionPopup, setShowSubscriptionPopup] = useState(false);\n    33‚Üí  const [subscription, setSubscription] = useState(null);\n    34‚Üí  const [error, setError] = useState(null);\n    35‚Üí  const [isLimitReached, setIsLimitReached] = useState(false);\n    36‚Üí\n    37‚Üí  // Log props on mount\n    38‚Üí  console.log('INFO: ReportViewer mounted with:', {\n    39‚Üí    clinicId,\n    40‚Üí    patientsCount: patients?.length || 0,\n    41‚Üí    initialReportsCount: initialReports?.length || 0\n    42‚Üí  });\n    43‚Üí\n    44‚Üí  // Error boundary-like error handling\n    45‚Üí  const handleError = (error, context) => {\n    46‚Üí    console.error(`ERROR: ReportViewer Error in ${context}:`, error);\n    47‚Üí    const errorMessage = error?.message || 'Unknown error occurred';\n    48‚Üí    setError(`Error in ${context}: ${errorMessage}`);\n    49‚Üí    toast.error(`Failed to ${context}. Please try again.`);\n    50‚Üí  };\n    51‚Üí\n    52‚Üí  // Load reports directly from database\n    53‚Üí  useEffect(() => {\n    54‚Üí    loadReports();\n    55‚Üí  }, [clinicId]);\n    56‚Üí\n    57‚Üí  // Check limit status whenever reports or clinicId changes\n    58‚Üí  useEffect(() => {\n    59‚Üí    const checkLimit = async () => {\n    60‚Üí      const limitCheck = await checkReportLimit();\n    61‚Üí      setIsLimitReached(limitCheck.limitReached);\n    62‚Üí    };\n    63‚Üí    checkLimit();\n    64‚Üí  }, [reports, clinicId]);\n    65‚Üí\n    66‚Üí  // Also use initialReports if provided\n    67‚Üí  useEffect(() => {\n    68‚Üí    if (initialReports && initialReports.length > 0) {\n    69‚Üí      setReports(initialReports);\n    70‚Üí    }\n    71‚Üí  }, [initialReports]);\n    72‚Üí\n    73‚Üí  const loadReports = async () => {\n    74‚Üí    if (!clinicId) {\n    75‚Üí      console.warn('WARNING: No clinicId provided to loadReports');\n    76‚Üí      return;\n    77‚Üí    }\n    78‚Üí\n    79‚Üí    try {\n    80‚Üí      setLoading(true);\n    81‚Üí      setError(null); // Clear any previous errors\n    82‚Üí      console.log('========================================');\n    83‚Üí      console.log('INFO: LOADING REPORTS FOR CLINIC:', clinicId);\n    84‚Üí      console.log('========================================');\n    85‚Üí\n    86‚Üí      // Load reports from database (async to handle both database and localStorage)\n    87‚Üí      const reportsData = await DatabaseService.getReportsByClinic(clinicId);\n    88‚Üí      console.log('INFO: Reports loaded from database:', reportsData?.length || 0);\n    89‚Üí\n    90‚Üí      if (reportsData && reportsData.length > 0) {\n    91‚Üí        console.log('INFO: ALL REPORTS DATA:', JSON.stringify(reportsData, null, 2));\n    92‚Üí        console.log('INFO: First report structure:', reportsData[0]);\n    93‚Üí      } else {\n    94‚Üí        console.log('ERROR: NO REPORTS RETURNED FROM DATABASE');\n    95‚Üí      }\n    96‚Üí\n    97‚Üí      // Load subscription data (async)\n    98‚Üí      const subscriptions = await DatabaseService.get('subscriptions') || [];\n    99‚Üí      const clinicSubscription = subscriptions.find(sub => sub.clinicId === clinicId);\n   100‚Üí      setSubscription(clinicSubscription);\n   101‚Üí\n   102‚Üí      // Ensure reportsData is an array\n   103‚Üí      const validReports = Array.isArray(reportsData) ? reportsData : [];\n   104‚Üí      console.log('INFO: Setting reports state with', validReports.length, 'reports');\n   105‚Üí      setReports(validReports);\n   106‚Üí\n   107‚Üí      if (validReports.length === 0) {\n   108‚Üí        console.log('WARNING: No reports found for clinic:', clinicId);\n   109‚Üí      }\n   110‚Üí    } catch (error) {\n   111‚Üí      console.error('ERROR: Error loading reports:', error);\n   112‚Üí      console.error('ERROR: Error stack:', error.stack);\n   113‚Üí      handleError(error, 'load reports');\n   114‚Üí      setReports([]); // Set empty array on error\n   115‚Üí    } finally {\n   116‚Üí      setLoading(false);\n   117‚Üí    }\n   118‚Üí  };\n   119‚Üí\n   120‚Üí  useEffect(() => {\n   121‚Üí    try {\n   122‚Üí      applyFilters();\n   123‚Üí    } catch (error) {\n   124‚Üí      console.error('ERROR: Error in applyFilters:', error);\n   125‚Üí      setFilteredReports([]);\n   126‚Üí    }\n   127‚Üí  }, [reports, searchTerm, selectedPatient, dateFilter]);\n   128‚Üí\n   129‚Üí  const applyFilters = () => {\n   130‚Üí    console.log('DEBUG: Applying filters - Total reports:', reports.length);\n   131‚Üí    console.log('DEBUG: Current filters:', { searchTerm, selectedPatient, dateFilter });\n   132‚Üí    console.log('DEBUG: Patients available:', patients?.length || 0);\n   133‚Üí\n   134‚Üí    // Separate response reports from regular reports\n   135‚Üí    const allResponseReports = reports.filter(report => {\n   136‚Üí      const isResponseReport = report.reportData?.isResponseReport ||\n   137‚Üí                              report.report_data?.isResponseReport ||\n   138‚Üí                              report.reportData?.report_type === 'Response Report' ||\n   139‚Üí                              report.reportData?.reportType === 'Response Report' ||\n   140‚Üí                              report.fileName?.toLowerCase().includes('response');\n   141‚Üí      return isResponseReport;\n   142‚Üí    });\n   143‚Üí\n   144‚Üí    const regularReports = reports.filter(report => {\n   145‚Üí      const isResponseReport = report.reportData?.isResponseReport ||\n   146‚Üí                              report.report_data?.isResponseReport ||\n   147‚Üí                              report.reportData?.report_type === 'Response Report' ||\n   148‚Üí                              report.reportData?.reportType === 'Response Report' ||\n   149‚Üí                              report.fileName?.toLowerCase().includes('response');\n   150‚Üí      return !isResponseReport;\n   151‚Üí    });\n   152‚Üí\n   153‚Üí    console.log('DEBUG: Response reports found:', allResponseReports.length);\n   154‚Üí    console.log('DEBUG: Regular reports found:', regularReports.length);\n   155‚Üí\n   156‚Üí    let filtered = [...regularReports];\n   157‚Üí    console.log('DEBUG: Starting with regular reports:', filtered.length);\n   158‚Üí\n   159‚Üí    // Search filter\n   160‚Üí    if (searchTerm) {\n   161‚Üí      filtered = filtered.filter(report => {\n   162‚Üí        const patient = (patients || []).find(p => p.id === report.patientId);\n   163‚Üí        return (\n   164‚Üí          report.fileName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n   165‚Üí          report.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n   166‚Üí          patient?.name?.toLowerCase().includes(searchTerm.toLowerCase())\n   167‚Üí        );\n   168‚Üí      });\n   169‚Üí      console.log('DEBUG: After search filter:', filtered.length);\n   170‚Üí    }\n   171‚Üí\n   172‚Üí    // Patient filter\n   173‚Üí    if (selectedPatient) {\n   174‚Üí      console.log('DEBUG: Filtering by patient:', selectedPatient);\n   175‚Üí      console.log('DEBUG: Reports before patient filter:', filtered.map(r => ({\n   176‚Üí        id: r.id,\n   177‚Üí        patientId: r.patientId,\n   178‚Üí        fileName: r.fileName\n   179‚Üí      })));\n   180‚Üí      filtered = filtered.filter(report => report.patientId === selectedPatient);\n   181‚Üí      console.log('DEBUG: After patient filter:', filtered.length);\n   182‚Üí    }\n   183‚Üí\n   184‚Üí    // Date filter\n   185‚Üí    if (dateFilter) {\n   186‚Üí      const today = new Date();\n   187‚Üí      let filterDate = new Date();\n   188‚Üí\n   189‚Üí      switch (dateFilter) {\n   190‚Üí        case '7days':\n   191‚Üí          filterDate.setDate(today.getDate() - 7);\n   192‚Üí          break;\n   193‚Üí        case '30days':\n   194‚Üí          filterDate.setDate(today.getDate() - 30);\n   195‚Üí          break;\n   196‚Üí        case '90days':\n   197‚Üí          filterDate.setDate(today.getDate() - 90);\n   198‚Üí          break;\n   199‚Üí        default:\n   200‚Üí          filterDate = null;\n   201‚Üí      }\n   202‚Üí\n   203‚Üí      if (filterDate) {\n   204‚Üí        filtered = filtered.filter(report => new Date(report.createdAt) >= filterDate);\n   205‚Üí        console.log('DEBUG: After date filter:', filtered.length);\n   206‚Üí      }\n   207‚Üí    }\n   208‚Üí\n   209‚Üí    // Sort by creation date (newest first)\n   210‚Üí    filtered.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n   211‚Üí    allResponseReports.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n   212‚Üí\n   213‚Üí    console.log('DEBUG: Final filtered regular reports:', filtered.length);\n   214‚Üí    console.log('DEBUG: Final response reports:', allResponseReports.length);\n   215‚Üí    setFilteredReports(filtered);\n   216‚Üí    setResponseReports(allResponseReports);\n   217‚Üí  };\n   218‚Üí\n   219‚Üí  // Check if clinic has reached report limit\n   220‚Üí  const checkReportLimit = async () => {\n   221‚Üí    // Check trial expiry first\n   222‚Üí    if (clinicId) {\n   223‚Üí      try {\n   224‚Üí        const clinic = await DatabaseService.findById('clinics', clinicId);\n   225‚Üí        if (clinic && clinic.trialEndDate) {\n   226‚Üí          const trialEndDate = new Date(clinic.trialEndDate);\n   227‚Üí          const now = new Date();\n   228‚Üí          if (now > trialEndDate && clinic.subscriptionStatus === 'trial') {\n   229‚Üí            // Trial expired - update status\n   230‚Üí            await DatabaseService.update('clinics', clinicId, {\n   231‚Üí              subscriptionStatus: 'expired',\n   232‚Üí              isActive: false\n   233‚Üí            });\n   234‚Üí            return { limitReached: true, reason: 'trial_expired' };\n   235‚Üí          }\n   236‚Üí        }\n   237‚Üí\n   238‚Üí        // Check report quota using actual clinic data\n   239‚Üí        if (clinic) {\n   240‚Üí          if (clinic.subscriptionStatus === 'active') {\n   241‚Üí            if (clinic.reportsUsed >= clinic.reportsAllowed) {\n   242‚Üí              return { limitReached: true, reason: 'quota_exceeded' };\n   243‚Üí            }\n   244‚Üí          } else {\n   245‚Üí            // Trial subscription - 10 report limit\n   246‚Üí            if (clinic.reportsUsed >= 10) {\n   247‚Üí              return { limitReached: true, reason: 'quota_exceeded' };\n   248‚Üí            }\n   249‚Üí          }\n   250‚Üí        }\n   251‚Üí      } catch (error) {\n   252‚Üí        console.error('Error checking report limit:', error);\n   253‚Üí      }\n   254‚Üí    }\n   255‚Üí\n   256‚Üí    return { limitReached: false, reason: null };\n   257‚Üí  };\n   258‚Üí\n   259‚Üí  // Get clinic's current usage info\n   260‚Üí  const getClinicUsageInfo = () => {\n   261‚Üí    if (subscription && subscription.status === 'active') {\n   262‚Üí      return {\n   263‚Üí        used: reports.length,\n   264‚Üí        allowed: subscription.reportsAllowed,\n   265‚Üí        remaining: subscription.reportsAllowed - reports.length,\n   266‚Üí        isTrial: false,\n   267‚Üí        planName: subscription.planName\n   268‚Üí      };\n   269‚Üí    } else {\n   270‚Üí      return {\n   271‚Üí        used: reports.length,\n   272‚Üí        allowed: 10,\n   273‚Üí        remaining: 10 - reports.length,\n   274‚Üí        isTrial: true,\n   275‚Üí        planName: 'Trial Plan'\n   276‚Üí      };\n   277‚Üí    }\n   278‚Üí  };\n   279‚Üí\n   280‚Üí  const handleDownloadReport = async (report) => {\n   281‚Üí    try {\n   282‚Üí      // Validate report object\n   283‚Üí      if (!report) {\n   284‚Üí        toast.error('Invalid report data');\n   285‚Üí        return;\n   286‚Üí      }\n   287‚Üí\n   288‚Üí      // Check if clinic has reached report limit\n   289‚Üí      const limitCheck = await checkReportLimit();\n   290‚Üí      if (limitCheck.limitReached) {\n   291‚Üí        setShowSubscriptionPopup(true);\n   292‚Üí        if (limitCheck.reason === 'trial_expired') {\n   293‚Üí          toast.error('Your trial has expired. Please upgrade to continue downloading reports.');\n   294‚Üí        } else {\n   295‚Üí          toast.error('Report limit reached. Please upgrade your plan to continue downloading reports.');\n   296‚Üí        }\n   297‚Üí        return;\n   298‚Üí      }\n   299‚Üí\n   300‚Üí      setLoading(true);\n   301‚Üí\n   302‚Üí      // Get file name from multiple possible sources\n   303‚Üí      const fileName = report.fileName || report.file_name || report.reportData?.file_name ||\n   304‚Üí                      report.report_data?.file_name || 'report.edf';\n   305‚Üí\n   306‚Üí      console.log(' Downloading report:', fileName);\n   307‚Üí      console.log('INFO: Report data:', {\n   308‚Üí        id: report.id,\n   309‚Üí        fileName,\n   310‚Üí        filePath: report.filePath || report.file_path,\n   311‚Üí        reportData: report.reportData || report.report_data\n   312‚Üí      });\n   313‚Üí\n   314‚Üí      let downloadSuccess = false;\n   315‚Üí\n   316‚Üí      // NEW: Try Supabase Storage first (our current storage solution)\n   317‚Üí      const filePath = report.filePath || report.file_path ||\n   318‚Üí                       report.reportData?.file_path || report.report_data?.file_path;\n   319‚Üí\n   320‚Üí      if (filePath) {\n   321‚Üí        try {\n   322‚Üí          console.log(' Attempting Supabase Storage download from:', filePath);\n   323‚Üí\n   324‚Üí          // Import StorageService dynamically\n   325‚Üí          const StorageService = (await import('../../services/storageService')).default;\n   326‚Üí\n   327‚Üí          // Download file from Supabase Storage\n   328‚Üí          const fileBlob = await StorageService.downloadFile(filePath);\n   329‚Üí\n   330‚Üí          if (fileBlob) {\n   331‚Üí            // Create blob URL and download\n   332‚Üí            const blobUrl = URL.createObjectURL(fileBlob);\n   333‚Üí            const link = document.createElement('a');\n   334‚Üí            link.href = blobUrl;\n   335‚Üí            link.download = fileName;\n   336‚Üí            link.style.display = 'none';\n   337‚Üí            document.body.appendChild(link);\n   338‚Üí            link.click();\n   339‚Üí            document.body.removeChild(link);\n   340‚Üí\n   341‚Üí            // Clean up blob URL\n   342‚Üí            setTimeout(() => URL.revokeObjectURL(blobUrl), 100);\n   343‚Üí\n   344‚Üí            toast.success(` Downloaded ${fileName}`);\n   345‚Üí            downloadSuccess = true;\n   346‚Üí            console.log('SUCCESS: Supabase Storage download successful');\n   347‚Üí          }\n   348‚Üí        } catch (storageError) {\n   349‚Üí          console.error('ERROR: Supabase Storage download failed:', storageError);\n   350‚Üí          toast.error(`Storage error: ${storageError.message}`);\n   351‚Üí        }\n   352‚Üí      }\n   353‚Üí\n   354‚Üí      // Legacy: Try file URL if Supabase download failed\n   355‚Üí      if (!downloadSuccess && (report.fileUrl || report.file_url)) {\n   356‚Üí        try {\n   357‚Üí          const fileUrl = report.fileUrl || report.file_url;\n   358‚Üí          console.log(' Attempting URL download from:', fileUrl);\n   359‚Üí\n   360‚Üí          const link = document.createElement('a');\n   361‚Üí          link.href = fileUrl;\n   362‚Üí          link.download = fileName;\n   363‚Üí          link.target = '_blank';\n   364‚Üí          link.style.display = 'none';\n   365‚Üí          document.body.appendChild(link);\n   366‚Üí          link.click();\n   367‚Üí          document.body.removeChild(link);\n   368‚Üí\n   369‚Üí          toast.success(` Downloaded ${fileName}`);\n   370‚Üí          downloadSuccess = true;\n   371‚Üí          console.log('SUCCESS: URL download successful');\n   372‚Üí        } catch (urlError) {\n   373‚Üí          console.error('ERROR: URL download failed:', urlError);\n   374‚Üí        }\n   375‚Üí      }\n   376‚Üí\n   377‚Üí      // Final fallback\n   378‚Üí      if (!downloadSuccess) {\n   379‚Üí        console.error('WARNING: No valid download method found for report:', {\n   380‚Üí          id: report.id,\n   381‚Üí          filePath: report.filePath || report.file_path,\n   382‚Üí          fileUrl: report.fileUrl || report.file_url,\n   383‚Üí          fileName\n   384‚Üí        });\n   385‚Üí        toast.error(`File not found in storage. Report: ${fileName}. Please check if file was uploaded correctly.`);\n   386‚Üí      } else {\n   387‚Üí        // Increment download counter (shared quota with uploads)\n   388‚Üí        try {\n   389‚Üí          const clinic = await DatabaseService.findById('clinics', clinicId);\n   390‚Üí          if (clinic) {\n   391‚Üí            await DatabaseService.update('clinics', clinicId, {\n   392‚Üí              reportsUsed: (clinic.reportsUsed || 0) + 1\n   393‚Üí            });\n   394‚Üí            console.log('SUCCESS: Incremented download counter for clinic:', clinicId);\n   395‚Üí\n   396‚Üí            // Reload reports to update usage display\n   397‚Üí            await loadReports();\n   398‚Üí          }\n   399‚Üí        } catch (counterError) {\n   400‚Üí          console.error('WARNING: Failed to increment download counter:', counterError);\n   401‚Üí          // Don't show error to user - download was successful\n   402‚Üí        }\n   403‚Üí      }\n   404‚Üí    } catch (error) {\n   405‚Üí      console.error('ERROR: Error downloading report:', error);\n   406‚Üí      toast.error(`Failed to download report: ${error?.message || 'Unknown error'}`);\n   407‚Üí    } finally {\n   408‚Üí      setLoading(false);\n   409‚Üí    }\n   410‚Üí  };\n   411‚Üí\n   412‚Üí  const handleViewReport = (report) => {\n   413‚Üí    setSelectedReport(report);\n   414‚Üí    setShowReportDetails(true);\n   415‚Üí  };\n   416‚Üí\n   417‚Üí  const clearFilters = () => {\n   418‚Üí    setSearchTerm('');\n   419‚Üí    setSelectedPatient('');\n   420‚Üí    setDateFilter('');\n   421‚Üí  };\n   422‚Üí\n   423‚Üí  const refreshReports = async () => {\n   424‚Üí    try {\n   425‚Üí      setError(null);\n   426‚Üí      await loadReports();\n   427‚Üí      if (onUpdate) onUpdate();\n   428‚Üí      toast.success('Reports refreshed successfully');\n   429‚Üí    } catch (error) {\n   430‚Üí      console.error('ERROR: Error refreshing reports:', error);\n   431‚Üí      handleError(error, 'refresh reports');\n   432‚Üí    }\n   433‚Üí  };\n   434‚Üí\n   435‚Üí  const repairDataAndReload = async () => {\n   436‚Üí    try {\n   437‚Üí      setLoading(true);\n   438‚Üí      setError(null);\n   439‚Üí      \n   440‚Üí      // Validate and repair data\n   441‚Üí      const result = await DatabaseService.validateAndRepairData();\n   442‚Üí      if (result.success) {\n   443‚Üí        toast.success(`Data validation complete${result.repairCount > 0 ? ` (repaired ${result.repairCount} issues)` : ''}`);\n   444‚Üí      }\n   445‚Üí      \n   446‚Üí      // Refresh connection\n   447‚Üí      await DatabaseService.refreshConnection();\n   448‚Üí      \n   449‚Üí      // Reload reports\n   450‚Üí      await loadReports();\n   451‚Üí      \n   452‚Üí      toast.success('Data repair and reload completed successfully');\n   453‚Üí    } catch (error) {\n   454‚Üí      console.error('ERROR: Error during data repair:', error);\n   455‚Üí      handleError(error, 'repair data');\n   456‚Üí    } finally {\n   457‚Üí      setLoading(false);\n   458‚Üí    }\n   459‚Üí  };\n   460‚Üí\n   461‚Üí  const handleSubscription = (subscriptionData) => {\n   462‚Üí    try {\n   463‚Üí      // Save subscription to database (synchronous)\n   464‚Üí      DatabaseService.add('subscriptions', subscriptionData);\n   465‚Üí      \n   466‚Üí      // Update clinic's subscription status (synchronous)\n   467‚Üí      DatabaseService.update('clinics', subscriptionData.clinicId, {\n   468‚Üí        subscriptionStatus: 'active',\n   469‚Üí        reportsAllowed: subscriptionData.reportsAllowed\n   470‚Üí      });\n   471‚Üí      \n   472‚Üí      // Reload data to reflect changes\n   473‚Üí      loadReports();\n   474‚Üí      \n   475‚Üí      toast.success('Subscription updated successfully!');\n   476‚Üí    } catch (error) {\n   477‚Üí      console.error('Error updating subscription:', error);\n   478‚Üí      toast.error('Failed to update subscription');\n   479‚Üí    }\n   480‚Üí  };\n   481‚Üí\n   482‚Üí  const getPatientName = (patientId) => {\n   483‚Üí    const patient = patients.find(p => p.id === patientId);\n   484‚Üí    \n   485‚Üí    if (!patient) {\n   486‚Üí      console.log(`WARNING: Patient lookup failed for ID: ${patientId}`);\n   487‚Üí      console.log('DEBUG: Available patients:', patients.map(p => ({ id: p.id, name: p.name })));\n   488‚Üí      \n   489‚Üí      // Try to find in localStorage as fallback\n   490‚Üí      const localStoragePatients = JSON.parse(localStorage.getItem('patients') || '[]');\n   491‚Üí      const fallbackPatient = localStoragePatients.find(p => p.id === patientId);\n   492‚Üí      \n   493‚Üí      if (fallbackPatient) {\n   494‚Üí        console.log(`SUCCESS: Found patient in localStorage fallback: ${fallbackPatient.name}`);\n   495‚Üí        return fallbackPatient.name;\n   496‚Üí      }\n   497‚Üí      \n   498‚Üí      return 'Unknown Patient';\n   499‚Üí    }\n   500‚Üí    \n   501‚Üí    return patient.name;\n   502‚Üí  };\n   503‚Üí\n   504‚Üí  if (showReportDetails && selectedReport) {\n   505‚Üí    // Find patient with multiple field name variations\n   506‚Üí    const modalPatient = (patients || []).find(p =>\n   507‚Üí      p.id === selectedReport.patientId ||\n   508‚Üí      p.id === selectedReport.patient_id ||\n   509‚Üí      p.id === selectedReport.reportData?.patientId\n   510‚Üí    );\n   511‚Üí\n   512‚Üí    console.log('INFO: Report Details Modal - Patient lookup:', {\n   513‚Üí      reportPatientId: selectedReport.patientId,\n   514‚Üí      report_patient_id: selectedReport.patient_id,\n   515‚Üí      foundPatient: modalPatient ? {\n   516‚Üí        id: modalPatient.id,\n   517‚Üí        name: modalPatient.name || modalPatient.fullName || modalPatient.full_name\n   518‚Üí      } : null\n   519‚Üí    });\n   520‚Üí\n   521‚Üí    return (\n   522‚Üí      <ReportDetails\n   523‚Üí        report={selectedReport}\n   524‚Üí        patient={modalPatient}\n   525‚Üí        onBack={() => {\n   526‚Üí          setShowReportDetails(false);\n   527‚Üí          setSelectedReport(null);\n   528‚Üí        }}\n   529‚Üí        onDownload={handleDownloadReport}\n   530‚Üí      />\n   531‚Üí    );\n   532‚Üí  }\n   533‚Üí\n   534‚Üí  return (\n   535‚Üí    <div className=\"space-y-6\">\n   536‚Üí      {/* Header */}\n   537‚Üí      <div className=\"flex items-center justify-between\">\n   538‚Üí        <div>\n   539‚Üí          <h2 className=\"text-2xl font-bold text-gray-900\">Patient Reports</h2>\n   540‚Üí          <p className=\"text-gray-600\">View and download EEG reports for your patients</p>\n   541‚Üí        </div>\n   542‚Üí        <div className=\"text-right\">\n   543‚Üí          <div className=\"text-sm text-gray-600\">\n   544‚Üí            Total Reports: <span className=\"font-semibold\">{reports.length}</span>\n   545‚Üí          </div>\n   546‚Üí        </div>\n   547‚Üí      </div>\n   548‚Üí\n   549‚Üí      {/* Usage Summary */}\n   550‚Üí      <div className=\"bg-gradient-to-r from-[#E4EFFF] to-indigo-50 rounded-lg shadow-sm border border-blue-200 p-4\">\n   551‚Üí        <div className=\"flex items-center justify-between\">\n   552‚Üí          <div>\n   553‚Üí            <h3 className=\"text-lg font-semibold text-blue-900\">Your Usage Summary</h3>\n   554‚Üí            {(() => {\n   555‚Üí              const usageInfo = getClinicUsageInfo();\n   556‚Üí              return (\n   557‚Üí                <div className=\"mt-2 space-y-1\">\n   558‚Üí                  <p className=\"text-blue-700\">\n   559‚Üí                    <strong>Plan:</strong> {usageInfo.planName}\n   560‚Üí                  </p>\n   561‚Üí                  <p className=\"text-blue-700\">\n   562‚Üí                    <strong>Usage:</strong> {usageInfo.used}/{usageInfo.allowed} reports\n   563‚Üí                  </p>\n   564‚Üí                  <p className=\"text-blue-700\">\n   565‚Üí                    <strong>Remaining:</strong> {usageInfo.remaining} reports\n   566‚Üí                  </p>\n   567‚Üí                  {usageInfo.remaining <= 2 && (\n   568‚Üí                    <div className=\"flex items-center space-x-2 mt-2\">\n   569‚Üí                      <AlertTriangle className=\"h-4 w-4 text-orange-500\" />\n   570‚Üí                      <span className=\"text-orange-700 text-sm font-medium\">\n   571‚Üí                        {usageInfo.remaining === 0 ? 'Report limit reached!' : 'Approaching report limit'}\n   572‚Üí                      </span>\n   573‚Üí                    </div>\n   574‚Üí                  )}\n   575‚Üí                </div>\n   576‚Üí              );\n   577‚Üí            })()}\n   578‚Üí          </div>\n   579‚Üí          <div className=\"text-right\">\n   580‚Üí            {(() => {\n   581‚Üí              const usageInfo = getClinicUsageInfo();\n   582‚Üí              const percentage = (usageInfo.used / usageInfo.allowed) * 100;\n   583‚Üí              return (\n   584‚Üí                <div>\n   585‚Üí                  <div className=\"text-2xl font-bold text-blue-900\">{usageInfo.used}</div>\n   586‚Üí                  <div className=\"text-sm text-blue-700\">Reports Used</div>\n   587‚Üí                  <div className=\"w-24 h-2 bg-blue-200 rounded-full mt-2\">\n   588‚Üí                    <div \n   589‚Üí                      className={`h-2 rounded-full ${\n   590‚Üí                        percentage >= 90 ? 'bg-red-500' : \n   591‚Üí                        percentage >= 75 ? 'bg-orange-500' : 'bg-[#323956]'\n   592‚Üí                      }`}\n   593‚Üí                      style={{ width: `${Math.min(percentage, 100)}%` }}\n   594‚Üí                    ></div>\n   595‚Üí                  </div>\n   596‚Üí                </div>\n   597‚Üí              );\n   598‚Üí            })()}\n   599‚Üí          </div>\n   600‚Üí        </div>\n   601‚Üí      </div>\n   602‚Üí\n   603‚Üí      {/* Filters */}\n   604‚Üí      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\n   605‚Üí        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n   606‚Üí          <div className=\"relative\">\n   607‚Üí            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n   608‚Üí            <input\n   609‚Üí              type=\"text\"\n   610‚Üí              placeholder=\"Search reports...\"\n   611‚Üí              value={searchTerm}\n   612‚Üí              onChange={(e) => setSearchTerm(e.target.value)}\n   613‚Üí              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n   614‚Üí            />\n   615‚Üí          </div>\n   616‚Üí          \n   617‚Üí          <select\n   618‚Üí            value={selectedPatient}\n   619‚Üí            onChange={(e) => setSelectedPatient(e.target.value)}\n   620‚Üí            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 bg-white text-black\"\n   621‚Üí            style={{\n   622‚Üí              color: '#000000',\n   623‚Üí              backgroundColor: '#FFFFFF'\n   624‚Üí            }}\n   625‚Üí          >\n   626‚Üí            <option value=\"\" className=\"text-gray-900 bg-white\">\n   627‚Üí              All Patients\n   628‚Üí            </option>\n   629‚Üí            {(patients || []).map(patient => (\n   630‚Üí              <option\n   631‚Üí                key={patient.id}\n   632‚Üí                value={patient.id}\n   633‚Üí                className=\"text-gray-900 bg-white\"\n   634‚Üí              >\n   635‚Üí                {patient.fullName || patient.full_name || patient.name || 'Unknown Patient'}\n   636‚Üí              </option>\n   637‚Üí            ))}\n   638‚Üí          </select>\n   639‚Üí\n   640‚Üí          <select\n   641‚Üí            value={dateFilter}\n   642‚Üí            onChange={(e) => setDateFilter(e.target.value)}\n   643‚Üí            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 bg-white text-black\"\n   644‚Üí            style={{\n   645‚Üí              color: '#000000',\n   646‚Üí              backgroundColor: '#FFFFFF'\n   647‚Üí            }}\n   648‚Üí          >\n   649‚Üí            <option value=\"\" style={{\n   650‚Üí              color: '#000000 !important',\n   651‚Üí              backgroundColor: '#FFFFFF !important',\n   652‚Üí              padding: '8px',\n   653‚Üí              fontSize: '14px',\n   654‚Üí              fontWeight: '500'\n   655‚Üí            }}>All Time</option>\n   656‚Üí            <option value=\"7days\" style={{\n   657‚Üí              color: '#000000 !important',\n   658‚Üí              backgroundColor: '#FFFFFF !important',\n   659‚Üí              padding: '8px',\n   660‚Üí              fontSize: '14px',\n   661‚Üí              fontWeight: '500'\n   662‚Üí            }}>Last 7 days</option>\n   663‚Üí            <option value=\"30days\" style={{\n   664‚Üí              color: '#000000 !important',\n   665‚Üí              backgroundColor: '#FFFFFF !important',\n   666‚Üí              padding: '8px',\n   667‚Üí              fontSize: '14px',\n   668‚Üí              fontWeight: '500'\n   669‚Üí            }}>Last 30 days</option>\n   670‚Üí            <option value=\"90days\" style={{\n   671‚Üí              color: '#000000 !important',\n   672‚Üí              backgroundColor: '#FFFFFF !important',\n   673‚Üí              padding: '8px',\n   674‚Üí              fontSize: '14px',\n   675‚Üí              fontWeight: '500'\n   676‚Üí            }}>Last 90 days</option>\n   677‚Üí          </select>\n   678‚Üí          \n   679‚Üí          <button\n   680‚Üí            onClick={clearFilters}\n   681‚Üí            className=\"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-center space-x-2\"\n   682‚Üí          >\n   683‚Üí            <X className=\"h-4 w-4\" />\n   684‚Üí            <span>Clear</span>\n   685‚Üí          </button>\n   686‚Üí        </div>\n   687‚Üí      </div>\n   688‚Üí\n   689‚Üí      {/* Response Reports from Super Admin */}\n   690‚Üí      {responseReports.length > 0 && (\n   691‚Üí        <div className=\"bg-white rounded-lg shadow-sm border-2 border-green-500 overflow-hidden\">\n   692‚Üí          <div className=\"px-6 py-4 border-b border-green-200 bg-green-50\">\n   693‚Üí            <div className=\"flex items-center justify-between\">\n   694‚Üí              <h3 className=\"text-lg font-semibold text-green-900 flex items-center space-x-2\">\n   695‚Üí                <CheckCircle className=\"h-5 w-5 text-green-600\" />\n   696‚Üí                <span>Response Reports from NeuroSense (</span><span>{responseReports.length})</span>\n   697‚Üí              </h3>\n   698‚Üí              <span className=\"px-3 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full\">\n   699‚Üí                Admin Responses\n   700‚Üí              </span>\n   701‚Üí            </div>\n   702‚Üí            <p className=\"text-sm text-green-700 mt-1\">\n   703‚Üí              Analysis reports sent by NeuroSense Admin for your patients\n   704‚Üí            </p>\n   705‚Üí          </div>\n   706‚Üí\n   707‚Üí          <div className=\"divide-y divide-gray-200\">\n   708‚Üí            {responseReports.map((report) => {\n   709‚Üí              const patient = (patients || []).find(p =>\n   710‚Üí                p.id === report.patientId ||\n   711‚Üí                p.id === report.patient_id ||\n   712‚Üí                p.id === report.reportData?.patientId\n   713‚Üí              );\n   714‚Üí\n   715‚Üí              return (\n   716‚Üí                <div key={report.id} className=\"p-6 hover:bg-green-50 transition-colors border-l-4 border-green-500\">\n   717‚Üí                  <div className=\"flex items-center justify-between\">\n   718‚Üí                    <div className=\"flex items-center space-x-4\">\n   719‚Üí                      <div className=\"h-12 w-12 rounded-lg bg-green-100 flex items-center justify-center\">\n   720‚Üí                        <FileText className=\"h-6 w-6 text-green-600\" />\n   721‚Üí                      </div>\n   722‚Üí                      <div className=\"flex-1\">\n   723‚Üí                        <div className=\"flex items-center space-x-2\">\n   724‚Üí                          <h4 className=\"text-lg font-medium text-gray-900\">\n   725‚Üí                            {report.fileName || 'Response Report'}\n   726‚Üí                          </h4>\n   727‚Üí                          <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded\">\n   728‚Üí                            NEW\n   729‚Üí                          </span>\n   730‚Üí                        </div>\n   731‚Üí                        <div className=\"flex items-center space-x-4 mt-1\">\n   732‚Üí                          <div className=\"flex items-center space-x-2\">\n   733‚Üí                            <Users className=\"h-4 w-4 text-gray-400\" />\n   734‚Üí                            <span className=\"text-sm text-gray-600\">\n   735‚Üí                              {patient?.name || patient?.fullName || patient?.full_name || 'Unknown Patient'}\n   736‚Üí                            </span>\n   737‚Üí                          </div>\n   738‚Üí                          <div className=\"flex items-center space-x-2\">\n   739‚Üí                            <Calendar className=\"h-4 w-4 text-gray-400\" />\n   740‚Üí                            <span className=\"text-sm text-gray-600\">\n   741‚Üí                              {new Date(report.createdAt).toLocaleDateString()}\n   742‚Üí                            </span>\n   743‚Üí                          </div>\n   744‚Üí                          <span className=\"text-xs bg-green-50 text-green-700 px-2 py-1 rounded\">\n   745‚Üí                            From Super Admin\n   746‚Üí                          </span>\n   747‚Üí                        </div>\n   748‚Üí                      </div>\n   749‚Üí                    </div>\n   750‚Üí                    <div className=\"flex items-center space-x-2\">\n   751‚Üí                      <button\n   752‚Üí                        onClick={() => handleViewReport(report)}\n   753‚Üí                        className=\"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors\"\n   754‚Üí                        title=\"View Report\"\n   755‚Üí                      >\n   756‚Üí                        <Eye className=\"h-5 w-5\" />\n   757‚Üí                      </button>\n   758‚Üí                      <button\n   759‚Üí                        onClick={() => handleDownloadReport(report)}\n   760‚Üí                        className=\"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors\"\n   761‚Üí                        title=\"Download Report\"\n   762‚Üí                      >\n   763‚Üí                        <Download className=\"h-5 w-5\" />\n   764‚Üí                      </button>\n   765‚Üí                    </div>\n   766‚Üí                  </div>\n   767‚Üí                </div>\n   768‚Üí              );\n   769‚Üí            })}\n   770‚Üí          </div>\n   771‚Üí        </div>\n   772‚Üí      )}\n   773‚Üí\n   774‚Üí      {/* Regular Patient Reports */}\n   775‚Üí      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n   776‚Üí        <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50\">\n   777‚Üí          <h3 className=\"text-lg font-medium text-gray-900\">\n   778‚Üí            Your Uploaded Reports ({filteredReports.length})\n   779‚Üí          </h3>\n   780‚Üí        </div>\n   781‚Üí        \n   782‚Üí        {filteredReports.length > 0 ? (\n   783‚Üí          <div className=\"divide-y divide-gray-200\">\n   784‚Üí            {filteredReports.map((report) => {\n   785‚Üí              // Try multiple field name variations for patient lookup\n   786‚Üí              const patient = (patients || []).find(p =>\n   787‚Üí                p.id === report.patientId ||\n   788‚Üí                p.id === report.patient_id ||\n   789‚Üí                p.id === report.reportData?.patientId\n   790‚Üí              );\n   791‚Üí\n   792‚Üí              // Log if patient not found\n   793‚Üí              if (!patient) {\n   794‚Üí                console.warn('WARNING: Patient not found for report:', {\n   795‚Üí                  reportId: report.id,\n   796‚Üí                  patientId: report.patientId,\n   797‚Üí                  patient_id: report.patient_id,\n   798‚Üí                  availablePatients: patients?.map(p => ({ id: p.id, name: p.name || p.fullName }))\n   799‚Üí                });\n   800‚Üí              }\n   801‚Üí\n   802‚Üí              return (\n   803‚Üí                <div key={report.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\n   804‚Üí                  <div className=\"flex items-center justify-between\">\n   805‚Üí                    <div className=\"flex items-center space-x-4\">\n   806‚Üí                      <div className=\"h-12 w-12 rounded-lg bg-[#CAE0FF] flex items-center justify-center\">\n   807‚Üí                        <FileText className=\"h-6 w-6 text-[#323956]\" />\n   808‚Üí                      </div>\n   809‚Üí                      <div className=\"flex-1\">\n   810‚Üí                        <h4 className=\"text-lg font-medium text-gray-900\">\n   811‚Üí                          {report.fileName || 'EEG Report'}\n   812‚Üí                        </h4>\n   813‚Üí                        <div className=\"flex items-center space-x-4 mt-1\">\n   814‚Üí                          <div className=\"flex items-center space-x-2\">\n   815‚Üí                            <Users className=\"h-4 w-4 text-gray-400\" />\n   816‚Üí                            <span className=\"text-sm text-gray-600\">\n   817‚Üí                              {patient?.name || patient?.fullName || patient?.full_name || 'Unknown Patient'}\n   818‚Üí                            </span>\n   819‚Üí                          </div>\n   820‚Üí                          <div className=\"flex items-center space-x-2\">\n   821‚Üí                            <Calendar className=\"h-4 w-4 text-gray-400\" />\n   822‚Üí                            <span className=\"text-sm text-gray-600\">\n   823‚Üí                              {new Date(report.createdAt).toLocaleDateString()}\n   824‚Üí                            </span>\n   825‚Üí                          </div>\n   826‚Üí                          {report.fileSize && (\n   827‚Üí                            <span className=\"text-sm text-gray-500\">\n   828‚Üí                              {report.fileSize}\n   829‚Üí                            </span>\n   830‚Üí                          )}\n   831‚Üí                        </div>\n   832‚Üí                        {report.title && report.title !== report.fileName && (\n   833‚Üí                          <p className=\"text-sm text-gray-600 mt-2\">{report.title}</p>\n   834‚Üí                        )}\n   835‚Üí                        {report.notes && (\n   836‚Üí                          <p className=\"text-sm text-gray-500 mt-2 italic\">\n   837‚Üí                            {report.notes.length > 100 \n   838‚Üí                              ? `${report.notes.substring(0, 100)}...`\n   839‚Üí                              : report.notes\n   840‚Üí                            }\n   841‚Üí                          </p>\n   842‚Üí                        )}\n   843‚Üí                      </div>\n   844‚Üí                    </div>\n   845‚Üí                    \n   846‚Üí                    <div className=\"flex items-center space-x-3\">\n   847‚Üí                      <button\n   848‚Üí                        onClick={() => handleViewReport(report)}\n   849‚Üí                        className=\"p-2 text-primary-600 hover:text-primary-800 hover:bg-primary-50 rounded-lg transition-colors\"\n   850‚Üí                        title=\"View Details\"\n   851‚Üí                      >\n   852‚Üí                        <Eye className=\"h-5 w-5\" />\n   853‚Üí                      </button>\n   854‚Üí                      {isLimitReached ? (\n   855‚Üí                        <button\n   856‚Üí                          onClick={() => setShowSubscriptionPopup(true)}\n   857‚Üí                          className=\"p-2 text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg transition-colors\"\n   858‚Üí                          title=\"Upgrade required to download\"\n   859‚Üí                        >\n   860‚Üí                          <Lock className=\"h-5 w-5\" />\n   861‚Üí                        </button>\n   862‚Üí                      ) : (\n   863‚Üí                        <button\n   864‚Üí                          onClick={() => handleDownloadReport(report)}\n   865‚Üí                          disabled={loading}\n   866‚Üí                          className=\"p-2 text-[#323956] hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50\"\n   867‚Üí                          title=\"Download Report\"\n   868‚Üí                        >\n   869‚Üí                          <Download className=\"h-5 w-5\" />\n   870‚Üí                        </button>\n   871‚Üí                      )}\n   872‚Üí                    </div>\n   873‚Üí                  </div>\n   874‚Üí                </div>\n   875‚Üí              );\n   876‚Üí            })}\n   877‚Üí          </div>\n   878‚Üí        ) : (\n   879‚Üí          <div className=\"text-center py-12\">\n   880‚Üí            <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n   881‚Üí            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n   882‚Üí              {error ? 'Failed to load reports' : (\n   883‚Üí                searchTerm || selectedPatient || dateFilter \n   884‚Üí                  ? 'No reports match your filters' \n   885‚Üí                  : 'No reports available'\n   886‚Üí              )}\n   887‚Üí            </h3>\n   888‚Üí            <p className=\"text-gray-600 mb-4\">\n   889‚Üí              {error ? error : (\n   890‚Üí                searchTerm || selectedPatient || dateFilter\n   891‚Üí                  ? 'Try adjusting your search criteria'\n   892‚Üí                  : 'Reports will appear here once they are uploaded by your administrator'\n   893‚Üí              )}\n   894‚Üí            </p>\n   895‚Üí            <div className=\"space-x-4\">\n   896‚Üí              {(searchTerm || selectedPatient || dateFilter) && !error && (\n   897‚Üí                <button\n   898‚Üí                  onClick={clearFilters}\n   899‚Üí                  className=\"text-primary-600 hover:text-primary-800 font-medium\"\n   900‚Üí                >\n   901‚Üí                  Clear all filters\n   902‚Üí                </button>\n   903‚Üí              )}\n   904‚Üí              {error && (\n   905‚Üí                <>\n   906‚Üí                  <button\n   907‚Üí                    onClick={refreshReports}\n   908‚Üí                    disabled={loading}\n   909‚Üí                    className=\"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium disabled:opacity-50\"\n   910‚Üí                  >\n   911‚Üí                    {loading ? 'Refreshing...' : 'Try Again'}\n   912‚Üí                  </button>\n   913‚Üí                  <button\n   914‚Üí                    onClick={repairDataAndReload}\n   915‚Üí                    disabled={loading}\n   916‚Üí                    className=\"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-medium disabled:opacity-50\"\n   917‚Üí                  >\n   918‚Üí                    {loading ? 'Repairing...' : 'Repair & Reload'}\n   919‚Üí                  </button>\n   920‚Üí                </>\n   921‚Üí              )}\n   922‚Üí            </div>\n   923‚Üí          </div>\n   924‚Üí        )}\n   925‚Üí      </div>\n   926‚Üí\n   927‚Üí      {/* Info Banner */}\n   928‚Üí      <div className=\"bg-[#E4EFFF] border border-blue-200 rounded-lg p-4\">\n   929‚Üí        <div className=\"flex\">\n   930‚Üí          <div className=\"flex-shrink-0\">\n   931‚Üí            <CheckCircle className=\"h-5 w-5 text-blue-400\" />\n   932‚Üí          </div>\n   933‚Üí          <div className=\"ml-3\">\n   934‚Üí            <h3 className=\"text-sm font-medium text-blue-800\">\n   935‚Üí              About Report Access\n   936‚Üí            </h3>\n   937‚Üí            <div className=\"mt-2 text-sm text-blue-700\">\n   938‚Üí              <p>\n   939‚Üí                ‚Ä¢ Reports are uploaded by your clinic administrator<br/>\n   940‚Üí                ‚Ä¢ You can view and download all reports for your patients<br/>\n   941‚Üí                ‚Ä¢ Reports are securely stored and only accessible by authorized personnel<br/>\n   942‚Üí                ‚Ä¢ For technical support, contact your system administrator\n   943‚Üí              </p>\n   944‚Üí            </div>\n   945‚Üí          </div>\n   946‚Üí        </div>\n   947‚Üí      </div>\n   948‚Üí\n   949‚Üí      {/* Subscription Popup */}\n   950‚Üí      <SubscriptionPopup\n   951‚Üí        isOpen={showSubscriptionPopup}\n   952‚Üí        onClose={() => setShowSubscriptionPopup(false)}\n   953‚Üí        clinicId={clinicId}\n   954‚Üí        currentUsage={reports.length}\n   955‚Üí        onSubscribe={handleSubscription}\n   956‚Üí        clinicInfo={{\n   957‚Üí          name: user?.clinicName || user?.name || 'Clinic',\n   958‚Üí          email: user?.email || '',\n   959‚Üí          phone: user?.phone || ''\n   960‚Üí        }}\n   961‚Üí      />\n   962‚Üí    </div>\n   963‚Üí  );\n   964‚Üí};\n   965‚Üí\n   966‚Üí// Report Details Component\n   967‚Üíconst ReportDetails = ({ report, patient, onBack, onDownload }) => {\n   968‚Üí  return (\n   969‚Üí    <div className=\"space-y-6\">\n   970‚Üí      <div className=\"flex items-center space-x-4\">\n   971‚Üí        <button\n   972‚Üí          onClick={onBack}\n   973‚Üí          className=\"text-primary-600 hover:text-primary-800 font-medium\"\n   974‚Üí        >\n   975‚Üí          ‚Üê Back to Reports\n   976‚Üí        </button>\n   977‚Üí      </div>\n   978‚Üí\n   979‚Üí      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n   980‚Üí        {/* Header */}\n   981‚Üí        <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50\">\n   982‚Üí          <div className=\"flex items-center justify-between\">\n   983‚Üí            <div className=\"flex items-center space-x-4\">\n   984‚Üí              <div className=\"h-12 w-12 rounded-lg bg-[#CAE0FF] flex items-center justify-center\">\n   985‚Üí                <FileText className=\"h-6 w-6 text-[#323956]\" />\n   986‚Üí              </div>\n   987‚Üí              <div>\n   988‚Üí                <h2 className=\"text-xl font-semibold text-gray-900\">\n   989‚Üí                  {report.fileName || 'EEG Report'}\n   990‚Üí                </h2>\n   991‚Üí                <p className=\"text-sm text-gray-600\">\n   992‚Üí                  Report Details and Information\n   993‚Üí                </p>\n   994‚Üí              </div>\n   995‚Üí            </div>\n   996‚Üí            <button\n   997‚Üí              onClick={() => onDownload(report)}\n   998‚Üí              className=\"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2\"\n   999‚Üí            >\n  1000‚Üí              <Download className=\"h-4 w-4\" />\n  1001‚Üí              <span>Download</span>\n  1002‚Üí            </button>\n  1003‚Üí          </div>\n  1004‚Üí        </div>\n  1005‚Üí\n  1006‚Üí        {/* Content */}\n  1007‚Üí        <div className=\"p-6\">\n  1008‚Üí          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n  1009‚Üí            {/* Report Information */}\n  1010‚Üí            <div className=\"space-y-6\">\n  1011‚Üí              <div>\n  1012‚Üí                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Report Information</h3>\n  1013‚Üí                <div className=\"space-y-4\">\n  1014‚Üí                  <div className=\"flex justify-between items-start\">\n  1015‚Üí                    <span className=\"text-sm font-medium text-gray-600\">File Name:</span>\n  1016‚Üí                    <span className=\"text-sm text-gray-900\">{report.fileName}</span>\n  1017‚Üí                  </div>\n  1018‚Üí                  \n  1019‚Üí                  {report.title && (\n  1020‚Üí                    <div className=\"flex justify-between items-start\">\n  1021‚Üí                      <span className=\"text-sm font-medium text-gray-600\">Title:</span>\n  1022‚Üí                      <span className=\"text-sm text-gray-900\">{report.title}</span>\n  1023‚Üí                    </div>\n  1024‚Üí                  )}\n  1025‚Üí                  \n  1026‚Üí                  <div className=\"flex justify-between items-start\">\n  1027‚Üí                    <span className=\"text-sm font-medium text-gray-600\">File Type:</span>\n  1028‚Üí                    <span className=\"text-sm text-gray-900\">{report.fileType || 'PDF'}</span>\n  1029‚Üí                  </div>\n  1030‚Üí                  \n  1031‚Üí                  {report.fileSize && (\n  1032‚Üí                    <div className=\"flex justify-between items-start\">\n  1033‚Üí                      <span className=\"text-sm font-medium text-gray-600\">File Size:</span>\n  1034‚Üí                      <span className=\"text-sm text-gray-900\">{report.fileSize}</span>\n  1035‚Üí                    </div>\n  1036‚Üí                  )}\n  1037‚Üí                  \n  1038‚Üí                  <div className=\"flex justify-between items-start\">\n  1039‚Üí                    <span className=\"text-sm font-medium text-gray-600\">Created:</span>\n  1040‚Üí                    <span className=\"text-sm text-gray-900\">\n  1041‚Üí                      {new Date(report.createdAt).toLocaleString()}\n  1042‚Üí                    </span>\n  1043‚Üí                  </div>\n  1044‚Üí                  \n  1045‚Üí                  {report.uploadedBy && (\n  1046‚Üí                    <div className=\"flex justify-between items-start\">\n  1047‚Üí                      <span className=\"text-sm font-medium text-gray-600\">Uploaded by:</span>\n  1048‚Üí                      <span className=\"text-sm text-gray-900\">{report.uploadedBy}</span>\n  1049‚Üí                    </div>\n  1050‚Üí                  )}\n  1051‚Üí                </div>\n  1052‚Üí              </div>\n  1053‚Üí\n  1054‚Üí              {report.notes && (\n  1055‚Üí                <div>\n  1056‚Üí                  <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Notes</h4>\n  1057‚Üí                  <div className=\"bg-gray-50 p-3 rounded-md\">\n  1058‚Üí                    <p className=\"text-sm text-gray-700\">{report.notes}</p>\n  1059‚Üí                  </div>\n  1060‚Üí                </div>\n  1061‚Üí              )}\n  1062‚Üí            </div>\n  1063‚Üí\n  1064‚Üí            {/* Patient Information */}\n  1065‚Üí            {patient && (\n  1066‚Üí              <div className=\"space-y-6\">\n  1067‚Üí                <div>\n  1068‚Üí                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Patient Information</h3>\n  1069‚Üí                  <div className=\"space-y-4\">\n  1070‚Üí                    <div className=\"flex justify-between items-start\">\n  1071‚Üí                      <span className=\"text-sm font-medium text-gray-600\">Name:</span>\n  1072‚Üí                      <span className=\"text-sm text-gray-900\">\n  1073‚Üí                        {patient.name || patient.fullName || patient.full_name || 'N/A'}\n  1074‚Üí                      </span>\n  1075‚Üí                    </div>\n  1076‚Üí\n  1077‚Üí                    {(patient.age || patient.dateOfBirth || patient.date_of_birth) && (\n  1078‚Üí                      <div className=\"flex justify-between items-start\">\n  1079‚Üí                        <span className=\"text-sm font-medium text-gray-600\">Age:</span>\n  1080‚Üí                        <span className=\"text-sm text-gray-900\">\n  1081‚Üí                          {patient.age ? `${patient.age} years` :\n  1082‚Üí                           patient.dateOfBirth || patient.date_of_birth ?\n  1083‚Üí                           `${new Date().getFullYear() - new Date(patient.dateOfBirth || patient.date_of_birth).getFullYear()} years` :\n  1084‚Üí                           'N/A'}\n  1085‚Üí                        </span>\n  1086‚Üí                      </div>\n  1087‚Üí                    )}\n  1088‚Üí\n  1089‚Üí                    <div className=\"flex justify-between items-start\">\n  1090‚Üí                      <span className=\"text-sm font-medium text-gray-600\">Gender:</span>\n  1091‚Üí                      <span className=\"text-sm text-gray-900 capitalize\">{patient.gender || 'N/A'}</span>\n  1092‚Üí                    </div>\n  1093‚Üí                    \n  1094‚Üí                    {patient.email && (\n  1095‚Üí                      <div className=\"flex justify-between items-start\">\n  1096‚Üí                        <span className=\"text-sm font-medium text-gray-600\">Email:</span>\n  1097‚Üí                        <span className=\"text-sm text-gray-900\">{patient.email}</span>\n  1098‚Üí                      </div>\n  1099‚Üí                    )}\n  1100‚Üí                    \n  1101‚Üí                    {patient.phone && (\n  1102‚Üí                      <div className=\"flex justify-between items-start\">\n  1103‚Üí                        <span className=\"text-sm font-medium text-gray-600\">Phone:</span>\n  1104‚Üí                        <span className=\"text-sm text-gray-900\">{patient.phone}</span>\n  1105‚Üí                      </div>\n  1106‚Üí                    )}\n  1107‚Üí                  </div>\n  1108‚Üí                </div>\n  1109‚Üí\n  1110‚Üí                {patient.notes && (\n  1111‚Üí                  <div>\n  1112‚Üí                    <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Patient Notes</h4>\n  1113‚Üí                    <div className=\"bg-gray-50 p-3 rounded-md\">\n  1114‚Üí                      <p className=\"text-sm text-gray-700\">{patient.notes}</p>\n  1115‚Üí                    </div>\n  1116‚Üí                  </div>\n  1117‚Üí                )}\n  1118‚Üí              </div>\n  1119‚Üí            )}\n  1120‚Üí          </div>\n  1121‚Üí\n  1122‚Üí          {/* Report Preview Placeholder */}\n  1123‚Üí          <div className=\"mt-8\">\n  1124‚Üí            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Report Preview</h3>\n  1125‚Üí            <div className=\"bg-gray-100 rounded-lg p-8 text-center\">\n  1126‚Üí              <FileText className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n  1127‚Üí              <h4 className=\"text-lg font-medium text-gray-600 mb-2\">Report Preview</h4>\n  1128‚Üí              <p className=\"text-gray-500 mb-4\">\n  1129‚Üí                Preview functionality will be available in a future update.\n  1130‚Üí              </p>\n  1131‚Üí              <button\n  1132‚Üí                onClick={() => onDownload(report)}\n  1133‚Üí                className=\"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-lg font-medium\"\n  1134‚Üí              >\n  1135‚Üí                Download Report to View\n  1136‚Üí              </button>\n  1137‚Üí            </div>\n  1138‚Üí          </div>\n  1139‚Üí        </div>\n  1140‚Üí      </div>\n  1141‚Üí    </div>\n  1142‚Üí  );\n  1143‚Üí};\n  1144‚Üí\n  1145‚Üíexport default ReportViewer;\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"fd0a5533-6987-4643-98f4-e7a097dadab5","timestamp":"2025-12-18T12:11:14.938Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\clinic\\ReportViewer.jsx","content":"import React, { useState, useEffect } from 'react';\nimport { \n  FileText, \n  Download, \n  Eye, \n  Search,\n  Filter,\n  Calendar,\n  Users,\n  Upload,\n  X,\n  AlertTriangle,\n  CheckCircle,\n  Lock\n} from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { useAuth } from '../../contexts/AuthContext';\nimport DatabaseService from '../../services/databaseService';\nimport SubscriptionPopup from '../admin/SubscriptionPopup';\n\nconst ReportViewer = ({ clinicId, patients = [], reports: initialReports, onUpdate }) => {\n  const { user } = useAuth();\n  const [reports, setReports] = useState([]);\n  const [filteredReports, setFilteredReports] = useState([]);\n  const [responseReports, setResponseReports] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedPatient, setSelectedPatient] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [showReportDetails, setShowReportDetails] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [showSubscriptionPopup, setShowSubscriptionPopup] = useState(false);\n  const [subscription, setSubscription] = useState(null);\n  const [error, setError] = useState(null);\n  const [isLimitReached, setIsLimitReached] = useState(false);\n\n  // Log props on mount\n  console.log('INFO: ReportViewer mounted with:', {\n    clinicId,\n    patientsCount: patients?.length || 0,\n    initialReportsCount: initialReports?.length || 0\n  });\n\n  // Error boundary-like error handling\n  const handleError = (error, context) => {\n    console.error(`ERROR: ReportViewer Error in ${context}:`, error);\n    const errorMessage = error?.message || 'Unknown error occurred';\n    setError(`Error in ${context}: ${errorMessage}`);\n    toast.error(`Failed to ${context}. Please try again.`);\n  };\n\n  // Load reports directly from database\n  useEffect(() => {\n    loadReports();\n  }, [clinicId]);\n\n  // Check limit status whenever reports or clinicId changes\n  useEffect(() => {\n    const checkLimit = async () => {\n      const limitCheck = await checkReportLimit();\n      setIsLimitReached(limitCheck.limitReached);\n    };\n    checkLimit();\n  }, [reports, clinicId]);\n\n  // Also use initialReports if provided\n  useEffect(() => {\n    if (initialReports && initialReports.length > 0) {\n      setReports(initialReports);\n    }\n  }, [initialReports]);\n\n  const loadReports = async () => {\n    if (!clinicId) {\n      console.warn('WARNING: No clinicId provided to loadReports');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null); // Clear any previous errors\n      console.log('========================================');\n      console.log('INFO: LOADING REPORTS FOR CLINIC:', clinicId);\n      console.log('========================================');\n\n      // Load reports from database (async to handle both database and localStorage)\n      const reportsData = await DatabaseService.getReportsByClinic(clinicId);\n      console.log('INFO: Reports loaded from database:', reportsData?.length || 0);\n\n      if (reportsData && reportsData.length > 0) {\n        console.log('INFO: ALL REPORTS DATA:', JSON.stringify(reportsData, null, 2));\n        console.log('INFO: First report structure:', reportsData[0]);\n      } else {\n        console.log('ERROR: NO REPORTS RETURNED FROM DATABASE');\n      }\n\n      // Load subscription data (async)\n      const subscriptions = await DatabaseService.get('subscriptions') || [];\n      const clinicSubscription = subscriptions.find(sub => sub.clinicId === clinicId);\n      setSubscription(clinicSubscription);\n\n      // Ensure reportsData is an array\n      const validReports = Array.isArray(reportsData) ? reportsData : [];\n      console.log('INFO: Setting reports state with', validReports.length, 'reports');\n      setReports(validReports);\n\n      if (validReports.length === 0) {\n        console.log('WARNING: No reports found for clinic:', clinicId);\n      }\n    } catch (error) {\n      console.error('ERROR: Error loading reports:', error);\n      console.error('ERROR: Error stack:', error.stack);\n      handleError(error, 'load reports');\n      setReports([]); // Set empty array on error\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    try {\n      applyFilters();\n    } catch (error) {\n      console.error('ERROR: Error in applyFilters:', error);\n      setFilteredReports([]);\n    }\n  }, [reports, searchTerm, selectedPatient, dateFilter]);\n\n  const applyFilters = () => {\n    console.log('DEBUG: Applying filters - Total reports:', reports.length);\n    console.log('DEBUG: Current filters:', { searchTerm, selectedPatient, dateFilter });\n    console.log('DEBUG: Patients available:', patients?.length || 0);\n\n    // Separate response reports from regular reports\n    const allResponseReports = reports.filter(report => {\n      const isResponseReport = report.reportData?.isResponseReport ||\n                              report.report_data?.isResponseReport ||\n                              report.reportData?.report_type === 'Response Report' ||\n                              report.reportData?.reportType === 'Response Report' ||\n                              report.fileName?.toLowerCase().includes('response');\n      return isResponseReport;\n    });\n\n    const regularReports = reports.filter(report => {\n      const isResponseReport = report.reportData?.isResponseReport ||\n                              report.report_data?.isResponseReport ||\n                              report.reportData?.report_type === 'Response Report' ||\n                              report.reportData?.reportType === 'Response Report' ||\n                              report.fileName?.toLowerCase().includes('response');\n      return !isResponseReport;\n    });\n\n    console.log('DEBUG: Response reports found:', allResponseReports.length);\n    console.log('DEBUG: Regular reports found:', regularReports.length);\n\n    let filtered = [...regularReports];\n    console.log('DEBUG: Starting with regular reports:', filtered.length);\n\n    // Search filter\n    if (searchTerm) {\n      filtered = filtered.filter(report => {\n        const patient = (patients || []).find(p => p.id === report.patientId);\n        return (\n          report.fileName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          report.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          patient?.name?.toLowerCase().includes(searchTerm.toLowerCase())\n        );\n      });\n      console.log('DEBUG: After search filter:', filtered.length);\n    }\n\n    // Patient filter\n    if (selectedPatient) {\n      console.log('DEBUG: Filtering by patient:', selectedPatient);\n      console.log('DEBUG: Reports before patient filter:', filtered.map(r => ({\n        id: r.id,\n        patientId: r.patientId,\n        fileName: r.fileName\n      })));\n      filtered = filtered.filter(report => report.patientId === selectedPatient);\n      console.log('DEBUG: After patient filter:', filtered.length);\n    }\n\n    // Date filter\n    if (dateFilter) {\n      const today = new Date();\n      let filterDate = new Date();\n\n      switch (dateFilter) {\n        case '7days':\n          filterDate.setDate(today.getDate() - 7);\n          break;\n        case '30days':\n          filterDate.setDate(today.getDate() - 30);\n          break;\n        case '90days':\n          filterDate.setDate(today.getDate() - 90);\n          break;\n        default:\n          filterDate = null;\n      }\n\n      if (filterDate) {\n        filtered = filtered.filter(report => new Date(report.createdAt) >= filterDate);\n        console.log('DEBUG: After date filter:', filtered.length);\n      }\n    }\n\n    // Sort by creation date (newest first)\n    filtered.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n    allResponseReports.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n\n    console.log('DEBUG: Final filtered regular reports:', filtered.length);\n    console.log('DEBUG: Final response reports:', allResponseReports.length);\n    setFilteredReports(filtered);\n    setResponseReports(allResponseReports);\n  };\n\n  // Check if clinic has reached report limit\n  const checkReportLimit = async () => {\n    // Check trial expiry first\n    if (clinicId) {\n      try {\n        const clinic = await DatabaseService.findById('clinics', clinicId);\n        if (clinic && clinic.trialEndDate) {\n          const trialEndDate = new Date(clinic.trialEndDate);\n          const now = new Date();\n          if (now > trialEndDate && clinic.subscriptionStatus === 'trial') {\n            // Trial expired - update status\n            await DatabaseService.update('clinics', clinicId, {\n              subscriptionStatus: 'expired',\n              isActive: false\n            });\n            return { limitReached: true, reason: 'trial_expired' };\n          }\n        }\n\n        // Check report quota using actual clinic data\n        if (clinic) {\n          if (clinic.subscriptionStatus === 'active') {\n            if (clinic.reportsUsed >= clinic.reportsAllowed) {\n              return { limitReached: true, reason: 'quota_exceeded' };\n            }\n          } else {\n            // Trial subscription - 10 report limit\n            if (clinic.reportsUsed >= 10) {\n              return { limitReached: true, reason: 'quota_exceeded' };\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Error checking report limit:', error);\n      }\n    }\n\n    return { limitReached: false, reason: null };\n  };\n\n  // Get clinic's current usage info\n  const getClinicUsageInfo = () => {\n    if (subscription && subscription.status === 'active') {\n      return {\n        used: reports.length,\n        allowed: subscription.reportsAllowed,\n        remaining: subscription.reportsAllowed - reports.length,\n        isTrial: false,\n        planName: subscription.planName\n      };\n    } else {\n      return {\n        used: reports.length,\n        allowed: 10,\n        remaining: 10 - reports.length,\n        isTrial: true,\n        planName: 'Trial Plan'\n      };\n    }\n  };\n\n  const handleDownloadReport = async (report) => {\n    try {\n      // Validate report object\n      if (!report) {\n        toast.error('Invalid report data');\n        return;\n      }\n\n      // Check if clinic has reached report limit\n      const limitCheck = await checkReportLimit();\n      if (limitCheck.limitReached) {\n        setShowSubscriptionPopup(true);\n        if (limitCheck.reason === 'trial_expired') {\n          toast.error('Your trial has expired. Please upgrade to continue downloading reports.');\n        } else {\n          toast.error('Report limit reached. Please upgrade your plan to continue downloading reports.');\n        }\n        return;\n      }\n\n      setLoading(true);\n\n      // Get file name from multiple possible sources\n      const fileName = report.fileName || report.file_name || report.reportData?.file_name ||\n                      report.report_data?.file_name || 'report.edf';\n\n      console.log(' Downloading report:', fileName);\n      console.log('INFO: Report data:', {\n        id: report.id,\n        fileName,\n        filePath: report.filePath || report.file_path,\n        reportData: report.reportData || report.report_data\n      });\n\n      let downloadSuccess = false;\n\n      // NEW: Try Supabase Storage first (our current storage solution)\n      const filePath = report.filePath || report.file_path ||\n                       report.reportData?.file_path || report.report_data?.file_path;\n\n      if (filePath) {\n        try {\n          console.log(' Attempting Supabase Storage download from:', filePath);\n\n          // Import StorageService dynamically\n          const StorageService = (await import('../../services/storageService')).default;\n\n          // Download file from Supabase Storage\n          const fileBlob = await StorageService.downloadFile(filePath);\n\n          if (fileBlob) {\n            // Create blob URL and download\n            const blobUrl = URL.createObjectURL(fileBlob);\n            const link = document.createElement('a');\n            link.href = blobUrl;\n            link.download = fileName;\n            link.style.display = 'none';\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n\n            // Clean up blob URL\n            setTimeout(() => URL.revokeObjectURL(blobUrl), 100);\n\n            toast.success(` Downloaded ${fileName}`);\n            downloadSuccess = true;\n            console.log('SUCCESS: Supabase Storage download successful');\n          }\n        } catch (storageError) {\n          console.error('ERROR: Supabase Storage download failed:', storageError);\n          toast.error(`Storage error: ${storageError.message}`);\n        }\n      }\n\n      // Legacy: Try file URL if Supabase download failed\n      if (!downloadSuccess && (report.fileUrl || report.file_url)) {\n        try {\n          const fileUrl = report.fileUrl || report.file_url;\n          console.log(' Attempting URL download from:', fileUrl);\n\n          const link = document.createElement('a');\n          link.href = fileUrl;\n          link.download = fileName;\n          link.target = '_blank';\n          link.style.display = 'none';\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link);\n\n          toast.success(` Downloaded ${fileName}`);\n          downloadSuccess = true;\n          console.log('SUCCESS: URL download successful');\n        } catch (urlError) {\n          console.error('ERROR: URL download failed:', urlError);\n        }\n      }\n\n      // Final fallback\n      if (!downloadSuccess) {\n        console.error('WARNING: No valid download method found for report:', {\n          id: report.id,\n          filePath: report.filePath || report.file_path,\n          fileUrl: report.fileUrl || report.file_url,\n          fileName\n        });\n        toast.error(`File not found in storage. Report: ${fileName}. Please check if file was uploaded correctly.`);\n      } else {\n        // Increment download counter (shared quota with uploads)\n        try {\n          const clinic = await DatabaseService.findById('clinics', clinicId);\n          if (clinic) {\n            await DatabaseService.update('clinics', clinicId, {\n              reportsUsed: (clinic.reportsUsed || 0) + 1\n            });\n            console.log('SUCCESS: Incremented download counter for clinic:', clinicId);\n\n            // Reload reports to update usage display\n            await loadReports();\n          }\n        } catch (counterError) {\n          console.error('WARNING: Failed to increment download counter:', counterError);\n          // Don't show error to user - download was successful\n        }\n      }\n    } catch (error) {\n      console.error('ERROR: Error downloading report:', error);\n      toast.error(`Failed to download report: ${error?.message || 'Unknown error'}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleViewReport = (report) => {\n    setSelectedReport(report);\n    setShowReportDetails(true);\n  };\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedPatient('');\n    setDateFilter('');\n  };\n\n  const refreshReports = async () => {\n    try {\n      setError(null);\n      await loadReports();\n      if (onUpdate) onUpdate();\n      toast.success('Reports refreshed successfully');\n    } catch (error) {\n      console.error('ERROR: Error refreshing reports:', error);\n      handleError(error, 'refresh reports');\n    }\n  };\n\n  const repairDataAndReload = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      // Validate and repair data\n      const result = await DatabaseService.validateAndRepairData();\n      if (result.success) {\n        toast.success(`Data validation complete${result.repairCount > 0 ? ` (repaired ${result.repairCount} issues)` : ''}`);\n      }\n      \n      // Refresh connection\n      await DatabaseService.refreshConnection();\n      \n      // Reload reports\n      await loadReports();\n      \n      toast.success('Data repair and reload completed successfully');\n    } catch (error) {\n      console.error('ERROR: Error during data repair:', error);\n      handleError(error, 'repair data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubscription = (subscriptionData) => {\n    try {\n      // Save subscription to database (synchronous)\n      DatabaseService.add('subscriptions', subscriptionData);\n      \n      // Update clinic's subscription status (synchronous)\n      DatabaseService.update('clinics', subscriptionData.clinicId, {\n        subscriptionStatus: 'active',\n        reportsAllowed: subscriptionData.reportsAllowed\n      });\n      \n      // Reload data to reflect changes\n      loadReports();\n      \n      toast.success('Subscription updated successfully!');\n    } catch (error) {\n      console.error('Error updating subscription:', error);\n      toast.error('Failed to update subscription');\n    }\n  };\n\n  const getPatientName = (patientId) => {\n    const patient = patients.find(p => p.id === patientId);\n    \n    if (!patient) {\n      console.log(`WARNING: Patient lookup failed for ID: ${patientId}`);\n      console.log('DEBUG: Available patients:', patients.map(p => ({ id: p.id, name: p.name })));\n      \n      // Try to find in localStorage as fallback\n      const localStoragePatients = JSON.parse(localStorage.getItem('patients') || '[]');\n      const fallbackPatient = localStoragePatients.find(p => p.id === patientId);\n      \n      if (fallbackPatient) {\n        console.log(`SUCCESS: Found patient in localStorage fallback: ${fallbackPatient.name}`);\n        return fallbackPatient.name;\n      }\n      \n      return 'Unknown Patient';\n    }\n    \n    return patient.name;\n  };\n\n  if (showReportDetails && selectedReport) {\n    // Find patient with multiple field name variations\n    const modalPatient = (patients || []).find(p =>\n      p.id === selectedReport.patientId ||\n      p.id === selectedReport.patient_id ||\n      p.id === selectedReport.reportData?.patientId\n    );\n\n    console.log('INFO: Report Details Modal - Patient lookup:', {\n      reportPatientId: selectedReport.patientId,\n      report_patient_id: selectedReport.patient_id,\n      foundPatient: modalPatient ? {\n        id: modalPatient.id,\n        name: modalPatient.name || modalPatient.fullName || modalPatient.full_name\n      } : null\n    });\n\n    return (\n      <ReportDetails\n        report={selectedReport}\n        patient={modalPatient}\n        onBack={() => {\n          setShowReportDetails(false);\n          setSelectedReport(null);\n        }}\n        onDownload={handleDownloadReport}\n      />\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Patient Reports</h2>\n          <p className=\"text-gray-600\">View and download EEG reports for your patients</p>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-sm text-gray-600\">\n            Total Reports: <span className=\"font-semibold\">{reports.length}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Usage Summary */}\n      <div className=\"bg-gradient-to-r from-[#E4EFFF] to-indigo-50 rounded-lg shadow-sm border border-blue-200 p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-blue-900\">Your Usage Summary</h3>\n            {(() => {\n              const usageInfo = getClinicUsageInfo();\n              return (\n                <div className=\"mt-2 space-y-1\">\n                  <p className=\"text-blue-700\">\n                    <strong>Plan:</strong> {usageInfo.planName}\n                  </p>\n                  <p className=\"text-blue-700\">\n                    <strong>Usage:</strong> {usageInfo.used}/{usageInfo.allowed} reports\n                  </p>\n                  <p className=\"text-blue-700\">\n                    <strong>Remaining:</strong> {usageInfo.remaining} reports\n                  </p>\n                  {usageInfo.remaining <= 2 && (\n                    <div className=\"flex items-center space-x-2 mt-2\">\n                      <AlertTriangle className=\"h-4 w-4 text-orange-500\" />\n                      <span className=\"text-orange-700 text-sm font-medium\">\n                        {usageInfo.remaining === 0 ? 'Report limit reached!' : 'Approaching report limit'}\n                      </span>\n                    </div>\n                  )}\n                </div>\n              );\n            })()}\n          </div>\n          <div className=\"text-right\">\n            {(() => {\n              const usageInfo = getClinicUsageInfo();\n              const percentage = (usageInfo.used / usageInfo.allowed) * 100;\n              return (\n                <div>\n                  <div className=\"text-2xl font-bold text-blue-900\">{usageInfo.used}</div>\n                  <div className=\"text-sm text-blue-700\">Reports Used</div>\n                  <div className=\"w-24 h-2 bg-blue-200 rounded-full mt-2\">\n                    <div \n                      className={`h-2 rounded-full ${\n                        percentage >= 90 ? 'bg-red-500' : \n                        percentage >= 75 ? 'bg-orange-500' : 'bg-[#323956]'\n                      }`}\n                      style={{ width: `${Math.min(percentage, 100)}%` }}\n                    ></div>\n                  </div>\n                </div>\n              );\n            })()}\n          </div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search reports...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n            />\n          </div>\n          \n          <select\n            value={selectedPatient}\n            onChange={(e) => setSelectedPatient(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 bg-white text-black\"\n            style={{\n              color: '#000000',\n              backgroundColor: '#FFFFFF'\n            }}\n          >\n            <option value=\"\" className=\"text-gray-900 bg-white\">\n              All Patients\n            </option>\n            {(patients || []).map(patient => (\n              <option\n                key={patient.id}\n                value={patient.id}\n                className=\"text-gray-900 bg-white\"\n              >\n                {patient.fullName || patient.full_name || patient.name || 'Unknown Patient'}\n              </option>\n            ))}\n          </select>\n\n          <select\n            value={dateFilter}\n            onChange={(e) => setDateFilter(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 bg-white text-black\"\n            style={{\n              color: '#000000',\n              backgroundColor: '#FFFFFF'\n            }}\n          >\n            <option value=\"\" style={{\n              color: '#000000 !important',\n              backgroundColor: '#FFFFFF !important',\n              padding: '8px',\n              fontSize: '14px',\n              fontWeight: '500'\n            }}>All Time</option>\n            <option value=\"7days\" style={{\n              color: '#000000 !important',\n              backgroundColor: '#FFFFFF !important',\n              padding: '8px',\n              fontSize: '14px',\n              fontWeight: '500'\n            }}>Last 7 days</option>\n            <option value=\"30days\" style={{\n              color: '#000000 !important',\n              backgroundColor: '#FFFFFF !important',\n              padding: '8px',\n              fontSize: '14px',\n              fontWeight: '500'\n            }}>Last 30 days</option>\n            <option value=\"90days\" style={{\n              color: '#000000 !important',\n              backgroundColor: '#FFFFFF !important',\n              padding: '8px',\n              fontSize: '14px',\n              fontWeight: '500'\n            }}>Last 90 days</option>\n          </select>\n          \n          <button\n            onClick={clearFilters}\n            className=\"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-center space-x-2\"\n          >\n            <X className=\"h-4 w-4\" />\n            <span>Clear</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Response Reports from Super Admin */}\n      {responseReports.length > 0 && (\n        <div className=\"bg-white rounded-lg shadow-sm border-2 border-green-500 overflow-hidden\">\n          <div className=\"px-6 py-4 border-b border-green-200 bg-green-50\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-semibold text-green-900 flex items-center space-x-2\">\n                <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                <span>Response Reports from NeuroSense (</span><span>{responseReports.length})</span>\n              </h3>\n              <span className=\"px-3 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full\">\n                Admin Responses\n              </span>\n            </div>\n            <p className=\"text-sm text-green-700 mt-1\">\n              Analysis reports sent by NeuroSense Admin for your patients\n            </p>\n          </div>\n\n          <div className=\"divide-y divide-gray-200\">\n            {responseReports.map((report) => {\n              const patient = (patients || []).find(p =>\n                p.id === report.patientId ||\n                p.id === report.patient_id ||\n                p.id === report.reportData?.patientId\n              );\n\n              return (\n                <div key={report.id} className=\"p-6 hover:bg-green-50 transition-colors border-l-4 border-green-500\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"h-12 w-12 rounded-lg bg-green-100 flex items-center justify-center\">\n                        <FileText className=\"h-6 w-6 text-green-600\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-2\">\n                          <h4 className=\"text-lg font-medium text-gray-900\">\n                            {report.fileName || 'Response Report'}\n                          </h4>\n                          <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded\">\n                            NEW\n                          </span>\n                        </div>\n                        <div className=\"flex items-center space-x-4 mt-1\">\n                          <div className=\"flex items-center space-x-2\">\n                            <Users className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-sm text-gray-600\">\n                              {patient?.name || patient?.fullName || patient?.full_name || 'Unknown Patient'}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center space-x-2\">\n                            <Calendar className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-sm text-gray-600\">\n                              {new Date(report.createdAt).toLocaleDateString()}\n                            </span>\n                          </div>\n                          <span className=\"text-xs bg-green-50 text-green-700 px-2 py-1 rounded\">\n                            From Super Admin\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <button\n                        onClick={() => handleViewReport(report)}\n                        className=\"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors\"\n                        title=\"View Report\"\n                      >\n                        <Eye className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        onClick={() => handleDownloadReport(report)}\n                        className=\"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors\"\n                        title=\"Download Report\"\n                      >\n                        <Download className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Regular Patient Reports */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50\">\n          <h3 className=\"text-lg font-medium text-gray-900\">\n            Your Uploaded Reports ({filteredReports.length})\n          </h3>\n        </div>\n        \n        {filteredReports.length > 0 ? (\n          <div className=\"divide-y divide-gray-200\">\n            {filteredReports.map((report) => {\n              // Try multiple field name variations for patient lookup\n              const patient = (patients || []).find(p =>\n                p.id === report.patientId ||\n                p.id === report.patient_id ||\n                p.id === report.reportData?.patientId\n              );\n\n              // Log if patient not found\n              if (!patient) {\n                console.warn('WARNING: Patient not found for report:', {\n                  reportId: report.id,\n                  patientId: report.patientId,\n                  patient_id: report.patient_id,\n                  availablePatients: patients?.map(p => ({ id: p.id, name: p.name || p.fullName }))\n                });\n              }\n\n              return (\n                <div key={report.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"h-12 w-12 rounded-lg bg-[#CAE0FF] flex items-center justify-center\">\n                        <FileText className=\"h-6 w-6 text-[#323956]\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <h4 className=\"text-lg font-medium text-gray-900\">\n                          {report.fileName || 'EEG Report'}\n                        </h4>\n                        <div className=\"flex items-center space-x-4 mt-1\">\n                          <div className=\"flex items-center space-x-2\">\n                            <Users className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-sm text-gray-600\">\n                              {patient?.name || patient?.fullName || patient?.full_name || 'Unknown Patient'}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center space-x-2\">\n                            <Calendar className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-sm text-gray-600\">\n                              {new Date(report.createdAt).toLocaleDateString()}\n                            </span>\n                          </div>\n                          {report.fileSize && (\n                            <span className=\"text-sm text-gray-500\">\n                              {report.fileSize}\n                            </span>\n                          )}\n                        </div>\n                        {report.title && report.title !== report.fileName && (\n                          <p className=\"text-sm text-gray-600 mt-2\">{report.title}</p>\n                        )}\n                        {report.notes && (\n                          <p className=\"text-sm text-gray-500 mt-2 italic\">\n                            {report.notes.length > 100 \n                              ? `${report.notes.substring(0, 100)}...`\n                              : report.notes\n                            }\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-3\">\n                      <button\n                        onClick={() => handleViewReport(report)}\n                        className=\"p-2 text-primary-600 hover:text-primary-800 hover:bg-primary-50 rounded-lg transition-colors\"\n                        title=\"View Details\"\n                      >\n                        <Eye className=\"h-5 w-5\" />\n                      </button>\n                      {isLimitReached ? (\n                        <button\n                          onClick={() => setShowSubscriptionPopup(true)}\n                          className=\"p-2 text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg transition-colors\"\n                          title=\"Upgrade required to download\"\n                        >\n                          <Lock className=\"h-5 w-5\" />\n                        </button>\n                      ) : (\n                        <button\n                          onClick={() => handleDownloadReport(report)}\n                          disabled={loading}\n                          className=\"p-2 text-[#323956] hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50\"\n                          title=\"Download Report\"\n                        >\n                          <Download className=\"h-5 w-5\" />\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              {error ? 'Failed to load reports' : (\n                searchTerm || selectedPatient || dateFilter \n                  ? 'No reports match your filters' \n                  : 'No reports available'\n              )}\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              {error ? error : (\n                searchTerm || selectedPatient || dateFilter\n                  ? 'Try adjusting your search criteria'\n                  : 'Reports will appear here once they are uploaded by your administrator'\n              )}\n            </p>\n            <div className=\"space-x-4\">\n              {(searchTerm || selectedPatient || dateFilter) && !error && (\n                <button\n                  onClick={clearFilters}\n                  className=\"text-primary-600 hover:text-primary-800 font-medium\"\n                >\n                  Clear all filters\n                </button>\n              )}\n              {error && (\n                <>\n                  <button\n                    onClick={refreshReports}\n                    disabled={loading}\n                    className=\"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium disabled:opacity-50\"\n                  >\n                    {loading ? 'Refreshing...' : 'Try Again'}\n                  </button>\n                  <button\n                    onClick={repairDataAndReload}\n                    disabled={loading}\n                    className=\"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-medium disabled:opacity-50\"\n                  >\n                    {loading ? 'Repairing...' : 'Repair & Reload'}\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Info Banner */}\n      <div className=\"bg-[#E4EFFF] border border-blue-200 rounded-lg p-4\">\n        <div className=\"flex\">\n          <div className=\"flex-shrink-0\">\n            <CheckCircle className=\"h-5 w-5 text-blue-400\" />\n          </div>\n          <div className=\"ml-3\">\n            <h3 className=\"text-sm font-medium text-blue-800\">\n              About Report Access\n            </h3>\n            <div className=\"mt-2 text-sm text-blue-700\">\n              <p>\n                ‚Ä¢ Reports are uploaded by your clinic administrator<br/>\n                ‚Ä¢ You can view and download all reports for your patients<br/>\n                ‚Ä¢ Reports are securely stored and only accessible by authorized personnel<br/>\n                ‚Ä¢ For technical support, contact your system administrator\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Subscription Popup */}\n      <SubscriptionPopup\n        isOpen={showSubscriptionPopup}\n        onClose={() => setShowSubscriptionPopup(false)}\n        clinicId={clinicId}\n        currentUsage={reports.length}\n        onSubscribe={handleSubscription}\n        clinicInfo={{\n          name: user?.clinicName || user?.name || 'Clinic',\n          email: user?.email || '',\n          phone: user?.phone || ''\n        }}\n      />\n    </div>\n  );\n};\n\n// Report Details Component\nconst ReportDetails = ({ report, patient, onBack, onDownload }) => {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center space-x-4\">\n        <button\n          onClick={onBack}\n          className=\"text-primary-600 hover:text-primary-800 font-medium\"\n        >\n          ‚Üê Back to Reports\n        </button>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-gray-200 bg-gray-50\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"h-12 w-12 rounded-lg bg-[#CAE0FF] flex items-center justify-center\">\n                <FileText className=\"h-6 w-6 text-[#323956]\" />\n              </div>\n              <div>\n                <h2 className=\"text-xl font-semibold text-gray-900\">\n                  {report.fileName || 'EEG Report'}\n                </h2>\n                <p className=\"text-sm text-gray-600\">\n                  Report Details and Information\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={() => onDownload(report)}\n              className=\"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2\"\n            >\n              <Download className=\"h-4 w-4\" />\n              <span>Download</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            {/* Report Information */}\n            <div className=\"space-y-6\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Report Information</h3>\n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between items-start\">\n                    <span className=\"text-sm font-medium text-gray-600\">File Name:</span>\n                    <span className=\"text-sm text-gray-900\">{report.fileName}</span>\n                  </div>\n                  \n                  {report.title && (\n                    <div className=\"flex justify-between items-start\">\n                      <span className=\"text-sm font-medium text-gray-600\">Title:</span>\n                      <span className=\"text-sm text-gray-900\">{report.title}</span>\n                    </div>\n                  )}\n                  \n                  <div className=\"flex justify-between items-start\">\n                    <span className=\"text-sm font-medium text-gray-600\">File Type:</span>\n                    <span className=\"text-sm text-gray-900\">{report.fileType || 'PDF'}</span>\n                  </div>\n                  \n                  {report.fileSize && (\n                    <div className=\"flex justify-between items-start\">\n                      <span className=\"text-sm font-medium text-gray-600\">File Size:</span>\n                      <span className=\"text-sm text-gray-900\">{report.fileSize}</span>\n                    </div>\n                  )}\n                  \n                  <div className=\"flex justify-between items-start\">\n                    <span className=\"text-sm font-medium text-gray-600\">Created:</span>\n                    <span className=\"text-sm text-gray-900\">\n                      {new Date(report.createdAt).toLocaleString()}\n                    </span>\n                  </div>\n                  \n                  {report.uploadedBy && (\n                    <div className=\"flex justify-between items-start\">\n                      <span className=\"text-sm font-medium text-gray-600\">Uploaded by:</span>\n                      <span className=\"text-sm text-gray-900\">{report.uploadedBy}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {report.notes && (\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Notes</h4>\n                  <div className=\"bg-gray-50 p-3 rounded-md\">\n                    <p className=\"text-sm text-gray-700\">{report.notes}</p>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Patient Information */}\n            {patient && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Patient Information</h3>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex justify-between items-start\">\n                      <span className=\"text-sm font-medium text-gray-600\">Name:</span>\n                      <span className=\"text-sm text-gray-900\">\n                        {patient.name || patient.fullName || patient.full_name || 'N/A'}\n                      </span>\n                    </div>\n\n                    {(patient.age || patient.dateOfBirth || patient.date_of_birth) && (\n                      <div className=\"flex justify-between items-start\">\n                        <span className=\"text-sm font-medium text-gray-600\">Age:</span>\n                        <span className=\"text-sm text-gray-900\">\n                          {patient.age ? `${patient.age} years` :\n                           patient.dateOfBirth || patient.date_of_birth ?\n                           `${new Date().getFullYear() - new Date(patient.dateOfBirth || patient.date_of_birth).getFullYear()} years` :\n                           'N/A'}\n                        </span>\n                      </div>\n                    )}\n\n                    <div className=\"flex justify-between items-start\">\n                      <span className=\"text-sm font-medium text-gray-600\">Gender:</span>\n                      <span className=\"text-sm text-gray-900 capitalize\">{patient.gender || 'N/A'}</span>\n                    </div>\n                    \n                    {patient.email && (\n                      <div className=\"flex justify-between items-start\">\n                        <span className=\"text-sm font-medium text-gray-600\">Email:</span>\n                        <span className=\"text-sm text-gray-900\">{patient.email}</span>\n                      </div>\n                    )}\n                    \n                    {patient.phone && (\n                      <div className=\"flex justify-between items-start\">\n                        <span className=\"text-sm font-medium text-gray-600\">Phone:</span>\n                        <span className=\"text-sm text-gray-900\">{patient.phone}</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {patient.notes && (\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Patient Notes</h4>\n                    <div className=\"bg-gray-50 p-3 rounded-md\">\n                      <p className=\"text-sm text-gray-700\">{patient.notes}</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Report Preview Placeholder */}\n          <div className=\"mt-8\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Report Preview</h3>\n            <div className=\"bg-gray-100 rounded-lg p-8 text-center\">\n              <FileText className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n              <h4 className=\"text-lg font-medium text-gray-600 mb-2\">Report Preview</h4>\n              <p className=\"text-gray-500 mb-4\">\n                Preview functionality will be available in a future update.\n              </p>\n              <button\n                onClick={() => onDownload(report)}\n                className=\"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-lg font-medium\"\n              >\n                Download Report to View\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportViewer;","numLines":1145,"startLine":1,"totalLines":1145}}}
{"parentUuid":"fd0a5533-6987-4643-98f4-e7a097dadab5","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01MGhi9zjpCdJiYYqnnHAWCb","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"This is the ReportViewer component, but it doesn't have the stress condition parameters display. Let me search for files that might have BMW report display or wellness score display. Let me look at the `wellnessAlgorithmService.js` file which was in the earlier results.","signature":"ErcDCkYIChgCKkAKHOn5jelFfYMA4Dg4X2SiydGmBw8h9UZKcG0Y2Mkjliiq/WRI/TGG+T4bqS99p1BUvXm3ygRyygJqE+qtxa2IEgzWWwPhraLT9FiW+U4aDC7fFy/xgpAS/4hzXiIwyND9PPJiqg5ifqEFGEw8cbKOmfxFoBJMyMpt50HxTHAMPV8i/QkDQvGcKbA+/QqZKp4CJRniGgEHPjCn341oYku3CngM9ZOCv+pzaa1KIWTpFnc1PqKzG0w4AxOdyygaKU9X+YhRwdSw4ji3xTnKRfCknTogEz90wDtsBtD7+epb+0Y/xLl3EJeBVWKlTD+jYrfWSo2W0fbPswQnU9aLAMb45eTHOpokH1LNfMalzxQ2PqN2zeMP71vXlYUudjf4TcJ9SSVJ1bFAyRECFeAIAcACKAUh9B15pAUWXXkB8XH8wV4UPilvihfWyoMK7g9n9gISGRSR7vjX3Y4jvsa3xsNJfUtbyr2656VDBP+StcB+ca2D0lxYMWDbuRWZOB8LXLidmmSo94JCImzG3dXX5yok/SVbxDInGH+nGDesFuCWsplxLgCrDLrIm+T7HTYgixgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":16015,"cache_read_input_tokens":24072,"cache_creation":{"ephemeral_5m_input_tokens":16015,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8Vdcwg87uAbfg8VwDb","type":"assistant","uuid":"eeeb4377-43a9-4e5b-8b0e-726fe667c90d","timestamp":"2025-12-18T12:11:20.549Z"}
{"parentUuid":"eeeb4377-43a9-4e5b-8b0e-726fe667c90d","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01MGhi9zjpCdJiYYqnnHAWCb","type":"message","role":"assistant","content":[{"type":"text","text":"Let me search for the BMW report display component that shows the stress parameters:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":16015,"cache_read_input_tokens":24072,"cache_creation":{"ephemeral_5m_input_tokens":16015,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8Vdcwg87uAbfg8VwDb","type":"assistant","uuid":"67fdfe18-f0a3-45aa-aeef-b880ca151b53","timestamp":"2025-12-18T12:11:21.113Z"}
{"parentUuid":"67fdfe18-f0a3-45aa-aeef-b880ca151b53","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01MGhi9zjpCdJiYYqnnHAWCb","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_016DFTM3tqaEEfgtSdsviZq2","name":"Grep","input":{"pattern":"fzRatio|czRatio|rzRatio","glob":"*.{jsx,js}","output_mode":"files_with_matches"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":16015,"cache_read_input_tokens":24072,"cache_creation":{"ephemeral_5m_input_tokens":16015,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8Vdcwg87uAbfg8VwDb","type":"assistant","uuid":"7ff6cf5a-d2dc-46b0-8b6e-24de54efc9d4","timestamp":"2025-12-18T12:11:22.703Z"}
{"parentUuid":"7ff6cf5a-d2dc-46b0-8b6e-24de54efc9d4","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01MGhi9zjpCdJiYYqnnHAWCb","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01JFu68qsx2mdPJmaWkii4de","name":"Glob","input":{"pattern":"**/*wellness*.{jsx,js}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":16015,"cache_read_input_tokens":24072,"cache_creation":{"ephemeral_5m_input_tokens":16015,"ephemeral_1h_input_tokens":0},"output_tokens":233,"service_tier":"standard"}},"requestId":"req_011CWE8Vdcwg87uAbfg8VwDb","type":"assistant","uuid":"95a16c47-e5b7-4f3d-984c-5ddcda777cfa","timestamp":"2025-12-18T12:11:23.123Z"}
{"parentUuid":"95a16c47-e5b7-4f3d-984c-5ddcda777cfa","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_016DFTM3tqaEEfgtSdsviZq2","type":"tool_result","content":"Found 1 file\nserver\\services\\algorithmCalculator.js"}]},"uuid":"65677045-47f1-4666-ba1c-35734b211c24","timestamp":"2025-12-18T12:11:27.049Z","toolUseResult":{"mode":"files_with_matches","filenames":["server\\services\\algorithmCalculator.js"],"numFiles":1}}
{"parentUuid":"65677045-47f1-4666-ba1c-35734b211c24","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01JFu68qsx2mdPJmaWkii4de","type":"tool_result","content":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\wellnessAlgorithmService.js"}]},"uuid":"0fb89706-4ee4-40b2-b38e-dce0d15cce65","timestamp":"2025-12-18T12:11:27.238Z","toolUseResult":{"filenames":["D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\wellnessAlgorithmService.js"],"durationMs":250,"numFiles":1,"truncated":false}}
{"parentUuid":"0fb89706-4ee4-40b2-b38e-dce0d15cce65","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_015BHWCW1xcd3Zy9PAMQvHDb","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Let me search for BMW report display components.","signature":"EtgBCkYIChgCKkBzVw7Lg5qWn+4vm48+GkQOlyeY6Cjwy/VeVLrXJjXGvtxaEUzoh8RfVARK7GvdU24Oh1ISpQhmHKImaEF/XLTQEgwRVqw7rWiwk6yn4PAaDKgo3XzJ8vtZv4LchiIw1mjse35RGQnmfFHTu+100O0Hl3RgcZwWU/coPVri6qycGHQxTk4mNo9w5WBX7pyPKkCUL1hdicSSFBQr5+wkIQ0I2VRb5QXZqcvL2Cqz2uPmw2/xoF3yqDxB1IPseWmX5QhmtSQvzyBmittUd0iA6EKfGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":548,"cache_read_input_tokens":40087,"cache_creation":{"ephemeral_5m_input_tokens":548,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE8WYj35gggJXKhKfe3A","type":"assistant","uuid":"c3e3d6bb-212c-46fa-9039-bac20dcc34f1","timestamp":"2025-12-18T12:11:30.862Z"}
{"parentUuid":"c3e3d6bb-212c-46fa-9039-bac20dcc34f1","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_015BHWCW1xcd3Zy9PAMQvHDb","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01FiLK7YFnaShmSJcetAmYm2","name":"Grep","input":{"pattern":"BMW|Brain.*Mental.*Wellness","glob":"**/*.jsx","output_mode":"files_with_matches"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":548,"cache_read_input_tokens":40087,"cache_creation":{"ephemeral_5m_input_tokens":548,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE8WYj35gggJXKhKfe3A","type":"assistant","uuid":"9753f3f4-0bb9-43cb-ab55-bf9d9a7128fd","timestamp":"2025-12-18T12:11:31.816Z"}
{"parentUuid":"9753f3f4-0bb9-43cb-ab55-bf9d9a7128fd","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_015BHWCW1xcd3Zy9PAMQvHDb","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BBT6WBrsVwqzeExxmQ88kz","name":"Glob","input":{"pattern":"**/*BMWReport*.{jsx,js}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":548,"cache_read_input_tokens":40087,"cache_creation":{"ephemeral_5m_input_tokens":548,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE8WYj35gggJXKhKfe3A","type":"assistant","uuid":"07ee811a-891f-408b-b105-af99df499bea","timestamp":"2025-12-18T12:11:32.220Z"}
{"parentUuid":"07ee811a-891f-408b-b105-af99df499bea","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_015BHWCW1xcd3Zy9PAMQvHDb","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01UuBi9bvRyds13FP9pfL6s9","name":"Glob","input":{"pattern":"**/*Analysis*.{jsx,js}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":548,"cache_read_input_tokens":40087,"cache_creation":{"ephemeral_5m_input_tokens":548,"ephemeral_1h_input_tokens":0},"output_tokens":204,"service_tier":"standard"}},"requestId":"req_011CWE8WYj35gggJXKhKfe3A","type":"assistant","uuid":"ec2efde5-af24-410e-9342-2ae9eea562c7","timestamp":"2025-12-18T12:11:32.466Z"}
{"parentUuid":"ec2efde5-af24-410e-9342-2ae9eea562c7","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01FiLK7YFnaShmSJcetAmYm2","type":"tool_result","content":"Found 1 file\nsrc\\pages\\Landing.jsx"}]},"uuid":"2eaa12f1-8563-446e-af57-98a966628d57","timestamp":"2025-12-18T12:11:37.488Z","toolUseResult":{"mode":"files_with_matches","filenames":["src\\pages\\Landing.jsx"],"numFiles":1}}
{"parentUuid":"2eaa12f1-8563-446e-af57-98a966628d57","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BBT6WBrsVwqzeExxmQ88kz","type":"tool_result","content":"No files found"}]},"uuid":"c349c5c6-061f-4725-9f46-54701a28d13b","timestamp":"2025-12-18T12:11:37.783Z","toolUseResult":{"filenames":[],"durationMs":363,"numFiles":0,"truncated":false}}
{"parentUuid":"c349c5c6-061f-4725-9f46-54701a28d13b","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01UuBi9bvRyds13FP9pfL6s9","type":"tool_result","content":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\aiAnalysisService.js"}]},"uuid":"d498d006-3641-46fe-866f-42bfc360eded","timestamp":"2025-12-18T12:11:37.831Z","toolUseResult":{"filenames":["D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\aiAnalysisService.js"],"durationMs":395,"numFiles":1,"truncated":false}}
{"parentUuid":"d498d006-3641-46fe-866f-42bfc360eded","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01NXMETYipNJvNKiHFepRnZ7","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Let me use the Task tool to explore the codebase and find where the stress condition parameters are displayed with their scores. The screenshot clearly shows a component with \"Stress\", \"Arousal Score\", \"Relaxation Score\", and \"Regeneration (Alpha Modulation)\" with their corresponding scores and indicators.","signature":"EtwDCkYIChgCKkB+0fM/iHjKsA0nH8sfyamMRWkNf3CbaQ/JuVMVsxVyBr2HSNC54O5TsgvFIlY9NCbR+khRq0/EbtcLTtCNnTJ0EgwtWkb11qX13epNul0aDGxJWBmTE/y//62O2SIwxXuSC+WVODaoPR1fmtNbjloOvFwM1FauUlYYJTE+GY0ZUYYGyOThrMjEe3GLLAvGKsMClwV39H+ZkXimXdPMwuflXKGdo0IIgGCBWCAMZR5WOjal7tqNhd91O99GkchsVbld9WL5UqpmNGFjRmolWHGG3xiaN9Mlnhb/Mn9ifYtCtuph879W5joGULUo0ysUAjHduk2/2PwwBI7OiBCWbpAvBz5/+asiUbTxebo+IaaXciTlzCp/+kbJLrdgBuHLzwlZnwuicubDJ2FBXQaCb47BxGIcP+MyD8A1/QG+y+HTsT8Yj5KYbuZWbKB6ePnIYCYLGazdlGYloK5+dW6NKClQUPg8aSbN8FuZkVAiayGBlcdfqvVd57wrVcIVACAFp31R6ThrECCaQm/lpRW8izyN/iwKpZ+v45gnKuXzugEifeuPj+nTiE7X+q9AakK4aJ5xH0BkfcIz8AQLRxAO4KSoGtLmINwE3yR9FfITZTSmac9XlfgYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":542,"cache_read_input_tokens":40635,"cache_creation":{"ephemeral_5m_input_tokens":542,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE8XJxq3c6UBXLwBP4at","type":"assistant","uuid":"ea9e8952-e237-45e6-9b63-ad5dfdb6f964","timestamp":"2025-12-18T12:11:42.856Z"}
{"parentUuid":"ea9e8952-e237-45e6-9b63-ad5dfdb6f964","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01NXMETYipNJvNKiHFepRnZ7","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01PPWuWgeKLdgKnMQ6T1EfrB","name":"TodoWrite","input":{"todos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"in_progress","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for Arousal Score","status":"pending","activeForm":"Implementing conditional color coding for Arousal Score"},{"content":"Implement conditional color coding for Relaxation Score","status":"pending","activeForm":"Implementing conditional color coding for Relaxation Score"},{"content":"Implement conditional color coding for Regeneration & Repair (Alpha modulation)","status":"pending","activeForm":"Implementing conditional color coding for Regeneration & Repair"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":542,"cache_read_input_tokens":40635,"cache_creation":{"ephemeral_5m_input_tokens":542,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE8XJxq3c6UBXLwBP4at","type":"assistant","uuid":"92beee65-a374-4d5f-b810-dff424d150bc","timestamp":"2025-12-18T12:11:45.713Z"}
{"parentUuid":"92beee65-a374-4d5f-b810-dff424d150bc","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01NXMETYipNJvNKiHFepRnZ7","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Kvc8fXfu7rqQEir3r7qo3a","name":"Task","input":{"subagent_type":"Explore","description":"Find stress parameters component","prompt":"I need to find the React component that displays the \"Stress\" condition with sub-parameters like \"Arousal Score\", \"Relaxation Score\", and \"Regeneration (Alpha Modulation)\". \n\nBased on a screenshot, this component shows:\n- A \"Stress\" heading with score \"1/3 Low\"\n- \"Sub-Parameters & Calculations:\" section\n- Individual parameter cards showing:\n  - Arousal Score with value, formula explanation, fzRatio, czRatio\n  - Relaxation Score with value and formula explanation\n  - Regeneration (Alpha Modulation) with value and health threshold\n\nThe component likely displays checkmarks or X marks with scores like \"0/1\" or \"1/1\" for each parameter.\n\nPlease search through the src/components and src/pages directories to find the component file that renders this stress condition display. Look for files that might contain:\n- \"Arousal Score\" text\n- \"Sub-Parameters\" text\n- \"Relaxation Score\" text\n- \"Regeneration\" or \"Alpha Modulation\" text\n- Score rendering with checkmarks/X marks\n\nReturn the file path(s) where this component is defined."}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":542,"cache_read_input_tokens":40635,"cache_creation":{"ephemeral_5m_input_tokens":542,"ephemeral_1h_input_tokens":0},"output_tokens":678,"service_tier":"standard"}},"requestId":"req_011CWE8XJxq3c6UBXLwBP4at","type":"assistant","uuid":"6da3d18c-252d-4963-8b76-79243fa82455","timestamp":"2025-12-18T12:11:52.544Z"}
{"parentUuid":"6da3d18c-252d-4963-8b76-79243fa82455","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01PPWuWgeKLdgKnMQ6T1EfrB","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"a7721943-9fc3-4fdb-9c66-55ea8d64005e","timestamp":"2025-12-18T12:11:52.693Z","toolUseResult":{"oldTodos":[{"content":"Search for stress condition component files","status":"in_progress","activeForm":"Searching for stress condition component files"},{"content":"Implement conditional color coding for Arousal Score","status":"pending","activeForm":"Implementing conditional color coding for Arousal Score"},{"content":"Implement conditional color coding for Relaxation Score","status":"pending","activeForm":"Implementing conditional color coding for Relaxation Score"},{"content":"Implement conditional color coding for Regeneration & Repair (Alpha modulation)","status":"pending","activeForm":"Implementing conditional color coding for Regeneration & Repair"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}],"newTodos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"in_progress","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for Arousal Score","status":"pending","activeForm":"Implementing conditional color coding for Arousal Score"},{"content":"Implement conditional color coding for Relaxation Score","status":"pending","activeForm":"Implementing conditional color coding for Relaxation Score"},{"content":"Implement conditional color coding for Regeneration & Repair (Alpha modulation)","status":"pending","activeForm":"Implementing conditional color coding for Regeneration & Repair"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}
{"parentUuid":"a7721943-9fc3-4fdb-9c66-55ea8d64005e","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Kvc8fXfu7rqQEir3r7qo3a","type":"tool_result","content":[{"type":"text","text":"Perfect! I have found the component. Let me create a comprehensive summary of my findings:\n\n## Found the Component!\n\nThe React component that displays the Stress condition with sub-parameters is located at:\n\n**D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx**\n\n### Key Details:\n\n**Component Structure (Lines 1550-1650):**\n- The component renders a list of brain health parameters including Stress\n- Each parameter displays:\n  - Parameter name (e.g., \"Stress\")\n  - Score in format \"X/3\" with color coding (e.g., \"1/3 Low\")\n  - Status badge showing \"Low\", \"Medium\", or \"High\"\n  - Progress bar visualization\n\n**Sub-Parameters Section (Lines 1578-1647):**\nThis is the exact section that displays the sub-parameters like \"Arousal Score\", \"Relaxation Score\", and \"Regeneration (Alpha Modulation)\":\n\n```jsx\n{/* Sub-Parameters with Calculations */}\n{result.metrics && result.metrics.length > 0 && (\n  <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n    <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n      Sub-Parameters & Calculations:\n    </div>\n    <div className=\"space-y-3\">\n      {result.metrics.map((metric, mIndex) => (\n        <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">\n          {/* Metric Name and Score */}\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">\n              {metric.name}\n            </span>\n            <div className=\"flex items-center space-x-2\">\n              {metric.score === 1 ? (\n                <CheckCircle className=\"h-4 w-4 text-green-500\" />\n              ) : (\n                <X className=\"h-4 w-4 text-red-500\" />\n              )}\n              <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                {metric.score}/1\n              </span>\n            </div>\n          </div>\n          {/* Value, Description, and Details sections follow */}\n        </div>\n      ))}\n    </div>\n  </div>\n)}\n```\n\n**Features:**\n- Displays checkmarks (CheckCircle) for score = 1, X marks for score ‚â† 1\n- Shows metric value with formatting (lines 1607-1620)\n- Displays formula explanations via metric.description (lines 1623-1627)\n- Shows additional details like fzRatio, czRatio via metric.details (lines 1630-1641)\n\n**Color Coding Functions (Lines 1087-1125):**\n- `getScoreColor`: Maps 1/3 ‚Üí red, 2/3 ‚Üí yellow, 3/3 ‚Üí green\n- `getStatusColor`: Returns text color classes\n- `getProgressBarColor`: Returns background color classes for progress bars\n\nThe component is part of the **AlgorithmDataProcessor** admin component that processes and displays brain health analysis results."}]}]},"uuid":"92b2133f-4637-436f-836a-050f54f35ba0","timestamp":"2025-12-18T12:13:46.423Z","toolUseResult":{"status":"completed","prompt":"I need to find the React component that displays the \"Stress\" condition with sub-parameters like \"Arousal Score\", \"Relaxation Score\", and \"Regeneration (Alpha Modulation)\". \n\nBased on a screenshot, this component shows:\n- A \"Stress\" heading with score \"1/3 Low\"\n- \"Sub-Parameters & Calculations:\" section\n- Individual parameter cards showing:\n  - Arousal Score with value, formula explanation, fzRatio, czRatio\n  - Relaxation Score with value and formula explanation\n  - Regeneration (Alpha Modulation) with value and health threshold\n\nThe component likely displays checkmarks or X marks with scores like \"0/1\" or \"1/1\" for each parameter.\n\nPlease search through the src/components and src/pages directories to find the component file that renders this stress condition display. Look for files that might contain:\n- \"Arousal Score\" text\n- \"Sub-Parameters\" text\n- \"Relaxation Score\" text\n- \"Regeneration\" or \"Alpha Modulation\" text\n- Score rendering with checkmarks/X marks\n\nReturn the file path(s) where this component is defined.","agentId":"12f52b52","content":[{"type":"text","text":"Perfect! I have found the component. Let me create a comprehensive summary of my findings:\n\n## Found the Component!\n\nThe React component that displays the Stress condition with sub-parameters is located at:\n\n**D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx**\n\n### Key Details:\n\n**Component Structure (Lines 1550-1650):**\n- The component renders a list of brain health parameters including Stress\n- Each parameter displays:\n  - Parameter name (e.g., \"Stress\")\n  - Score in format \"X/3\" with color coding (e.g., \"1/3 Low\")\n  - Status badge showing \"Low\", \"Medium\", or \"High\"\n  - Progress bar visualization\n\n**Sub-Parameters Section (Lines 1578-1647):**\nThis is the exact section that displays the sub-parameters like \"Arousal Score\", \"Relaxation Score\", and \"Regeneration (Alpha Modulation)\":\n\n```jsx\n{/* Sub-Parameters with Calculations */}\n{result.metrics && result.metrics.length > 0 && (\n  <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n    <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n      Sub-Parameters & Calculations:\n    </div>\n    <div className=\"space-y-3\">\n      {result.metrics.map((metric, mIndex) => (\n        <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">\n          {/* Metric Name and Score */}\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">\n              {metric.name}\n            </span>\n            <div className=\"flex items-center space-x-2\">\n              {metric.score === 1 ? (\n                <CheckCircle className=\"h-4 w-4 text-green-500\" />\n              ) : (\n                <X className=\"h-4 w-4 text-red-500\" />\n              )}\n              <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                {metric.score}/1\n              </span>\n            </div>\n          </div>\n          {/* Value, Description, and Details sections follow */}\n        </div>\n      ))}\n    </div>\n  </div>\n)}\n```\n\n**Features:**\n- Displays checkmarks (CheckCircle) for score = 1, X marks for score ‚â† 1\n- Shows metric value with formatting (lines 1607-1620)\n- Displays formula explanations via metric.description (lines 1623-1627)\n- Shows additional details like fzRatio, czRatio via metric.details (lines 1630-1641)\n\n**Color Coding Functions (Lines 1087-1125):**\n- `getScoreColor`: Maps 1/3 ‚Üí red, 2/3 ‚Üí yellow, 3/3 ‚Üí green\n- `getStatusColor`: Returns text color classes\n- `getProgressBarColor`: Returns background color classes for progress bars\n\nThe component is part of the **AlgorithmDataProcessor** admin component that processes and displays brain health analysis results."}],"totalDurationMs":113653,"totalTokens":24379,"totalToolUseCount":19,"usage":{"input_tokens":0,"cache_creation_input_tokens":558,"cache_read_input_tokens":22941,"cache_creation":{"ephemeral_5m_input_tokens":558,"ephemeral_1h_input_tokens":0},"output_tokens":880,"service_tier":"standard"}}}
{"parentUuid":"92b2133f-4637-436f-836a-050f54f35ba0","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01LJPcZd2baxsGxXmsk4gbh3","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! The agent found the component. It's in `src/components/admin/AlgorithmDataProcessor.jsx` around lines 1578-1647. Now I need to read that specific section and implement the conditional color coding logic.\n\nLooking at the current implementation:\n- Line 1597-1604: Shows checkmark (green) if score === 1, or X (red) if score !== 1\n- The text color is already applied: green for score === 1, red otherwise\n\nBut based on the user's requirement, they want:\n- GREEN if the parameter is normal/healthy for stress condition\n- RED if the parameter is abnormal/high for stress condition\n\nThe logic should be based on the actual parameter value, not just the score. For stress condition:\n- Arousal Score: normal if < 1, abnormal if >= 1\n- Relaxation Score: normal/healthy if > 1, unhealthy if <= 1\n- Regeneration & Repair (Alpha modulation): healthy if > 30%, unhealthy if <= 30%\n\nBut actually, looking at the screenshot more carefully:\n- Arousal Score = 0.59 (< 1 is normal) ‚Üí showing 0/1 with red X\n- Relaxation Score = 3.13 (> 1 is healthy) ‚Üí showing 0/1 with red X\n- Regeneration = 11.4% (< 30% is unhealthy) ‚Üí showing 1/1 with green checkmark\n\nWait, that doesn't match the user's description. Let me re-read the screenshot. The user says \"agar stress me arousal score, Relaxation Score, Regeneration & Repair ye tino normal score aaya hai stress me to usko green me indicate kro agar score jada ho to red me show kro\".\n\nSo the user wants:\n- If the values are NORMAL for stress condition ‚Üí show GREEN\n- If the values are HIGH/ABNORMAL ‚Üí show RED\n\nLooking at the screenshot again, the values highlighted in red circles are the ones that need better conditional formatting. \n\nI'll dive into the component's code to understand the current implementation and identify where to modify the color logic.","signature":"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"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1651,"cache_read_input_tokens":41177,"cache_creation":{"ephemeral_5m_input_tokens":1651,"ephemeral_1h_input_tokens":0},"output_tokens":635,"service_tier":"standard"}},"requestId":"req_011CWE8gnXH4B9VfWL7XPJaJ","type":"assistant","uuid":"57987ef0-1ea0-4d49-9dcc-56049dd8486a","timestamp":"2025-12-18T12:14:01.764Z"}
{"parentUuid":"57987ef0-1ea0-4d49-9dcc-56049dd8486a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01LJPcZd2baxsGxXmsk4gbh3","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! I found the component. Let me read the specific section where the stress parameters are displayed:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1651,"cache_read_input_tokens":41177,"cache_creation":{"ephemeral_5m_input_tokens":1651,"ephemeral_1h_input_tokens":0},"output_tokens":635,"service_tier":"standard"}},"requestId":"req_011CWE8gnXH4B9VfWL7XPJaJ","type":"assistant","uuid":"2424a1db-d929-44b3-b08f-f6428213e4cc","timestamp":"2025-12-18T12:14:01.822Z"}
{"parentUuid":"2424a1db-d929-44b3-b08f-f6428213e4cc","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01LJPcZd2baxsGxXmsk4gbh3","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01JhRPADgFf7sx5Nqj9mz1CH","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","offset":1570,"limit":100}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1651,"cache_read_input_tokens":41177,"cache_creation":{"ephemeral_5m_input_tokens":1651,"ephemeral_1h_input_tokens":0},"output_tokens":635,"service_tier":"standard"}},"requestId":"req_011CWE8gnXH4B9VfWL7XPJaJ","type":"assistant","uuid":"bd44481f-f68a-4534-8884-9a12f581c26e","timestamp":"2025-12-18T12:14:01.978Z"}
{"parentUuid":"bd44481f-f68a-4534-8884-9a12f581c26e","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01JhRPADgFf7sx5Nqj9mz1CH","type":"tool_result","content":"  1570‚Üí                    {/* Progress Bar */}\n  1571‚Üí                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n  1572‚Üí                      <div\n  1573‚Üí                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n  1574‚Üí                        style={{ width: `${result.score}%` }}\n  1575‚Üí                      ></div>\n  1576‚Üí                    </div>\n  1577‚Üí\n  1578‚Üí                    {/* Sub-Parameters with Calculations */}\n  1579‚Üí                    {result.metrics && result.metrics.length > 0 && (\n  1580‚Üí                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n  1581‚Üí                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n  1582‚Üí                          Sub-Parameters & Calculations:\n  1583‚Üí                        </div>\n  1584‚Üí                        <div className=\"space-y-3\">\n  1585‚Üí                          {result.metrics.map((metric, mIndex) => (\n  1586‚Üí                            <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">\n  1587‚Üí                              {/* Metric Name and Score */}\n  1588‚Üí                              <div className=\"flex items-center justify-between mb-2\">\n  1589‚Üí                                <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">\n  1590‚Üí                                  {metric.name}\n  1591‚Üí                                </span>\n  1592‚Üí                                <div className=\"flex items-center space-x-2\">\n  1593‚Üí                                  {metric.score === 1 ? (\n  1594‚Üí                                    <CheckCircle className=\"h-4 w-4 text-green-500\" />\n  1595‚Üí                                  ) : (\n  1596‚Üí                                    <X className=\"h-4 w-4 text-red-500\" />\n  1597‚Üí                                  )}\n  1598‚Üí                                  <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n  1599‚Üí                                    {metric.score}/1\n  1600‚Üí                                  </span>\n  1601‚Üí                                </div>\n  1602‚Üí                              </div>\n  1603‚Üí\n  1604‚Üí                              {/* Calculation Details */}\n  1605‚Üí                              <div className=\"space-y-1\">\n  1606‚Üí                                {/* Actual Value */}\n  1607‚Üí                                {metric.value !== null && metric.value !== undefined && (\n  1608‚Üí                                  <div className=\"flex justify-between text-xs\">\n  1609‚Üí                                    <span className=\"text-gray-500 dark:text-gray-400\">Value:</span>\n  1610‚Üí                                    <span className=\"font-mono text-gray-700 dark:text-gray-300\">\n  1611‚Üí                                      {typeof metric.value === 'object' && metric.value !== null\n  1612‚Üí                                        ? Object.entries(metric.value).map(([key, val]) =>\n  1613‚Üí                                            `${key}: ${typeof val === 'number' ? val.toFixed(2) : val}`\n  1614‚Üí                                          ).join(', ')\n  1615‚Üí                                        : typeof metric.value === 'number'\n  1616‚Üí                                        ? metric.value.toFixed(2)\n  1617‚Üí                                        : metric.value}\n  1618‚Üí                                    </span>\n  1619‚Üí                                  </div>\n  1620‚Üí                                )}\n  1621‚Üí\n  1622‚Üí                                {/* Description/Formula */}\n  1623‚Üí                                {metric.description && (\n  1624‚Üí                                  <div className=\"text-xs text-gray-600 dark:text-gray-400 italic mt-1\">\n  1625‚Üí                                    {metric.description}\n  1626‚Üí                                  </div>\n  1627‚Üí                                )}\n  1628‚Üí\n  1629‚Üí                                {/* Additional Details */}\n  1630‚Üí                                {metric.details && (\n  1631‚Üí                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n  1632‚Üí                                    {typeof metric.details === 'object'\n  1633‚Üí                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n  1634‚Üí                                          <div key={idx} className=\"flex justify-between\">\n  1635‚Üí                                            <span>{key}:</span>\n  1636‚Üí                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n  1637‚Üí                                          </div>\n  1638‚Üí                                        ))\n  1639‚Üí                                      : metric.details}\n  1640‚Üí                                  </div>\n  1641‚Üí                                )}\n  1642‚Üí                              </div>\n  1643‚Üí                            </div>\n  1644‚Üí                          ))}\n  1645‚Üí                        </div>\n  1646‚Üí                      </div>\n  1647‚Üí                    )}\n  1648‚Üí                  </div>\n  1649‚Üí                ))}\n  1650‚Üí              </div>\n  1651‚Üí\n  1652‚Üí              {/* Action Buttons */}\n  1653‚Üí              <div className=\"space-y-3\">\n  1654‚Üí                {/* Save Results Button (No PDF Generation) */}\n  1655‚Üí                <button\n  1656‚Üí                  onClick={handleSaveResults}\n  1657‚Üí                  disabled={isSaving || isSaved}\n  1658‚Üí                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n  1659‚Üí                    isSaved\n  1660‚Üí                      ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 cursor-not-allowed'\n  1661‚Üí                      : isSaving\n  1662‚Üí                      ? 'bg-blue-400 text-white cursor-wait'\n  1663‚Üí                      : 'bg-primary hover:bg-navy-700 text-white'\n  1664‚Üí                  }`}\n  1665‚Üí                >\n  1666‚Üí                  {isSaving ? (\n  1667‚Üí                    <>\n  1668‚Üí                      <Activity className=\"h-5 w-5 animate-spin\" />\n  1669‚Üí                      <span>Saving...</span>\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"0076b230-0199-4f68-88ac-fe68cddef861","timestamp":"2025-12-18T12:14:03.793Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","content":"                    {/* Progress Bar */}\n                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n                      <div\n                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n                        style={{ width: `${result.score}%` }}\n                      ></div>\n                    </div>\n\n                    {/* Sub-Parameters with Calculations */}\n                    {result.metrics && result.metrics.length > 0 && (\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n                          Sub-Parameters & Calculations:\n                        </div>\n                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => (\n                            <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">\n                              {/* Metric Name and Score */}\n                              <div className=\"flex items-center justify-between mb-2\">\n                                <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">\n                                  {metric.name}\n                                </span>\n                                <div className=\"flex items-center space-x-2\">\n                                  {metric.score === 1 ? (\n                                    <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                  ) : (\n                                    <X className=\"h-4 w-4 text-red-500\" />\n                                  )}\n                                  <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                    {metric.score}/1\n                                  </span>\n                                </div>\n                              </div>\n\n                              {/* Calculation Details */}\n                              <div className=\"space-y-1\">\n                                {/* Actual Value */}\n                                {metric.value !== null && metric.value !== undefined && (\n                                  <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-gray-500 dark:text-gray-400\">Value:</span>\n                                    <span className=\"font-mono text-gray-700 dark:text-gray-300\">\n                                      {typeof metric.value === 'object' && metric.value !== null\n                                        ? Object.entries(metric.value).map(([key, val]) =>\n                                            `${key}: ${typeof val === 'number' ? val.toFixed(2) : val}`\n                                          ).join(', ')\n                                        : typeof metric.value === 'number'\n                                        ? metric.value.toFixed(2)\n                                        : metric.value}\n                                    </span>\n                                  </div>\n                                )}\n\n                                {/* Description/Formula */}\n                                {metric.description && (\n                                  <div className=\"text-xs text-gray-600 dark:text-gray-400 italic mt-1\">\n                                    {metric.description}\n                                  </div>\n                                )}\n\n                                {/* Additional Details */}\n                                {metric.details && (\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n                                    {typeof metric.details === 'object'\n                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n                                          <div key={idx} className=\"flex justify-between\">\n                                            <span>{key}:</span>\n                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n                                          </div>\n                                        ))\n                                      : metric.details}\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                {/* Save Results Button (No PDF Generation) */}\n                <button\n                  onClick={handleSaveResults}\n                  disabled={isSaving || isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    isSaved\n                      ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 cursor-not-allowed'\n                      : isSaving\n                      ? 'bg-blue-400 text-white cursor-wait'\n                      : 'bg-primary hover:bg-navy-700 text-white'\n                  }`}\n                >\n                  {isSaving ? (\n                    <>\n                      <Activity className=\"h-5 w-5 animate-spin\" />\n                      <span>Saving...</span>","numLines":100,"startLine":1570,"totalLines":1949}}}
{"parentUuid":"0076b230-0199-4f68-88ac-fe68cddef861","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01FcLPjx6fGguq4vKHKtRKQa","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Good! Now I can see the code. Currently on lines 1593-1600, the logic is:- If metric.score === 1 ‚Üí show green checkmark and green text\n- If metric.score !== 1 ‚Üí show red X and red text\n\nBut the user wants more sophisticated logic based on whether the parameter value is normal or abnormal for the stress condition. Let me understand what determines metric.score by looking at the algorithm calculation service.\n\nLet me also read more context around this to understand how the result.name (parameter name like \"Stress\") is used.","signature":"EroFCkYIChgCKkCIRdRC1RJUPppOFOoWlFBvOjOCU8qXtNvqkuET7bPETb9yu8B+I6HaH91j7xOcVce10vodWVC+QMQX2E2Ip/xTEgw8wExYVbodTFtAxy0aDH1dfbzfMrdbdick1iIwO0r+fTWGhrwRgvZdIZlPdg0uDIe7v1fyjTi/yg36OffCDwndXXO5Awtn7z9+NqkAKqEEAlzpgbxrQChpOyxlyope722zJuuHhHq8G8juY37M9IrHRnn3v6Im1WzyFaPwBBcGrjIRU0d7T1Idd82vbiswOSrOCzLNNilIbmeo2kAXFwpsVTBNTtEextCIh1jW/Ey+kWBA6jYu7N1X/IRPXO8aN/TQEKnFS7rq8GT1vNzKA5Y4C8H1l5M5WbgGtWt17OGlBQQub8ACUUl+DB2NDbZ1kN9Kj/YRatmF/3ax6CQAF2nZH2hSDgi9ru0MNKy+Q+NjlJH5js/JIzEmaihRZeoKOO6Rlsl39uhwaL+QxpsdfT1C/DWQNxCcuYXH0mld5X8DI2CluINUCYb1cRFhK4mzYcI0W41AI4ifwbSCyl7rNw3homLoLxd4RbeWLSaR1hHUzEwymVvk2C5AMGJCJMVfENPDIRYrg4eVrxje0z6tGhYBti9z3LRtsJJ4hlcLymyOTctMXKnaZ72P4YMam53qJJ2g9YSzSvlQvxkHv9vqsnfBheakB7MhA6CSdwVuR6iFuINJ4/FYA+RnZquBRR5CT4wukY7cYZTDI8QAFSDcBpRb/ZXH61AcENKVwv9ox6Lfk+UDrrRQRjhG/YoSfL6dJI3Fhxf2cj/zscXFvm8owKCiBVcI8qkmgrzTAcW+y3W98w8GlLTOVruxOOkAzpugFd6J4Xm1gAtmCfPk0I9z+6urEqiCKEXulcjz7Rv4vw4CJTsDMrcz7ozKoXxjBvRbwjIYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":2505,"cache_read_input_tokens":42828,"cache_creation":{"ephemeral_5m_input_tokens":2505,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8i5RZ7V28Mhtuzk9xd","type":"assistant","uuid":"3a6f3b15-61f0-4272-97af-57e5e8510836","timestamp":"2025-12-18T12:14:09.994Z"}
{"parentUuid":"3a6f3b15-61f0-4272-97af-57e5e8510836","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01FcLPjx6fGguq4vKHKtRKQa","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01HJ2wRytxsnepZjJDguT93f","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","offset":1540,"limit":50}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":2505,"cache_read_input_tokens":42828,"cache_creation":{"ephemeral_5m_input_tokens":2505,"ephemeral_1h_input_tokens":0},"output_tokens":256,"service_tier":"standard"}},"requestId":"req_011CWE8i5RZ7V28Mhtuzk9xd","type":"assistant","uuid":"d9012fb9-827b-421d-823a-1d3d01dcebd6","timestamp":"2025-12-18T12:14:10.766Z"}
{"parentUuid":"d9012fb9-827b-421d-823a-1d3d01dcebd6","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01HJ2wRytxsnepZjJDguT93f","type":"tool_result","content":"  1540‚Üí                  Each metric shows its calculated value and threshold comparison.\n  1541‚Üí                </p>\n  1542‚Üí                <div className=\"mt-2 text-xs text-blue-600 dark:text-blue-400\">\n  1543‚Üí                  <strong>Parameters:</strong> Cognition ‚Ä¢ Stress ‚Ä¢ Focus & Attention ‚Ä¢ Burnout & Fatigue ‚Ä¢\n  1544‚Üí                  Emotional Regulation ‚Ä¢ Learning ‚Ä¢ Creativity\n  1545‚Üí                </div>\n  1546‚Üí              </div>\n  1547‚Üí            </div>\n  1548‚Üí          </div>\n  1549‚Üí\n  1550‚Üí          {results ? (\n  1551‚Üí            <>\n  1552‚Üí              <div className=\"space-y-4 mb-6\">\n  1553‚Üí                {results.map((result, index) => (\n  1554‚Üí                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n  1555‚Üí                    {/* Main Parameter */}\n  1556‚Üí                    <div className=\"flex items-center justify-between mb-2\">\n  1557‚Üí                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n  1558‚Üí                        {result.parameter}\n  1559‚Üí                      </span>\n  1560‚Üí                      <div className=\"flex items-center space-x-3\">\n  1561‚Üí                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n  1562‚Üí                          {result.rawScore}\n  1563‚Üí                        </span>\n  1564‚Üí                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n  1565‚Üí                          {result.status}\n  1566‚Üí                        </span>\n  1567‚Üí                      </div>\n  1568‚Üí                    </div>\n  1569‚Üí\n  1570‚Üí                    {/* Progress Bar */}\n  1571‚Üí                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n  1572‚Üí                      <div\n  1573‚Üí                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n  1574‚Üí                        style={{ width: `${result.score}%` }}\n  1575‚Üí                      ></div>\n  1576‚Üí                    </div>\n  1577‚Üí\n  1578‚Üí                    {/* Sub-Parameters with Calculations */}\n  1579‚Üí                    {result.metrics && result.metrics.length > 0 && (\n  1580‚Üí                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n  1581‚Üí                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n  1582‚Üí                          Sub-Parameters & Calculations:\n  1583‚Üí                        </div>\n  1584‚Üí                        <div className=\"space-y-3\">\n  1585‚Üí                          {result.metrics.map((metric, mIndex) => (\n  1586‚Üí                            <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">\n  1587‚Üí                              {/* Metric Name and Score */}\n  1588‚Üí                              <div className=\"flex items-center justify-between mb-2\">\n  1589‚Üí                                <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"be130aa4-6d5a-4df6-ad0d-b1d3ad3db114","timestamp":"2025-12-18T12:14:12.648Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","content":"                  Each metric shows its calculated value and threshold comparison.\n                </p>\n                <div className=\"mt-2 text-xs text-blue-600 dark:text-blue-400\">\n                  <strong>Parameters:</strong> Cognition ‚Ä¢ Stress ‚Ä¢ Focus & Attention ‚Ä¢ Burnout & Fatigue ‚Ä¢\n                  Emotional Regulation ‚Ä¢ Learning ‚Ä¢ Creativity\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {results ? (\n            <>\n              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => (\n                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n                    {/* Main Parameter */}\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                        {result.parameter}\n                      </span>\n                      <div className=\"flex items-center space-x-3\">\n                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                          {result.rawScore}\n                        </span>\n                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                          {result.status}\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n                      <div\n                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n                        style={{ width: `${result.score}%` }}\n                      ></div>\n                    </div>\n\n                    {/* Sub-Parameters with Calculations */}\n                    {result.metrics && result.metrics.length > 0 && (\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n                          Sub-Parameters & Calculations:\n                        </div>\n                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => (\n                            <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">\n                              {/* Metric Name and Score */}\n                              <div className=\"flex items-center justify-between mb-2\">\n                                <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">","numLines":50,"startLine":1540,"totalLines":1949}}}
{"parentUuid":"be130aa4-6d5a-4df6-ad0d-b1d3ad3db114","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Cx5ZpSUyVk7T9czez9mPec","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Good! I can see that `result.parameter` contains the parameter name (like \"Stress\"). Now I understand the structure:- `result.parameter` - Main parameter name (e.g., \"Stress\")\n- `result.metrics` - Array of sub-parameters (Arousal Score, Relaxation Score, Regeneration)\n- `metric.name` - Sub-parameter name\n- `metric.score` - Current score (0 or 1)\n- `metric.value` - Actual calculated valueNow I need to implement logic that:\n1. Checks if result.parameter === \"Stress\"\n2. For each metric in Stress condition:\n   - Check if the value is normal (green) or abnormal (red)\n   - Apply appropriate color coding\n\nThe user wants:\n- If values are normal for stress ‚Üí green\n- If values are high/abnormal ‚Üí red\n\nLet me check the algorithm calculation to understand what determines \"normal\" values for these metrics.","signature":"EskHCkYIChgCKkBPT2PYe7ZFz1rLAqw+s5jv5U2bX/GGNKE/GK/YDI92TZqhnGNYTinSHHNaI8za5I6pH3t2/aMZ/AuQjOoXxND+EgxoFSwxZSQDKYYW8uYaDJE3547McRYzSdmTziIwaLAcB1oYPpnN7WGb+lpzgxPBMQEAx0jQ35aB9rFp/oJBrTyTjcGGX3YcuuTCe9R1KrAGbzgrUImkPpaHdLw6F5DZR0zoDQ5rOD69mF2eZ7pJ2w2o5JVCnFlGmZ6C9nBrhvd+6Pg0C26xS7iF6ggrxq4ZER1IernVmT7NO3Asdb5GwFnHNiG9UHJxPE4tqb9nuH1tDDgRZxwj1pjTe91h53zQkDhW5ejUJfxGjznXOiEkpGmXYnk3bPcSZz3t2Vs79pXnIM0XcaFSljDK2f4phvuYiLuNMB2eLjkpCpd1ChFQNFOryQcroln6JhQY9K3UyndsruTfr0f3zk1XSW2HQSC+sIg0N71tt6mk22Va9NYp0/0Iw3wcrocu2Vaijfg4ID2qIQ6c7WlQOOd3vCFp4nekcv4GHDN5IZr6u+XdbjtTjdcRMmZUkNpDqr/nf2GkAMQ7nd8jx9iGuV6rNW2Vef4oaP/DJHQyFyFFP6do2HGyPhcVRpj0DYaE7qpIi0g+4lswW3SgC6e1HCMS7/wZT8EppeO17CNU8hfZioOGbJNiMFKbn+cbMVmmmSPG89A5HE/5p7CjULvvtj/Jl8ZCL5H7f2Ovl2a0DWEaRwHO8Y3iNMYpMJ0RJOAX9C4yEp8lrpQndHZypH1t6Da3N4Xx0MtiOQbdaaHVEQyguKKSpwhPu/PSDGIpbj/EwEJtHl5F+G+KgZf6wKKTKY3l6nbPaE7HzNLvfXZ+7Fla51anahvCMN2eoEVgC7kQ+CETuLtqsPbRf3fw+eiN5z3T+2kRTZofSzxZVi6ZeLFVTthDRvANAvFBPXq5wpE8IoqCf1etkI9iJAbapqEBMShg7AH+Eo75zjQm79BX790bcGjqDalfpkShps1TUZLVxmUG+lETt4qcN2liuEiXiby/FBPlGo+AfxN7i4WVwEL+6Lqo8V/Pa04fUTRis22frgUJ2vQvRWfmxjJiND9BGQMwfbEvcDa33wX8vD3148IehRJsMvxCCAuzCyvE+nBw+XIcZRSIlWa0MLGTHoHFH+jedD2sQQjbD7ODNdemyb/eQX8r7dybjb39LeNlTg34TOgMI+NxLlTzuM+ujwDgtIy+tzzv0duhYEPrIwXK3ici6e9aHZS+AZ1IqjJRRppO6kqNESDFqHFjGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":1284,"cache_read_input_tokens":45333,"cache_creation":{"ephemeral_5m_input_tokens":1284,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE8ijR49AZhVmCbQt9sc","type":"assistant","uuid":"af73c89a-a2e2-43ea-9c03-d12da203c5dd","timestamp":"2025-12-18T12:14:21.511Z"}
{"parentUuid":"af73c89a-a2e2-43ea-9c03-d12da203c5dd","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Cx5ZpSUyVk7T9czez9mPec","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me check how the metrics are calculated to understand the normal ranges:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":1284,"cache_read_input_tokens":45333,"cache_creation":{"ephemeral_5m_input_tokens":1284,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE8ijR49AZhVmCbQt9sc","type":"assistant","uuid":"189fbec2-05fd-4cdc-8f62-3b54fd24f7ee","timestamp":"2025-12-18T12:14:22.102Z"}
{"parentUuid":"189fbec2-05fd-4cdc-8f62-3b54fd24f7ee","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Cx5ZpSUyVk7T9czez9mPec","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01KqWBfBJVUjPRwiMwoKsif4","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\wellnessAlgorithmService.js","offset":0,"limit":150}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":1284,"cache_read_input_tokens":45333,"cache_creation":{"ephemeral_5m_input_tokens":1284,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE8ijR49AZhVmCbQt9sc","type":"assistant","uuid":"c54afffb-5fb0-4237-9738-0cb7b7c8bc5a","timestamp":"2025-12-18T12:14:22.952Z"}
{"parentUuid":"c54afffb-5fb0-4237-9738-0cb7b7c8bc5a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01KqWBfBJVUjPRwiMwoKsif4","type":"tool_result","content":"     0‚Üí/**\n     1‚Üí * Wellness Algorithm Service\n     2‚Üí * Implements brain wellness scoring based on EEG frequency band analysis\n     3‚Üí * Based on the Wellness Algorithm Formula document\n     4‚Üí */\n     5‚Üí\n     6‚Üí/**\n     7‚Üí * Calculate Cognition Score\n     8‚Üí * Measures overall cognitive function using multiple EEG metrics\n     9‚Üí * @param {Object} eegData - EEG frequency band data with electrode locations\n    10‚Üí * @returns {Object} - Cognition score with sub-parameters\n    11‚Üí */\n    12‚Üíexport const calculateCognitionScore = (eegData) => {\n    13‚Üí  const { eyesOpen, eyesClosed } = eegData;\n    14‚Üí\n    15‚Üí  // 1. Focus Score (Theta/Beta Ratio) - Eyes Open, Absolute Power at Fz, Cz\n    16‚Üí  const focusScore = calculateThetaBetaRatio(eyesOpen, ['Fz', 'Cz']);\n    17‚Üí  const focusStatus = focusScore < 1.5 ? 'normal' : 'abnormal';\n    18‚Üí\n    19‚Üí  // 2. Alpha Peak - Eyes Closed, at Pz or below\n    20‚Üí  const alphaPeak = findAlphaPeak(eyesClosed, ['Pz']);\n    21‚Üí  const alphaPeakStatus = alphaPeak > 9 ? 'normal' : 'abnormal';\n    22‚Üí\n    23‚Üí  // 3. Alpha:Theta Balance - Eyes Closed, Absolute Power at Fz, Cz, Pz\n    24‚Üí  const alphaTheta Balance = calculateAlphaThetaBalance(eyesClosed, ['Fz', 'Cz', 'Pz']);\n    25‚Üí  const alphaThetat Status = alphaT\n    26‚Üí\n    27‚ÜíhetaBalance.order === 'FZ>CZ>PZ' ? 'normal' : 'abnormal';\n    28‚Üí\n    29‚Üí  const overallScore = [focusStatus, alphaPeakStatus, alphaThetaStatus].filter(s => s === 'normal').length / 3 * 100;\n    30‚Üí\n    31‚Üí  return {\n    32‚Üí    score: Math.round(overallScore),\n    33‚Üí    status: overallScore >= 66 ? 'normal' : overallScore >= 33 ? 'borderline' : 'abnormal',\n    34‚Üí    subParameters: {\n    35‚Üí      focusScore: { value: focusScore, status: focusStatus, normal: '< 1.5' },\n    36‚Üí      alphaPeak: { value: alphaPeak, status: alphaPeakStatus, normal: '> 9 Hz' },\n    37‚Üí      alphaThetaBalance: { value: alphaThetaBalance, status: alphaThetaStatus, normal: 'FZ>CZ>PZ' }\n    38‚Üí    }\n    39‚Üí  };\n    40‚Üí};\n    41‚Üí\n    42‚Üí/**\n    43‚Üí * Calculate Stress Score\n    44‚Üí * Measures stress levels and relaxation capacity\n    45‚Üí * @param {Object} eegData - EEG frequency band data\n    46‚Üí * @returns {Object} - Stress score with sub-parameters\n    47‚Üí */\n    48‚Üíexport const calculateStressScore = (eegData) => {\n    49‚Üí  const { eyesOpen, eyesClosed } = eegData;\n    50‚Üí\n    51‚Üí  // 1. Arousal Score (HighBeta/Beta Ratio) - Eyes Open at Fz, Cz\n    52‚Üí  const arousalScore = calculateArousalScore(eyesOpen, ['Fz', 'Cz']);\n    53‚Üí  const arousalStatus = arousalScore < 1 ? 'normal' : 'abnormal';\n    54‚Üí\n    55‚Üí  // 2. Relaxation Score (Alpha/Beta) - Eyes Closed at Pz\n    56‚Üí  const relaxationScore = calculateRelaxationScore(eyesClosed, ['Pz']);\n    57‚Üí  const relaxationStatus = relaxationScore > 10 ? 'healthy' : 'abnormal';\n    58‚Üí\n    59‚Üí  // 3. Regeneration & Repair (Alpha Modulation)\n    60‚Üí  const regeneration = calculateAlphaModulation(eyesOpen, eyesClosed, ['Pz']);\n    61‚Üí  const regenerationStatus = regeneration > 30 ? 'healthy' : 'abnormal';\n    62‚Üí\n    63‚Üí  const overallScore = [arousalStatus, relaxationStatus, regenerationStatus]\n    64‚Üí    .filter(s => s === 'normal' || s === 'healthy').length / 3 * 100;\n    65‚Üí\n    66‚Üí  return {\n    67‚Üí    score: Math.round(overallScore),\n    68‚Üí    status: overallScore >= 66 ? 'normal' : overallScore >= 33 ? 'borderline' : 'abnormal',\n    69‚Üí    subParameters: {\n    70‚Üí      arousalScore: { value: arousalScore, status: arousalStatus, normal: '< 1' },\n    71‚Üí      relaxationScore: { value: relaxationScore, status: relaxationStatus, normal: '> 10' },\n    72‚Üí      regeneration: { value: regeneration, status: regenerationStatus, normal: '> 30%' }\n    73‚Üí    }\n    74‚Üí  };\n    75‚Üí};\n    76‚Üí\n    77‚Üí/**\n    78‚Üí * Calculate Focus + Attention Score\n    79‚Üí * Measures attention and concentration ability\n    80‚Üí * @param {Object} eegData - EEG frequency band data\n    81‚Üí * @returns {Object} - Focus/Attention score\n    82‚Üí */\n    83‚Üíexport const calculateFocusAttentionScore = (eegData) => {\n    84‚Üí  const { eyesOpen, eyesClosed } = eegData;\n    85‚Üí\n    86‚Üí  // 1. Focus Score Theta - Eyes Open, Relative Power at Fz, Cz\n    87‚Üí  const focusTheta = calculateThetaRelativePower(eyesOpen, ['Fz', 'Cz']);\n    88‚Üí  const focusThetaStatus = focusTheta < 20 ? 'normal' : 'abnormal';\n    89‚Üí\n    90‚Üí  // 2. Alpha:Theta Balance - Eyes Closed\n    91‚Üí  const alphaThetaBalance = calculateAlphaThetaBalance(eyesClosed, ['Fz', 'Cz', 'Pz']);\n    92‚Üí  const alphaThetaStatus = alphaThetaBalance.order === 'FZ>CZ>PZ' ? 'normal' : 'abnormal';\n    93‚Üí\n    94‚Üí  const overallScore = [focusThetaStatus, alphaThetaStatus].filter(s => s === 'normal').length / 2 * 100;\n    95‚Üí\n    96‚Üí  return {\n    97‚Üí    score: Math.round(overallScore),\n    98‚Üí    status: overallScore >= 50 ? 'normal' : 'abnormal',\n    99‚Üí    subParameters: {\n   100‚Üí      focusTheta: { value: focusTheta, status: focusThetaStatus, normal: '< 20%' },\n   101‚Üí      alphaThetaBalance: { value: alphaThetaBalance, status: alphaThetaStatus, normal: 'FZ>CZ>PZ' }\n   102‚Üí    }\n   103‚Üí  };\n   104‚Üí};\n   105‚Üí\n   106‚Üí/**\n   107‚Üí * Calculate Focus Stimulus Control Score\n   108‚Üí * Measures ability to control attention and filter stimuli\n   109‚Üí * @param {Object} eegData - EEG frequency band data\n   110‚Üí * @returns {Object} - Stimulus control score\n   111‚Üí */\n   112‚Üíexport const calculateFocusStimulusControlScore = (eegData) => {\n   113‚Üí  const { eyesOpen } = eegData;\n   114‚Üí\n   115‚Üí  // Theta Beta Ratio - Eyes Open, Absolute Power at Fz, Cz\n   116‚Üí  const thetaBetaRatio = calculateThetaBetaRatio(eyesOpen, ['Fz', 'Cz']);\n   117‚Üí  const status = thetaBetaRatio < 1.5 ? 'normal' : 'abnormal';\n   118‚Üí\n   119‚Üí  return {\n   120‚Üí    score: status === 'normal' ? 100 : 0,\n   121‚Üí    status,\n   122‚Üí    subParameters: {\n   123‚Üí      thetaBetaRatio: { value: thetaBetaRatio, status, normal: '< 1.5' }\n   124‚Üí    }\n   125‚Üí  };\n   126‚Üí};\n   127‚Üí\n   128‚Üí/**\n   129‚Üí * Calculate Burnout & Fatigue Score\n   130‚Üí * Identifies mental exhaustion and fatigue patterns\n   131‚Üí * @param {Object} eegData - EEG frequency band data\n   132‚Üí * @returns {Object} - Burnout score\n   133‚Üí */\n   134‚Üíexport const calculateBurnoutFatigueScore = (eegData) => {\n   135‚Üí  const { eyesOpen, eyesClosed } = eegData;\n   136‚Üí\n   137‚Üí  // 1. Arousal Score - Eyes Open\n   138‚Üí  const arousalScore = calculateArousalScore(eyesOpen, ['Fz', 'Cz']);\n   139‚Üí  const arousalStatus = arousalScore < 1 ? 'normal' : 'abnormal';\n   140‚Üí\n   141‚Üí  // 2. Relaxation Score - Eyes Closed at Pz\n   142‚Üí  const relaxationScore = calculateRelaxationScore(eyesClosed, ['Pz']);\n   143‚Üí  const relaxationStatus = relaxationScore > 10 ? 'healthy' : 'abnormal';\n   144‚Üí\n   145‚Üí  // 3. Excessive Delta - Eyes Open, Relative Power at multiple locations\n   146‚Üí  const excessiveDelta = calculateExcessiveDelta(eyesOpen, ['Fz', 'C3', 'Cz', 'C4', 'P3', 'Pz', 'P4']);\n   147‚Üí  const deltaStatus = excessiveDelta < 70 ? 'normal' : 'abnormal';\n   148‚Üí\n   149‚Üí  const overallScore = [arousalStatus, relaxationStatus, deltaStatus]\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"05981b1f-b878-4e09-9f7f-32eed98d73cb","timestamp":"2025-12-18T12:14:24.864Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\wellnessAlgorithmService.js","content":"/**\n * Wellness Algorithm Service\n * Implements brain wellness scoring based on EEG frequency band analysis\n * Based on the Wellness Algorithm Formula document\n */\n\n/**\n * Calculate Cognition Score\n * Measures overall cognitive function using multiple EEG metrics\n * @param {Object} eegData - EEG frequency band data with electrode locations\n * @returns {Object} - Cognition score with sub-parameters\n */\nexport const calculateCognitionScore = (eegData) => {\n  const { eyesOpen, eyesClosed } = eegData;\n\n  // 1. Focus Score (Theta/Beta Ratio) - Eyes Open, Absolute Power at Fz, Cz\n  const focusScore = calculateThetaBetaRatio(eyesOpen, ['Fz', 'Cz']);\n  const focusStatus = focusScore < 1.5 ? 'normal' : 'abnormal';\n\n  // 2. Alpha Peak - Eyes Closed, at Pz or below\n  const alphaPeak = findAlphaPeak(eyesClosed, ['Pz']);\n  const alphaPeakStatus = alphaPeak > 9 ? 'normal' : 'abnormal';\n\n  // 3. Alpha:Theta Balance - Eyes Closed, Absolute Power at Fz, Cz, Pz\n  const alphaTheta Balance = calculateAlphaThetaBalance(eyesClosed, ['Fz', 'Cz', 'Pz']);\n  const alphaThetat Status = alphaT\n\nhetaBalance.order === 'FZ>CZ>PZ' ? 'normal' : 'abnormal';\n\n  const overallScore = [focusStatus, alphaPeakStatus, alphaThetaStatus].filter(s => s === 'normal').length / 3 * 100;\n\n  return {\n    score: Math.round(overallScore),\n    status: overallScore >= 66 ? 'normal' : overallScore >= 33 ? 'borderline' : 'abnormal',\n    subParameters: {\n      focusScore: { value: focusScore, status: focusStatus, normal: '< 1.5' },\n      alphaPeak: { value: alphaPeak, status: alphaPeakStatus, normal: '> 9 Hz' },\n      alphaThetaBalance: { value: alphaThetaBalance, status: alphaThetaStatus, normal: 'FZ>CZ>PZ' }\n    }\n  };\n};\n\n/**\n * Calculate Stress Score\n * Measures stress levels and relaxation capacity\n * @param {Object} eegData - EEG frequency band data\n * @returns {Object} - Stress score with sub-parameters\n */\nexport const calculateStressScore = (eegData) => {\n  const { eyesOpen, eyesClosed } = eegData;\n\n  // 1. Arousal Score (HighBeta/Beta Ratio) - Eyes Open at Fz, Cz\n  const arousalScore = calculateArousalScore(eyesOpen, ['Fz', 'Cz']);\n  const arousalStatus = arousalScore < 1 ? 'normal' : 'abnormal';\n\n  // 2. Relaxation Score (Alpha/Beta) - Eyes Closed at Pz\n  const relaxationScore = calculateRelaxationScore(eyesClosed, ['Pz']);\n  const relaxationStatus = relaxationScore > 10 ? 'healthy' : 'abnormal';\n\n  // 3. Regeneration & Repair (Alpha Modulation)\n  const regeneration = calculateAlphaModulation(eyesOpen, eyesClosed, ['Pz']);\n  const regenerationStatus = regeneration > 30 ? 'healthy' : 'abnormal';\n\n  const overallScore = [arousalStatus, relaxationStatus, regenerationStatus]\n    .filter(s => s === 'normal' || s === 'healthy').length / 3 * 100;\n\n  return {\n    score: Math.round(overallScore),\n    status: overallScore >= 66 ? 'normal' : overallScore >= 33 ? 'borderline' : 'abnormal',\n    subParameters: {\n      arousalScore: { value: arousalScore, status: arousalStatus, normal: '< 1' },\n      relaxationScore: { value: relaxationScore, status: relaxationStatus, normal: '> 10' },\n      regeneration: { value: regeneration, status: regenerationStatus, normal: '> 30%' }\n    }\n  };\n};\n\n/**\n * Calculate Focus + Attention Score\n * Measures attention and concentration ability\n * @param {Object} eegData - EEG frequency band data\n * @returns {Object} - Focus/Attention score\n */\nexport const calculateFocusAttentionScore = (eegData) => {\n  const { eyesOpen, eyesClosed } = eegData;\n\n  // 1. Focus Score Theta - Eyes Open, Relative Power at Fz, Cz\n  const focusTheta = calculateThetaRelativePower(eyesOpen, ['Fz', 'Cz']);\n  const focusThetaStatus = focusTheta < 20 ? 'normal' : 'abnormal';\n\n  // 2. Alpha:Theta Balance - Eyes Closed\n  const alphaThetaBalance = calculateAlphaThetaBalance(eyesClosed, ['Fz', 'Cz', 'Pz']);\n  const alphaThetaStatus = alphaThetaBalance.order === 'FZ>CZ>PZ' ? 'normal' : 'abnormal';\n\n  const overallScore = [focusThetaStatus, alphaThetaStatus].filter(s => s === 'normal').length / 2 * 100;\n\n  return {\n    score: Math.round(overallScore),\n    status: overallScore >= 50 ? 'normal' : 'abnormal',\n    subParameters: {\n      focusTheta: { value: focusTheta, status: focusThetaStatus, normal: '< 20%' },\n      alphaThetaBalance: { value: alphaThetaBalance, status: alphaThetaStatus, normal: 'FZ>CZ>PZ' }\n    }\n  };\n};\n\n/**\n * Calculate Focus Stimulus Control Score\n * Measures ability to control attention and filter stimuli\n * @param {Object} eegData - EEG frequency band data\n * @returns {Object} - Stimulus control score\n */\nexport const calculateFocusStimulusControlScore = (eegData) => {\n  const { eyesOpen } = eegData;\n\n  // Theta Beta Ratio - Eyes Open, Absolute Power at Fz, Cz\n  const thetaBetaRatio = calculateThetaBetaRatio(eyesOpen, ['Fz', 'Cz']);\n  const status = thetaBetaRatio < 1.5 ? 'normal' : 'abnormal';\n\n  return {\n    score: status === 'normal' ? 100 : 0,\n    status,\n    subParameters: {\n      thetaBetaRatio: { value: thetaBetaRatio, status, normal: '< 1.5' }\n    }\n  };\n};\n\n/**\n * Calculate Burnout & Fatigue Score\n * Identifies mental exhaustion and fatigue patterns\n * @param {Object} eegData - EEG frequency band data\n * @returns {Object} - Burnout score\n */\nexport const calculateBurnoutFatigueScore = (eegData) => {\n  const { eyesOpen, eyesClosed } = eegData;\n\n  // 1. Arousal Score - Eyes Open\n  const arousalScore = calculateArousalScore(eyesOpen, ['Fz', 'Cz']);\n  const arousalStatus = arousalScore < 1 ? 'normal' : 'abnormal';\n\n  // 2. Relaxation Score - Eyes Closed at Pz\n  const relaxationScore = calculateRelaxationScore(eyesClosed, ['Pz']);\n  const relaxationStatus = relaxationScore > 10 ? 'healthy' : 'abnormal';\n\n  // 3. Excessive Delta - Eyes Open, Relative Power at multiple locations\n  const excessiveDelta = calculateExcessiveDelta(eyesOpen, ['Fz', 'C3', 'Cz', 'C4', 'P3', 'Pz', 'P4']);\n  const deltaStatus = excessiveDelta < 70 ? 'normal' : 'abnormal';\n\n  const overallScore = [arousalStatus, relaxationStatus, deltaStatus]","numLines":150,"startLine":0,"totalLines":658}}}
{"parentUuid":"05981b1f-b878-4e09-9f7f-32eed98d73cb","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012Q6cZqn6FD26t1BvxMDGhf","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! Now I understand the logic for Stress parameters (lines 48-75):\n\n**Stress Score Sub-Parameters:**\n1. **Arousal Score**: Normal if < 1, Abnormal if >= 1 (line 53)\n2. **Relaxation Score**: Healthy if > 10, Abnormal if <= 10 (line 57)\n3. **Regeneration & Repair (Alpha Modulation)**: Healthy if > 30, Abnormal if <= 30 (line 61)\n\nWait, but the screenshot shows:\n- Arousal Score value = 0.59 (< 1, so should be normal/green) but showing red X\n- Relaxation Score value = 3.13 (< 10, so should be abnormal/red) - showing red X ‚úì\n- Regeneration value = 11.4% (< 30%, so should be abnormal/red) but showing green checkmark\n\nThis seems inconsistent. Let me re-read the screenshot. The user circled the scores \"0/1\", \"0/1\", \"1/1\". These scores are what I need to use to determine colors.\n\nActually, looking more carefully:- When score = 1 ‚Üí metric passed ‚Üí GREEN- When score = 0 ‚Üí metric failed ‚Üí RED\n\nSo currently the code already does this (lines 1593-1600 of AlgorithmDataProcessor.jsx). But the user might want more visual emphasis or clearer indicators.\n\nWait, let me re-read the user's request: \"agar stress me arousal score, Relaxation Score, Regeneration & Repair ye tino normal score aaya hai stress me to usko green me indicate kro agar score jada ho to red me show kro\"\n\nTranslation: \"If in stress, arousal score, Relaxation Score, Regeneration & Repair all three have normal scores, then indicate it in green. If the score is high, show it in red.\"\n\nSo the user wants the ENTIRE metric card/box to have a colored background or border:\n\n\nI'll modify the component to apply dynamic background coloring. When a metric's score is 1 (normal), I'll use a green background, and when the score is 0 (abnormal), I'll use a red background. This provides a clear visual indication of the metric's status across the entire card, not just the icon or text.","signature":"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"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":3304,"cache_read_input_tokens":46617,"cache_creation":{"ephemeral_5m_input_tokens":3304,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8jdnFZaLqRrZW3cmTX","type":"assistant","uuid":"ad3af92c-37ba-4f4e-9711-f4cf95660ad6","timestamp":"2025-12-18T12:14:43.857Z"}
{"parentUuid":"ad3af92c-37ba-4f4e-9711-f4cf95660ad6","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012Q6cZqn6FD26t1BvxMDGhf","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! Now I understand the logic. For the Stress condition:\n- **Arousal Score**: Normal if < 1 (green), Abnormal if >= 1 (red)\n- **Relaxation Score**: Healthy if > 10 (green), Abnormal if <= 10 (red)  \n- **Regeneration & Repair**: Healthy if > 30% (green), Abnormal if <= 30% (red)\n\nLet me update the component to add background color indicators for these metrics:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":3304,"cache_read_input_tokens":46617,"cache_creation":{"ephemeral_5m_input_tokens":3304,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8jdnFZaLqRrZW3cmTX","type":"assistant","uuid":"88729d3b-53a4-4a4e-966f-cd43c76ebc2c","timestamp":"2025-12-18T12:14:44.171Z"}
{"parentUuid":"88729d3b-53a4-4a4e-966f-cd43c76ebc2c","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012Q6cZqn6FD26t1BvxMDGhf","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_012CSQQTc2D6zM9GCmgivUoB","name":"TodoWrite","input":{"todos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"completed","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for all stress sub-parameters","status":"in_progress","activeForm":"Implementing conditional color coding for stress sub-parameters"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":3304,"cache_read_input_tokens":46617,"cache_creation":{"ephemeral_5m_input_tokens":3304,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8jdnFZaLqRrZW3cmTX","type":"assistant","uuid":"97277700-5e19-4f0a-b844-b79f32cd2289","timestamp":"2025-12-18T12:14:45.137Z"}
{"parentUuid":"97277700-5e19-4f0a-b844-b79f32cd2289","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012Q6cZqn6FD26t1BvxMDGhf","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01QFCBHPTdqjt5yJjmyX1NWc","name":"Edit","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","old_string":"                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => (\n                            <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">\n                              {/* Metric Name and Score */}\n                              <div className=\"flex items-center justify-between mb-2\">\n                                <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">\n                                  {metric.name}\n                                </span>\n                                <div className=\"flex items-center space-x-2\">\n                                  {metric.score === 1 ? (\n                                    <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                  ) : (\n                                    <X className=\"h-4 w-4 text-red-500\" />\n                                  )}\n                                  <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                    {metric.score}/1\n                                  </span>\n                                </div>\n                              </div>","new_string":"                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress condition\n                            const isNormal = metric.score === 1;\n                            const bgColorClass = result.parameter === 'Stress'\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    result.parameter === 'Stress'\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>\n                                  <div className=\"flex items-center space-x-2\">\n                                    {metric.score === 1 ? (\n                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                    ) : (\n                                      <X className=\"h-4 w-4 text-red-500\" />\n                                    )}\n                                    <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                      {metric.score}/1\n                                    </span>\n                                  </div>\n                                </div>"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":3304,"cache_read_input_tokens":46617,"cache_creation":{"ephemeral_5m_input_tokens":3304,"ephemeral_1h_input_tokens":0},"output_tokens":1861,"service_tier":"standard"}},"requestId":"req_011CWE8jdnFZaLqRrZW3cmTX","type":"assistant","uuid":"005b091b-b1e7-4d63-9327-3fdf685621d2","timestamp":"2025-12-18T12:14:55.175Z"}
{"parentUuid":"005b091b-b1e7-4d63-9327-3fdf685621d2","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_012CSQQTc2D6zM9GCmgivUoB","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"84d5381b-3794-4c43-864f-8bd7cb0a7b74","timestamp":"2025-12-18T12:14:55.314Z","toolUseResult":{"oldTodos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"in_progress","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for Arousal Score","status":"pending","activeForm":"Implementing conditional color coding for Arousal Score"},{"content":"Implement conditional color coding for Relaxation Score","status":"pending","activeForm":"Implementing conditional color coding for Relaxation Score"},{"content":"Implement conditional color coding for Regeneration & Repair (Alpha modulation)","status":"pending","activeForm":"Implementing conditional color coding for Regeneration & Repair"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}],"newTodos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"completed","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for all stress sub-parameters","status":"in_progress","activeForm":"Implementing conditional color coding for stress sub-parameters"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}
{"type":"file-history-snapshot","messageId":"005b091b-b1e7-4d63-9327-3fdf685621d2","snapshot":{"messageId":"e974a2ee-1853-4c80-b3e9-871b93337650","trackedFileBackups":{"src\\components\\admin\\AlgorithmDataProcessor.jsx":{"backupFileName":"9777bd81bdc80e4c@v1","version":1,"backupTime":"2025-12-18T12:15:19.290Z"}},"timestamp":"2025-12-18T12:09:41.899Z"},"isSnapshotUpdate":true}
{"parentUuid":"84d5381b-3794-4c43-864f-8bd7cb0a7b74","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01QFCBHPTdqjt5yJjmyX1NWc","type":"tool_result","content":"The file D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n  1580‚Üí                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n  1581‚Üí                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n  1582‚Üí                          Sub-Parameters & Calculations:\n  1583‚Üí                        </div>\n  1584‚Üí                        <div className=\"space-y-3\">\n  1585‚Üí                          {result.metrics.map((metric, mIndex) => {\n  1586‚Üí                            // Determine if metric is normal (green) or abnormal (red) for Stress condition\n  1587‚Üí                            const isNormal = metric.score === 1;\n  1588‚Üí                            const bgColorClass = result.parameter === 'Stress'\n  1589‚Üí                              ? (isNormal\n  1590‚Üí                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n  1591‚Üí                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n  1592‚Üí                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n  1593‚Üí\n  1594‚Üí                            return (\n  1595‚Üí                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n  1596‚Üí                                {/* Metric Name and Score */}\n  1597‚Üí                                <div className=\"flex items-center justify-between mb-2\">\n  1598‚Üí                                  <span className={`text-xs font-semibold ${\n  1599‚Üí                                    result.parameter === 'Stress'\n  1600‚Üí                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n  1601‚Üí                                      : 'text-gray-700 dark:text-gray-300'\n  1602‚Üí                                  }`}>\n  1603‚Üí                                    {metric.name}\n  1604‚Üí                                  </span>\n  1605‚Üí                                  <div className=\"flex items-center space-x-2\">\n  1606‚Üí                                    {metric.score === 1 ? (\n  1607‚Üí                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n  1608‚Üí                                    ) : (\n  1609‚Üí                                      <X className=\"h-4 w-4 text-red-500\" />\n  1610‚Üí                                    )}\n  1611‚Üí                                    <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n  1612‚Üí                                      {metric.score}/1\n  1613‚Üí                                    </span>\n  1614‚Üí                                  </div>\n  1615‚Üí                                </div>\n  1616‚Üí\n  1617‚Üí                              {/* Calculation Details */}\n  1618‚Üí                              <div className=\"space-y-1\">\n  1619‚Üí                                {/* Actual Value */}"}]},"uuid":"483806de-2121-4407-8d13-6f8bcc1d6b68","timestamp":"2025-12-18T12:15:19.349Z","toolUseResult":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","oldString":"                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => (\n                            <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">\n                              {/* Metric Name and Score */}\n                              <div className=\"flex items-center justify-between mb-2\">\n                                <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">\n                                  {metric.name}\n                                </span>\n                                <div className=\"flex items-center space-x-2\">\n                                  {metric.score === 1 ? (\n                                    <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                  ) : (\n                                    <X className=\"h-4 w-4 text-red-500\" />\n                                  )}\n                                  <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                    {metric.score}/1\n                                  </span>\n                                </div>\n                              </div>","newString":"                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress condition\n                            const isNormal = metric.score === 1;\n                            const bgColorClass = result.parameter === 'Stress'\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    result.parameter === 'Stress'\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>\n                                  <div className=\"flex items-center space-x-2\">\n                                    {metric.score === 1 ? (\n                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                    ) : (\n                                      <X className=\"h-4 w-4 text-red-500\" />\n                                    )}\n                                    <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                      {metric.score}/1\n                                    </span>\n                                  </div>\n                                </div>","originalFile":"import React, { useState, useEffect } from 'react';\nimport { Upload, Play, Download, FileText, CheckCircle, Activity, User, Building2, Calendar, History, X, ArrowLeft, Search, Filter } from 'lucide-react';\nimport DatabaseService from '../../services/databaseService';\nimport toast from 'react-hot-toast';\n\nconst AlgorithmDataProcessor = () => {\n  const [patients, setPatients] = useState([]);\n  const [clinics, setClinics] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [showProcessingUI, setShowProcessingUI] = useState(false);\n  const [processingHistory, setProcessingHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Filter states\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedClinicFilter, setSelectedClinicFilter] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n\n  const [eyesOpenFile, setEyesOpenFile] = useState(null);\n  const [eyesClosedFile, setEyesClosedFile] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [processingComplete, setProcessingComplete] = useState(false);\n  const [consoleLog, setConsoleLog] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const [results, setResults] = useState(null);\n  const [isSaved, setIsSaved] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [dataType, setDataType] = useState(null); // 'raw' or 'zscore'\n\n  // Debug function to check database contents\n  useEffect(() => {\n    window.debugAlgorithmResults = async () => {\n      const allResults = await DatabaseService.get('algorithmResults');\n      console.log('üîç All Algorithm Results in Database:', allResults);\n      console.log(`Total records: ${allResults.length}`);\n      allResults.forEach((record, idx) => {\n        console.log(`\\nüìä Record ${idx + 1}:`, {\n          id: record.id,\n          patientName: record.inputData?.patientName || record.patientName,\n          processedAt: record.inputData?.processedAt || record.processedAt,\n          pdfUrl: record.pdfUrl || '‚ùå MISSING',\n          hasResults: !!(record.outputData || record.results)\n        });\n      });\n    };\n    console.log('üí° Debug: Type window.debugAlgorithmResults() in console to check database');\n  }, []);\n\n  useEffect(() => {\n    loadPatients();\n  }, []);\n\n  useEffect(() => {\n    if (selectedPatient && showProcessingUI) {\n      loadProcessingHistory(selectedPatient.id);\n    }\n  }, [selectedPatient, showProcessingUI, isSaved]); // Re-load when saved\n\n  const loadPatients = async () => {\n    try {\n      const patientsData = await DatabaseService.get('patients');\n      const clinicsData = await DatabaseService.get('clinics');\n      const algorithmResults = await DatabaseService.get('algorithmResults') || [];\n\n      // Enrich patients with clinic names and algorithm status\n      const enrichedPatients = patientsData.map(patient => {\n        const patientResults = algorithmResults.filter(r => r.patientId === patient.id);\n        const lastResult = patientResults.length > 0\n          ? patientResults.sort((a, b) => {\n              const aTime = a.inputData?.processedAt || a.processedAt || a.createdAt;\n              const bTime = b.inputData?.processedAt || b.processedAt || b.createdAt;\n              return new Date(bTime) - new Date(aTime);\n            })[0]\n          : null;\n\n        return {\n          ...patient,\n          clinicName: clinicsData.find(c => c.id === patient.clinicId)?.name || 'Unknown Clinic',\n          algorithmStatus: lastResult ? 'completed' : 'pending',\n          lastProcessed: lastResult?.inputData?.processedAt || lastResult?.processedAt || lastResult?.createdAt,\n          totalScans: patientResults.length\n        };\n      });\n\n      setPatients(enrichedPatients);\n      setClinics(clinicsData);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading patients:', error);\n      toast.error('Failed to load patients');\n      setLoading(false);\n    }\n  };\n\n  const loadProcessingHistory = async (patientId) => {\n    try {\n      // Load algorithm results for this patient\n      const results = await DatabaseService.get('algorithmResults');\n      const patientResults = results.filter(r => r.patientId === patientId);\n\n      console.log(`üìã Loaded ${patientResults.length} records for patient ${patientId}`);\n\n      // Log all records for debugging\n      console.log('üìä All records for this patient:');\n      patientResults.forEach((rec, idx) => {\n        const processedTime = rec.inputData?.processedAt || rec.processedAt || rec.createdAt;\n        console.log(`   ${idx + 1}. ${new Date(processedTime).toLocaleString()} - PDF: ${rec.pdfUrl ? '‚úì' : '‚úó'}`);\n      });\n\n      // Check for records without pdfUrl and try to fix them\n      const recordsWithoutPdf = patientResults.filter(r => !r.pdfUrl);\n      if (recordsWithoutPdf.length > 0) {\n        console.log(`\\n‚ö†Ô∏è Found ${recordsWithoutPdf.length} records without PDF URL - attempting auto-fix...`);\n\n        let updatedCount = 0;\n\n        // Step 1: Try to fetch PDFs from Supabase bucket\n        try {\n          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n          const response = await fetch(`${apiUrl}/qeeg/supabase-pdfs`);\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log(`\\n‚òÅÔ∏è Found ${data.count} PDFs in Supabase bucket:`);\n            data.pdfs.forEach(pdf => console.log(`   - ${pdf.name}`));\n\n            // Match PDFs with database records using smart matching\n            console.log(`\\nüîç Attempting to match ${recordsWithoutPdf.length} records...`);\n            for (const record of recordsWithoutPdf) {\n              const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n              const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n              const recordTimestamp = new Date(processedTime).getTime();\n              const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n\n              console.log(`\\n   Record: ${patientName} @ ${new Date(processedTime).toLocaleString()}`);\n              console.log(`   Searching for PDFs matching: neurosense-report-${sanitizedName}-*.pdf`);\n\n              // Find PDFs matching patient name\n              const matchingPdfs = data.pdfs.filter(pdf => {\n                const pdfNameLower = pdf.name.toLowerCase();\n                return pdfNameLower.includes(`neurosense-report-${sanitizedName}-`) &&\n                       pdfNameLower.endsWith('.pdf');\n              });\n\n              console.log(`   Found ${matchingPdfs.length} PDFs for this patient`);\n\n              if (matchingPdfs.length > 0) {\n                // Find PDF with closest timestamp (within 60 seconds)\n                let bestMatch = null;\n                let smallestDiff = Infinity;\n\n                for (const pdf of matchingPdfs) {\n                  // Extract timestamp from filename: neurosense-report-name-TIMESTAMP.pdf\n                  const match = pdf.name.match(/-(\\d+)\\.pdf$/);\n                  if (match) {\n                    const pdfTimestamp = parseInt(match[1]);\n                    const diff = Math.abs(pdfTimestamp - recordTimestamp);\n                    console.log(`      ${pdf.name}: timestamp diff = ${diff}ms (${(diff/1000).toFixed(1)}s)`);\n\n                    // Accept if within 60 seconds (60000ms)\n                    if (diff < 60000 && diff < smallestDiff) {\n                      smallestDiff = diff;\n                      bestMatch = pdf;\n                    }\n                  }\n                }\n\n                if (bestMatch) {\n                  console.log(`   ‚úÖ MATCH FOUND! ${bestMatch.name} (${(smallestDiff/1000).toFixed(1)}s difference)`);\n                  console.log(`   URL: ${bestMatch.url}`);\n                  record.pdfUrl = bestMatch.url;\n                  await DatabaseService.update('algorithmResults', record.id, record);\n                  updatedCount++;\n                } else {\n                  console.log(`   ‚ö†Ô∏è PDFs found but timestamp difference too large (>60s)`);\n                }\n              } else {\n                console.log(`   ‚ùå No PDFs found for patient: ${sanitizedName}`);\n              }\n            }\n          }\n        } catch (supabaseErr) {\n          console.log('‚ö†Ô∏è Could not fetch from Supabase, trying local storage...');\n        }\n\n        // Step 2: If Supabase fails, try local storage\n        for (const record of recordsWithoutPdf) {\n          if (record.pdfUrl) continue; // Already updated from Supabase\n\n          try {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n            const timestamp = new Date(processedTime).getTime();\n            const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n            const possibleFilename = `neurosense-report-${sanitizedName}-${timestamp}.pdf`;\n            const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n            const backendBaseUrl = apiUrl.replace('/api', '');\n            const testUrl = `${backendBaseUrl}/uploads/${possibleFilename}`;\n\n            // Test if file exists locally\n            const response = await fetch(testUrl, { method: 'HEAD' });\n            if (response.ok) {\n              console.log(`‚úÖ Found local PDF for record ${record.id}: ${testUrl}`);\n              record.pdfUrl = `/uploads/${possibleFilename}`;\n              await DatabaseService.update('algorithmResults', record.id, record);\n              updatedCount++;\n            }\n          } catch (err) {\n            console.log(`‚ùå Could not find PDF for record ${record.id}`);\n          }\n        }\n\n        if (updatedCount > 0) {\n          console.log(`‚úÖ Auto-fixed ${updatedCount} records with PDF URLs`);\n          // Reload the results after updating\n          const updatedResults = await DatabaseService.get('algorithmResults');\n          const updatedPatientResults = updatedResults.filter(r => r.patientId === patientId);\n          setProcessingHistory(updatedPatientResults);\n\n          updatedPatientResults.forEach((record, idx) => {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            console.log(`   Record ${idx + 1}:`, {\n              processedAt: processedTime,\n              hasPdfUrl: !!record.pdfUrl,\n              pdfUrl: record.pdfUrl || 'NOT SET',\n              pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n            });\n          });\n          return;\n        }\n      }\n\n      patientResults.forEach((record, idx) => {\n        const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n        console.log(`   Record ${idx + 1}:`, {\n          processedAt: processedTime,\n          hasPdfUrl: !!record.pdfUrl,\n          pdfUrl: record.pdfUrl || 'NOT SET',\n          pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n        });\n      });\n\n      setProcessingHistory(patientResults);\n    } catch (error) {\n      console.error('Error loading processing history:', error);\n      setProcessingHistory([]);\n    }\n  };\n\n  const handleGenerateReport = (patient) => {\n    setSelectedPatient(patient);\n    setShowProcessingUI(true);\n    // Reset upload states\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setIsSaved(false);\n    setPdfUrl(null);\n    setIsSaving(false);\n  };\n\n  const handleBackToList = () => {\n    setShowProcessingUI(false);\n    setSelectedPatient(null);\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setProcessingHistory([]);\n    setIsSaved(false);\n    setIsSaving(false);\n    // Reload patients to update status\n    loadPatients();\n  };\n\n  // Helper function to get patient name (handles different field names)\n  const getPatientName = (patient) => {\n    return patient?.fullName || patient?.full_name || patient?.name || patient?.email || 'Unknown Patient';\n  };\n\n  // Helper function to get status badge\n  const getStatusBadge = (status, lastProcessed) => {\n    if (status === 'completed') {\n      return (\n        <div className=\"flex flex-col items-start\">\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n            <CheckCircle className=\"h-3 w-3 mr-1\" />\n            Completed\n          </span>\n          {lastProcessed && (\n            <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              {new Date(lastProcessed).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n            </span>\n          )}\n        </div>\n      );\n    }\n    return (\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\">\n        <Activity className=\"h-3 w-3 mr-1\" />\n        Pending\n      </span>\n    );\n  };\n\n  // Filter patients based on search and filters\n  const filteredPatients = patients.filter(patient => {\n    const matchesSearch = searchTerm === '' ||\n      getPatientName(patient).toLowerCase().includes(searchTerm.toLowerCase()) ||\n      patient.email?.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesClinic = selectedClinicFilter === '' || patient.clinicId === selectedClinicFilter;\n\n    const matchesDate = dateFilter === '' ||\n      (patient.lastProcessed && new Date(patient.lastProcessed).toISOString().split('T')[0] === dateFilter);\n\n    return matchesSearch && matchesClinic && matchesDate;\n  });\n\n  // Group filtered patients by clinic\n  const groupedPatients = clinics.map(clinic => ({\n    clinic,\n    patients: filteredPatients.filter(p => p.clinicId === clinic.id)\n  })).filter(group => group.patients.length > 0);\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedClinicFilter('');\n    setDateFilter('');\n  };\n\n  const handleFileUpload = (type, event) => {\n    const file = event.target.files[0];\n    if (file) {\n      if (type === 'eo') {\n        setEyesOpenFile(file);\n      } else {\n        setEyesClosedFile(file);\n      }\n      // Reset processing state when new files are uploaded\n      setProcessingComplete(false);\n      setResults(null);\n      setConsoleLog([]);\n      setProgress(0);\n      setIsSaved(false);\n      setIsSaving(false);\n      setPdfUrl(null);\n    }\n  };\n\n  const processQEEGFiles = async () => {\n    setIsProcessing(true);\n    setConsoleLog([]);\n    setProgress(0);\n\n    try {\n      // Console log: Starting process\n      setConsoleLog(prev => [...prev, 'üöÄ Starting QEEG analysis...']);\n      setProgress(10);\n\n      // Create FormData to send files\n      const formData = new FormData();\n      formData.append('eyesOpen', eyesOpenFile);\n      formData.append('eyesClosed', eyesClosedFile);\n      formData.append('patientId', selectedPatient.id);\n      formData.append('patientName', getPatientName(selectedPatient));\n      formData.append('clinicName', selectedPatient.clinicName);\n      // Add complete patient data for PDF\n      formData.append('dateOfBirth', selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified');\n      formData.append('age', selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A');\n      formData.append('gender', selectedPatient.gender || 'Not specified');\n      formData.append('handedness', selectedPatient.handedness || 'Right');\n\n      setConsoleLog(prev => [...prev, 'üì§ Uploading files to server...']);\n      setProgress(20);\n\n      // Validate file sizes before upload (50MB limit)\n      const maxFileSize = 50 * 1024 * 1024; // 50MB\n      if (eyesOpenFile.size > maxFileSize || eyesClosedFile.size > maxFileSize) {\n        const oversizedFile = eyesOpenFile.size > maxFileSize ? eyesOpenFile : eyesClosedFile;\n        const fileSizeMB = (oversizedFile.size / (1024 * 1024)).toFixed(2);\n        throw new Error(`File \"${oversizedFile.name}\" is too large (${fileSizeMB}MB). Maximum file size is 50MB. Please compress or split the file.`);\n      }\n\n      // Call backend API with timeout\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 300000); // 5 minute timeout for large files\n\n      let response;\n      try {\n        response = await fetch(`${apiUrl}/qeeg/process`, {\n          method: 'POST',\n          body: formData,\n          signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n      } catch (fetchError) {\n        clearTimeout(timeoutId);\n        if (fetchError.name === 'AbortError') {\n          throw new Error('Upload timed out after 5 minutes. Please check: 1) File size (<50MB), 2) Backend is running (npm run dev:backend), 3) Internet connection is stable. Try compressing PDF files if too large.');\n        }\n        // Check if it's a network error (backend not running)\n        if (fetchError.message.includes('Failed to fetch') || fetchError.message.includes('fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure the backend is running on port 5000. Run \"npm run dev:backend\" to start the server.');\n        }\n        throw fetchError;\n      }\n\n      setConsoleLog(prev => [...prev, 'üìä Parsing QEEG data tables...']);\n      setProgress(40);\n\n      if (!response.ok) {\n        let errorMessage = 'Failed to process QEEG files';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n\n          // Add specific error messages based on error code\n          if (errorData.code === 'LIMIT_FILE_SIZE') {\n            errorMessage = 'File size exceeds the maximum limit of 50MB. Please compress your files or split them into smaller parts.';\n          } else if (errorData.code === 'GEMINI_QUOTA_EXCEEDED' || response.status === 429) {\n            // Extract retry time if available in error message\n            let retryTime = null;\n            const retryMatch = errorData.message?.match(/retry in ([\\d.]+)s/i);\n            if (retryMatch) {\n              retryTime = Math.ceil(parseFloat(retryMatch[1]));\n            }\n\n            errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                         'The Gemini AI service has reached its daily limit (20 requests/day).\\n\\n' +\n                         '‚úÖ Quick Solutions:\\n' +\n                         (retryTime ? `‚Ä¢ Wait ${retryTime} seconds and try again (quota will reset)\\n` : '‚Ä¢ Wait a few minutes and try again\\n') +\n                         '‚Ä¢ Re-upload the SAME files you processed before (uses cache, no quota needed)\\n' +\n                         '‚Ä¢ Contact administrator to upgrade API plan\\n\\n' +\n                         'üí° Tip: The system remembers files you\\'ve already processed!';\n          } else if (response.status === 503) {\n            errorMessage = 'Backend service is unavailable. Please ensure the server is running.';\n          } else if (response.status === 413) {\n            errorMessage = 'File payload is too large. Maximum allowed size is 50MB.';\n          } else if (response.status === 500) {\n            // Parse detailed error from server for 500 errors\n            if (errorData.message && (errorData.message.includes('Gemini') || errorData.message.includes('quota') || errorData.message.includes('429'))) {\n              // Extract retry time from detailed error\n              let retryTime = null;\n              const retryMatch = errorData.message.match(/retry in ([\\d.]+)s/i);\n              if (retryMatch) {\n                retryTime = Math.ceil(parseFloat(retryMatch[1]));\n              }\n\n              // Check if it's specifically a quota error\n              if (errorData.message.includes('quota') || errorData.message.includes('429')) {\n                errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                             'Google Gemini API has reached its free tier limit.\\n\\n' +\n                             '‚úÖ What to do:\\n' +\n                             (retryTime ? `1. Wait ${retryTime} seconds and try again\\n` : '1. Wait a few minutes and try again\\n') +\n                             '2. Or re-upload the SAME files (cached, no quota used)\\n' +\n                             '3. Or contact admin to upgrade API plan\\n\\n' +\n                             'üìä Free tier: 20 requests per day\\n' +\n                             'üí∞ Upgrade: https://ai.google.dev/pricing';\n              } else if (errorData.message && (\n                errorData.message.includes('PDF text extraction') ||\n                errorData.message.includes('Missing power tables') ||\n                errorData.code === 'PDF_EXTRACTION_FAILED'\n              )) {\n                // PDF extraction specific error\n                errorMessage = '‚ö†Ô∏è PDF Extraction Error\\n\\n' +\n                             errorData.message + '\\n\\n' +\n                             'üí° Troubleshooting:\\n' +\n                             '1. Verify PDFs contain QEEG frequency band tables\\n' +\n                             '2. Ensure PDFs are not password-protected\\n' +\n                             '3. Check if PDFs are scanned images (need OCR)\\n' +\n                             '4. Try exporting PDFs in a different format\\n' +\n                             '5. Contact support if issue persists';\n              } else {\n                errorMessage = '‚ö†Ô∏è Gemini AI Service Error\\n\\n' +\n                             'There was an issue with the AI service.\\n\\n' +\n                             'Please try again in a moment or contact support if the issue persists.';\n              }\n            }\n          }\n        } catch (e) {\n          // If error response is not JSON, use status text\n          errorMessage = `Server error (${response.status}): ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data = await response.json();\n\n      // Capture data type (raw or zscore)\n      if (data.data.dataType) {\n        setDataType(data.data.dataType);\n        console.log('üìä Data type:', data.data.dataType);\n        if (data.data.dataType === 'zscore') {\n          setConsoleLog(prev => [...prev, 'üî¨ Z-Score mode detected']);\n        }\n      }\n\n      // Auto-set PDF URL if returned from backend\n      if (data.data.pdfUrl) {\n        setPdfUrl(data.data.pdfUrl);\n        console.log('‚úÖ PDF auto-generated:', data.data.pdfUrl);\n        setConsoleLog(prev => [...prev, 'üìÑ PDF report generated automatically']);\n      }\n\n      setConsoleLog(prev => [...prev, 'üßÆ Calculating 7 brain health parameters...']);\n      setProgress(60);\n\n      // Simulate calculation steps for better UX\n      await new Promise(resolve => setTimeout(resolve, 500));\n      setConsoleLog(prev => [...prev, '  ‚úì Cognition parameter calculated']);\n      setProgress(65);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Stress parameter calculated']);\n      setProgress(70);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Focus & Attention parameter calculated']);\n      setProgress(75);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Burnout & Fatigue parameter calculated']);\n      setProgress(80);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Emotional Regulation parameter calculated']);\n      setProgress(85);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Learning parameter calculated']);\n      setProgress(90);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Creativity parameter calculated']);\n      setProgress(95);\n\n      // Convert API results to display format with NaN/Infinity protection\n      const finalResults = data.data.results.map(param => {\n        // Sanitize score values to prevent NaN/Infinity\n        const sanitizedScore = Number.isFinite(param.score) ? param.score : 0;\n        const sanitizedMaxScore = Number.isFinite(param.maxScore) && param.maxScore > 0 ? param.maxScore : 3;\n        const percentage = Math.round((sanitizedScore / sanitizedMaxScore) * 100);\n\n        // Sanitize metrics\n        const sanitizedMetrics = (param.metrics || []).map(metric => ({\n          ...metric,\n          score: Number.isFinite(metric.score) ? metric.score : 0,\n          value: Number.isFinite(metric.value) ? metric.value : 0\n        }));\n\n        return {\n          parameter: param.name,\n          score: Number.isFinite(percentage) ? percentage : 0,\n          rawScore: `${sanitizedScore}/${sanitizedMaxScore}`,\n          status: param.classification,\n          color: param.classification === 'High' ? 'green' :\n                 param.classification === 'Medium' ? 'blue' : 'orange',\n          metrics: sanitizedMetrics\n        };\n      });\n\n      setConsoleLog(prev => [...prev, '‚úÖ Analysis complete!']);\n      setConsoleLog(prev => [...prev, `üìà Overall Score: ${data.data.overallScore}/${data.data.maxScore}`]);\n      setProgress(100);\n\n      setResults(finalResults);\n      setIsProcessing(false);\n      setProcessingComplete(true);\n      setIsSaved(false); // Mark as not saved yet\n\n      toast.success('QEEG analysis completed successfully!');\n\n    } catch (error) {\n      console.error('Error processing QEEG files:', error);\n      setConsoleLog(prev => [...prev, `‚ùå Error: ${error.message}`]);\n      setIsProcessing(false);\n      toast.error(error.message || 'Failed to process QEEG files');\n    }\n  };\n\n  const saveResultsToDatabase = async (resultData) => {\n    if (!resultData) {\n      toast.error('No results to save');\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      toast.loading('Saving results to database...', { id: 'save-results' });\n\n      console.log('üíæ Saving results to database...');\n\n      // PDF should already exist from auto-generation\n      if (!pdfUrl) {\n        console.warn('‚ö†Ô∏è No PDF URL available - PDF may not have been generated');\n      }\n\n      const algorithmResult = {\n        // Don't specify ID - let database auto-generate UUID\n        patientId: selectedPatient.id,\n        clinicId: selectedPatient.clinicId,\n        algorithmName: 'Algorithm 1 - 7 Parameters',\n        inputData: {\n          patientName: getPatientName(selectedPatient),\n          clinicName: selectedPatient.clinicName,\n          eyesOpenFile: eyesOpenFile?.name,\n          eyesClosedFile: eyesClosedFile?.name,\n          processedAt: new Date().toISOString(),\n          processedBy: 'super_admin'\n        },\n        outputData: resultData,\n        pdfUrl: pdfUrl || null,\n        status: 'completed',\n        errorMessage: null\n      };\n\n      console.log('üíæ Saving to database...');\n      console.log('   Patient:', algorithmResult.inputData.patientName);\n      console.log('   PDF URL:', pdfUrl || 'NOT SET');\n      console.log('   PDF Type:', pdfUrl ? (pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None');\n\n      await DatabaseService.add('algorithmResults', algorithmResult);\n\n      setIsSaved(true);\n      setIsSaving(false);\n\n      toast.success('‚úÖ Results saved successfully!', { id: 'save-results' });\n\n      // Reload history and patient list to update status\n      loadProcessingHistory(selectedPatient.id);\n      loadPatients();\n    } catch (error) {\n      console.error('‚ùå Error saving results:', error);\n      setIsSaving(false);\n      toast.error('‚ùå Failed to save results: ' + error.message, { id: 'save-results' });\n    }\n  };\n\n  const handleSaveResults = async () => {\n    if (results) {\n      try {\n        console.log('üíæ Saving results to database...');\n\n        // Step 1: Check if existing PDF URL available (no generation!)\n        let finalPdfUrl = pdfUrl;\n\n        if (!finalPdfUrl) {\n          console.log('üîç Checking for existing PDF in database...');\n          const existingPdf = await findExistingPDF();\n\n          if (existingPdf) {\n            console.log('‚úÖ Found existing PDF URL:', existingPdf);\n            finalPdfUrl = existingPdf;\n            setPdfUrl(existingPdf);\n          } else {\n            console.log('‚ÑπÔ∏è No existing PDF found - save data only, PDF can be generated later');\n          }\n        }\n\n        // Step 2: Save results to database (with or without PDF URL)\n        await saveResultsToDatabase(results);\n\n        // Step 3: Show success message\n        if (finalPdfUrl) {\n          toast.success('‚úÖ Results saved! PDF is available for download.');\n        } else {\n          toast.success('‚úÖ Results saved! Generate PDF from history to get report.');\n        }\n\n        console.log('‚úÖ Save complete! PDF URL:', finalPdfUrl || 'Not available');\n\n      } catch (error) {\n        console.error('‚ùå Error saving results:', error);\n        toast.error('Failed to save results: ' + error.message);\n      }\n    }\n  };\n\n  // New function: Generate and download PDF separately\n  const handleGenerateAndDownloadPDF = async () => {\n    if (!results) {\n      toast.error('No results to generate PDF from');\n      return;\n    }\n\n    try {\n      console.log('üìÑ Starting PDF generation...');\n      toast.loading('Generating NeuroSense PDF Report...', { id: 'generate-pdf' });\n\n      const pdfResult = await generatePDFReport(results);\n\n      if (pdfResult && pdfResult.url) {\n        setPdfUrl(pdfResult.url);\n        console.log('‚úÖ PDF generated successfully:', pdfResult.url);\n        toast.success('PDF Report generated!', { id: 'generate-pdf' });\n\n        // Auto-download the newly generated PDF\n        setTimeout(() => {\n          console.log('üì• Auto-downloading newly generated PDF...');\n          handleDownloadPDF();\n        }, 500);\n      } else {\n        console.error('‚ö†Ô∏è PDF generation returned no URL');\n        toast.error('Failed to generate PDF', { id: 'generate-pdf' });\n      }\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      toast.error('Failed to generate PDF: ' + error.message, { id: 'generate-pdf' });\n    }\n  };\n\n  // Helper function to find existing PDF for this patient\n  const findExistingPDF = async () => {\n    try {\n      if (!selectedPatient || !selectedPatient.id) return null;\n\n      // Get patient's processing history\n      const allResults = await DatabaseService.get('algorithmResults');\n      const patientResults = allResults.filter(r => r.patientId === selectedPatient.id);\n\n      console.log(`üîç Found ${patientResults.length} existing records for patient ${getPatientName(selectedPatient)}`);\n\n      // Find most recent record with a PDF\n      const recordsWithPdf = patientResults\n        .filter(r => r.pdfUrl && r.pdfUrl !== 'null' && r.pdfUrl !== '')\n        .sort((a, b) => {\n          const dateA = new Date(a.inputData?.processedAt || a.processedAt || a.createdAt || 0);\n          const dateB = new Date(b.inputData?.processedAt || b.processedAt || b.createdAt || 0);\n          return dateB - dateA; // Most recent first\n        });\n\n      if (recordsWithPdf.length > 0) {\n        const latestPdf = recordsWithPdf[0].pdfUrl;\n        console.log('‚úÖ Found most recent PDF:', latestPdf);\n        return latestPdf;\n      }\n\n      console.log('‚ùå No existing PDF found in database');\n      return null;\n    } catch (error) {\n      console.error('Error finding existing PDF:', error);\n      return null;\n    }\n  };\n\n  const handleExecuteCalculation = () => {\n    if (eyesOpenFile && eyesClosedFile) {\n      processQEEGFiles();\n    } else {\n      toast.error('Please upload both QEEG data files');\n    }\n  };\n\n  const handleExportResults = () => {\n    if (results) {\n      // Create CSV content\n      const csvContent = [\n        ['Parameter', 'Score (%)', 'Status'],\n        ...results.map(r => [r.parameter, r.score, r.status])\n      ].map(row => row.join(',')).join('\\n');\n\n      // Create and download file\n      const blob = new Blob([csvContent], { type: 'text/csv' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'neurosense-algorithm-results.csv';\n      a.click();\n      window.URL.revokeObjectURL(url);\n    }\n  };\n\n  const generatePDFReport = async (resultData) => {\n    if (!resultData || !selectedPatient) {\n      console.error('‚ùå Cannot generate PDF: Missing resultData or selectedPatient');\n      toast.error('Cannot generate PDF: Missing data');\n      return null;\n    }\n\n    try {\n      console.log('üîß Preparing patient data...');\n\n      // Prepare patient data - FIXED: Use current date for recording, not DOB\n      const patientData = {\n        name: getPatientName(selectedPatient),\n        dateOfRecording: new Date().toISOString().split('T')[0], // TODAY'S DATE, not DOB!\n        dateOfBirth: selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified',\n        age: selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A',\n        gender: selectedPatient.gender || 'Not specified',\n        handedness: selectedPatient.handedness || 'Right', // Default to Right if not specified\n        patientId: selectedPatient.id,\n        occupation: selectedPatient.occupation || 'Not specified',\n        symptoms: selectedPatient.symptoms || []\n      };\n\n      console.log('üë§ Patient Data (Fixed):', patientData);\n      console.log('   Name:', patientData.name);\n      console.log('   Recording Date:', patientData.dateOfRecording);\n      console.log('   DOB:', patientData.dateOfBirth);\n      console.log('   Age:', patientData.age);\n      console.log('   Gender:', patientData.gender);\n      console.log('   Handedness:', patientData.handedness);\n\n      // Prepare algorithm results with STRONG validation to avoid NaN errors\n      const algorithmResults = {\n        parameters: resultData.map(result => {\n          const scoreParts = (result.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          const maxScore = parseInt(scoreParts[1]) || 3;\n\n          // Clean metrics to remove any NaN values\n          const cleanMetrics = (result.metrics || []).map(metric => ({\n            name: metric.name || 'Unknown',\n            score: isNaN(metric.score) ? 0 : (parseInt(metric.score) || 0),\n            value: isNaN(metric.value) ? 0 : (parseFloat(metric.value) || 0),\n            threshold: metric.threshold || 'Not provided'\n          }));\n\n          return {\n            name: result.parameter || 'Unknown Parameter',\n            score: isNaN(score) ? 0 : score,\n            maxScore: isNaN(maxScore) ? 3 : maxScore,\n            classification: result.status || 'Unknown',\n            metrics: cleanMetrics\n          };\n        }),\n        overallScore: resultData.reduce((sum, r) => {\n          const scoreParts = (r.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          return sum + (isNaN(score) ? 0 : score);\n        }, 0)\n      };\n\n      console.log('üìä Algorithm Results (NaN-free):', algorithmResults);\n\n      // EXTRA SAFETY: Double-check for any NaN in the data\n      const dataString = JSON.stringify(algorithmResults);\n      if (dataString.includes('NaN')) {\n        console.error('‚ö†Ô∏è WARNING: Found NaN in algorithm results!');\n        console.error('Raw data:', algorithmResults);\n        throw new Error('Data contains NaN values. Please check the calculation results.');\n      }\n\n      console.log('üìä Algorithm Results:', algorithmResults);\n\n      // Prepare QEEG data (use sample data if not available)\n      const qeegData = {\n        EC: {\n          absolute: { Fz: { Delta: 5.2, Theta: 4.1, Alpha: 8.3, Beta: 6.2, HiBeta: 3.1 } },\n          relative: { Pz: { Alpha: 45.2 } },\n          special: { alphaPeak: 10.3, O1: 10.1 }\n        },\n        EO: {\n          absolute: { Fz: { Theta: 3.8, Beta: 3.2, HiBeta: 2.5 } },\n          relative: { Pz: { Alpha: 28.7 } }\n        }\n      };\n\n      // Call backend API to generate PDF\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const pdfEndpoint = `${apiUrl}/qeeg/generate-pdf`;\n\n      console.log('üåê Calling backend API:', pdfEndpoint);\n      console.log('üì° Request payload size:', JSON.stringify({ patientData, algorithmResults, qeegData }).length, 'bytes');\n\n      // Add timeout handling\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 60000); // 60 second timeout (increased for Gemini AI)\n\n      const response = await fetch(pdfEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          patientData,\n          algorithmResults,\n          qeegData\n        }),\n        signal: controller.signal\n      }).catch(error => {\n        clearTimeout(timeoutId);\n        if (error.name === 'AbortError') {\n          throw new Error('PDF generation timed out after 60 seconds. Please check: 1) Backend is running, 2) Gemini API key is configured, 3) Internet connection is stable.');\n        }\n        if (error.message.includes('Failed to fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure backend is running on port 5000 (run: npm run dev:backend)');\n        }\n        throw error;\n      });\n\n      clearTimeout(timeoutId);\n\n      console.log('üì° Backend response status:', response.status);\n      console.log('üì° Backend response headers:', Object.fromEntries(response.headers.entries()));\n\n      if (!response.ok) {\n        let errorMessage = `Server returned ${response.status}`;\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n          console.error('‚ùå Backend error data:', errorData);\n        } catch (e) {\n          const errorText = await response.text();\n          errorMessage = errorText || errorMessage;\n          console.error('‚ùå Backend error text:', errorText);\n        }\n        throw new Error(`Failed to generate PDF: ${errorMessage}`);\n      }\n\n      const data = await response.json();\n      console.log('üì¶ Backend response data:', data);\n\n      if (!data || !data.success || !data.data) {\n        console.error('‚ùå Invalid response format:', data);\n        throw new Error('Invalid response from server');\n      }\n\n      // Use the complete URL from backend instead of constructing it\n      const pdfResult = {\n        url: data.data.url, // Backend already provides complete URL\n        path: data.data.path,\n        filename: data.data.filename\n      };\n\n      console.log('‚úÖ PDF generated successfully!', pdfResult);\n      console.log('‚úÖ PDF URL:', pdfResult.url);\n\n      return pdfResult;\n\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      console.error('‚ùå Error name:', error.name);\n      console.error('‚ùå Error message:', error.message);\n\n      if (error.message && error.stack) {\n        console.error('‚ùå Error stack:', error.stack);\n      }\n\n      // Provide specific error messages based on error type\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\n        console.error('‚ùå NETWORK ERROR: Cannot connect to backend server');\n        console.error('‚ùå Please ensure backend server is running on http://localhost:5000');\n        toast.error('Cannot connect to server. Please ensure backend is running on port 5000.');\n      } else if (error.name === 'AbortError') {\n        console.error('‚ùå TIMEOUT ERROR: PDF generation took too long');\n        toast.error('PDF generation timed out. Server might be overloaded.');\n      } else {\n        console.error('‚ùå PDF GENERATION ERROR:', error.message);\n        toast.error(`PDF generation failed: ${error.message}`);\n      }\n\n      return null;\n    }\n  };\n\n  const handleDownloadPDF = async () => {\n    if (!pdfUrl) {\n      toast.error('PDF not available. Please save results first.');\n      return;\n    }\n\n    try {\n      toast.loading('Downloading PDF...', { id: 'download-pdf' });\n\n      // Construct full backend URL\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\n      const backendBaseUrl = apiUrl.replace('/api', ''); // Remove /api to get base URL\n\n      // Handle both Supabase URLs and local URLs\n      let fullPdfUrl;\n      if (pdfUrl.startsWith('http')) {\n        // It's already a full URL (Supabase)\n        fullPdfUrl = pdfUrl;\n      } else {\n        // It's a local path, construct full URL\n        fullPdfUrl = `${backendBaseUrl}${pdfUrl}`;\n      }\n\n      console.log('üîΩ Download Info:', {\n        originalPdfUrl: pdfUrl,\n        backendBaseUrl,\n        fullPdfUrl,\n        isSupabase: pdfUrl.startsWith('http')\n      });\n\n      // For local files, try direct window.open first (simpler approach)\n      if (!pdfUrl.startsWith('http')) {\n        console.log('üì• Using direct download method for local file');\n\n        // Create a hidden link and click it\n        const link = document.createElement('a');\n        link.href = fullPdfUrl;\n        link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n        link.target = '_blank';\n\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        toast.success('PDF download started!', { id: 'download-pdf' });\n        return;\n      }\n\n      // For Supabase URLs, use fetch method\n      console.log('üì• Using fetch method for Supabase URL');\n\n      const response = await fetch(fullPdfUrl);\n\n      if (!response.ok) {\n        console.error('‚ùå Download failed:', {\n          status: response.status,\n          statusText: response.statusText\n        });\n        throw new Error(`Server returned ${response.status}: ${response.statusText}`);\n      }\n\n      // Convert to blob\n      const blob = await response.blob();\n\n      // Verify blob is valid\n      if (!blob || blob.size === 0) {\n        throw new Error('Downloaded file is empty');\n      }\n\n      console.log('‚úÖ PDF fetched successfully, size:', (blob.size / 1024).toFixed(2), 'KB');\n\n      // Create download link\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n      // Trigger download\n      document.body.appendChild(link);\n      link.click();\n\n      // Cleanup\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(downloadUrl);\n      }, 100);\n\n      toast.success('PDF downloaded successfully!', { id: 'download-pdf' });\n\n    } catch (error) {\n      console.error('‚ùå Download error:', {\n        error: error.message,\n        pdfUrl,\n        stack: error.stack\n      });\n\n      // Provide more helpful error messages\n      let errorMessage = 'Failed to download PDF';\n      if (error.message.includes('404')) {\n        errorMessage = 'PDF file not found on server';\n      } else if (error.message.includes('Failed to fetch')) {\n        errorMessage = 'Network error. Please check your connection.';\n      } else {\n        errorMessage = `Download failed: ${error.message}`;\n      }\n\n      toast.error(errorMessage, { id: 'download-pdf' });\n    }\n  };\n\n  const calculateAge = (dateOfBirth) => {\n    if (!dateOfBirth) return 'N/A';\n    const today = new Date();\n    const birthDate = new Date(dateOfBirth);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    return age;\n  };\n\n  // Helper function to get color based on score\n  // 1/3 = Red, 2/3 = Yellow, 3/3 = Green\n  const getScoreColor = (rawScore) => {\n    if (!rawScore) return 'gray';\n\n    const [score, maxScore] = rawScore.split('/').map(Number);\n\n    if (score === 1) return 'red';      // 1/3\n    if (score === 2) return 'yellow';   // 2/3\n    if (score === 3) return 'green';    // 3/3\n\n    return 'gray';\n  };\n\n  const getStatusColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'text-red-500';\n      case 'yellow': return 'text-yellow-500';\n      case 'green': return 'text-green-500';\n      default: return 'text-gray-500';\n    }\n  };\n\n  const getStatusBgColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    if (color === 'green') return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n    if (color === 'yellow') return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n    if (color === 'red') return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400';\n    return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400';\n  };\n\n  const getProgressBarColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'bg-red-500';\n      case 'yellow': return 'bg-yellow-500';\n      case 'green': return 'bg-green-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading patients...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Patient List View\n  if (!showProcessingUI) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n          <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n          <p className=\"text-primary-light mt-2\">Select a patient to generate Algorithm 1 report</p>\n        </div>\n\n        {/* Filter Bar */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4\">\n          <div className=\"flex flex-col lg:flex-row gap-4\">\n            {/* Patient Search */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Search Patient\n              </label>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search by name or email...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clinic Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Clinic\n              </label>\n              <div className=\"relative\">\n                <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <select\n                  value={selectedClinicFilter}\n                  onChange={(e) => setSelectedClinicFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary appearance-none\"\n                >\n                  <option value=\"\">All Clinics</option>\n                  {clinics.map(clinic => (\n                    <option key={clinic.id} value={clinic.id}>\n                      {clinic.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            {/* Date Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Date\n              </label>\n              <div className=\"relative\">\n                <Calendar className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"date\"\n                  value={dateFilter}\n                  onChange={(e) => setDateFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clear Filters Button */}\n            {(searchTerm || selectedClinicFilter || dateFilter) && (\n              <div className=\"flex items-end\">\n                <button\n                  onClick={clearFilters}\n                  className=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  <span>Clear</span>\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Active Filters Display */}\n          {(searchTerm || selectedClinicFilter || dateFilter) && (\n            <div className=\"mt-3 flex flex-wrap gap-2\">\n              {searchTerm && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\">\n                  Search: \"{searchTerm}\"\n                </span>\n              )}\n              {selectedClinicFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400\">\n                  Clinic: {clinics.find(c => c.id === selectedClinicFilter)?.name}\n                </span>\n              )}\n              {dateFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n                  Date: {new Date(dateFilter).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n                </span>\n              )}\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 self-center\">\n                ({filteredPatients.length} {filteredPatients.length === 1 ? 'patient' : 'patients'} found)\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Patient List - Clinic-wise */}\n        <div className=\"space-y-4\">\n          {groupedPatients.length > 0 ? (\n            groupedPatients.map(({ clinic, patients: clinicPatients }) => (\n            <div key={clinic.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              {/* Clinic Header */}\n              <div className=\"bg-accent-light dark:bg-primary/20 border-b border-primary-light dark:border-primary px-6 py-3\">\n                <div className=\"flex items-center\">\n                  <Building2 className=\"h-5 w-5 text-primary mr-2\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                    {clinic.name}\n                  </h3>\n                  <span className=\"ml-3 text-sm text-gray-600 dark:text-gray-400\">\n                    ({clinicPatients.length} {clinicPatients.length === 1 ? 'patient' : 'patients'})\n                  </span>\n                </div>\n              </div>\n\n              {/* Patient Table */}\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Patient Name\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Email\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Previous Scans\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Action\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n                    {clinicPatients.map(patient => (\n                      <tr key={patient.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex items-center\">\n                            <User className=\"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2\" />\n                            <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                              {getPatientName(patient)}\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          {patient.email || 'N/A'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          <span className=\"flex items-center\">\n                            <History className=\"h-4 w-4 mr-1\" />\n                            {patient.totalScans || 0} {patient.totalScans === 1 ? 'scan' : 'scans'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          {getStatusBadge(patient.algorithmStatus, patient.lastProcessed)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right\">\n                          <button\n                            onClick={() => handleGenerateReport(patient)}\n                            className=\"bg-primary hover:bg-navy-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-md flex items-center ml-auto\"\n                          >\n                            <FileText className=\"h-4 w-4 mr-2\" />\n                            {patient.algorithmStatus === 'completed' ? 'View/Generate' : 'Generate Report'}\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            ))\n          ) : (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center\">\n              <Filter className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4\" />\n              <p className=\"text-gray-600 dark:text-gray-400 font-medium\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'No patients match your filters'\n                  : 'No patients found'\n                }\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-2\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'Try adjusting your search criteria or clear filters'\n                  : 'Patients will appear here once they are registered in the system'\n                }\n              </p>\n              {(searchTerm || selectedClinicFilter || dateFilter) && (\n                <button\n                  onClick={clearFilters}\n                  className=\"mt-4 px-4 py-2 bg-primary hover:bg-navy-700 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Clear Filters\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Processing UI View\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Back Button */}\n      <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n        <button\n          onClick={handleBackToList}\n          className=\"flex items-center text-primary-light hover:text-white mb-3 transition-colors\"\n        >\n          <ArrowLeft className=\"h-5 w-5 mr-2\" />\n          Back to Patient List\n        </button>\n        <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n        <div className=\"flex items-center gap-3 mt-2\">\n          <p className=\"text-primary-light\">\n            Processing for: <span className=\"font-semibold\">{getPatientName(selectedPatient)}</span> | {selectedPatient?.clinicName}\n          </p>\n          {dataType === 'zscore' && (\n            <span className=\"inline-flex items-center px-3 py-1 bg-purple-500/20 text-purple-200 text-xs font-medium rounded-full border border-purple-400/30\">\n              üî¨ Z-Score Mode\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Panel - QEEG Data Input */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            QEEG Data Input\n          </h2>\n          <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <p className=\"text-xs text-blue-800 dark:text-blue-300\">\n              <span className=\"font-semibold\">‚ÑπÔ∏è Note:</span> Data will be extracted from <strong>pages 13 & 24</strong> of both PDF files\n            </p>\n          </div>\n\n          {/* Eyes Open Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EO - Eyes Open PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('eo', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesOpenFile ? eyesOpenFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesOpenFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Eyes Closed Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EC - Eyes Closed PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('ec', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesClosedFile ? eyesClosedFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesClosedFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Data Loaded Progress */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Data Loaded\n            </label>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\">\n              <div\n                className=\"bg-green-500 h-2.5 rounded-full transition-all duration-300\"\n                style={{ width: `${eyesOpenFile && eyesClosedFile ? 100 : eyesOpenFile || eyesClosedFile ? 50 : 0}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Middle Panel - Algorithm Processing */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Algorithm 1 Processing\n          </h2>\n\n          {/* Execute Button */}\n          <button\n            onClick={handleExecuteCalculation}\n            disabled={!eyesOpenFile || !eyesClosedFile || isProcessing || isSaved}\n            className={`w-full mb-6 py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n              eyesOpenFile && eyesClosedFile && !isProcessing && !isSaved\n                ? 'bg-primary hover:bg-navy-700 text-white'\n                : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n            }`}\n          >\n            <Play className=\"h-5 w-5\" />\n            <span>Execute Calculation</span>\n          </button>\n\n          {/* Processing Animation */}\n          {isProcessing && (\n            <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-center mb-6 shadow-lg\">\n              <div className=\"relative inline-block\">\n                <Activity className=\"h-16 w-16 text-white animate-pulse\" />\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-20 h-20 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                </div>\n              </div>\n              <p className=\"text-white font-medium mt-4\">Processing...</p>\n              <p className=\"text-primary-light text-sm\">{consoleLog.length} actions done</p>\n            </div>\n          )}\n\n          {/* Processing Complete */}\n          {processingComplete && (\n            <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 text-center mb-6\">\n              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-2\" />\n              <p className=\"text-green-800 dark:text-green-400 font-medium\">Processing Complete!</p>\n            </div>\n          )}\n\n          {/* Console */}\n          <div className=\"bg-gray-900 dark:bg-black rounded-lg p-4 min-h-[200px] max-h-[300px] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-gray-700\">\n              <h3 className=\"text-sm font-medium text-gray-300\">Console</h3>\n              <button\n                onClick={() => setConsoleLog([])}\n                className=\"text-xs text-gray-400 hover:text-gray-200\"\n              >\n                Clear\n              </button>\n            </div>\n            <div className=\"space-y-1 font-mono text-xs\">\n              {consoleLog.length > 0 ? (\n                consoleLog.map((log, index) => (\n                  <div key={index} className=\"text-green-400\">\n                    &gt; {log}\n                  </div>\n                ))\n              ) : (\n                <div className=\"text-gray-500 italic\">Console output will appear here...</div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Final 7 Parameter Scores */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              Final 7 Parameter Scores\n            </h2>\n            {results && (\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Total: {results.reduce((sum, r) => sum + parseInt(r.rawScore.split('/')[0]), 0)}/21\n              </span>\n            )}\n          </div>\n\n          {/* Algorithm Info Card */}\n          <div className=\"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <div className=\"flex items-start space-x-2\">\n              <Activity className=\"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0\" />\n              <div>\n                <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1\">\n                  7-Parameter Brain Health Analysis\n                </h3>\n                <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                  Each parameter is calculated from 3 sub-metrics. Score: 0-1 (Low), 2 (Medium), 3 (High).\n                  Each metric shows its calculated value and threshold comparison.\n                </p>\n                <div className=\"mt-2 text-xs text-blue-600 dark:text-blue-400\">\n                  <strong>Parameters:</strong> Cognition ‚Ä¢ Stress ‚Ä¢ Focus & Attention ‚Ä¢ Burnout & Fatigue ‚Ä¢\n                  Emotional Regulation ‚Ä¢ Learning ‚Ä¢ Creativity\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {results ? (\n            <>\n              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => (\n                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n                    {/* Main Parameter */}\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                        {result.parameter}\n                      </span>\n                      <div className=\"flex items-center space-x-3\">\n                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                          {result.rawScore}\n                        </span>\n                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                          {result.status}\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n                      <div\n                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n                        style={{ width: `${result.score}%` }}\n                      ></div>\n                    </div>\n\n                    {/* Sub-Parameters with Calculations */}\n                    {result.metrics && result.metrics.length > 0 && (\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n                          Sub-Parameters & Calculations:\n                        </div>\n                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => (\n                            <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">\n                              {/* Metric Name and Score */}\n                              <div className=\"flex items-center justify-between mb-2\">\n                                <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">\n                                  {metric.name}\n                                </span>\n                                <div className=\"flex items-center space-x-2\">\n                                  {metric.score === 1 ? (\n                                    <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                  ) : (\n                                    <X className=\"h-4 w-4 text-red-500\" />\n                                  )}\n                                  <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                    {metric.score}/1\n                                  </span>\n                                </div>\n                              </div>\n\n                              {/* Calculation Details */}\n                              <div className=\"space-y-1\">\n                                {/* Actual Value */}\n                                {metric.value !== null && metric.value !== undefined && (\n                                  <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-gray-500 dark:text-gray-400\">Value:</span>\n                                    <span className=\"font-mono text-gray-700 dark:text-gray-300\">\n                                      {typeof metric.value === 'object' && metric.value !== null\n                                        ? Object.entries(metric.value).map(([key, val]) =>\n                                            `${key}: ${typeof val === 'number' ? val.toFixed(2) : val}`\n                                          ).join(', ')\n                                        : typeof metric.value === 'number'\n                                        ? metric.value.toFixed(2)\n                                        : metric.value}\n                                    </span>\n                                  </div>\n                                )}\n\n                                {/* Description/Formula */}\n                                {metric.description && (\n                                  <div className=\"text-xs text-gray-600 dark:text-gray-400 italic mt-1\">\n                                    {metric.description}\n                                  </div>\n                                )}\n\n                                {/* Additional Details */}\n                                {metric.details && (\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n                                    {typeof metric.details === 'object'\n                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n                                          <div key={idx} className=\"flex justify-between\">\n                                            <span>{key}:</span>\n                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n                                          </div>\n                                        ))\n                                      : metric.details}\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                {/* Save Results Button (No PDF Generation) */}\n                <button\n                  onClick={handleSaveResults}\n                  disabled={isSaving || isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    isSaved\n                      ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 cursor-not-allowed'\n                      : isSaving\n                      ? 'bg-blue-400 text-white cursor-wait'\n                      : 'bg-primary hover:bg-navy-700 text-white'\n                  }`}\n                >\n                  {isSaving ? (\n                    <>\n                      <Activity className=\"h-5 w-5 animate-spin\" />\n                      <span>Saving...</span>\n                    </>\n                  ) : isSaved ? (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Saved ‚úì</span>\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Save Results</span>\n                    </>\n                  )}\n                </button>\n\n                {/* Generate PDF Button (Separate) */}\n                <button\n                  onClick={handleGenerateAndDownloadPDF}\n                  disabled={!results || !isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    !results || !isSaved\n                      ? 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      : pdfUrl\n                      ? 'bg-green-600 hover:bg-green-700 text-white'\n                      : 'bg-blue-600 hover:bg-blue-700 text-white'\n                  }`}\n                  title={!isSaved ? 'Please save results first' : 'Generate and download PDF report'}\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>{pdfUrl ? 'Download PDF Report' : 'Generate PDF Report'}</span>\n                </button>\n\n                {/* Export CSV Button */}\n                <button\n                  onClick={handleExportResults}\n                  className=\"w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md\"\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>Export CSV</span>\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <FileText className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mb-4\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Upload data files and execute calculation to see results\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Processing History */}\n      {selectedPatient && processingHistory.length > 0 && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n              <History className=\"h-5 w-5 mr-2\" />\n              Processing History for {getPatientName(selectedPatient)}\n            </h2>\n            <button\n              onClick={async () => {\n                console.log('üîÑ Manual sync triggered...');\n                toast.loading('Syncing PDFs from Supabase...', { id: 'sync-pdfs' });\n\n                try {\n                  // Force reload from database and sync\n                  await loadProcessingHistory(selectedPatient.id);\n\n                  // Count how many PDFs were found\n                  const results = await DatabaseService.get('algorithmResults');\n                  const patientResults = results.filter(r => r.patientId === selectedPatient.id);\n                  const pdfCount = patientResults.filter(r => r.pdfUrl).length;\n                  const totalCount = patientResults.length;\n\n                  toast.success(`‚úÖ Synced! ${pdfCount}/${totalCount} PDFs available`, { id: 'sync-pdfs' });\n                  console.log(`‚úÖ Sync complete: ${pdfCount}/${totalCount} records have PDFs`);\n                } catch (error) {\n                  console.error('‚ùå Sync failed:', error);\n                  toast.error('Failed to sync PDFs', { id: 'sync-pdfs' });\n                }\n              }}\n              className=\"px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-1\"\n              title=\"Fetch PDFs from Supabase bucket and update database\"\n            >\n              <Download className=\"h-3 w-3\" />\n              <span>Sync PDFs</span>\n            </button>\n          </div>\n          <div className=\"space-y-3\">\n            {processingHistory.map((record, index) => (\n              <div\n                key={record.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <Calendar className=\"h-4 w-4 text-primary\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        {new Date(record.inputData?.processedAt || record.processedAt || record.createdAt).toLocaleDateString('en-US', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </span>\n                      {/* PDF Status Badge */}\n                      {record.pdfUrl ? (\n                        <span className=\"px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full flex items-center space-x-1\">\n                          <CheckCircle className=\"h-3 w-3\" />\n                          <span>PDF Available</span>\n                        </span>\n                      ) : (\n                        <span className=\"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full\">\n                          No PDF\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 space-y-1 mb-3\">\n                      <p>üìÅ Files: {record.inputData?.eyesOpenFile || record.eyesOpenFile || 'N/A'}, {record.inputData?.eyesClosedFile || record.eyesClosedFile || 'N/A'}</p>\n                      <p>üë§ Processed by: {record.inputData?.processedBy || record.processedBy || 'Unknown'}</p>\n                      {record.pdfUrl && (\n                        <p className=\"text-green-600 dark:text-green-400\">\n                          üìÑ PDF: {record.pdfUrl.startsWith('http') ? 'Supabase ‚úì' : 'Local ‚úì'}\n                        </p>\n                      )}\n                      {!record.pdfUrl && (\n                        <p className=\"text-red-600 dark:text-red-400\">üìÑ PDF: Not available</p>\n                      )}\n                    </div>\n\n                    {/* Quick Summary of Results */}\n                    {(() => {\n                      const savedResults = record.outputData || record.results;\n                      return savedResults && savedResults.length > 0 && (\n                        <div className=\"mt-3 grid grid-cols-2 gap-2\">\n                          {savedResults.slice(0, 4).map((result, idx) => (\n                            <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                              <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                              <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                                {result.rawScore}\n                              </span>\n                            </div>\n                          ))}\n                        </div>\n                      );\n                    })()}\n                  </div>\n                  <div className=\"flex flex-col space-y-2\">\n                    {/* View Full Results Button */}\n                    <button\n                      onClick={() => {\n                        // Handle both old format (results) and new format (outputData)\n                        const savedResults = record.outputData || record.results;\n                        if (savedResults) {\n                          setResults(savedResults);\n                          setProcessingComplete(true);\n                          setIsSaved(true);\n                          // Set PDF URL if available\n                          if (record.pdfUrl) {\n                            setPdfUrl(record.pdfUrl);\n                          }\n                          toast.success('Previous results loaded!');\n                          console.log('‚úÖ Loaded results from history:', savedResults);\n                        } else {\n                          toast.error('No results found in this record');\n                          console.error('‚ùå No results found in record:', record);\n                        }\n                      }}\n                      className=\"px-3 py-2 text-sm bg-primary hover:bg-navy-700 text-white rounded-lg transition-colors flex items-center justify-center space-x-1\"\n                    >\n                      <FileText className=\"h-4 w-4\" />\n                      <span>View Results</span>\n                    </button>\n\n                    {/* Download PDF Button - Always visible */}\n                    <button\n                      onClick={async () => {\n                        if (!record.pdfUrl) {\n                          toast.error('No PDF available for this record');\n                          console.log('‚ùå No PDF URL in record:', record);\n                          return;\n                        }\n\n                        console.log('üì• Downloading PDF from record:', {\n                          processedAt: record.processedAt,\n                          pdfUrl: record.pdfUrl\n                        });\n\n                        try {\n                          toast.loading('Downloading PDF...', { id: 'history-download' });\n\n                          // Construct full URL (works with both local and Supabase URLs)\n                          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n                          const backendBaseUrl = apiUrl.replace('/api', '');\n                          const fullPdfUrl = record.pdfUrl.startsWith('http') ? record.pdfUrl : `${backendBaseUrl}${record.pdfUrl}`;\n\n                          console.log('üì• Downloading from:', fullPdfUrl);\n\n                          // Fetch the PDF file\n                          const response = await fetch(fullPdfUrl);\n                          if (!response.ok) throw new Error('Failed to fetch PDF');\n\n                          // Convert to blob\n                          const blob = await response.blob();\n\n                          // Create download link\n                          const downloadUrl = window.URL.createObjectURL(blob);\n                          const link = document.createElement('a');\n                          link.href = downloadUrl;\n                          link.download = record.pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n                          // Trigger download\n                          document.body.appendChild(link);\n                          link.click();\n\n                          // Cleanup\n                          document.body.removeChild(link);\n                          window.URL.revokeObjectURL(downloadUrl);\n\n                          toast.success('PDF downloaded successfully!', { id: 'history-download' });\n                        } catch (error) {\n                          console.error('Download error:', error);\n                          toast.error('Failed to download PDF', { id: 'history-download' });\n                        }\n                      }}\n                      disabled={!record.pdfUrl}\n                      className={`px-3 py-2 text-sm rounded-lg transition-colors flex items-center justify-center space-x-1 ${\n                        record.pdfUrl\n                          ? 'bg-blue-600 hover:bg-blue-700 text-white cursor-pointer'\n                          : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      }`}\n                      title={record.pdfUrl ? 'Download PDF Report' : 'No PDF available'}\n                    >\n                      <Download className=\"h-4 w-4\" />\n                      <span>NeuroSense Report</span>\n                    </button>\n                  </div>\n                </div>\n\n                {/* Expandable Details */}\n                {(() => {\n                  const savedResults = record.outputData || record.results;\n                  return savedResults && savedResults.length > 4 && (\n                    <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                      {savedResults.slice(4).map((result, idx) => (\n                        <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                          <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  );\n                })()}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Info Section */}\n      <div className=\"bg-accent-light dark:bg-primary/20 border border-primary-light dark:border-primary rounded-lg p-4 shadow-sm\">\n        <h3 className=\"text-sm font-medium text-primary dark:text-primary-light mb-2\">\n          About Algorithm 1 Processing\n        </h3>\n        <p className=\"text-sm text-navy-800 dark:text-gray-300\">\n          This processor analyzes QEEG data files (Eyes Open and Eyes Closed) and generates 7 key parameters using proprietary\n          binary scoring logic. The algorithm evaluates brain activity patterns to assess cognitive and emotional health markers.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default AlgorithmDataProcessor;\n","structuredPatch":[{"oldStart":1582,"oldLines":24,"newStart":1582,"newLines":37,"lines":["                           Sub-Parameters & Calculations:","                         </div>","                         <div className=\"space-y-3\">","-                          {result.metrics.map((metric, mIndex) => (","-                            <div key={mIndex} className=\"bg-gray-50 dark:bg-gray-900/30 rounded-lg p-3 border border-gray-200 dark:border-gray-700\">","-                              {/* Metric Name and Score */}","-                              <div className=\"flex items-center justify-between mb-2\">","-                                <span className=\"text-xs font-semibold text-gray-700 dark:text-gray-300\">","-                                  {metric.name}","-                                </span>","-                                <div className=\"flex items-center space-x-2\">","-                                  {metric.score === 1 ? (","-                                    <CheckCircle className=\"h-4 w-4 text-green-500\" />","-                                  ) : (","-                                    <X className=\"h-4 w-4 text-red-500\" />","-                                  )}","-                                  <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>","-                                    {metric.score}/1","+                          {result.metrics.map((metric, mIndex) => {","+                            // Determine if metric is normal (green) or abnormal (red) for Stress condition","+                            const isNormal = metric.score === 1;","+                            const bgColorClass = result.parameter === 'Stress'","+                              ? (isNormal","+                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'","+                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')","+                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';","+","+                            return (","+                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>","+                                {/* Metric Name and Score */}","+                                <div className=\"flex items-center justify-between mb-2\">","+                                  <span className={`text-xs font-semibold ${","+                                    result.parameter === 'Stress'","+                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')","+                                      : 'text-gray-700 dark:text-gray-300'","+                                  }`}>","+                                    {metric.name}","                                   </span>","+                                  <div className=\"flex items-center space-x-2\">","+                                    {metric.score === 1 ? (","+                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />","+                                    ) : (","+                                      <X className=\"h-4 w-4 text-red-500\" />","+                                    )}","+                                    <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>","+                                      {metric.score}/1","+                                    </span>","+                                  </div>","                                 </div>","-                              </div>"," ","                               {/* Calculation Details */}","                               <div className=\"space-y-1\">"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"483806de-2121-4407-8d13-6f8bcc1d6b68","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018oAAQ7Tuc5Q9izVgxHYTFv","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Good! I've successfully updated the component to add conditional background and border colors for the Stress condition metrics. Now I need to close the return statement and the mapping function properly. Let me check if there's a closing brace needed.","signature":"EqQDCkYIChgCKkByThI51+Mj/MFy4vSp6fvnNdoquoJoqeU1aVwRWQyGyc7gt6o5vXcXjjUczNZceTFT54XBDHk3P6sCJ5zrkaOmEgyJwhji7Yl+fU+MqtUaDNiFdP+/WcsKk/8bmCIwES88A9EDSpxiLfKXdon2YijONrjC+9P4yww8PrtzzcHK5KmD0z9Lcq401VxfTjxWKosC4ftVJXjYS1dVSmJ3obqjLHkUZOeu0udA+hrmEcvEAhRIY5R08Bv/cRkjl7QtMvdIwg7UKHD4ODV5Mxy7CaYwfKj6BKb9VJX9eT/YezIimCgyTfu2qbFKx21mqZpHXMJJIalr3hBfakMslyKGUR9kcaqGRo2pWk7vtt+JnPllAvqQ0rMpWZaemrDbgGqa7NFCxWN0xz5E+fDEARjMGE4FSlxhXdoRo2RVACiFleNVXWm6WsvHI46n90eV5rsc6uYqRfNaWyZGYkfnpQghXXcUw7QPyx9x3K2ecLQKlxNV7JySgR488SonZ3m9inpDbh7O6YfZzVEBZNfIrxexkfY0dia+SgAJVbjFw80wGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":2854,"cache_read_input_tokens":49921,"cache_creation":{"ephemeral_5m_input_tokens":2854,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8ogantmASsTK4f4322","type":"assistant","uuid":"c73e5f2b-5979-4447-9154-b7b468c225cb","timestamp":"2025-12-18T12:15:24.300Z"}
{"parentUuid":"c73e5f2b-5979-4447-9154-b7b468c225cb","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018oAAQ7Tuc5Q9izVgxHYTFv","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Nq4HhCPQDiAGyJXe1joY8i","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","offset":1640,"limit":15}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":2854,"cache_read_input_tokens":49921,"cache_creation":{"ephemeral_5m_input_tokens":2854,"ephemeral_1h_input_tokens":0},"output_tokens":180,"service_tier":"standard"}},"requestId":"req_011CWE8ogantmASsTK4f4322","type":"assistant","uuid":"41a04aad-5ca2-4d63-a213-0b71f0c6b551","timestamp":"2025-12-18T12:15:25.141Z"}
{"parentUuid":"41a04aad-5ca2-4d63-a213-0b71f0c6b551","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Nq4HhCPQDiAGyJXe1joY8i","type":"tool_result","content":"  1640‚Üí                                )}\n  1641‚Üí\n  1642‚Üí                                {/* Additional Details */}\n  1643‚Üí                                {metric.details && (\n  1644‚Üí                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n  1645‚Üí                                    {typeof metric.details === 'object'\n  1646‚Üí                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n  1647‚Üí                                          <div key={idx} className=\"flex justify-between\">\n  1648‚Üí                                            <span>{key}:</span>\n  1649‚Üí                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n  1650‚Üí                                          </div>\n  1651‚Üí                                        ))\n  1652‚Üí                                      : metric.details}\n  1653‚Üí                                  </div>\n  1654‚Üí                                )}\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"45f0539d-5c78-4f81-ae56-411b6b3691fd","timestamp":"2025-12-18T12:15:26.956Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","content":"                                )}\n\n                                {/* Additional Details */}\n                                {metric.details && (\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n                                    {typeof metric.details === 'object'\n                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n                                          <div key={idx} className=\"flex justify-between\">\n                                            <span>{key}:</span>\n                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n                                          </div>\n                                        ))\n                                      : metric.details}\n                                  </div>\n                                )}","numLines":15,"startLine":1640,"totalLines":1962}}}
{"parentUuid":"45f0539d-5c78-4f81-ae56-411b6b3691fd","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012Jgq9dxqdvdSioT5MQyCLB","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"I need to close the return statement and add the closing braces for the map function. Let me check the original structure.","signature":"EqMCCkYIChgCKkDEGLNRCHyc14fLeczRkEcrELNzFySv6QzLggZP9W/Uk5dFFB0aYaEhx/X1x8JfmchJSzFZPjDfKMucDH4zNYx2EgwOKe8iG34D2GDdMy8aDK2xuKfr/lrTrwZx0yIw0ik8xOorr5jb9ukdx0CKNoTcIjRSj3C5IMWkbrVJWr5f8UP/9Vuh9g7lwr1DTYX7KooBXli1txuOlAVnLlqMIqWddtI01XsNpCHC96WttsrBQClPwZqa5Ev0iYzyqI4mXixXiGfBU0s7FxLJSm3fTpk4nWTjqwP/YkT4oeHUeQ7sK1rp6lqe3B5VANWF4UKLe+piKc7pMqMDo/V5yt/QNzzwDtV0tXcielSqRCp/1Y3ZSXejHtSYMxMjXFacGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":549,"cache_read_input_tokens":52775,"cache_creation":{"ephemeral_5m_input_tokens":549,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8pCyPhkDTWQhAxGwgJ","type":"assistant","uuid":"08907aae-c98d-4a72-ab26-88ca5c81bec3","timestamp":"2025-12-18T12:15:32.051Z"}
{"parentUuid":"08907aae-c98d-4a72-ab26-88ca5c81bec3","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012Jgq9dxqdvdSioT5MQyCLB","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01CFX3m2ypTsteWTTERfkAF6","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","offset":1654,"limit":10}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":549,"cache_read_input_tokens":52775,"cache_creation":{"ephemeral_5m_input_tokens":549,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8pCyPhkDTWQhAxGwgJ","type":"assistant","uuid":"e534891c-1ac1-41f6-a37b-fa90254d5c36","timestamp":"2025-12-18T12:15:32.583Z"}
{"parentUuid":"e534891c-1ac1-41f6-a37b-fa90254d5c36","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01CFX3m2ypTsteWTTERfkAF6","type":"tool_result","content":"  1654‚Üí                                )}\n  1655‚Üí                              </div>\n  1656‚Üí                            </div>\n  1657‚Üí                          ))}\n  1658‚Üí                        </div>\n  1659‚Üí                      </div>\n  1660‚Üí                    )}\n  1661‚Üí                  </div>\n  1662‚Üí                ))}\n  1663‚Üí              </div>\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"3729f8d5-54a9-45be-8f40-e7f14087ef9e","timestamp":"2025-12-18T12:15:34.475Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","content":"                                )}\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>","numLines":10,"startLine":1654,"totalLines":1962}}}
{"parentUuid":"3729f8d5-54a9-45be-8f40-e7f14087ef9e","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_019hxevmyyeL26nqXaSrVcHP","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"I see the closing tags, but I need to add the closing brace and parenthesis for the return statement after line 1615 (where I left off). Let me fix this.","signature":"EsICCkYIChgCKkDyvoc0CV36tWD4CSqGtSB81NKU/KrmAzUnlWRovW3saH3tZP8e/K1hUHCkaYlF3ANSa7qQ//u31pdw0nALwjRxEgwh044lmXZ6NRe//wYaDE3P1RUQiX8kb5XZwiIwnmwzHahlYpmtU8azQMepqBoWRETvPLw66I/ZV6jdm1HkzHSspoYHqGX2+XfZCwvJKqkBdImuqA0qEuftKWBSGa5Bq2WyCMdrm+2rUVvmYI+gyp6Hz5E/9i+Uu7VaROotoSTnc3Sh09eOul4/0S14p8zDrBgkdkPsxZgC83Ei76GjmcRXPoT3Yk6Ni+KfX2GdbhkYJKGLTXfsfzMlVXBaR2WvFdpnzOh2wgb6eF+Vys4Jhri4WyXWvDnOvpNTAi22uUCTts/eymKF8DUe8WXzy/YEAr1fyGv64dyqjxgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":347,"cache_read_input_tokens":53324,"cache_creation":{"ephemeral_5m_input_tokens":347,"ephemeral_1h_input_tokens":0},"output_tokens":2,"service_tier":"standard"}},"requestId":"req_011CWE8pmA9pApqKnv36Zc9X","type":"assistant","uuid":"ae3ba2c8-6dd6-4c8e-92d2-066b07b35f05","timestamp":"2025-12-18T12:15:39.101Z"}
{"parentUuid":"ae3ba2c8-6dd6-4c8e-92d2-066b07b35f05","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_019hxevmyyeL26nqXaSrVcHP","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01K7WpLNeVMfh3LsXKiY9iQ6","name":"Edit","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","old_string":"                              </div>\n                            </div>\n                          ))}","new_string":"                              </div>\n                              </div>\n                            );\n                          })}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":347,"cache_read_input_tokens":53324,"cache_creation":{"ephemeral_5m_input_tokens":347,"ephemeral_1h_input_tokens":0},"output_tokens":207,"service_tier":"standard"}},"requestId":"req_011CWE8pmA9pApqKnv36Zc9X","type":"assistant","uuid":"dfeb5ebd-3f45-48bb-975d-7cfebf3f8660","timestamp":"2025-12-18T12:15:40.327Z"}
{"parentUuid":"dfeb5ebd-3f45-48bb-975d-7cfebf3f8660","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01K7WpLNeVMfh3LsXKiY9iQ6","type":"tool_result","content":"The file D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n  1651‚Üí                                        ))\n  1652‚Üí                                      : metric.details}\n  1653‚Üí                                  </div>\n  1654‚Üí                                )}\n  1655‚Üí                              </div>\n  1656‚Üí                              </div>\n  1657‚Üí                            );\n  1658‚Üí                          })}\n  1659‚Üí                        </div>\n  1660‚Üí                      </div>\n  1661‚Üí                    )}\n  1662‚Üí                  </div>"}]},"uuid":"4226b041-6cd1-4754-8cc7-874f36e21f82","timestamp":"2025-12-18T12:15:43.909Z","toolUseResult":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","oldString":"                              </div>\n                            </div>\n                          ))}","newString":"                              </div>\n                              </div>\n                            );\n                          })}","originalFile":"import React, { useState, useEffect } from 'react';\nimport { Upload, Play, Download, FileText, CheckCircle, Activity, User, Building2, Calendar, History, X, ArrowLeft, Search, Filter } from 'lucide-react';\nimport DatabaseService from '../../services/databaseService';\nimport toast from 'react-hot-toast';\n\nconst AlgorithmDataProcessor = () => {\n  const [patients, setPatients] = useState([]);\n  const [clinics, setClinics] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [showProcessingUI, setShowProcessingUI] = useState(false);\n  const [processingHistory, setProcessingHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Filter states\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedClinicFilter, setSelectedClinicFilter] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n\n  const [eyesOpenFile, setEyesOpenFile] = useState(null);\n  const [eyesClosedFile, setEyesClosedFile] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [processingComplete, setProcessingComplete] = useState(false);\n  const [consoleLog, setConsoleLog] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const [results, setResults] = useState(null);\n  const [isSaved, setIsSaved] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [dataType, setDataType] = useState(null); // 'raw' or 'zscore'\n\n  // Debug function to check database contents\n  useEffect(() => {\n    window.debugAlgorithmResults = async () => {\n      const allResults = await DatabaseService.get('algorithmResults');\n      console.log('üîç All Algorithm Results in Database:', allResults);\n      console.log(`Total records: ${allResults.length}`);\n      allResults.forEach((record, idx) => {\n        console.log(`\\nüìä Record ${idx + 1}:`, {\n          id: record.id,\n          patientName: record.inputData?.patientName || record.patientName,\n          processedAt: record.inputData?.processedAt || record.processedAt,\n          pdfUrl: record.pdfUrl || '‚ùå MISSING',\n          hasResults: !!(record.outputData || record.results)\n        });\n      });\n    };\n    console.log('üí° Debug: Type window.debugAlgorithmResults() in console to check database');\n  }, []);\n\n  useEffect(() => {\n    loadPatients();\n  }, []);\n\n  useEffect(() => {\n    if (selectedPatient && showProcessingUI) {\n      loadProcessingHistory(selectedPatient.id);\n    }\n  }, [selectedPatient, showProcessingUI, isSaved]); // Re-load when saved\n\n  const loadPatients = async () => {\n    try {\n      const patientsData = await DatabaseService.get('patients');\n      const clinicsData = await DatabaseService.get('clinics');\n      const algorithmResults = await DatabaseService.get('algorithmResults') || [];\n\n      // Enrich patients with clinic names and algorithm status\n      const enrichedPatients = patientsData.map(patient => {\n        const patientResults = algorithmResults.filter(r => r.patientId === patient.id);\n        const lastResult = patientResults.length > 0\n          ? patientResults.sort((a, b) => {\n              const aTime = a.inputData?.processedAt || a.processedAt || a.createdAt;\n              const bTime = b.inputData?.processedAt || b.processedAt || b.createdAt;\n              return new Date(bTime) - new Date(aTime);\n            })[0]\n          : null;\n\n        return {\n          ...patient,\n          clinicName: clinicsData.find(c => c.id === patient.clinicId)?.name || 'Unknown Clinic',\n          algorithmStatus: lastResult ? 'completed' : 'pending',\n          lastProcessed: lastResult?.inputData?.processedAt || lastResult?.processedAt || lastResult?.createdAt,\n          totalScans: patientResults.length\n        };\n      });\n\n      setPatients(enrichedPatients);\n      setClinics(clinicsData);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading patients:', error);\n      toast.error('Failed to load patients');\n      setLoading(false);\n    }\n  };\n\n  const loadProcessingHistory = async (patientId) => {\n    try {\n      // Load algorithm results for this patient\n      const results = await DatabaseService.get('algorithmResults');\n      const patientResults = results.filter(r => r.patientId === patientId);\n\n      console.log(`üìã Loaded ${patientResults.length} records for patient ${patientId}`);\n\n      // Log all records for debugging\n      console.log('üìä All records for this patient:');\n      patientResults.forEach((rec, idx) => {\n        const processedTime = rec.inputData?.processedAt || rec.processedAt || rec.createdAt;\n        console.log(`   ${idx + 1}. ${new Date(processedTime).toLocaleString()} - PDF: ${rec.pdfUrl ? '‚úì' : '‚úó'}`);\n      });\n\n      // Check for records without pdfUrl and try to fix them\n      const recordsWithoutPdf = patientResults.filter(r => !r.pdfUrl);\n      if (recordsWithoutPdf.length > 0) {\n        console.log(`\\n‚ö†Ô∏è Found ${recordsWithoutPdf.length} records without PDF URL - attempting auto-fix...`);\n\n        let updatedCount = 0;\n\n        // Step 1: Try to fetch PDFs from Supabase bucket\n        try {\n          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n          const response = await fetch(`${apiUrl}/qeeg/supabase-pdfs`);\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log(`\\n‚òÅÔ∏è Found ${data.count} PDFs in Supabase bucket:`);\n            data.pdfs.forEach(pdf => console.log(`   - ${pdf.name}`));\n\n            // Match PDFs with database records using smart matching\n            console.log(`\\nüîç Attempting to match ${recordsWithoutPdf.length} records...`);\n            for (const record of recordsWithoutPdf) {\n              const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n              const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n              const recordTimestamp = new Date(processedTime).getTime();\n              const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n\n              console.log(`\\n   Record: ${patientName} @ ${new Date(processedTime).toLocaleString()}`);\n              console.log(`   Searching for PDFs matching: neurosense-report-${sanitizedName}-*.pdf`);\n\n              // Find PDFs matching patient name\n              const matchingPdfs = data.pdfs.filter(pdf => {\n                const pdfNameLower = pdf.name.toLowerCase();\n                return pdfNameLower.includes(`neurosense-report-${sanitizedName}-`) &&\n                       pdfNameLower.endsWith('.pdf');\n              });\n\n              console.log(`   Found ${matchingPdfs.length} PDFs for this patient`);\n\n              if (matchingPdfs.length > 0) {\n                // Find PDF with closest timestamp (within 60 seconds)\n                let bestMatch = null;\n                let smallestDiff = Infinity;\n\n                for (const pdf of matchingPdfs) {\n                  // Extract timestamp from filename: neurosense-report-name-TIMESTAMP.pdf\n                  const match = pdf.name.match(/-(\\d+)\\.pdf$/);\n                  if (match) {\n                    const pdfTimestamp = parseInt(match[1]);\n                    const diff = Math.abs(pdfTimestamp - recordTimestamp);\n                    console.log(`      ${pdf.name}: timestamp diff = ${diff}ms (${(diff/1000).toFixed(1)}s)`);\n\n                    // Accept if within 60 seconds (60000ms)\n                    if (diff < 60000 && diff < smallestDiff) {\n                      smallestDiff = diff;\n                      bestMatch = pdf;\n                    }\n                  }\n                }\n\n                if (bestMatch) {\n                  console.log(`   ‚úÖ MATCH FOUND! ${bestMatch.name} (${(smallestDiff/1000).toFixed(1)}s difference)`);\n                  console.log(`   URL: ${bestMatch.url}`);\n                  record.pdfUrl = bestMatch.url;\n                  await DatabaseService.update('algorithmResults', record.id, record);\n                  updatedCount++;\n                } else {\n                  console.log(`   ‚ö†Ô∏è PDFs found but timestamp difference too large (>60s)`);\n                }\n              } else {\n                console.log(`   ‚ùå No PDFs found for patient: ${sanitizedName}`);\n              }\n            }\n          }\n        } catch (supabaseErr) {\n          console.log('‚ö†Ô∏è Could not fetch from Supabase, trying local storage...');\n        }\n\n        // Step 2: If Supabase fails, try local storage\n        for (const record of recordsWithoutPdf) {\n          if (record.pdfUrl) continue; // Already updated from Supabase\n\n          try {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n            const timestamp = new Date(processedTime).getTime();\n            const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n            const possibleFilename = `neurosense-report-${sanitizedName}-${timestamp}.pdf`;\n            const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n            const backendBaseUrl = apiUrl.replace('/api', '');\n            const testUrl = `${backendBaseUrl}/uploads/${possibleFilename}`;\n\n            // Test if file exists locally\n            const response = await fetch(testUrl, { method: 'HEAD' });\n            if (response.ok) {\n              console.log(`‚úÖ Found local PDF for record ${record.id}: ${testUrl}`);\n              record.pdfUrl = `/uploads/${possibleFilename}`;\n              await DatabaseService.update('algorithmResults', record.id, record);\n              updatedCount++;\n            }\n          } catch (err) {\n            console.log(`‚ùå Could not find PDF for record ${record.id}`);\n          }\n        }\n\n        if (updatedCount > 0) {\n          console.log(`‚úÖ Auto-fixed ${updatedCount} records with PDF URLs`);\n          // Reload the results after updating\n          const updatedResults = await DatabaseService.get('algorithmResults');\n          const updatedPatientResults = updatedResults.filter(r => r.patientId === patientId);\n          setProcessingHistory(updatedPatientResults);\n\n          updatedPatientResults.forEach((record, idx) => {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            console.log(`   Record ${idx + 1}:`, {\n              processedAt: processedTime,\n              hasPdfUrl: !!record.pdfUrl,\n              pdfUrl: record.pdfUrl || 'NOT SET',\n              pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n            });\n          });\n          return;\n        }\n      }\n\n      patientResults.forEach((record, idx) => {\n        const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n        console.log(`   Record ${idx + 1}:`, {\n          processedAt: processedTime,\n          hasPdfUrl: !!record.pdfUrl,\n          pdfUrl: record.pdfUrl || 'NOT SET',\n          pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n        });\n      });\n\n      setProcessingHistory(patientResults);\n    } catch (error) {\n      console.error('Error loading processing history:', error);\n      setProcessingHistory([]);\n    }\n  };\n\n  const handleGenerateReport = (patient) => {\n    setSelectedPatient(patient);\n    setShowProcessingUI(true);\n    // Reset upload states\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setIsSaved(false);\n    setPdfUrl(null);\n    setIsSaving(false);\n  };\n\n  const handleBackToList = () => {\n    setShowProcessingUI(false);\n    setSelectedPatient(null);\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setProcessingHistory([]);\n    setIsSaved(false);\n    setIsSaving(false);\n    // Reload patients to update status\n    loadPatients();\n  };\n\n  // Helper function to get patient name (handles different field names)\n  const getPatientName = (patient) => {\n    return patient?.fullName || patient?.full_name || patient?.name || patient?.email || 'Unknown Patient';\n  };\n\n  // Helper function to get status badge\n  const getStatusBadge = (status, lastProcessed) => {\n    if (status === 'completed') {\n      return (\n        <div className=\"flex flex-col items-start\">\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n            <CheckCircle className=\"h-3 w-3 mr-1\" />\n            Completed\n          </span>\n          {lastProcessed && (\n            <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              {new Date(lastProcessed).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n            </span>\n          )}\n        </div>\n      );\n    }\n    return (\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\">\n        <Activity className=\"h-3 w-3 mr-1\" />\n        Pending\n      </span>\n    );\n  };\n\n  // Filter patients based on search and filters\n  const filteredPatients = patients.filter(patient => {\n    const matchesSearch = searchTerm === '' ||\n      getPatientName(patient).toLowerCase().includes(searchTerm.toLowerCase()) ||\n      patient.email?.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesClinic = selectedClinicFilter === '' || patient.clinicId === selectedClinicFilter;\n\n    const matchesDate = dateFilter === '' ||\n      (patient.lastProcessed && new Date(patient.lastProcessed).toISOString().split('T')[0] === dateFilter);\n\n    return matchesSearch && matchesClinic && matchesDate;\n  });\n\n  // Group filtered patients by clinic\n  const groupedPatients = clinics.map(clinic => ({\n    clinic,\n    patients: filteredPatients.filter(p => p.clinicId === clinic.id)\n  })).filter(group => group.patients.length > 0);\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedClinicFilter('');\n    setDateFilter('');\n  };\n\n  const handleFileUpload = (type, event) => {\n    const file = event.target.files[0];\n    if (file) {\n      if (type === 'eo') {\n        setEyesOpenFile(file);\n      } else {\n        setEyesClosedFile(file);\n      }\n      // Reset processing state when new files are uploaded\n      setProcessingComplete(false);\n      setResults(null);\n      setConsoleLog([]);\n      setProgress(0);\n      setIsSaved(false);\n      setIsSaving(false);\n      setPdfUrl(null);\n    }\n  };\n\n  const processQEEGFiles = async () => {\n    setIsProcessing(true);\n    setConsoleLog([]);\n    setProgress(0);\n\n    try {\n      // Console log: Starting process\n      setConsoleLog(prev => [...prev, 'üöÄ Starting QEEG analysis...']);\n      setProgress(10);\n\n      // Create FormData to send files\n      const formData = new FormData();\n      formData.append('eyesOpen', eyesOpenFile);\n      formData.append('eyesClosed', eyesClosedFile);\n      formData.append('patientId', selectedPatient.id);\n      formData.append('patientName', getPatientName(selectedPatient));\n      formData.append('clinicName', selectedPatient.clinicName);\n      // Add complete patient data for PDF\n      formData.append('dateOfBirth', selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified');\n      formData.append('age', selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A');\n      formData.append('gender', selectedPatient.gender || 'Not specified');\n      formData.append('handedness', selectedPatient.handedness || 'Right');\n\n      setConsoleLog(prev => [...prev, 'üì§ Uploading files to server...']);\n      setProgress(20);\n\n      // Validate file sizes before upload (50MB limit)\n      const maxFileSize = 50 * 1024 * 1024; // 50MB\n      if (eyesOpenFile.size > maxFileSize || eyesClosedFile.size > maxFileSize) {\n        const oversizedFile = eyesOpenFile.size > maxFileSize ? eyesOpenFile : eyesClosedFile;\n        const fileSizeMB = (oversizedFile.size / (1024 * 1024)).toFixed(2);\n        throw new Error(`File \"${oversizedFile.name}\" is too large (${fileSizeMB}MB). Maximum file size is 50MB. Please compress or split the file.`);\n      }\n\n      // Call backend API with timeout\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 300000); // 5 minute timeout for large files\n\n      let response;\n      try {\n        response = await fetch(`${apiUrl}/qeeg/process`, {\n          method: 'POST',\n          body: formData,\n          signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n      } catch (fetchError) {\n        clearTimeout(timeoutId);\n        if (fetchError.name === 'AbortError') {\n          throw new Error('Upload timed out after 5 minutes. Please check: 1) File size (<50MB), 2) Backend is running (npm run dev:backend), 3) Internet connection is stable. Try compressing PDF files if too large.');\n        }\n        // Check if it's a network error (backend not running)\n        if (fetchError.message.includes('Failed to fetch') || fetchError.message.includes('fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure the backend is running on port 5000. Run \"npm run dev:backend\" to start the server.');\n        }\n        throw fetchError;\n      }\n\n      setConsoleLog(prev => [...prev, 'üìä Parsing QEEG data tables...']);\n      setProgress(40);\n\n      if (!response.ok) {\n        let errorMessage = 'Failed to process QEEG files';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n\n          // Add specific error messages based on error code\n          if (errorData.code === 'LIMIT_FILE_SIZE') {\n            errorMessage = 'File size exceeds the maximum limit of 50MB. Please compress your files or split them into smaller parts.';\n          } else if (errorData.code === 'GEMINI_QUOTA_EXCEEDED' || response.status === 429) {\n            // Extract retry time if available in error message\n            let retryTime = null;\n            const retryMatch = errorData.message?.match(/retry in ([\\d.]+)s/i);\n            if (retryMatch) {\n              retryTime = Math.ceil(parseFloat(retryMatch[1]));\n            }\n\n            errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                         'The Gemini AI service has reached its daily limit (20 requests/day).\\n\\n' +\n                         '‚úÖ Quick Solutions:\\n' +\n                         (retryTime ? `‚Ä¢ Wait ${retryTime} seconds and try again (quota will reset)\\n` : '‚Ä¢ Wait a few minutes and try again\\n') +\n                         '‚Ä¢ Re-upload the SAME files you processed before (uses cache, no quota needed)\\n' +\n                         '‚Ä¢ Contact administrator to upgrade API plan\\n\\n' +\n                         'üí° Tip: The system remembers files you\\'ve already processed!';\n          } else if (response.status === 503) {\n            errorMessage = 'Backend service is unavailable. Please ensure the server is running.';\n          } else if (response.status === 413) {\n            errorMessage = 'File payload is too large. Maximum allowed size is 50MB.';\n          } else if (response.status === 500) {\n            // Parse detailed error from server for 500 errors\n            if (errorData.message && (errorData.message.includes('Gemini') || errorData.message.includes('quota') || errorData.message.includes('429'))) {\n              // Extract retry time from detailed error\n              let retryTime = null;\n              const retryMatch = errorData.message.match(/retry in ([\\d.]+)s/i);\n              if (retryMatch) {\n                retryTime = Math.ceil(parseFloat(retryMatch[1]));\n              }\n\n              // Check if it's specifically a quota error\n              if (errorData.message.includes('quota') || errorData.message.includes('429')) {\n                errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                             'Google Gemini API has reached its free tier limit.\\n\\n' +\n                             '‚úÖ What to do:\\n' +\n                             (retryTime ? `1. Wait ${retryTime} seconds and try again\\n` : '1. Wait a few minutes and try again\\n') +\n                             '2. Or re-upload the SAME files (cached, no quota used)\\n' +\n                             '3. Or contact admin to upgrade API plan\\n\\n' +\n                             'üìä Free tier: 20 requests per day\\n' +\n                             'üí∞ Upgrade: https://ai.google.dev/pricing';\n              } else if (errorData.message && (\n                errorData.message.includes('PDF text extraction') ||\n                errorData.message.includes('Missing power tables') ||\n                errorData.code === 'PDF_EXTRACTION_FAILED'\n              )) {\n                // PDF extraction specific error\n                errorMessage = '‚ö†Ô∏è PDF Extraction Error\\n\\n' +\n                             errorData.message + '\\n\\n' +\n                             'üí° Troubleshooting:\\n' +\n                             '1. Verify PDFs contain QEEG frequency band tables\\n' +\n                             '2. Ensure PDFs are not password-protected\\n' +\n                             '3. Check if PDFs are scanned images (need OCR)\\n' +\n                             '4. Try exporting PDFs in a different format\\n' +\n                             '5. Contact support if issue persists';\n              } else {\n                errorMessage = '‚ö†Ô∏è Gemini AI Service Error\\n\\n' +\n                             'There was an issue with the AI service.\\n\\n' +\n                             'Please try again in a moment or contact support if the issue persists.';\n              }\n            }\n          }\n        } catch (e) {\n          // If error response is not JSON, use status text\n          errorMessage = `Server error (${response.status}): ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data = await response.json();\n\n      // Capture data type (raw or zscore)\n      if (data.data.dataType) {\n        setDataType(data.data.dataType);\n        console.log('üìä Data type:', data.data.dataType);\n        if (data.data.dataType === 'zscore') {\n          setConsoleLog(prev => [...prev, 'üî¨ Z-Score mode detected']);\n        }\n      }\n\n      // Auto-set PDF URL if returned from backend\n      if (data.data.pdfUrl) {\n        setPdfUrl(data.data.pdfUrl);\n        console.log('‚úÖ PDF auto-generated:', data.data.pdfUrl);\n        setConsoleLog(prev => [...prev, 'üìÑ PDF report generated automatically']);\n      }\n\n      setConsoleLog(prev => [...prev, 'üßÆ Calculating 7 brain health parameters...']);\n      setProgress(60);\n\n      // Simulate calculation steps for better UX\n      await new Promise(resolve => setTimeout(resolve, 500));\n      setConsoleLog(prev => [...prev, '  ‚úì Cognition parameter calculated']);\n      setProgress(65);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Stress parameter calculated']);\n      setProgress(70);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Focus & Attention parameter calculated']);\n      setProgress(75);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Burnout & Fatigue parameter calculated']);\n      setProgress(80);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Emotional Regulation parameter calculated']);\n      setProgress(85);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Learning parameter calculated']);\n      setProgress(90);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Creativity parameter calculated']);\n      setProgress(95);\n\n      // Convert API results to display format with NaN/Infinity protection\n      const finalResults = data.data.results.map(param => {\n        // Sanitize score values to prevent NaN/Infinity\n        const sanitizedScore = Number.isFinite(param.score) ? param.score : 0;\n        const sanitizedMaxScore = Number.isFinite(param.maxScore) && param.maxScore > 0 ? param.maxScore : 3;\n        const percentage = Math.round((sanitizedScore / sanitizedMaxScore) * 100);\n\n        // Sanitize metrics\n        const sanitizedMetrics = (param.metrics || []).map(metric => ({\n          ...metric,\n          score: Number.isFinite(metric.score) ? metric.score : 0,\n          value: Number.isFinite(metric.value) ? metric.value : 0\n        }));\n\n        return {\n          parameter: param.name,\n          score: Number.isFinite(percentage) ? percentage : 0,\n          rawScore: `${sanitizedScore}/${sanitizedMaxScore}`,\n          status: param.classification,\n          color: param.classification === 'High' ? 'green' :\n                 param.classification === 'Medium' ? 'blue' : 'orange',\n          metrics: sanitizedMetrics\n        };\n      });\n\n      setConsoleLog(prev => [...prev, '‚úÖ Analysis complete!']);\n      setConsoleLog(prev => [...prev, `üìà Overall Score: ${data.data.overallScore}/${data.data.maxScore}`]);\n      setProgress(100);\n\n      setResults(finalResults);\n      setIsProcessing(false);\n      setProcessingComplete(true);\n      setIsSaved(false); // Mark as not saved yet\n\n      toast.success('QEEG analysis completed successfully!');\n\n    } catch (error) {\n      console.error('Error processing QEEG files:', error);\n      setConsoleLog(prev => [...prev, `‚ùå Error: ${error.message}`]);\n      setIsProcessing(false);\n      toast.error(error.message || 'Failed to process QEEG files');\n    }\n  };\n\n  const saveResultsToDatabase = async (resultData) => {\n    if (!resultData) {\n      toast.error('No results to save');\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      toast.loading('Saving results to database...', { id: 'save-results' });\n\n      console.log('üíæ Saving results to database...');\n\n      // PDF should already exist from auto-generation\n      if (!pdfUrl) {\n        console.warn('‚ö†Ô∏è No PDF URL available - PDF may not have been generated');\n      }\n\n      const algorithmResult = {\n        // Don't specify ID - let database auto-generate UUID\n        patientId: selectedPatient.id,\n        clinicId: selectedPatient.clinicId,\n        algorithmName: 'Algorithm 1 - 7 Parameters',\n        inputData: {\n          patientName: getPatientName(selectedPatient),\n          clinicName: selectedPatient.clinicName,\n          eyesOpenFile: eyesOpenFile?.name,\n          eyesClosedFile: eyesClosedFile?.name,\n          processedAt: new Date().toISOString(),\n          processedBy: 'super_admin'\n        },\n        outputData: resultData,\n        pdfUrl: pdfUrl || null,\n        status: 'completed',\n        errorMessage: null\n      };\n\n      console.log('üíæ Saving to database...');\n      console.log('   Patient:', algorithmResult.inputData.patientName);\n      console.log('   PDF URL:', pdfUrl || 'NOT SET');\n      console.log('   PDF Type:', pdfUrl ? (pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None');\n\n      await DatabaseService.add('algorithmResults', algorithmResult);\n\n      setIsSaved(true);\n      setIsSaving(false);\n\n      toast.success('‚úÖ Results saved successfully!', { id: 'save-results' });\n\n      // Reload history and patient list to update status\n      loadProcessingHistory(selectedPatient.id);\n      loadPatients();\n    } catch (error) {\n      console.error('‚ùå Error saving results:', error);\n      setIsSaving(false);\n      toast.error('‚ùå Failed to save results: ' + error.message, { id: 'save-results' });\n    }\n  };\n\n  const handleSaveResults = async () => {\n    if (results) {\n      try {\n        console.log('üíæ Saving results to database...');\n\n        // Step 1: Check if existing PDF URL available (no generation!)\n        let finalPdfUrl = pdfUrl;\n\n        if (!finalPdfUrl) {\n          console.log('üîç Checking for existing PDF in database...');\n          const existingPdf = await findExistingPDF();\n\n          if (existingPdf) {\n            console.log('‚úÖ Found existing PDF URL:', existingPdf);\n            finalPdfUrl = existingPdf;\n            setPdfUrl(existingPdf);\n          } else {\n            console.log('‚ÑπÔ∏è No existing PDF found - save data only, PDF can be generated later');\n          }\n        }\n\n        // Step 2: Save results to database (with or without PDF URL)\n        await saveResultsToDatabase(results);\n\n        // Step 3: Show success message\n        if (finalPdfUrl) {\n          toast.success('‚úÖ Results saved! PDF is available for download.');\n        } else {\n          toast.success('‚úÖ Results saved! Generate PDF from history to get report.');\n        }\n\n        console.log('‚úÖ Save complete! PDF URL:', finalPdfUrl || 'Not available');\n\n      } catch (error) {\n        console.error('‚ùå Error saving results:', error);\n        toast.error('Failed to save results: ' + error.message);\n      }\n    }\n  };\n\n  // New function: Generate and download PDF separately\n  const handleGenerateAndDownloadPDF = async () => {\n    if (!results) {\n      toast.error('No results to generate PDF from');\n      return;\n    }\n\n    try {\n      console.log('üìÑ Starting PDF generation...');\n      toast.loading('Generating NeuroSense PDF Report...', { id: 'generate-pdf' });\n\n      const pdfResult = await generatePDFReport(results);\n\n      if (pdfResult && pdfResult.url) {\n        setPdfUrl(pdfResult.url);\n        console.log('‚úÖ PDF generated successfully:', pdfResult.url);\n        toast.success('PDF Report generated!', { id: 'generate-pdf' });\n\n        // Auto-download the newly generated PDF\n        setTimeout(() => {\n          console.log('üì• Auto-downloading newly generated PDF...');\n          handleDownloadPDF();\n        }, 500);\n      } else {\n        console.error('‚ö†Ô∏è PDF generation returned no URL');\n        toast.error('Failed to generate PDF', { id: 'generate-pdf' });\n      }\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      toast.error('Failed to generate PDF: ' + error.message, { id: 'generate-pdf' });\n    }\n  };\n\n  // Helper function to find existing PDF for this patient\n  const findExistingPDF = async () => {\n    try {\n      if (!selectedPatient || !selectedPatient.id) return null;\n\n      // Get patient's processing history\n      const allResults = await DatabaseService.get('algorithmResults');\n      const patientResults = allResults.filter(r => r.patientId === selectedPatient.id);\n\n      console.log(`üîç Found ${patientResults.length} existing records for patient ${getPatientName(selectedPatient)}`);\n\n      // Find most recent record with a PDF\n      const recordsWithPdf = patientResults\n        .filter(r => r.pdfUrl && r.pdfUrl !== 'null' && r.pdfUrl !== '')\n        .sort((a, b) => {\n          const dateA = new Date(a.inputData?.processedAt || a.processedAt || a.createdAt || 0);\n          const dateB = new Date(b.inputData?.processedAt || b.processedAt || b.createdAt || 0);\n          return dateB - dateA; // Most recent first\n        });\n\n      if (recordsWithPdf.length > 0) {\n        const latestPdf = recordsWithPdf[0].pdfUrl;\n        console.log('‚úÖ Found most recent PDF:', latestPdf);\n        return latestPdf;\n      }\n\n      console.log('‚ùå No existing PDF found in database');\n      return null;\n    } catch (error) {\n      console.error('Error finding existing PDF:', error);\n      return null;\n    }\n  };\n\n  const handleExecuteCalculation = () => {\n    if (eyesOpenFile && eyesClosedFile) {\n      processQEEGFiles();\n    } else {\n      toast.error('Please upload both QEEG data files');\n    }\n  };\n\n  const handleExportResults = () => {\n    if (results) {\n      // Create CSV content\n      const csvContent = [\n        ['Parameter', 'Score (%)', 'Status'],\n        ...results.map(r => [r.parameter, r.score, r.status])\n      ].map(row => row.join(',')).join('\\n');\n\n      // Create and download file\n      const blob = new Blob([csvContent], { type: 'text/csv' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'neurosense-algorithm-results.csv';\n      a.click();\n      window.URL.revokeObjectURL(url);\n    }\n  };\n\n  const generatePDFReport = async (resultData) => {\n    if (!resultData || !selectedPatient) {\n      console.error('‚ùå Cannot generate PDF: Missing resultData or selectedPatient');\n      toast.error('Cannot generate PDF: Missing data');\n      return null;\n    }\n\n    try {\n      console.log('üîß Preparing patient data...');\n\n      // Prepare patient data - FIXED: Use current date for recording, not DOB\n      const patientData = {\n        name: getPatientName(selectedPatient),\n        dateOfRecording: new Date().toISOString().split('T')[0], // TODAY'S DATE, not DOB!\n        dateOfBirth: selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified',\n        age: selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A',\n        gender: selectedPatient.gender || 'Not specified',\n        handedness: selectedPatient.handedness || 'Right', // Default to Right if not specified\n        patientId: selectedPatient.id,\n        occupation: selectedPatient.occupation || 'Not specified',\n        symptoms: selectedPatient.symptoms || []\n      };\n\n      console.log('üë§ Patient Data (Fixed):', patientData);\n      console.log('   Name:', patientData.name);\n      console.log('   Recording Date:', patientData.dateOfRecording);\n      console.log('   DOB:', patientData.dateOfBirth);\n      console.log('   Age:', patientData.age);\n      console.log('   Gender:', patientData.gender);\n      console.log('   Handedness:', patientData.handedness);\n\n      // Prepare algorithm results with STRONG validation to avoid NaN errors\n      const algorithmResults = {\n        parameters: resultData.map(result => {\n          const scoreParts = (result.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          const maxScore = parseInt(scoreParts[1]) || 3;\n\n          // Clean metrics to remove any NaN values\n          const cleanMetrics = (result.metrics || []).map(metric => ({\n            name: metric.name || 'Unknown',\n            score: isNaN(metric.score) ? 0 : (parseInt(metric.score) || 0),\n            value: isNaN(metric.value) ? 0 : (parseFloat(metric.value) || 0),\n            threshold: metric.threshold || 'Not provided'\n          }));\n\n          return {\n            name: result.parameter || 'Unknown Parameter',\n            score: isNaN(score) ? 0 : score,\n            maxScore: isNaN(maxScore) ? 3 : maxScore,\n            classification: result.status || 'Unknown',\n            metrics: cleanMetrics\n          };\n        }),\n        overallScore: resultData.reduce((sum, r) => {\n          const scoreParts = (r.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          return sum + (isNaN(score) ? 0 : score);\n        }, 0)\n      };\n\n      console.log('üìä Algorithm Results (NaN-free):', algorithmResults);\n\n      // EXTRA SAFETY: Double-check for any NaN in the data\n      const dataString = JSON.stringify(algorithmResults);\n      if (dataString.includes('NaN')) {\n        console.error('‚ö†Ô∏è WARNING: Found NaN in algorithm results!');\n        console.error('Raw data:', algorithmResults);\n        throw new Error('Data contains NaN values. Please check the calculation results.');\n      }\n\n      console.log('üìä Algorithm Results:', algorithmResults);\n\n      // Prepare QEEG data (use sample data if not available)\n      const qeegData = {\n        EC: {\n          absolute: { Fz: { Delta: 5.2, Theta: 4.1, Alpha: 8.3, Beta: 6.2, HiBeta: 3.1 } },\n          relative: { Pz: { Alpha: 45.2 } },\n          special: { alphaPeak: 10.3, O1: 10.1 }\n        },\n        EO: {\n          absolute: { Fz: { Theta: 3.8, Beta: 3.2, HiBeta: 2.5 } },\n          relative: { Pz: { Alpha: 28.7 } }\n        }\n      };\n\n      // Call backend API to generate PDF\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const pdfEndpoint = `${apiUrl}/qeeg/generate-pdf`;\n\n      console.log('üåê Calling backend API:', pdfEndpoint);\n      console.log('üì° Request payload size:', JSON.stringify({ patientData, algorithmResults, qeegData }).length, 'bytes');\n\n      // Add timeout handling\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 60000); // 60 second timeout (increased for Gemini AI)\n\n      const response = await fetch(pdfEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          patientData,\n          algorithmResults,\n          qeegData\n        }),\n        signal: controller.signal\n      }).catch(error => {\n        clearTimeout(timeoutId);\n        if (error.name === 'AbortError') {\n          throw new Error('PDF generation timed out after 60 seconds. Please check: 1) Backend is running, 2) Gemini API key is configured, 3) Internet connection is stable.');\n        }\n        if (error.message.includes('Failed to fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure backend is running on port 5000 (run: npm run dev:backend)');\n        }\n        throw error;\n      });\n\n      clearTimeout(timeoutId);\n\n      console.log('üì° Backend response status:', response.status);\n      console.log('üì° Backend response headers:', Object.fromEntries(response.headers.entries()));\n\n      if (!response.ok) {\n        let errorMessage = `Server returned ${response.status}`;\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n          console.error('‚ùå Backend error data:', errorData);\n        } catch (e) {\n          const errorText = await response.text();\n          errorMessage = errorText || errorMessage;\n          console.error('‚ùå Backend error text:', errorText);\n        }\n        throw new Error(`Failed to generate PDF: ${errorMessage}`);\n      }\n\n      const data = await response.json();\n      console.log('üì¶ Backend response data:', data);\n\n      if (!data || !data.success || !data.data) {\n        console.error('‚ùå Invalid response format:', data);\n        throw new Error('Invalid response from server');\n      }\n\n      // Use the complete URL from backend instead of constructing it\n      const pdfResult = {\n        url: data.data.url, // Backend already provides complete URL\n        path: data.data.path,\n        filename: data.data.filename\n      };\n\n      console.log('‚úÖ PDF generated successfully!', pdfResult);\n      console.log('‚úÖ PDF URL:', pdfResult.url);\n\n      return pdfResult;\n\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      console.error('‚ùå Error name:', error.name);\n      console.error('‚ùå Error message:', error.message);\n\n      if (error.message && error.stack) {\n        console.error('‚ùå Error stack:', error.stack);\n      }\n\n      // Provide specific error messages based on error type\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\n        console.error('‚ùå NETWORK ERROR: Cannot connect to backend server');\n        console.error('‚ùå Please ensure backend server is running on http://localhost:5000');\n        toast.error('Cannot connect to server. Please ensure backend is running on port 5000.');\n      } else if (error.name === 'AbortError') {\n        console.error('‚ùå TIMEOUT ERROR: PDF generation took too long');\n        toast.error('PDF generation timed out. Server might be overloaded.');\n      } else {\n        console.error('‚ùå PDF GENERATION ERROR:', error.message);\n        toast.error(`PDF generation failed: ${error.message}`);\n      }\n\n      return null;\n    }\n  };\n\n  const handleDownloadPDF = async () => {\n    if (!pdfUrl) {\n      toast.error('PDF not available. Please save results first.');\n      return;\n    }\n\n    try {\n      toast.loading('Downloading PDF...', { id: 'download-pdf' });\n\n      // Construct full backend URL\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\n      const backendBaseUrl = apiUrl.replace('/api', ''); // Remove /api to get base URL\n\n      // Handle both Supabase URLs and local URLs\n      let fullPdfUrl;\n      if (pdfUrl.startsWith('http')) {\n        // It's already a full URL (Supabase)\n        fullPdfUrl = pdfUrl;\n      } else {\n        // It's a local path, construct full URL\n        fullPdfUrl = `${backendBaseUrl}${pdfUrl}`;\n      }\n\n      console.log('üîΩ Download Info:', {\n        originalPdfUrl: pdfUrl,\n        backendBaseUrl,\n        fullPdfUrl,\n        isSupabase: pdfUrl.startsWith('http')\n      });\n\n      // For local files, try direct window.open first (simpler approach)\n      if (!pdfUrl.startsWith('http')) {\n        console.log('üì• Using direct download method for local file');\n\n        // Create a hidden link and click it\n        const link = document.createElement('a');\n        link.href = fullPdfUrl;\n        link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n        link.target = '_blank';\n\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        toast.success('PDF download started!', { id: 'download-pdf' });\n        return;\n      }\n\n      // For Supabase URLs, use fetch method\n      console.log('üì• Using fetch method for Supabase URL');\n\n      const response = await fetch(fullPdfUrl);\n\n      if (!response.ok) {\n        console.error('‚ùå Download failed:', {\n          status: response.status,\n          statusText: response.statusText\n        });\n        throw new Error(`Server returned ${response.status}: ${response.statusText}`);\n      }\n\n      // Convert to blob\n      const blob = await response.blob();\n\n      // Verify blob is valid\n      if (!blob || blob.size === 0) {\n        throw new Error('Downloaded file is empty');\n      }\n\n      console.log('‚úÖ PDF fetched successfully, size:', (blob.size / 1024).toFixed(2), 'KB');\n\n      // Create download link\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n      // Trigger download\n      document.body.appendChild(link);\n      link.click();\n\n      // Cleanup\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(downloadUrl);\n      }, 100);\n\n      toast.success('PDF downloaded successfully!', { id: 'download-pdf' });\n\n    } catch (error) {\n      console.error('‚ùå Download error:', {\n        error: error.message,\n        pdfUrl,\n        stack: error.stack\n      });\n\n      // Provide more helpful error messages\n      let errorMessage = 'Failed to download PDF';\n      if (error.message.includes('404')) {\n        errorMessage = 'PDF file not found on server';\n      } else if (error.message.includes('Failed to fetch')) {\n        errorMessage = 'Network error. Please check your connection.';\n      } else {\n        errorMessage = `Download failed: ${error.message}`;\n      }\n\n      toast.error(errorMessage, { id: 'download-pdf' });\n    }\n  };\n\n  const calculateAge = (dateOfBirth) => {\n    if (!dateOfBirth) return 'N/A';\n    const today = new Date();\n    const birthDate = new Date(dateOfBirth);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    return age;\n  };\n\n  // Helper function to get color based on score\n  // 1/3 = Red, 2/3 = Yellow, 3/3 = Green\n  const getScoreColor = (rawScore) => {\n    if (!rawScore) return 'gray';\n\n    const [score, maxScore] = rawScore.split('/').map(Number);\n\n    if (score === 1) return 'red';      // 1/3\n    if (score === 2) return 'yellow';   // 2/3\n    if (score === 3) return 'green';    // 3/3\n\n    return 'gray';\n  };\n\n  const getStatusColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'text-red-500';\n      case 'yellow': return 'text-yellow-500';\n      case 'green': return 'text-green-500';\n      default: return 'text-gray-500';\n    }\n  };\n\n  const getStatusBgColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    if (color === 'green') return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n    if (color === 'yellow') return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n    if (color === 'red') return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400';\n    return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400';\n  };\n\n  const getProgressBarColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'bg-red-500';\n      case 'yellow': return 'bg-yellow-500';\n      case 'green': return 'bg-green-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading patients...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Patient List View\n  if (!showProcessingUI) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n          <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n          <p className=\"text-primary-light mt-2\">Select a patient to generate Algorithm 1 report</p>\n        </div>\n\n        {/* Filter Bar */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4\">\n          <div className=\"flex flex-col lg:flex-row gap-4\">\n            {/* Patient Search */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Search Patient\n              </label>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search by name or email...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clinic Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Clinic\n              </label>\n              <div className=\"relative\">\n                <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <select\n                  value={selectedClinicFilter}\n                  onChange={(e) => setSelectedClinicFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary appearance-none\"\n                >\n                  <option value=\"\">All Clinics</option>\n                  {clinics.map(clinic => (\n                    <option key={clinic.id} value={clinic.id}>\n                      {clinic.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            {/* Date Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Date\n              </label>\n              <div className=\"relative\">\n                <Calendar className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"date\"\n                  value={dateFilter}\n                  onChange={(e) => setDateFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clear Filters Button */}\n            {(searchTerm || selectedClinicFilter || dateFilter) && (\n              <div className=\"flex items-end\">\n                <button\n                  onClick={clearFilters}\n                  className=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  <span>Clear</span>\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Active Filters Display */}\n          {(searchTerm || selectedClinicFilter || dateFilter) && (\n            <div className=\"mt-3 flex flex-wrap gap-2\">\n              {searchTerm && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\">\n                  Search: \"{searchTerm}\"\n                </span>\n              )}\n              {selectedClinicFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400\">\n                  Clinic: {clinics.find(c => c.id === selectedClinicFilter)?.name}\n                </span>\n              )}\n              {dateFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n                  Date: {new Date(dateFilter).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n                </span>\n              )}\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 self-center\">\n                ({filteredPatients.length} {filteredPatients.length === 1 ? 'patient' : 'patients'} found)\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Patient List - Clinic-wise */}\n        <div className=\"space-y-4\">\n          {groupedPatients.length > 0 ? (\n            groupedPatients.map(({ clinic, patients: clinicPatients }) => (\n            <div key={clinic.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              {/* Clinic Header */}\n              <div className=\"bg-accent-light dark:bg-primary/20 border-b border-primary-light dark:border-primary px-6 py-3\">\n                <div className=\"flex items-center\">\n                  <Building2 className=\"h-5 w-5 text-primary mr-2\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                    {clinic.name}\n                  </h3>\n                  <span className=\"ml-3 text-sm text-gray-600 dark:text-gray-400\">\n                    ({clinicPatients.length} {clinicPatients.length === 1 ? 'patient' : 'patients'})\n                  </span>\n                </div>\n              </div>\n\n              {/* Patient Table */}\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Patient Name\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Email\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Previous Scans\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Action\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n                    {clinicPatients.map(patient => (\n                      <tr key={patient.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex items-center\">\n                            <User className=\"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2\" />\n                            <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                              {getPatientName(patient)}\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          {patient.email || 'N/A'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          <span className=\"flex items-center\">\n                            <History className=\"h-4 w-4 mr-1\" />\n                            {patient.totalScans || 0} {patient.totalScans === 1 ? 'scan' : 'scans'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          {getStatusBadge(patient.algorithmStatus, patient.lastProcessed)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right\">\n                          <button\n                            onClick={() => handleGenerateReport(patient)}\n                            className=\"bg-primary hover:bg-navy-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-md flex items-center ml-auto\"\n                          >\n                            <FileText className=\"h-4 w-4 mr-2\" />\n                            {patient.algorithmStatus === 'completed' ? 'View/Generate' : 'Generate Report'}\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            ))\n          ) : (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center\">\n              <Filter className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4\" />\n              <p className=\"text-gray-600 dark:text-gray-400 font-medium\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'No patients match your filters'\n                  : 'No patients found'\n                }\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-2\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'Try adjusting your search criteria or clear filters'\n                  : 'Patients will appear here once they are registered in the system'\n                }\n              </p>\n              {(searchTerm || selectedClinicFilter || dateFilter) && (\n                <button\n                  onClick={clearFilters}\n                  className=\"mt-4 px-4 py-2 bg-primary hover:bg-navy-700 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Clear Filters\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Processing UI View\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Back Button */}\n      <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n        <button\n          onClick={handleBackToList}\n          className=\"flex items-center text-primary-light hover:text-white mb-3 transition-colors\"\n        >\n          <ArrowLeft className=\"h-5 w-5 mr-2\" />\n          Back to Patient List\n        </button>\n        <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n        <div className=\"flex items-center gap-3 mt-2\">\n          <p className=\"text-primary-light\">\n            Processing for: <span className=\"font-semibold\">{getPatientName(selectedPatient)}</span> | {selectedPatient?.clinicName}\n          </p>\n          {dataType === 'zscore' && (\n            <span className=\"inline-flex items-center px-3 py-1 bg-purple-500/20 text-purple-200 text-xs font-medium rounded-full border border-purple-400/30\">\n              üî¨ Z-Score Mode\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Panel - QEEG Data Input */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            QEEG Data Input\n          </h2>\n          <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <p className=\"text-xs text-blue-800 dark:text-blue-300\">\n              <span className=\"font-semibold\">‚ÑπÔ∏è Note:</span> Data will be extracted from <strong>pages 13 & 24</strong> of both PDF files\n            </p>\n          </div>\n\n          {/* Eyes Open Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EO - Eyes Open PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('eo', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesOpenFile ? eyesOpenFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesOpenFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Eyes Closed Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EC - Eyes Closed PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('ec', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesClosedFile ? eyesClosedFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesClosedFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Data Loaded Progress */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Data Loaded\n            </label>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\">\n              <div\n                className=\"bg-green-500 h-2.5 rounded-full transition-all duration-300\"\n                style={{ width: `${eyesOpenFile && eyesClosedFile ? 100 : eyesOpenFile || eyesClosedFile ? 50 : 0}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Middle Panel - Algorithm Processing */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Algorithm 1 Processing\n          </h2>\n\n          {/* Execute Button */}\n          <button\n            onClick={handleExecuteCalculation}\n            disabled={!eyesOpenFile || !eyesClosedFile || isProcessing || isSaved}\n            className={`w-full mb-6 py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n              eyesOpenFile && eyesClosedFile && !isProcessing && !isSaved\n                ? 'bg-primary hover:bg-navy-700 text-white'\n                : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n            }`}\n          >\n            <Play className=\"h-5 w-5\" />\n            <span>Execute Calculation</span>\n          </button>\n\n          {/* Processing Animation */}\n          {isProcessing && (\n            <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-center mb-6 shadow-lg\">\n              <div className=\"relative inline-block\">\n                <Activity className=\"h-16 w-16 text-white animate-pulse\" />\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-20 h-20 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                </div>\n              </div>\n              <p className=\"text-white font-medium mt-4\">Processing...</p>\n              <p className=\"text-primary-light text-sm\">{consoleLog.length} actions done</p>\n            </div>\n          )}\n\n          {/* Processing Complete */}\n          {processingComplete && (\n            <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 text-center mb-6\">\n              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-2\" />\n              <p className=\"text-green-800 dark:text-green-400 font-medium\">Processing Complete!</p>\n            </div>\n          )}\n\n          {/* Console */}\n          <div className=\"bg-gray-900 dark:bg-black rounded-lg p-4 min-h-[200px] max-h-[300px] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-gray-700\">\n              <h3 className=\"text-sm font-medium text-gray-300\">Console</h3>\n              <button\n                onClick={() => setConsoleLog([])}\n                className=\"text-xs text-gray-400 hover:text-gray-200\"\n              >\n                Clear\n              </button>\n            </div>\n            <div className=\"space-y-1 font-mono text-xs\">\n              {consoleLog.length > 0 ? (\n                consoleLog.map((log, index) => (\n                  <div key={index} className=\"text-green-400\">\n                    &gt; {log}\n                  </div>\n                ))\n              ) : (\n                <div className=\"text-gray-500 italic\">Console output will appear here...</div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Final 7 Parameter Scores */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              Final 7 Parameter Scores\n            </h2>\n            {results && (\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Total: {results.reduce((sum, r) => sum + parseInt(r.rawScore.split('/')[0]), 0)}/21\n              </span>\n            )}\n          </div>\n\n          {/* Algorithm Info Card */}\n          <div className=\"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <div className=\"flex items-start space-x-2\">\n              <Activity className=\"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0\" />\n              <div>\n                <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1\">\n                  7-Parameter Brain Health Analysis\n                </h3>\n                <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                  Each parameter is calculated from 3 sub-metrics. Score: 0-1 (Low), 2 (Medium), 3 (High).\n                  Each metric shows its calculated value and threshold comparison.\n                </p>\n                <div className=\"mt-2 text-xs text-blue-600 dark:text-blue-400\">\n                  <strong>Parameters:</strong> Cognition ‚Ä¢ Stress ‚Ä¢ Focus & Attention ‚Ä¢ Burnout & Fatigue ‚Ä¢\n                  Emotional Regulation ‚Ä¢ Learning ‚Ä¢ Creativity\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {results ? (\n            <>\n              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => (\n                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n                    {/* Main Parameter */}\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                        {result.parameter}\n                      </span>\n                      <div className=\"flex items-center space-x-3\">\n                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                          {result.rawScore}\n                        </span>\n                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                          {result.status}\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n                      <div\n                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n                        style={{ width: `${result.score}%` }}\n                      ></div>\n                    </div>\n\n                    {/* Sub-Parameters with Calculations */}\n                    {result.metrics && result.metrics.length > 0 && (\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n                          Sub-Parameters & Calculations:\n                        </div>\n                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress condition\n                            const isNormal = metric.score === 1;\n                            const bgColorClass = result.parameter === 'Stress'\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    result.parameter === 'Stress'\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>\n                                  <div className=\"flex items-center space-x-2\">\n                                    {metric.score === 1 ? (\n                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                    ) : (\n                                      <X className=\"h-4 w-4 text-red-500\" />\n                                    )}\n                                    <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                      {metric.score}/1\n                                    </span>\n                                  </div>\n                                </div>\n\n                              {/* Calculation Details */}\n                              <div className=\"space-y-1\">\n                                {/* Actual Value */}\n                                {metric.value !== null && metric.value !== undefined && (\n                                  <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-gray-500 dark:text-gray-400\">Value:</span>\n                                    <span className=\"font-mono text-gray-700 dark:text-gray-300\">\n                                      {typeof metric.value === 'object' && metric.value !== null\n                                        ? Object.entries(metric.value).map(([key, val]) =>\n                                            `${key}: ${typeof val === 'number' ? val.toFixed(2) : val}`\n                                          ).join(', ')\n                                        : typeof metric.value === 'number'\n                                        ? metric.value.toFixed(2)\n                                        : metric.value}\n                                    </span>\n                                  </div>\n                                )}\n\n                                {/* Description/Formula */}\n                                {metric.description && (\n                                  <div className=\"text-xs text-gray-600 dark:text-gray-400 italic mt-1\">\n                                    {metric.description}\n                                  </div>\n                                )}\n\n                                {/* Additional Details */}\n                                {metric.details && (\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n                                    {typeof metric.details === 'object'\n                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n                                          <div key={idx} className=\"flex justify-between\">\n                                            <span>{key}:</span>\n                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n                                          </div>\n                                        ))\n                                      : metric.details}\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                {/* Save Results Button (No PDF Generation) */}\n                <button\n                  onClick={handleSaveResults}\n                  disabled={isSaving || isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    isSaved\n                      ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 cursor-not-allowed'\n                      : isSaving\n                      ? 'bg-blue-400 text-white cursor-wait'\n                      : 'bg-primary hover:bg-navy-700 text-white'\n                  }`}\n                >\n                  {isSaving ? (\n                    <>\n                      <Activity className=\"h-5 w-5 animate-spin\" />\n                      <span>Saving...</span>\n                    </>\n                  ) : isSaved ? (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Saved ‚úì</span>\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Save Results</span>\n                    </>\n                  )}\n                </button>\n\n                {/* Generate PDF Button (Separate) */}\n                <button\n                  onClick={handleGenerateAndDownloadPDF}\n                  disabled={!results || !isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    !results || !isSaved\n                      ? 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      : pdfUrl\n                      ? 'bg-green-600 hover:bg-green-700 text-white'\n                      : 'bg-blue-600 hover:bg-blue-700 text-white'\n                  }`}\n                  title={!isSaved ? 'Please save results first' : 'Generate and download PDF report'}\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>{pdfUrl ? 'Download PDF Report' : 'Generate PDF Report'}</span>\n                </button>\n\n                {/* Export CSV Button */}\n                <button\n                  onClick={handleExportResults}\n                  className=\"w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md\"\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>Export CSV</span>\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <FileText className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mb-4\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Upload data files and execute calculation to see results\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Processing History */}\n      {selectedPatient && processingHistory.length > 0 && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n              <History className=\"h-5 w-5 mr-2\" />\n              Processing History for {getPatientName(selectedPatient)}\n            </h2>\n            <button\n              onClick={async () => {\n                console.log('üîÑ Manual sync triggered...');\n                toast.loading('Syncing PDFs from Supabase...', { id: 'sync-pdfs' });\n\n                try {\n                  // Force reload from database and sync\n                  await loadProcessingHistory(selectedPatient.id);\n\n                  // Count how many PDFs were found\n                  const results = await DatabaseService.get('algorithmResults');\n                  const patientResults = results.filter(r => r.patientId === selectedPatient.id);\n                  const pdfCount = patientResults.filter(r => r.pdfUrl).length;\n                  const totalCount = patientResults.length;\n\n                  toast.success(`‚úÖ Synced! ${pdfCount}/${totalCount} PDFs available`, { id: 'sync-pdfs' });\n                  console.log(`‚úÖ Sync complete: ${pdfCount}/${totalCount} records have PDFs`);\n                } catch (error) {\n                  console.error('‚ùå Sync failed:', error);\n                  toast.error('Failed to sync PDFs', { id: 'sync-pdfs' });\n                }\n              }}\n              className=\"px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-1\"\n              title=\"Fetch PDFs from Supabase bucket and update database\"\n            >\n              <Download className=\"h-3 w-3\" />\n              <span>Sync PDFs</span>\n            </button>\n          </div>\n          <div className=\"space-y-3\">\n            {processingHistory.map((record, index) => (\n              <div\n                key={record.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <Calendar className=\"h-4 w-4 text-primary\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        {new Date(record.inputData?.processedAt || record.processedAt || record.createdAt).toLocaleDateString('en-US', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </span>\n                      {/* PDF Status Badge */}\n                      {record.pdfUrl ? (\n                        <span className=\"px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full flex items-center space-x-1\">\n                          <CheckCircle className=\"h-3 w-3\" />\n                          <span>PDF Available</span>\n                        </span>\n                      ) : (\n                        <span className=\"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full\">\n                          No PDF\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 space-y-1 mb-3\">\n                      <p>üìÅ Files: {record.inputData?.eyesOpenFile || record.eyesOpenFile || 'N/A'}, {record.inputData?.eyesClosedFile || record.eyesClosedFile || 'N/A'}</p>\n                      <p>üë§ Processed by: {record.inputData?.processedBy || record.processedBy || 'Unknown'}</p>\n                      {record.pdfUrl && (\n                        <p className=\"text-green-600 dark:text-green-400\">\n                          üìÑ PDF: {record.pdfUrl.startsWith('http') ? 'Supabase ‚úì' : 'Local ‚úì'}\n                        </p>\n                      )}\n                      {!record.pdfUrl && (\n                        <p className=\"text-red-600 dark:text-red-400\">üìÑ PDF: Not available</p>\n                      )}\n                    </div>\n\n                    {/* Quick Summary of Results */}\n                    {(() => {\n                      const savedResults = record.outputData || record.results;\n                      return savedResults && savedResults.length > 0 && (\n                        <div className=\"mt-3 grid grid-cols-2 gap-2\">\n                          {savedResults.slice(0, 4).map((result, idx) => (\n                            <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                              <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                              <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                                {result.rawScore}\n                              </span>\n                            </div>\n                          ))}\n                        </div>\n                      );\n                    })()}\n                  </div>\n                  <div className=\"flex flex-col space-y-2\">\n                    {/* View Full Results Button */}\n                    <button\n                      onClick={() => {\n                        // Handle both old format (results) and new format (outputData)\n                        const savedResults = record.outputData || record.results;\n                        if (savedResults) {\n                          setResults(savedResults);\n                          setProcessingComplete(true);\n                          setIsSaved(true);\n                          // Set PDF URL if available\n                          if (record.pdfUrl) {\n                            setPdfUrl(record.pdfUrl);\n                          }\n                          toast.success('Previous results loaded!');\n                          console.log('‚úÖ Loaded results from history:', savedResults);\n                        } else {\n                          toast.error('No results found in this record');\n                          console.error('‚ùå No results found in record:', record);\n                        }\n                      }}\n                      className=\"px-3 py-2 text-sm bg-primary hover:bg-navy-700 text-white rounded-lg transition-colors flex items-center justify-center space-x-1\"\n                    >\n                      <FileText className=\"h-4 w-4\" />\n                      <span>View Results</span>\n                    </button>\n\n                    {/* Download PDF Button - Always visible */}\n                    <button\n                      onClick={async () => {\n                        if (!record.pdfUrl) {\n                          toast.error('No PDF available for this record');\n                          console.log('‚ùå No PDF URL in record:', record);\n                          return;\n                        }\n\n                        console.log('üì• Downloading PDF from record:', {\n                          processedAt: record.processedAt,\n                          pdfUrl: record.pdfUrl\n                        });\n\n                        try {\n                          toast.loading('Downloading PDF...', { id: 'history-download' });\n\n                          // Construct full URL (works with both local and Supabase URLs)\n                          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n                          const backendBaseUrl = apiUrl.replace('/api', '');\n                          const fullPdfUrl = record.pdfUrl.startsWith('http') ? record.pdfUrl : `${backendBaseUrl}${record.pdfUrl}`;\n\n                          console.log('üì• Downloading from:', fullPdfUrl);\n\n                          // Fetch the PDF file\n                          const response = await fetch(fullPdfUrl);\n                          if (!response.ok) throw new Error('Failed to fetch PDF');\n\n                          // Convert to blob\n                          const blob = await response.blob();\n\n                          // Create download link\n                          const downloadUrl = window.URL.createObjectURL(blob);\n                          const link = document.createElement('a');\n                          link.href = downloadUrl;\n                          link.download = record.pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n                          // Trigger download\n                          document.body.appendChild(link);\n                          link.click();\n\n                          // Cleanup\n                          document.body.removeChild(link);\n                          window.URL.revokeObjectURL(downloadUrl);\n\n                          toast.success('PDF downloaded successfully!', { id: 'history-download' });\n                        } catch (error) {\n                          console.error('Download error:', error);\n                          toast.error('Failed to download PDF', { id: 'history-download' });\n                        }\n                      }}\n                      disabled={!record.pdfUrl}\n                      className={`px-3 py-2 text-sm rounded-lg transition-colors flex items-center justify-center space-x-1 ${\n                        record.pdfUrl\n                          ? 'bg-blue-600 hover:bg-blue-700 text-white cursor-pointer'\n                          : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      }`}\n                      title={record.pdfUrl ? 'Download PDF Report' : 'No PDF available'}\n                    >\n                      <Download className=\"h-4 w-4\" />\n                      <span>NeuroSense Report</span>\n                    </button>\n                  </div>\n                </div>\n\n                {/* Expandable Details */}\n                {(() => {\n                  const savedResults = record.outputData || record.results;\n                  return savedResults && savedResults.length > 4 && (\n                    <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                      {savedResults.slice(4).map((result, idx) => (\n                        <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                          <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  );\n                })()}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Info Section */}\n      <div className=\"bg-accent-light dark:bg-primary/20 border border-primary-light dark:border-primary rounded-lg p-4 shadow-sm\">\n        <h3 className=\"text-sm font-medium text-primary dark:text-primary-light mb-2\">\n          About Algorithm 1 Processing\n        </h3>\n        <p className=\"text-sm text-navy-800 dark:text-gray-300\">\n          This processor analyzes QEEG data files (Eyes Open and Eyes Closed) and generates 7 key parameters using proprietary\n          binary scoring logic. The algorithm evaluates brain activity patterns to assess cognitive and emotional health markers.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default AlgorithmDataProcessor;\n","structuredPatch":[{"oldStart":1653,"oldLines":8,"newStart":1653,"newLines":9,"lines":["                                   </div>","                                 )}","                               </div>","-                            </div>","-                          ))}","+                              </div>","+                            );","+                          })}","                         </div>","                       </div>","                     )}"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"4226b041-6cd1-4754-8cc7-874f36e21f82","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_011hw7WwwX22iWRLDpYShbuh","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Great! I've successfully updated the component. Now let me mark the todo as completed and test the changes. Let me verify the syntax is correct by checking for any ESLint or import errors.","signature":"EuUCCkYIChgCKkAqVsVrhl+VMwYX/WbycfX81wSMdQvOxKDSTqXOnZ8zw+VYa8j6UDNX5m3YZtS0RF10xb1j15ucTf80TZwttC+HEgx9zguy/aXV5t5duUkaDFI56JSaiol5FL3XBSIwJ9O7tOy5hzwGwS6DwXtRF7DC/DHyyFd2092FDtBEy1zmN7UkhEgzGSnks1RwLaMwKswB3R2N8I/8SHuwTcpHViSSmvP946ntuEYcHTJ7e17xTlRy38IhJpAQNrdq+WlFj9K0g2DMe3i0/wBQpdggTBokQNxPYi40K8E3BdkZdobl7h4wX+K3F91IoRWMVqfRmEBC7UlnvjNjPNna7af9kZK7Mdxc8+3hmOcjySYKeSpQp588hyqhaLRFLH5l5q2e64OhegMNxrzAumfr8Tdxgn8wYk8eqIcgpt96qlcf97P5rAbNSCRMuAOS+I2bS+Fe7hZgB1C3VUaAhdcAAlgRGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":404,"cache_read_input_tokens":53671,"cache_creation":{"ephemeral_5m_input_tokens":404,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8qTcVELqHzfd1r31Pt","type":"assistant","uuid":"47aea28b-c28d-4e42-8ce7-c28f4ab23f96","timestamp":"2025-12-18T12:15:50.521Z"}
{"parentUuid":"47aea28b-c28d-4e42-8ce7-c28f4ab23f96","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_011hw7WwwX22iWRLDpYShbuh","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01SChdsQPSM9ECTsHTXDEJ84","name":"TodoWrite","input":{"todos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"completed","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for all stress sub-parameters","status":"completed","activeForm":"Implementing conditional color coding for stress sub-parameters"},{"content":"Test the implementation and verify colors display correctly","status":"in_progress","activeForm":"Testing the implementation"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":404,"cache_read_input_tokens":53671,"cache_creation":{"ephemeral_5m_input_tokens":404,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8qTcVELqHzfd1r31Pt","type":"assistant","uuid":"aa0e3b7b-bbc5-4b7e-9640-6b73a149b896","timestamp":"2025-12-18T12:15:52.167Z"}
{"parentUuid":"aa0e3b7b-bbc5-4b7e-9640-6b73a149b896","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_011hw7WwwX22iWRLDpYShbuh","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_012DgUB9VVLFMGmsXZ7mkQqt","name":"Bash","input":{"command":"cd \"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\" && npm run build 2>&1 | head -50","description":"Build project to check for syntax errors","timeout":60000}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":404,"cache_read_input_tokens":53671,"cache_creation":{"ephemeral_5m_input_tokens":404,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8qTcVELqHzfd1r31Pt","type":"assistant","uuid":"5b8e8e72-3739-4a86-8974-5a845768737a","timestamp":"2025-12-18T12:15:53.233Z"}
{"parentUuid":"5b8e8e72-3739-4a86-8974-5a845768737a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01SChdsQPSM9ECTsHTXDEJ84","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"af3366e0-6d8a-478c-805b-b44f3c730125","timestamp":"2025-12-18T12:15:53.441Z","toolUseResult":{"oldTodos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"completed","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for all stress sub-parameters","status":"in_progress","activeForm":"Implementing conditional color coding for stress sub-parameters"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}],"newTodos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"completed","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for all stress sub-parameters","status":"completed","activeForm":"Implementing conditional color coding for stress sub-parameters"},{"content":"Test the implementation and verify colors display correctly","status":"in_progress","activeForm":"Testing the implementation"}]}}
{"parentUuid":"af3366e0-6d8a-478c-805b-b44f3c730125","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_012DgUB9VVLFMGmsXZ7mkQqt","type":"tool_result","content":"> @neuro360/web@2.0.0 build\n> vite build\n\n\u001b[36mvite v4.5.14 \u001b[32mbuilding for production...\u001b[36m\u001b[39m\ntransforming...\n[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`\n\u001b[32m‚úì\u001b[39m 1619 modules transformed.\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminAssignmentModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AgreementManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AlgorithmDataProcessor.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AnalyticsDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/BrandingConfiguration.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/ClinicManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PaymentHistory.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PersonalizedCarePlan.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/SuperAdminPanel.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/auth/ForgotPasswordForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/SubscriptionManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/contexts/AuthContext.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/alertService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseBackupService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/neuroSenseService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/paymentService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/razorpayService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/storageService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/layout/ProfileModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/emailService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, dynamic import will not move module into another chunk.\n\u001b[39m\nrendering chunks...\ncomputing gzip size...\n\u001b[2mdist/\u001b[22m\u001b[32mindex.html                 \u001b[39m\u001b[1m\u001b[2m    1.68 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:   0.80 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[35massets/index-a6c667fb.css  \u001b[39m\u001b[1m\u001b[2m  122.24 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:  17.67 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[36massets/index-6f2d5711.js   \u001b[39m\u001b[1m\u001b[33m2,666.64 kB\u001b[39m\u001b[22m\u001b[2m ‚îÇ gzip: 477.19 kB\u001b[22m\u001b[2m ‚îÇ map: 5,768.03 kB\u001b[22m\n\u001b[33m\n(!) Some chunks are larger than 500 kBs after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\u001b[39m\n\u001b[32m‚úì built in 13.57s\u001b[39m","is_error":false}]},"uuid":"64798153-6eef-43ba-92e2-0faaa714d221","timestamp":"2025-12-18T12:16:53.708Z","toolUseResult":{"stdout":"> @neuro360/web@2.0.0 build\n> vite build\n\n\u001b[36mvite v4.5.14 \u001b[32mbuilding for production...\u001b[36m\u001b[39m\ntransforming...\n[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`\n\u001b[32m‚úì\u001b[39m 1619 modules transformed.\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminAssignmentModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AgreementManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AlgorithmDataProcessor.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AnalyticsDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/BrandingConfiguration.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/ClinicManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PaymentHistory.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PersonalizedCarePlan.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/SuperAdminPanel.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/auth/ForgotPasswordForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/SubscriptionManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/contexts/AuthContext.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/alertService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseBackupService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/neuroSenseService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/paymentService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/razorpayService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/storageService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/layout/ProfileModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/emailService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, dynamic import will not move module into another chunk.\n\u001b[39m\nrendering chunks...\ncomputing gzip size...\n\u001b[2mdist/\u001b[22m\u001b[32mindex.html                 \u001b[39m\u001b[1m\u001b[2m    1.68 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:   0.80 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[35massets/index-a6c667fb.css  \u001b[39m\u001b[1m\u001b[2m  122.24 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:  17.67 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[36massets/index-6f2d5711.js   \u001b[39m\u001b[1m\u001b[33m2,666.64 kB\u001b[39m\u001b[22m\u001b[2m ‚îÇ gzip: 477.19 kB\u001b[22m\u001b[2m ‚îÇ map: 5,768.03 kB\u001b[22m\n\u001b[33m\n(!) Some chunks are larger than 500 kBs after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\u001b[39m\n\u001b[32m‚úì built in 13.57s\u001b[39m\r","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"64798153-6eef-43ba-92e2-0faaa714d221","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01NF5BixbR36EeDmmz2wMy6i","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Great! The build succeeded with no errors. The warnings are just about chunk sizes and dynamic imports, which are not related to my changes. Now let me create a summary for the user explaining what I've implemented.","signature":"EoADCkYIChgCKkC++U04jqoI9C4I/ieWPA50tsnrifEvN0mIghhZCamELvac2Qb+nTmpl6lr35PcQxpbcreOgeDrPkjMl+lb+bvUEgyZm8JJYiTzYGZV1rgaDFvNwDhCsp2MN5XvOyIw5CysDVVNJI5UBBUibKMBxcomw6MXbjFKG/EFCJfpsZJEF18f2wUilaeIrN7x3r+3KucBjNefB1rk8mg8o64LygPWFJ8METqqgLj19lpD0kh0l3zD6bbskhndVZ8isj6LfPoEQGVhy43iEa3DyV69CNpQAZ4qwpvcbqof0JyhxsRmVO68xRlseKurk+jscHNJKNMqDt/il6eXFGarCaHZNEz9zzJ+xbACFZyXmnUX77aagMxOc5aUNaBECHbFjgwq1c21buWZ31yzlW1VKSb/6g0t5K0kcuczAyZ3YYxs2/Ah9a05vZl5ZtrzShrDy5hFZPq3VK315VGPFQ6axBwYGkRxk9r6nDhqPeKx8FLDt/Ra0CAjNOeD5GXDGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":2805,"cache_read_input_tokens":54075,"cache_creation":{"ephemeral_5m_input_tokens":2805,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8vhSKsx6UebRzeHoBs","type":"assistant","uuid":"5254ffae-3d9e-40fe-9226-661d36382df1","timestamp":"2025-12-18T12:17:01.496Z"}
{"parentUuid":"5254ffae-3d9e-40fe-9226-661d36382df1","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01NF5BixbR36EeDmmz2wMy6i","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_017nZWxu9TLEspxxDW3SVGNt","name":"TodoWrite","input":{"todos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"completed","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for all stress sub-parameters","status":"completed","activeForm":"Implementing conditional color coding for stress sub-parameters"},{"content":"Test the implementation and verify colors display correctly","status":"completed","activeForm":"Testing the implementation"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":11,"cache_creation_input_tokens":2805,"cache_read_input_tokens":54075,"cache_creation":{"ephemeral_5m_input_tokens":2805,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE8vhSKsx6UebRzeHoBs","type":"assistant","uuid":"82d1470a-9b22-4598-a0e5-725a0e18a596","timestamp":"2025-12-18T12:17:04.166Z"}
{"parentUuid":"82d1470a-9b22-4598-a0e5-725a0e18a596","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_017nZWxu9TLEspxxDW3SVGNt","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"d885bef8-ea79-448d-aeba-7ab1b548d9d0","timestamp":"2025-12-18T12:17:04.939Z","toolUseResult":{"oldTodos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"completed","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for all stress sub-parameters","status":"completed","activeForm":"Implementing conditional color coding for stress sub-parameters"},{"content":"Test the implementation and verify colors display correctly","status":"in_progress","activeForm":"Testing the implementation"}],"newTodos":[{"content":"Search for stress condition component files","status":"completed","activeForm":"Searching for stress condition component files"},{"content":"Find the component displaying stress parameters with scores","status":"completed","activeForm":"Finding the component displaying stress parameters"},{"content":"Implement conditional color coding for all stress sub-parameters","status":"completed","activeForm":"Implementing conditional color coding for stress sub-parameters"},{"content":"Test the implementation and verify colors display correctly","status":"completed","activeForm":"Testing the implementation"}]}}
{"parentUuid":"d885bef8-ea79-448d-aeba-7ab1b548d9d0","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012RKRz3EfwC5WGxduEefok4","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! All tasks are completed. Now let me create a clear summary for the user in Hindi/English mix since that's how they communicated.","signature":"ErICCkYIChgCKkD3avW6EfLNM2Q/42SWmU08mSLcZtcxqIf4Zr30wlJK4eGYyTUFmFNScbudzfzhc6ymSvA+PWSkdU9CMHOaf9L1EgwZ7tbNZLOz1IF4nH4aDKa2kAFk/6hH5rI+JiIwDhJKBFhnaQi+VQsS6MAtARwctoOmq2xl6EOAtcI5s9xY4Yt7BE38jZvUCet1HxYwKpkBoTQ2B4vDcCbjfvE6i4pExEzLEBgBoBjn0yS8EylI7NAl7Mh2XZjYqgMazwZpYbxZ7MY66HmbZvCfdsj8Nmhdz3Ze1d8sKq0t3JqtUmWmHnTqnAXYvONZsvWlf97ha3vz9Gjuau4GVaR5I09aWt10qv4az/GkEdtM89eZjAGS/jWMWp1YBZD4LrnlXHehZGJQysQKGIgOf90rGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":284,"cache_read_input_tokens":56880,"cache_creation":{"ephemeral_5m_input_tokens":284,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE8wWFQVXd1YXrjFU4gw","type":"assistant","uuid":"fb454071-65d8-466c-b2cb-12fc6464a7c2","timestamp":"2025-12-18T12:17:10.680Z"}
{"parentUuid":"fb454071-65d8-466c-b2cb-12fc6464a7c2","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012RKRz3EfwC5WGxduEefok4","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! I've successfully implemented the conditional color indicators for stress condition parameters. Here's what I did:\n\n## Changes Made\n\nI updated the **AlgorithmDataProcessor.jsx** component (`src/components/admin/AlgorithmDataProcessor.jsx:1585-1658`) to add conditional background and border coloring for Stress condition sub-parameters:\n\n### Color Logic for Stress Parameters:\n\n**‚úÖ GREEN (Normal/Healthy)** - When score = 1/1:\n- Arousal Score < 1 (normal)\n- Relaxation Score > 10 (healthy)  \n- Regeneration & Repair > 30% (healthy)\n\n**‚ùå RED (Abnormal/High)** - When score = 0/1:\n- Arousal Score >= 1 (high/abnormal)\n- Relaxation Score <= 10 (low/abnormal)\n- Regeneration & Repair <= 30% (low/abnormal)\n\n### Visual Indicators Added:\n\n1. **Background Color**: \n   - Green background (`bg-green-50`) for normal scores\n   - Red background (`bg-red-50`) for abnormal scores\n\n2. **Border Color**:\n   - Green border (`border-green-300`) for normal scores\n   - Red border (`border-red-300`) for abnormal scores\n\n3. **Text Color**:\n   - Green text for parameter names when normal\n   - Red text for parameter names when abnormal\n\n4. **Dark Mode Support**: Colors work in both light and dark themes\n\nThe build completed successfully with no errors! The stress condition parameters will now clearly show:\n- **Green highlighting** when all three parameters (Arousal Score, Relaxation Score, Regeneration & Repair) are in normal range\n- **Red highlighting** when parameters are high/abnormal\n\nThe implementation is in AlgorithmDataProcessor.jsx:1585-1658."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":284,"cache_read_input_tokens":56880,"cache_creation":{"ephemeral_5m_input_tokens":284,"ephemeral_1h_input_tokens":0},"output_tokens":475,"service_tier":"standard"}},"requestId":"req_011CWE8wWFQVXd1YXrjFU4gw","type":"assistant","uuid":"6104e514-4137-4d9a-82c6-583e405c5294","timestamp":"2025-12-18T12:17:18.419Z"}
{"type":"file-history-snapshot","messageId":"44f17e46-8c27-4ec8-991e-edde9bbe6dcb","snapshot":{"messageId":"44f17e46-8c27-4ec8-991e-edde9bbe6dcb","trackedFileBackups":{"src\\components\\admin\\AlgorithmDataProcessor.jsx":{"backupFileName":"9777bd81bdc80e4c@v2","version":2,"backupTime":"2025-12-18T12:19:30.170Z"}},"timestamp":"2025-12-18T12:19:30.161Z"},"isSnapshotUpdate":false}
{"parentUuid":"6104e514-4137-4d9a-82c6-583e405c5294","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":"same as burnout & fatigue parameter agar score high hai to red me show kro mtlb 3/3 aaye to red me show kro . and sub parameter also same agar score high hai to red me show kro and low hai to green me "},"uuid":"44f17e46-8c27-4ec8-991e-edde9bbe6dcb","timestamp":"2025-12-18T12:19:30.143Z","thinkingMetadata":{"level":"high","disabled":false,"triggers":[]}}
{"parentUuid":"44f17e46-8c27-4ec8-991e-edde9bbe6dcb","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_013ouax8svhbLwXqWBYfcqG7","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"The user wants to apply the same conditional color logic to the \"Burnout & Fatigue\" parameter. They want:\n\n1. For the main parameter: If score is high (3/3), show red. If score is low, show green.\n2. For sub-parameters: Same logic - if score is high, show red. If score is low, show green.\n\nLet me first check the burnout calculation to understand what \"high\" and \"low\" mean for this parameter.\n\nFrom the wellnessAlgorithmService.js I read earlier:\n- Burnout & Fatigue has 3 sub-parameters:\n  1. Arousal Score - normal if < 1\n  2. Relaxation Score - healthy if > 10\n  3. Excessive Delta - normal if < 70\n\nThe overall score calculation shows that normal status means LOW burnout (good), and abnormal status means HIGH burnout (bad).\n\nSo for Burnout & Fatigue:\n- Low burnout (score 3/3 or status \"Low\") = GREEN (good)\n- High burnout (score 1/3 or status \"High\") = RED (bad)\n\nWait, let me re-read the user's request. They said \"agar score high hai to red me show kro mtlb 3/3 aaye to red me show kro\" - if score is high (3/3) then show red.\n\nThis is interesting. For burnout, a HIGH score (3/3) means HIGH burnout which is BAD, so RED makes sense.\nFor stress, a HIGH score (3/3) would mean HIGH stress which is also BAD, so RED makes sense.\n\nBut wait, the current stress implementation shows green when metric.score === 1 (which is the sub-parameter score, not the overall parameter score).\n\nLet me think about this more carefully:\n- The `result.rawScore` is something like \"1/3\", \"2/3\", \"3/3\"\n- The `result.status` is \"Low\", \"Medium\", \"High\"\n\n\n- For stress: 1/3 = Low stress (good), 3/3 = High stress (bad)\n- For burnout: 1/3 = Low burnout (good), 3/3 = High burnout (bad)\n\nI see the nuanced color mapping now. When the raw score reaches 3/3, it indicates a critical state for both stress and burnout. This means the main parameter card should turn red to highlight the severity. For sub-parameters, the color depends on their individual metric scores and normality status.\n\nThe implementation requires careful differentiation between the main parameter's raw score and each sub-parameter's individual score. The goal is to create a visual warning system that immediately draws attention to high-risk areas in the wellness assessment.","signature":"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"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":38993,"cache_read_input_tokens":16181,"cache_creation":{"ephemeral_5m_input_tokens":38993,"ephemeral_1h_input_tokens":0},"output_tokens":1010,"service_tier":"standard"}},"requestId":"req_011CWE989K8b5XFj9YXK7wAs","type":"assistant","uuid":"3a460c29-de06-4596-8cd7-560c26d4a7d2","timestamp":"2025-12-18T12:19:51.330Z"}
{"parentUuid":"3a460c29-de06-4596-8cd7-560c26d4a7d2","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_013ouax8svhbLwXqWBYfcqG7","type":"message","role":"assistant","content":[{"type":"text","text":"‡§∏‡§Æ‡§ù ‡§ó‡§Ø‡§æ! ‡§Æ‡•à‡§Ç Burnout & Fatigue parameter ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä same conditional color coding implement ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§ Let me first check the current structure and then apply the logic:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":38993,"cache_read_input_tokens":16181,"cache_creation":{"ephemeral_5m_input_tokens":38993,"ephemeral_1h_input_tokens":0},"output_tokens":1010,"service_tier":"standard"}},"requestId":"req_011CWE989K8b5XFj9YXK7wAs","type":"assistant","uuid":"bde59abe-e0e7-4de9-8e38-ed38b1039e18","timestamp":"2025-12-18T12:19:51.409Z"}
{"parentUuid":"bde59abe-e0e7-4de9-8e38-ed38b1039e18","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_013ouax8svhbLwXqWBYfcqG7","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Veb53FCGUGJeWiP8CpGgPX","name":"TodoWrite","input":{"todos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"in_progress","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Implement red/green colors for Burnout & Fatigue main parameter based on score","status":"pending","activeForm":"Implementing colors for Burnout & Fatigue main parameter"},{"content":"Implement red/green colors for Burnout & Fatigue sub-parameters","status":"pending","activeForm":"Implementing colors for Burnout & Fatigue sub-parameters"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":38993,"cache_read_input_tokens":16181,"cache_creation":{"ephemeral_5m_input_tokens":38993,"ephemeral_1h_input_tokens":0},"output_tokens":1010,"service_tier":"standard"}},"requestId":"req_011CWE989K8b5XFj9YXK7wAs","type":"assistant","uuid":"3e6885cf-168e-44ef-9852-ccb507bbe818","timestamp":"2025-12-18T12:19:51.756Z"}
{"parentUuid":"3e6885cf-168e-44ef-9852-ccb507bbe818","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_013ouax8svhbLwXqWBYfcqG7","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01JdMvuTYpJZZfuWfcFP1nxi","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\wellnessAlgorithmService.js","offset":128,"limit":40}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":38993,"cache_read_input_tokens":16181,"cache_creation":{"ephemeral_5m_input_tokens":38993,"ephemeral_1h_input_tokens":0},"output_tokens":1010,"service_tier":"standard"}},"requestId":"req_011CWE989K8b5XFj9YXK7wAs","type":"assistant","uuid":"2147314d-56ce-46dd-953b-79fea15b0542","timestamp":"2025-12-18T12:19:51.861Z"}
{"parentUuid":"2147314d-56ce-46dd-953b-79fea15b0542","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Veb53FCGUGJeWiP8CpGgPX","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"ee18d7c5-8553-46f2-b0a8-dc75e66e94ee","timestamp":"2025-12-18T12:19:51.976Z","toolUseResult":{"oldTodos":[],"newTodos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"in_progress","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Implement red/green colors for Burnout & Fatigue main parameter based on score","status":"pending","activeForm":"Implementing colors for Burnout & Fatigue main parameter"},{"content":"Implement red/green colors for Burnout & Fatigue sub-parameters","status":"pending","activeForm":"Implementing colors for Burnout & Fatigue sub-parameters"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}
{"parentUuid":"ee18d7c5-8553-46f2-b0a8-dc75e66e94ee","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01JdMvuTYpJZZfuWfcFP1nxi","type":"tool_result","content":"   128‚Üí\n   129‚Üí/**\n   130‚Üí * Calculate Burnout & Fatigue Score\n   131‚Üí * Identifies mental exhaustion and fatigue patterns\n   132‚Üí * @param {Object} eegData - EEG frequency band data\n   133‚Üí * @returns {Object} - Burnout score\n   134‚Üí */\n   135‚Üíexport const calculateBurnoutFatigueScore = (eegData) => {\n   136‚Üí  const { eyesOpen, eyesClosed } = eegData;\n   137‚Üí\n   138‚Üí  // 1. Arousal Score - Eyes Open\n   139‚Üí  const arousalScore = calculateArousalScore(eyesOpen, ['Fz', 'Cz']);\n   140‚Üí  const arousalStatus = arousalScore < 1 ? 'normal' : 'abnormal';\n   141‚Üí\n   142‚Üí  // 2. Relaxation Score - Eyes Closed at Pz\n   143‚Üí  const relaxationScore = calculateRelaxationScore(eyesClosed, ['Pz']);\n   144‚Üí  const relaxationStatus = relaxationScore > 10 ? 'healthy' : 'abnormal';\n   145‚Üí\n   146‚Üí  // 3. Excessive Delta - Eyes Open, Relative Power at multiple locations\n   147‚Üí  const excessiveDelta = calculateExcessiveDelta(eyesOpen, ['Fz', 'C3', 'Cz', 'C4', 'P3', 'Pz', 'P4']);\n   148‚Üí  const deltaStatus = excessiveDelta < 70 ? 'normal' : 'abnormal';\n   149‚Üí\n   150‚Üí  const overallScore = [arousalStatus, relaxationStatus, deltaStatus]\n   151‚Üí    .filter(s => s === 'normal' || s === 'healthy').length / 3 * 100;\n   152‚Üí\n   153‚Üí  return {\n   154‚Üí    score: Math.round(overallScore),\n   155‚Üí    status: overallScore >= 66 ? 'normal' : overallScore >= 33 ? 'borderline' : 'abnormal',\n   156‚Üí    subParameters: {\n   157‚Üí      arousalScore: { value: arousalScore, status: arousalStatus, normal: '< 1' },\n   158‚Üí      relaxationScore: { value: relaxationScore, status: relaxationStatus, normal: '> 10' },\n   159‚Üí      excessiveDelta: { value: excessiveDelta, status: deltaStatus, normal: '< 70%' }\n   160‚Üí    }\n   161‚Üí  };\n   162‚Üí};\n   163‚Üí\n   164‚Üí/**\n   165‚Üí * Calculate Emotional Regulation Score\n   166‚Üí * Assesses emotional stability and regulation capacity\n   167‚Üí * @param {Object} eegData - EEG frequency band data\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"13b65b48-b732-4146-bf99-bc11c0039991","timestamp":"2025-12-18T12:19:53.876Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\services\\wellnessAlgorithmService.js","content":"\n/**\n * Calculate Burnout & Fatigue Score\n * Identifies mental exhaustion and fatigue patterns\n * @param {Object} eegData - EEG frequency band data\n * @returns {Object} - Burnout score\n */\nexport const calculateBurnoutFatigueScore = (eegData) => {\n  const { eyesOpen, eyesClosed } = eegData;\n\n  // 1. Arousal Score - Eyes Open\n  const arousalScore = calculateArousalScore(eyesOpen, ['Fz', 'Cz']);\n  const arousalStatus = arousalScore < 1 ? 'normal' : 'abnormal';\n\n  // 2. Relaxation Score - Eyes Closed at Pz\n  const relaxationScore = calculateRelaxationScore(eyesClosed, ['Pz']);\n  const relaxationStatus = relaxationScore > 10 ? 'healthy' : 'abnormal';\n\n  // 3. Excessive Delta - Eyes Open, Relative Power at multiple locations\n  const excessiveDelta = calculateExcessiveDelta(eyesOpen, ['Fz', 'C3', 'Cz', 'C4', 'P3', 'Pz', 'P4']);\n  const deltaStatus = excessiveDelta < 70 ? 'normal' : 'abnormal';\n\n  const overallScore = [arousalStatus, relaxationStatus, deltaStatus]\n    .filter(s => s === 'normal' || s === 'healthy').length / 3 * 100;\n\n  return {\n    score: Math.round(overallScore),\n    status: overallScore >= 66 ? 'normal' : overallScore >= 33 ? 'borderline' : 'abnormal',\n    subParameters: {\n      arousalScore: { value: arousalScore, status: arousalStatus, normal: '< 1' },\n      relaxationScore: { value: relaxationScore, status: relaxationStatus, normal: '> 10' },\n      excessiveDelta: { value: excessiveDelta, status: deltaStatus, normal: '< 70%' }\n    }\n  };\n};\n\n/**\n * Calculate Emotional Regulation Score\n * Assesses emotional stability and regulation capacity\n * @param {Object} eegData - EEG frequency band data","numLines":40,"startLine":128,"totalLines":658}}}
{"parentUuid":"13b65b48-b732-4146-bf99-bc11c0039991","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RWJzeCpSMt3tNcDVXrRqUw","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I understand. For Burnout & Fatigue:\n- Arousal Score: normal if < 1\n- Relaxation Score: healthy if > 10\n- Excessive Delta: normal if < 70\n\nOverall score logic:\n- If all 3 are normal/healthy: 100% = 3/3 = Low burnout (GREEN - good)\n- If 2 are normal: 66% = 2/3 = Medium burnout (YELLOW)\n- If 1 is normal: 33% = 1/3 = High burnout (RED - bad)\n- If 0 are normal: 0% = 0/3 = High burnout (RED - bad)\n\nSo the user wants:\n1. Main parameter card: If rawScore is \"3/3\" (Low burnout) = GREEN, if \"1/3\" (High burnout) = RED\n2. Sub-parameters: Same as stress - if metric.score === 1 (normal) = GREEN, if metric.score === 0 (abnormal) = RED\n\nLet me check how the main parameter card is currently structured.","signature":"EtwGCkYIChgCKkBfY3ruEGAL+GhQ9F3Hk7bllDuloX5trPdm2gmMVlguumAvYffemvOQmT9X1Nwwewfc1xBnzvt6c+c8o99WpZygEgztwlCMm4Yn+pGu5oMaDNvP6ucpagxFoNS3aiIwPK5cJqIY+C+leXV5fDcpYrnumvcseiE1ONri4iOOwlp2WMQa/+wk9/ScmDzZf7xIKsMFYPiWHCKk4N3d8KcPj0zTQ+fcOZyC/AayEKqAZB3BKv/U/huMLEaaZVftEa1WwDX6+iq+k3+sEdK6rBShlzkvyzWat0ngViZj1RLPBUh2PPC+94t2owqMFNLfiUeqzLQ+4VhJHkTf/ZNArOd9lAZURrcUEumnwlnNp0qmOYZdwnkdCBJLEWM7UJGpLIoorMhFwO7iwHffFZ5scNarIvslzwIT2ztTQq52jVjzaxPt/cz7KFDNBFASVrw8BiicLp/GaCXc5AL9+ajjehpOd51RzcePxCGQGo4zGXXHag+qp874Ylr2ZpR9BD6IOqFMa2kuuSjoF3SeJg8Uc5VTnkfoM3t20Fd19XvXLgptg4iL1/qK4tu+D1QuTUhj1nyCDnTTQKp3fZqKtfbBINIOs7gDsLJTF7M61+XjCDCy2J+VyOVUcbKOCWljnjhwhbItszPkjyGQEdWD7pAUh2yfZTSz/grIT1HSy1czs51PadCNs7Vq3KkGbAw3bmJk8Quvg8AkvIbfRwDT+ubTAtEdpXNFOefEQgmGiWddFe29huJKpf18a9LMhHT6K2YhAg0ZiJxz6OuErdZSremmOq2IkM30tyGp0MbpK4ui3un96cINhCx8YOg7qA2MRB6ciAW0RxJ4/xdbB6HzF0vqg5YI8c83Gzb7a2aJclnmMRuf92/v/wPSiPw78ZlrhTIk0pJYNnBKX+4D6hlhkQ/IWq0bcwyvp+mKv0WjsAein30LOjqE1UgtmB+iNO6KY26QGjSN85rqmJwI1zawjX5gCVS0TGRNls6ZE8ivzYp6I1tiPjpkoh+35KzPBDrA5Mn8YMeQjenbdGiPjndLzWw978ZPQuDs4KAtx+RCZVaOsC4nQzmkg5tYyzIwsnZwJLdAVenhtZ1v/lAA39p4qp4YTH2w+Yc7iXPGJZabrzwPsgWmY0XrABLJE9IYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":1866,"cache_read_input_tokens":55174,"cache_creation":{"ephemeral_5m_input_tokens":1866,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE99tvkXWZt7qSwVhddU","type":"assistant","uuid":"5b1a4e44-73bd-4111-ade0-44ab7069b37b","timestamp":"2025-12-18T12:20:03.064Z"}
{"parentUuid":"5b1a4e44-73bd-4111-ade0-44ab7069b37b","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RWJzeCpSMt3tNcDVXrRqUw","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01QyvsHNdmYzKTwH7wWwBX4n","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","offset":1550,"limit":30}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":1866,"cache_read_input_tokens":55174,"cache_creation":{"ephemeral_5m_input_tokens":1866,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE99tvkXWZt7qSwVhddU","type":"assistant","uuid":"dd7e93ee-b17d-4a46-8ac3-a2170d4bdac1","timestamp":"2025-12-18T12:20:04.180Z"}
{"parentUuid":"dd7e93ee-b17d-4a46-8ac3-a2170d4bdac1","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01QyvsHNdmYzKTwH7wWwBX4n","type":"tool_result","content":"  1550‚Üí          {results ? (\n  1551‚Üí            <>\n  1552‚Üí              <div className=\"space-y-4 mb-6\">\n  1553‚Üí                {results.map((result, index) => (\n  1554‚Üí                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n  1555‚Üí                    {/* Main Parameter */}\n  1556‚Üí                    <div className=\"flex items-center justify-between mb-2\">\n  1557‚Üí                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n  1558‚Üí                        {result.parameter}\n  1559‚Üí                      </span>\n  1560‚Üí                      <div className=\"flex items-center space-x-3\">\n  1561‚Üí                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n  1562‚Üí                          {result.rawScore}\n  1563‚Üí                        </span>\n  1564‚Üí                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n  1565‚Üí                          {result.status}\n  1566‚Üí                        </span>\n  1567‚Üí                      </div>\n  1568‚Üí                    </div>\n  1569‚Üí\n  1570‚Üí                    {/* Progress Bar */}\n  1571‚Üí                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n  1572‚Üí                      <div\n  1573‚Üí                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n  1574‚Üí                        style={{ width: `${result.score}%` }}\n  1575‚Üí                      ></div>\n  1576‚Üí                    </div>\n  1577‚Üí\n  1578‚Üí                    {/* Sub-Parameters with Calculations */}\n  1579‚Üí                    {result.metrics && result.metrics.length > 0 && (\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"441f8282-aa3c-4205-9de6-9553d8d99738","timestamp":"2025-12-18T12:20:06.256Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","content":"          {results ? (\n            <>\n              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => (\n                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n                    {/* Main Parameter */}\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                        {result.parameter}\n                      </span>\n                      <div className=\"flex items-center space-x-3\">\n                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                          {result.rawScore}\n                        </span>\n                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                          {result.status}\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n                      <div\n                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n                        style={{ width: `${result.score}%` }}\n                      ></div>\n                    </div>\n\n                    {/* Sub-Parameters with Calculations */}\n                    {result.metrics && result.metrics.length > 0 && (","numLines":30,"startLine":1550,"totalLines":1963}}}
{"parentUuid":"441f8282-aa3c-4205-9de6-9553d8d99738","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01V6gsYSprfPerxeuL1oCvg7","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Now I need to understand what the rawScore looks like and add background color to the main parameter card. Let me check the getStatusColor and getStatusBgColor functions to understand the scoring system.","signature":"EvQCCkYIChgCKkCJ6QUzZYKwP+EplsAdYkb60EEtW7CBPkzInhOq0zuikUfIxsLFpTaCDQ589ULQhVB0DQf5Go5bSdVw/676yc2GEgyhxjrZ1tDF4L1D8VgaDLBxZuHZj3s+lp2ZbyIwxO3GOpiYCWWo+jcmridFFmE3C54uHg3t6gYIKOqYtOjXyUnJkW66sZuOMbmYOqg5KtsBZCoeowLEfkSVZ3csvGiZYSF/NErD0/YMEQ9HLzsJhsGT0TY6CVw00tHGWR/RoVrGxGvK/28tJCLbbU9MV0olO0YCNeW8ITBzuXWrXviu6gQ/lopWHR2g3NSdasEukJeCnmZzzOp8iVrAINMdw1bIhqeyN4AGlf+TM5Uq8Z3EARfAGIrpyv+IrY4E+rq0fedmlo7tnHRfQ3culYs+iRgMWr4RJPnpxVqiZeUX/jHSVPK8mKAZOx/C/ihw0eZE+NXGCyI6dF28rW7QsEWi2MDpDZTV8+1Si2Gm+GNMGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1008,"cache_read_input_tokens":57040,"cache_creation":{"ephemeral_5m_input_tokens":1008,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9Ant94m6AtdkDHeZLC","type":"assistant","uuid":"f7e781dd-f367-4f51-a698-0cf05f0e2d3a","timestamp":"2025-12-18T12:20:12.191Z"}
{"parentUuid":"f7e781dd-f367-4f51-a698-0cf05f0e2d3a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01V6gsYSprfPerxeuL1oCvg7","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_013TNaEju44BEhDAUzSjFtyL","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","offset":1085,"limit":60}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1008,"cache_read_input_tokens":57040,"cache_creation":{"ephemeral_5m_input_tokens":1008,"ephemeral_1h_input_tokens":0},"output_tokens":173,"service_tier":"standard"}},"requestId":"req_011CWE9Ant94m6AtdkDHeZLC","type":"assistant","uuid":"63cd58f8-8db7-4f0b-93e8-4cbadbe67b2f","timestamp":"2025-12-18T12:20:12.959Z"}
{"parentUuid":"63cd58f8-8db7-4f0b-93e8-4cbadbe67b2f","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_013TNaEju44BEhDAUzSjFtyL","type":"tool_result","content":"  1085‚Üí  // Helper function to get color based on score\n  1086‚Üí  // 1/3 = Red, 2/3 = Yellow, 3/3 = Green\n  1087‚Üí  const getScoreColor = (rawScore) => {\n  1088‚Üí    if (!rawScore) return 'gray';\n  1089‚Üí\n  1090‚Üí    const [score, maxScore] = rawScore.split('/').map(Number);\n  1091‚Üí\n  1092‚Üí    if (score === 1) return 'red';      // 1/3\n  1093‚Üí    if (score === 2) return 'yellow';   // 2/3\n  1094‚Üí    if (score === 3) return 'green';    // 3/3\n  1095‚Üí\n  1096‚Üí    return 'gray';\n  1097‚Üí  };\n  1098‚Üí\n  1099‚Üí  const getStatusColor = (rawScore) => {\n  1100‚Üí    const color = getScoreColor(rawScore);\n  1101‚Üí    switch (color) {\n  1102‚Üí      case 'red': return 'text-red-500';\n  1103‚Üí      case 'yellow': return 'text-yellow-500';\n  1104‚Üí      case 'green': return 'text-green-500';\n  1105‚Üí      default: return 'text-gray-500';\n  1106‚Üí    }\n  1107‚Üí  };\n  1108‚Üí\n  1109‚Üí  const getStatusBgColor = (rawScore) => {\n  1110‚Üí    const color = getScoreColor(rawScore);\n  1111‚Üí    if (color === 'green') return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n  1112‚Üí    if (color === 'yellow') return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n  1113‚Üí    if (color === 'red') return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400';\n  1114‚Üí    return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400';\n  1115‚Üí  };\n  1116‚Üí\n  1117‚Üí  const getProgressBarColor = (rawScore) => {\n  1118‚Üí    const color = getScoreColor(rawScore);\n  1119‚Üí    switch (color) {\n  1120‚Üí      case 'red': return 'bg-red-500';\n  1121‚Üí      case 'yellow': return 'bg-yellow-500';\n  1122‚Üí      case 'green': return 'bg-green-500';\n  1123‚Üí      default: return 'bg-gray-500';\n  1124‚Üí    }\n  1125‚Üí  };\n  1126‚Üí\n  1127‚Üí  if (loading) {\n  1128‚Üí    return (\n  1129‚Üí      <div className=\"flex items-center justify-center h-64\">\n  1130‚Üí        <div className=\"text-center\">\n  1131‚Üí          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n  1132‚Üí          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading patients...</p>\n  1133‚Üí        </div>\n  1134‚Üí      </div>\n  1135‚Üí    );\n  1136‚Üí  }\n  1137‚Üí\n  1138‚Üí  // Patient List View\n  1139‚Üí  if (!showProcessingUI) {\n  1140‚Üí    return (\n  1141‚Üí      <div className=\"space-y-6\">\n  1142‚Üí        {/* Header */}\n  1143‚Üí        <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n  1144‚Üí          <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"f235dd0a-4b2f-43fb-8fd1-15fe1f1cdfde","timestamp":"2025-12-18T12:20:14.956Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","content":"  // Helper function to get color based on score\n  // 1/3 = Red, 2/3 = Yellow, 3/3 = Green\n  const getScoreColor = (rawScore) => {\n    if (!rawScore) return 'gray';\n\n    const [score, maxScore] = rawScore.split('/').map(Number);\n\n    if (score === 1) return 'red';      // 1/3\n    if (score === 2) return 'yellow';   // 2/3\n    if (score === 3) return 'green';    // 3/3\n\n    return 'gray';\n  };\n\n  const getStatusColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'text-red-500';\n      case 'yellow': return 'text-yellow-500';\n      case 'green': return 'text-green-500';\n      default: return 'text-gray-500';\n    }\n  };\n\n  const getStatusBgColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    if (color === 'green') return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n    if (color === 'yellow') return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n    if (color === 'red') return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400';\n    return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400';\n  };\n\n  const getProgressBarColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'bg-red-500';\n      case 'yellow': return 'bg-yellow-500';\n      case 'green': return 'bg-green-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading patients...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Patient List View\n  if (!showProcessingUI) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n          <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>","numLines":60,"startLine":1085,"totalLines":1963}}}
{"parentUuid":"f235dd0a-4b2f-43fb-8fd1-15fe1f1cdfde","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018DgcFYEtHG5ozXtW89fxrS","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! Now I understand the scoring system:\n- 1/3 = Low score (for stress/burnout this is GOOD) = Currently RED in getScoreColor\n- 2/3 = Medium score = YELLOW\n- 3/3 = High score (for stress/burnout this is BAD) = Currently GREEN in getScoreColor\n\nWait, this seems backwards! Let me re-read the user's requirement and the algorithm logic.\n\nActually, let me think about this more carefully:\n\nFor STRESS:\n- 1/3 = Low stress = GOOD = Should be GREEN\n- 3/3 = High stress = BAD = Should be RED\n\nFor BURNOUT:\n- 1/3 = Low burnout = GOOD = Should be GREEN  \n- 3/3 = High burnout = BAD = Should be RED\n\nBut the current color scheme in getScoreColor is:\n- 1/3 = RED\n- 3/3 = GREEN\n\nThis suggests that the score represents how HEALTHY the parameter is, not how HIGH the problem is. Let me check the algorithm service again to confirm.\n\nLooking at line 64 in wellnessAlgorithmService.js:\n```javascript\nconst overallScore = [arousalStatus, relaxationStatus, regenerationStatus]\n  .filter(s => s === 'normal' || s === 'healthy').length / 3 * 100;\n```\n\nSo:\n- If all 3 sub-parameters are normal/healthy = 3/3 = 100% = Good/Normal\n- If none are normal = 0/3 or 1/3 = Bad/Abnormal\n\nSo the score represents WELLNESS, not the severity of the problem!\n\nTherefore:\n- 3/3 = All metrics normal = Low stress/burnout = GREEN = GOOD\n- 1/3 = Most metrics abnormal = High stress/burnout = RED = BAD\n\nThe current color scheme is CORRECT for general wellness scores.\n\n\nI see the user wants a specific interpretation for stress and burnout parameters. They're requesting that when the score reaches 3/3, it should be displayed in red, indicating high severity. This suggests a different color mapping specifically for these sensitive health metrics.\n\nThe user's Hindi request translates to wanting a visual indicator that highlights when stress or burnout levels are at their peak. By showing red at 3/3, they're emphasizing the critical nature of these high-intensity states.\n\nThis means we'll need a conditional color assignment that differs from the general wellness score logic, creating a more nuanced approach to displaying health parameter severity. I understand the color representation needs clarification. The user wants an inverted color scheme where high scores trigger red and low scores trigger green. Currently, the system shows green for low problem levels and red for high problem levels. The user specifically wants 3/3 (high score) to display as red, and 1/3 (low score) to display as green, which is opposite of the current implementation. This applies both to overall wellness status and individual sub-parameters. The key is to swap the color logic so that higher scores are visually flagged as problematic. I'll look at the sub-parameters and their scoring logic. The key insight is color-coding based on individual metric performance. For Stress, each sub-parameter (Arousal, Relaxation, Regeneration) gets colored according to its specific score - GREEN for normal/healthy, RED for abnormal/problematic. The overall Stress parameter shows 1/3 metrics are normal, indicating a low wellness state. The user wants a clear visual representation of each metric's status through background coloration.\n\nThe screenshot reveals a nuanced scoring system where individual metric performance determines the color, not just the total score. This means even if overall stress is \"Low\", specific sub-metrics can still be flagged as problematic.\n\nI'll continue exploring the color-coding requirement for the Burnout parameter, focusing on translating each metric's score into a clear visual indicator.","signature":"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"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1294,"cache_read_input_tokens":58048,"cache_creation":{"ephemeral_5m_input_tokens":1294,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9BSV5dv8EWb4Q3um5W","type":"assistant","uuid":"b01b0a52-6458-438a-b00f-cc75b6fe7678","timestamp":"2025-12-18T12:20:55.456Z"}
{"parentUuid":"b01b0a52-6458-438a-b00f-cc75b6fe7678","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018DgcFYEtHG5ozXtW89fxrS","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§ó‡§Ø‡§æ‡•§ ‡§Ö‡§¨ ‡§Æ‡•à‡§Ç Burnout & Fatigue ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä same logic implement ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Ç:\n\n1. **Main parameter card** (‡§ú‡§π‡§æ‡§Ç \"Burnout & Fatigue\" heading ‡§π‡•à) - score ‡§ï‡•á based ‡§™‡§∞ background color\n2. **Sub-parameters** - same as Stress, score high (0/1) = RED, score normal (1/1) = GREEN"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1294,"cache_read_input_tokens":58048,"cache_creation":{"ephemeral_5m_input_tokens":1294,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9BSV5dv8EWb4Q3um5W","type":"assistant","uuid":"54c03f02-6a3f-4b8e-abea-0f4e01fda816","timestamp":"2025-12-18T12:20:55.587Z"}
{"parentUuid":"54c03f02-6a3f-4b8e-abea-0f4e01fda816","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018DgcFYEtHG5ozXtW89fxrS","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_019FhoYJcnqvp8zu1zH3Fxwr","name":"TodoWrite","input":{"todos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"completed","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Add background color to main parameter card for Stress and Burnout","status":"in_progress","activeForm":"Adding background colors to main parameter cards"},{"content":"Extend sub-parameter colors to Burnout & Fatigue","status":"pending","activeForm":"Extending sub-parameter colors to Burnout"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1294,"cache_read_input_tokens":58048,"cache_creation":{"ephemeral_5m_input_tokens":1294,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9BSV5dv8EWb4Q3um5W","type":"assistant","uuid":"51b08546-6fd4-4e2a-8965-4be5a951541c","timestamp":"2025-12-18T12:20:57.723Z"}
{"parentUuid":"51b08546-6fd4-4e2a-8965-4be5a951541c","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018DgcFYEtHG5ozXtW89fxrS","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_014b84iFdYg9azjsnxqaLhzs","name":"Edit","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","old_string":"              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => (\n                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n                    {/* Main Parameter */}\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                        {result.parameter}\n                      </span>\n                      <div className=\"flex items-center space-x-3\">\n                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                          {result.rawScore}\n                        </span>\n                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                          {result.status}\n                        </span>\n                      </div>\n                    </div>","new_string":"              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => {\n                  // Determine background color for main parameter card (Stress and Burnout & Fatigue)\n                  const isStressOrBurnout = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n                  let mainCardBgClass = 'border border-gray-200 dark:border-gray-700';\n\n                  if (isStressOrBurnout && result.rawScore) {\n                    const [score] = result.rawScore.split('/').map(Number);\n                    // 3/3 = Low problem (all normal) = GREEN\n                    // 2/3 = Medium = YELLOW\n                    // 1/3 or 0/3 = High problem = RED\n                    if (score === 3) {\n                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n                    } else if (score === 2) {\n                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n                    } else if (score <= 1) {\n                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n                    }\n                  }\n\n                  return (\n                    <div key={index} className={`rounded-lg p-3 ${mainCardBgClass}`}>\n                      {/* Main Parameter */}\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                          {result.parameter}\n                        </span>\n                        <div className=\"flex items-center space-x-3\">\n                          <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                          <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                            {result.status}\n                          </span>\n                        </div>\n                      </div>"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1294,"cache_read_input_tokens":58048,"cache_creation":{"ephemeral_5m_input_tokens":1294,"ephemeral_1h_input_tokens":0},"output_tokens":2903,"service_tier":"standard"}},"requestId":"req_011CWE9BSV5dv8EWb4Q3um5W","type":"assistant","uuid":"edfc684f-a2dd-4995-aa8c-5b3af82c33d3","timestamp":"2025-12-18T12:21:08.904Z"}
{"parentUuid":"edfc684f-a2dd-4995-aa8c-5b3af82c33d3","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_019FhoYJcnqvp8zu1zH3Fxwr","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"993af393-ddf1-48d3-8390-9d94f262d8c1","timestamp":"2025-12-18T12:21:09.051Z","toolUseResult":{"oldTodos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"in_progress","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Implement red/green colors for Burnout & Fatigue main parameter based on score","status":"pending","activeForm":"Implementing colors for Burnout & Fatigue main parameter"},{"content":"Implement red/green colors for Burnout & Fatigue sub-parameters","status":"pending","activeForm":"Implementing colors for Burnout & Fatigue sub-parameters"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}],"newTodos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"completed","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Add background color to main parameter card for Stress and Burnout","status":"in_progress","activeForm":"Adding background colors to main parameter cards"},{"content":"Extend sub-parameter colors to Burnout & Fatigue","status":"pending","activeForm":"Extending sub-parameter colors to Burnout"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}]}}
{"parentUuid":"993af393-ddf1-48d3-8390-9d94f262d8c1","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_014b84iFdYg9azjsnxqaLhzs","type":"tool_result","content":"The file D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n  1548‚Üí          </div>\n  1549‚Üí\n  1550‚Üí          {results ? (\n  1551‚Üí            <>\n  1552‚Üí              <div className=\"space-y-4 mb-6\">\n  1553‚Üí                {results.map((result, index) => {\n  1554‚Üí                  // Determine background color for main parameter card (Stress and Burnout & Fatigue)\n  1555‚Üí                  const isStressOrBurnout = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n  1556‚Üí                  let mainCardBgClass = 'border border-gray-200 dark:border-gray-700';\n  1557‚Üí\n  1558‚Üí                  if (isStressOrBurnout && result.rawScore) {\n  1559‚Üí                    const [score] = result.rawScore.split('/').map(Number);\n  1560‚Üí                    // 3/3 = Low problem (all normal) = GREEN\n  1561‚Üí                    // 2/3 = Medium = YELLOW\n  1562‚Üí                    // 1/3 or 0/3 = High problem = RED\n  1563‚Üí                    if (score === 3) {\n  1564‚Üí                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n  1565‚Üí                    } else if (score === 2) {\n  1566‚Üí                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n  1567‚Üí                    } else if (score <= 1) {\n  1568‚Üí                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n  1569‚Üí                    }\n  1570‚Üí                  }\n  1571‚Üí\n  1572‚Üí                  return (\n  1573‚Üí                    <div key={index} className={`rounded-lg p-3 ${mainCardBgClass}`}>\n  1574‚Üí                      {/* Main Parameter */}\n  1575‚Üí                      <div className=\"flex items-center justify-between mb-2\">\n  1576‚Üí                        <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n  1577‚Üí                          {result.parameter}\n  1578‚Üí                        </span>\n  1579‚Üí                        <div className=\"flex items-center space-x-3\">\n  1580‚Üí                          <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n  1581‚Üí                            {result.rawScore}\n  1582‚Üí                          </span>\n  1583‚Üí                          <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n  1584‚Üí                            {result.status}\n  1585‚Üí                          </span>\n  1586‚Üí                        </div>\n  1587‚Üí                      </div>\n  1588‚Üí\n  1589‚Üí                    {/* Progress Bar */}\n  1590‚Üí                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n  1591‚Üí                      <div"}]},"uuid":"50cd5d5f-ef6d-43bd-8944-ba25ddea783d","timestamp":"2025-12-18T12:22:03.593Z","toolUseResult":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","oldString":"              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => (\n                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n                    {/* Main Parameter */}\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                        {result.parameter}\n                      </span>\n                      <div className=\"flex items-center space-x-3\">\n                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                          {result.rawScore}\n                        </span>\n                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                          {result.status}\n                        </span>\n                      </div>\n                    </div>","newString":"              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => {\n                  // Determine background color for main parameter card (Stress and Burnout & Fatigue)\n                  const isStressOrBurnout = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n                  let mainCardBgClass = 'border border-gray-200 dark:border-gray-700';\n\n                  if (isStressOrBurnout && result.rawScore) {\n                    const [score] = result.rawScore.split('/').map(Number);\n                    // 3/3 = Low problem (all normal) = GREEN\n                    // 2/3 = Medium = YELLOW\n                    // 1/3 or 0/3 = High problem = RED\n                    if (score === 3) {\n                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n                    } else if (score === 2) {\n                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n                    } else if (score <= 1) {\n                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n                    }\n                  }\n\n                  return (\n                    <div key={index} className={`rounded-lg p-3 ${mainCardBgClass}`}>\n                      {/* Main Parameter */}\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                          {result.parameter}\n                        </span>\n                        <div className=\"flex items-center space-x-3\">\n                          <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                          <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                            {result.status}\n                          </span>\n                        </div>\n                      </div>","originalFile":"import React, { useState, useEffect } from 'react';\nimport { Upload, Play, Download, FileText, CheckCircle, Activity, User, Building2, Calendar, History, X, ArrowLeft, Search, Filter } from 'lucide-react';\nimport DatabaseService from '../../services/databaseService';\nimport toast from 'react-hot-toast';\n\nconst AlgorithmDataProcessor = () => {\n  const [patients, setPatients] = useState([]);\n  const [clinics, setClinics] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [showProcessingUI, setShowProcessingUI] = useState(false);\n  const [processingHistory, setProcessingHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Filter states\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedClinicFilter, setSelectedClinicFilter] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n\n  const [eyesOpenFile, setEyesOpenFile] = useState(null);\n  const [eyesClosedFile, setEyesClosedFile] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [processingComplete, setProcessingComplete] = useState(false);\n  const [consoleLog, setConsoleLog] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const [results, setResults] = useState(null);\n  const [isSaved, setIsSaved] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [dataType, setDataType] = useState(null); // 'raw' or 'zscore'\n\n  // Debug function to check database contents\n  useEffect(() => {\n    window.debugAlgorithmResults = async () => {\n      const allResults = await DatabaseService.get('algorithmResults');\n      console.log('üîç All Algorithm Results in Database:', allResults);\n      console.log(`Total records: ${allResults.length}`);\n      allResults.forEach((record, idx) => {\n        console.log(`\\nüìä Record ${idx + 1}:`, {\n          id: record.id,\n          patientName: record.inputData?.patientName || record.patientName,\n          processedAt: record.inputData?.processedAt || record.processedAt,\n          pdfUrl: record.pdfUrl || '‚ùå MISSING',\n          hasResults: !!(record.outputData || record.results)\n        });\n      });\n    };\n    console.log('üí° Debug: Type window.debugAlgorithmResults() in console to check database');\n  }, []);\n\n  useEffect(() => {\n    loadPatients();\n  }, []);\n\n  useEffect(() => {\n    if (selectedPatient && showProcessingUI) {\n      loadProcessingHistory(selectedPatient.id);\n    }\n  }, [selectedPatient, showProcessingUI, isSaved]); // Re-load when saved\n\n  const loadPatients = async () => {\n    try {\n      const patientsData = await DatabaseService.get('patients');\n      const clinicsData = await DatabaseService.get('clinics');\n      const algorithmResults = await DatabaseService.get('algorithmResults') || [];\n\n      // Enrich patients with clinic names and algorithm status\n      const enrichedPatients = patientsData.map(patient => {\n        const patientResults = algorithmResults.filter(r => r.patientId === patient.id);\n        const lastResult = patientResults.length > 0\n          ? patientResults.sort((a, b) => {\n              const aTime = a.inputData?.processedAt || a.processedAt || a.createdAt;\n              const bTime = b.inputData?.processedAt || b.processedAt || b.createdAt;\n              return new Date(bTime) - new Date(aTime);\n            })[0]\n          : null;\n\n        return {\n          ...patient,\n          clinicName: clinicsData.find(c => c.id === patient.clinicId)?.name || 'Unknown Clinic',\n          algorithmStatus: lastResult ? 'completed' : 'pending',\n          lastProcessed: lastResult?.inputData?.processedAt || lastResult?.processedAt || lastResult?.createdAt,\n          totalScans: patientResults.length\n        };\n      });\n\n      setPatients(enrichedPatients);\n      setClinics(clinicsData);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading patients:', error);\n      toast.error('Failed to load patients');\n      setLoading(false);\n    }\n  };\n\n  const loadProcessingHistory = async (patientId) => {\n    try {\n      // Load algorithm results for this patient\n      const results = await DatabaseService.get('algorithmResults');\n      const patientResults = results.filter(r => r.patientId === patientId);\n\n      console.log(`üìã Loaded ${patientResults.length} records for patient ${patientId}`);\n\n      // Log all records for debugging\n      console.log('üìä All records for this patient:');\n      patientResults.forEach((rec, idx) => {\n        const processedTime = rec.inputData?.processedAt || rec.processedAt || rec.createdAt;\n        console.log(`   ${idx + 1}. ${new Date(processedTime).toLocaleString()} - PDF: ${rec.pdfUrl ? '‚úì' : '‚úó'}`);\n      });\n\n      // Check for records without pdfUrl and try to fix them\n      const recordsWithoutPdf = patientResults.filter(r => !r.pdfUrl);\n      if (recordsWithoutPdf.length > 0) {\n        console.log(`\\n‚ö†Ô∏è Found ${recordsWithoutPdf.length} records without PDF URL - attempting auto-fix...`);\n\n        let updatedCount = 0;\n\n        // Step 1: Try to fetch PDFs from Supabase bucket\n        try {\n          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n          const response = await fetch(`${apiUrl}/qeeg/supabase-pdfs`);\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log(`\\n‚òÅÔ∏è Found ${data.count} PDFs in Supabase bucket:`);\n            data.pdfs.forEach(pdf => console.log(`   - ${pdf.name}`));\n\n            // Match PDFs with database records using smart matching\n            console.log(`\\nüîç Attempting to match ${recordsWithoutPdf.length} records...`);\n            for (const record of recordsWithoutPdf) {\n              const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n              const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n              const recordTimestamp = new Date(processedTime).getTime();\n              const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n\n              console.log(`\\n   Record: ${patientName} @ ${new Date(processedTime).toLocaleString()}`);\n              console.log(`   Searching for PDFs matching: neurosense-report-${sanitizedName}-*.pdf`);\n\n              // Find PDFs matching patient name\n              const matchingPdfs = data.pdfs.filter(pdf => {\n                const pdfNameLower = pdf.name.toLowerCase();\n                return pdfNameLower.includes(`neurosense-report-${sanitizedName}-`) &&\n                       pdfNameLower.endsWith('.pdf');\n              });\n\n              console.log(`   Found ${matchingPdfs.length} PDFs for this patient`);\n\n              if (matchingPdfs.length > 0) {\n                // Find PDF with closest timestamp (within 60 seconds)\n                let bestMatch = null;\n                let smallestDiff = Infinity;\n\n                for (const pdf of matchingPdfs) {\n                  // Extract timestamp from filename: neurosense-report-name-TIMESTAMP.pdf\n                  const match = pdf.name.match(/-(\\d+)\\.pdf$/);\n                  if (match) {\n                    const pdfTimestamp = parseInt(match[1]);\n                    const diff = Math.abs(pdfTimestamp - recordTimestamp);\n                    console.log(`      ${pdf.name}: timestamp diff = ${diff}ms (${(diff/1000).toFixed(1)}s)`);\n\n                    // Accept if within 60 seconds (60000ms)\n                    if (diff < 60000 && diff < smallestDiff) {\n                      smallestDiff = diff;\n                      bestMatch = pdf;\n                    }\n                  }\n                }\n\n                if (bestMatch) {\n                  console.log(`   ‚úÖ MATCH FOUND! ${bestMatch.name} (${(smallestDiff/1000).toFixed(1)}s difference)`);\n                  console.log(`   URL: ${bestMatch.url}`);\n                  record.pdfUrl = bestMatch.url;\n                  await DatabaseService.update('algorithmResults', record.id, record);\n                  updatedCount++;\n                } else {\n                  console.log(`   ‚ö†Ô∏è PDFs found but timestamp difference too large (>60s)`);\n                }\n              } else {\n                console.log(`   ‚ùå No PDFs found for patient: ${sanitizedName}`);\n              }\n            }\n          }\n        } catch (supabaseErr) {\n          console.log('‚ö†Ô∏è Could not fetch from Supabase, trying local storage...');\n        }\n\n        // Step 2: If Supabase fails, try local storage\n        for (const record of recordsWithoutPdf) {\n          if (record.pdfUrl) continue; // Already updated from Supabase\n\n          try {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n            const timestamp = new Date(processedTime).getTime();\n            const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n            const possibleFilename = `neurosense-report-${sanitizedName}-${timestamp}.pdf`;\n            const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n            const backendBaseUrl = apiUrl.replace('/api', '');\n            const testUrl = `${backendBaseUrl}/uploads/${possibleFilename}`;\n\n            // Test if file exists locally\n            const response = await fetch(testUrl, { method: 'HEAD' });\n            if (response.ok) {\n              console.log(`‚úÖ Found local PDF for record ${record.id}: ${testUrl}`);\n              record.pdfUrl = `/uploads/${possibleFilename}`;\n              await DatabaseService.update('algorithmResults', record.id, record);\n              updatedCount++;\n            }\n          } catch (err) {\n            console.log(`‚ùå Could not find PDF for record ${record.id}`);\n          }\n        }\n\n        if (updatedCount > 0) {\n          console.log(`‚úÖ Auto-fixed ${updatedCount} records with PDF URLs`);\n          // Reload the results after updating\n          const updatedResults = await DatabaseService.get('algorithmResults');\n          const updatedPatientResults = updatedResults.filter(r => r.patientId === patientId);\n          setProcessingHistory(updatedPatientResults);\n\n          updatedPatientResults.forEach((record, idx) => {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            console.log(`   Record ${idx + 1}:`, {\n              processedAt: processedTime,\n              hasPdfUrl: !!record.pdfUrl,\n              pdfUrl: record.pdfUrl || 'NOT SET',\n              pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n            });\n          });\n          return;\n        }\n      }\n\n      patientResults.forEach((record, idx) => {\n        const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n        console.log(`   Record ${idx + 1}:`, {\n          processedAt: processedTime,\n          hasPdfUrl: !!record.pdfUrl,\n          pdfUrl: record.pdfUrl || 'NOT SET',\n          pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n        });\n      });\n\n      setProcessingHistory(patientResults);\n    } catch (error) {\n      console.error('Error loading processing history:', error);\n      setProcessingHistory([]);\n    }\n  };\n\n  const handleGenerateReport = (patient) => {\n    setSelectedPatient(patient);\n    setShowProcessingUI(true);\n    // Reset upload states\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setIsSaved(false);\n    setPdfUrl(null);\n    setIsSaving(false);\n  };\n\n  const handleBackToList = () => {\n    setShowProcessingUI(false);\n    setSelectedPatient(null);\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setProcessingHistory([]);\n    setIsSaved(false);\n    setIsSaving(false);\n    // Reload patients to update status\n    loadPatients();\n  };\n\n  // Helper function to get patient name (handles different field names)\n  const getPatientName = (patient) => {\n    return patient?.fullName || patient?.full_name || patient?.name || patient?.email || 'Unknown Patient';\n  };\n\n  // Helper function to get status badge\n  const getStatusBadge = (status, lastProcessed) => {\n    if (status === 'completed') {\n      return (\n        <div className=\"flex flex-col items-start\">\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n            <CheckCircle className=\"h-3 w-3 mr-1\" />\n            Completed\n          </span>\n          {lastProcessed && (\n            <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              {new Date(lastProcessed).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n            </span>\n          )}\n        </div>\n      );\n    }\n    return (\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\">\n        <Activity className=\"h-3 w-3 mr-1\" />\n        Pending\n      </span>\n    );\n  };\n\n  // Filter patients based on search and filters\n  const filteredPatients = patients.filter(patient => {\n    const matchesSearch = searchTerm === '' ||\n      getPatientName(patient).toLowerCase().includes(searchTerm.toLowerCase()) ||\n      patient.email?.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesClinic = selectedClinicFilter === '' || patient.clinicId === selectedClinicFilter;\n\n    const matchesDate = dateFilter === '' ||\n      (patient.lastProcessed && new Date(patient.lastProcessed).toISOString().split('T')[0] === dateFilter);\n\n    return matchesSearch && matchesClinic && matchesDate;\n  });\n\n  // Group filtered patients by clinic\n  const groupedPatients = clinics.map(clinic => ({\n    clinic,\n    patients: filteredPatients.filter(p => p.clinicId === clinic.id)\n  })).filter(group => group.patients.length > 0);\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedClinicFilter('');\n    setDateFilter('');\n  };\n\n  const handleFileUpload = (type, event) => {\n    const file = event.target.files[0];\n    if (file) {\n      if (type === 'eo') {\n        setEyesOpenFile(file);\n      } else {\n        setEyesClosedFile(file);\n      }\n      // Reset processing state when new files are uploaded\n      setProcessingComplete(false);\n      setResults(null);\n      setConsoleLog([]);\n      setProgress(0);\n      setIsSaved(false);\n      setIsSaving(false);\n      setPdfUrl(null);\n    }\n  };\n\n  const processQEEGFiles = async () => {\n    setIsProcessing(true);\n    setConsoleLog([]);\n    setProgress(0);\n\n    try {\n      // Console log: Starting process\n      setConsoleLog(prev => [...prev, 'üöÄ Starting QEEG analysis...']);\n      setProgress(10);\n\n      // Create FormData to send files\n      const formData = new FormData();\n      formData.append('eyesOpen', eyesOpenFile);\n      formData.append('eyesClosed', eyesClosedFile);\n      formData.append('patientId', selectedPatient.id);\n      formData.append('patientName', getPatientName(selectedPatient));\n      formData.append('clinicName', selectedPatient.clinicName);\n      // Add complete patient data for PDF\n      formData.append('dateOfBirth', selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified');\n      formData.append('age', selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A');\n      formData.append('gender', selectedPatient.gender || 'Not specified');\n      formData.append('handedness', selectedPatient.handedness || 'Right');\n\n      setConsoleLog(prev => [...prev, 'üì§ Uploading files to server...']);\n      setProgress(20);\n\n      // Validate file sizes before upload (50MB limit)\n      const maxFileSize = 50 * 1024 * 1024; // 50MB\n      if (eyesOpenFile.size > maxFileSize || eyesClosedFile.size > maxFileSize) {\n        const oversizedFile = eyesOpenFile.size > maxFileSize ? eyesOpenFile : eyesClosedFile;\n        const fileSizeMB = (oversizedFile.size / (1024 * 1024)).toFixed(2);\n        throw new Error(`File \"${oversizedFile.name}\" is too large (${fileSizeMB}MB). Maximum file size is 50MB. Please compress or split the file.`);\n      }\n\n      // Call backend API with timeout\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 300000); // 5 minute timeout for large files\n\n      let response;\n      try {\n        response = await fetch(`${apiUrl}/qeeg/process`, {\n          method: 'POST',\n          body: formData,\n          signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n      } catch (fetchError) {\n        clearTimeout(timeoutId);\n        if (fetchError.name === 'AbortError') {\n          throw new Error('Upload timed out after 5 minutes. Please check: 1) File size (<50MB), 2) Backend is running (npm run dev:backend), 3) Internet connection is stable. Try compressing PDF files if too large.');\n        }\n        // Check if it's a network error (backend not running)\n        if (fetchError.message.includes('Failed to fetch') || fetchError.message.includes('fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure the backend is running on port 5000. Run \"npm run dev:backend\" to start the server.');\n        }\n        throw fetchError;\n      }\n\n      setConsoleLog(prev => [...prev, 'üìä Parsing QEEG data tables...']);\n      setProgress(40);\n\n      if (!response.ok) {\n        let errorMessage = 'Failed to process QEEG files';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n\n          // Add specific error messages based on error code\n          if (errorData.code === 'LIMIT_FILE_SIZE') {\n            errorMessage = 'File size exceeds the maximum limit of 50MB. Please compress your files or split them into smaller parts.';\n          } else if (errorData.code === 'GEMINI_QUOTA_EXCEEDED' || response.status === 429) {\n            // Extract retry time if available in error message\n            let retryTime = null;\n            const retryMatch = errorData.message?.match(/retry in ([\\d.]+)s/i);\n            if (retryMatch) {\n              retryTime = Math.ceil(parseFloat(retryMatch[1]));\n            }\n\n            errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                         'The Gemini AI service has reached its daily limit (20 requests/day).\\n\\n' +\n                         '‚úÖ Quick Solutions:\\n' +\n                         (retryTime ? `‚Ä¢ Wait ${retryTime} seconds and try again (quota will reset)\\n` : '‚Ä¢ Wait a few minutes and try again\\n') +\n                         '‚Ä¢ Re-upload the SAME files you processed before (uses cache, no quota needed)\\n' +\n                         '‚Ä¢ Contact administrator to upgrade API plan\\n\\n' +\n                         'üí° Tip: The system remembers files you\\'ve already processed!';\n          } else if (response.status === 503) {\n            errorMessage = 'Backend service is unavailable. Please ensure the server is running.';\n          } else if (response.status === 413) {\n            errorMessage = 'File payload is too large. Maximum allowed size is 50MB.';\n          } else if (response.status === 500) {\n            // Parse detailed error from server for 500 errors\n            if (errorData.message && (errorData.message.includes('Gemini') || errorData.message.includes('quota') || errorData.message.includes('429'))) {\n              // Extract retry time from detailed error\n              let retryTime = null;\n              const retryMatch = errorData.message.match(/retry in ([\\d.]+)s/i);\n              if (retryMatch) {\n                retryTime = Math.ceil(parseFloat(retryMatch[1]));\n              }\n\n              // Check if it's specifically a quota error\n              if (errorData.message.includes('quota') || errorData.message.includes('429')) {\n                errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                             'Google Gemini API has reached its free tier limit.\\n\\n' +\n                             '‚úÖ What to do:\\n' +\n                             (retryTime ? `1. Wait ${retryTime} seconds and try again\\n` : '1. Wait a few minutes and try again\\n') +\n                             '2. Or re-upload the SAME files (cached, no quota used)\\n' +\n                             '3. Or contact admin to upgrade API plan\\n\\n' +\n                             'üìä Free tier: 20 requests per day\\n' +\n                             'üí∞ Upgrade: https://ai.google.dev/pricing';\n              } else if (errorData.message && (\n                errorData.message.includes('PDF text extraction') ||\n                errorData.message.includes('Missing power tables') ||\n                errorData.code === 'PDF_EXTRACTION_FAILED'\n              )) {\n                // PDF extraction specific error\n                errorMessage = '‚ö†Ô∏è PDF Extraction Error\\n\\n' +\n                             errorData.message + '\\n\\n' +\n                             'üí° Troubleshooting:\\n' +\n                             '1. Verify PDFs contain QEEG frequency band tables\\n' +\n                             '2. Ensure PDFs are not password-protected\\n' +\n                             '3. Check if PDFs are scanned images (need OCR)\\n' +\n                             '4. Try exporting PDFs in a different format\\n' +\n                             '5. Contact support if issue persists';\n              } else {\n                errorMessage = '‚ö†Ô∏è Gemini AI Service Error\\n\\n' +\n                             'There was an issue with the AI service.\\n\\n' +\n                             'Please try again in a moment or contact support if the issue persists.';\n              }\n            }\n          }\n        } catch (e) {\n          // If error response is not JSON, use status text\n          errorMessage = `Server error (${response.status}): ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data = await response.json();\n\n      // Capture data type (raw or zscore)\n      if (data.data.dataType) {\n        setDataType(data.data.dataType);\n        console.log('üìä Data type:', data.data.dataType);\n        if (data.data.dataType === 'zscore') {\n          setConsoleLog(prev => [...prev, 'üî¨ Z-Score mode detected']);\n        }\n      }\n\n      // Auto-set PDF URL if returned from backend\n      if (data.data.pdfUrl) {\n        setPdfUrl(data.data.pdfUrl);\n        console.log('‚úÖ PDF auto-generated:', data.data.pdfUrl);\n        setConsoleLog(prev => [...prev, 'üìÑ PDF report generated automatically']);\n      }\n\n      setConsoleLog(prev => [...prev, 'üßÆ Calculating 7 brain health parameters...']);\n      setProgress(60);\n\n      // Simulate calculation steps for better UX\n      await new Promise(resolve => setTimeout(resolve, 500));\n      setConsoleLog(prev => [...prev, '  ‚úì Cognition parameter calculated']);\n      setProgress(65);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Stress parameter calculated']);\n      setProgress(70);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Focus & Attention parameter calculated']);\n      setProgress(75);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Burnout & Fatigue parameter calculated']);\n      setProgress(80);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Emotional Regulation parameter calculated']);\n      setProgress(85);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Learning parameter calculated']);\n      setProgress(90);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Creativity parameter calculated']);\n      setProgress(95);\n\n      // Convert API results to display format with NaN/Infinity protection\n      const finalResults = data.data.results.map(param => {\n        // Sanitize score values to prevent NaN/Infinity\n        const sanitizedScore = Number.isFinite(param.score) ? param.score : 0;\n        const sanitizedMaxScore = Number.isFinite(param.maxScore) && param.maxScore > 0 ? param.maxScore : 3;\n        const percentage = Math.round((sanitizedScore / sanitizedMaxScore) * 100);\n\n        // Sanitize metrics\n        const sanitizedMetrics = (param.metrics || []).map(metric => ({\n          ...metric,\n          score: Number.isFinite(metric.score) ? metric.score : 0,\n          value: Number.isFinite(metric.value) ? metric.value : 0\n        }));\n\n        return {\n          parameter: param.name,\n          score: Number.isFinite(percentage) ? percentage : 0,\n          rawScore: `${sanitizedScore}/${sanitizedMaxScore}`,\n          status: param.classification,\n          color: param.classification === 'High' ? 'green' :\n                 param.classification === 'Medium' ? 'blue' : 'orange',\n          metrics: sanitizedMetrics\n        };\n      });\n\n      setConsoleLog(prev => [...prev, '‚úÖ Analysis complete!']);\n      setConsoleLog(prev => [...prev, `üìà Overall Score: ${data.data.overallScore}/${data.data.maxScore}`]);\n      setProgress(100);\n\n      setResults(finalResults);\n      setIsProcessing(false);\n      setProcessingComplete(true);\n      setIsSaved(false); // Mark as not saved yet\n\n      toast.success('QEEG analysis completed successfully!');\n\n    } catch (error) {\n      console.error('Error processing QEEG files:', error);\n      setConsoleLog(prev => [...prev, `‚ùå Error: ${error.message}`]);\n      setIsProcessing(false);\n      toast.error(error.message || 'Failed to process QEEG files');\n    }\n  };\n\n  const saveResultsToDatabase = async (resultData) => {\n    if (!resultData) {\n      toast.error('No results to save');\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      toast.loading('Saving results to database...', { id: 'save-results' });\n\n      console.log('üíæ Saving results to database...');\n\n      // PDF should already exist from auto-generation\n      if (!pdfUrl) {\n        console.warn('‚ö†Ô∏è No PDF URL available - PDF may not have been generated');\n      }\n\n      const algorithmResult = {\n        // Don't specify ID - let database auto-generate UUID\n        patientId: selectedPatient.id,\n        clinicId: selectedPatient.clinicId,\n        algorithmName: 'Algorithm 1 - 7 Parameters',\n        inputData: {\n          patientName: getPatientName(selectedPatient),\n          clinicName: selectedPatient.clinicName,\n          eyesOpenFile: eyesOpenFile?.name,\n          eyesClosedFile: eyesClosedFile?.name,\n          processedAt: new Date().toISOString(),\n          processedBy: 'super_admin'\n        },\n        outputData: resultData,\n        pdfUrl: pdfUrl || null,\n        status: 'completed',\n        errorMessage: null\n      };\n\n      console.log('üíæ Saving to database...');\n      console.log('   Patient:', algorithmResult.inputData.patientName);\n      console.log('   PDF URL:', pdfUrl || 'NOT SET');\n      console.log('   PDF Type:', pdfUrl ? (pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None');\n\n      await DatabaseService.add('algorithmResults', algorithmResult);\n\n      setIsSaved(true);\n      setIsSaving(false);\n\n      toast.success('‚úÖ Results saved successfully!', { id: 'save-results' });\n\n      // Reload history and patient list to update status\n      loadProcessingHistory(selectedPatient.id);\n      loadPatients();\n    } catch (error) {\n      console.error('‚ùå Error saving results:', error);\n      setIsSaving(false);\n      toast.error('‚ùå Failed to save results: ' + error.message, { id: 'save-results' });\n    }\n  };\n\n  const handleSaveResults = async () => {\n    if (results) {\n      try {\n        console.log('üíæ Saving results to database...');\n\n        // Step 1: Check if existing PDF URL available (no generation!)\n        let finalPdfUrl = pdfUrl;\n\n        if (!finalPdfUrl) {\n          console.log('üîç Checking for existing PDF in database...');\n          const existingPdf = await findExistingPDF();\n\n          if (existingPdf) {\n            console.log('‚úÖ Found existing PDF URL:', existingPdf);\n            finalPdfUrl = existingPdf;\n            setPdfUrl(existingPdf);\n          } else {\n            console.log('‚ÑπÔ∏è No existing PDF found - save data only, PDF can be generated later');\n          }\n        }\n\n        // Step 2: Save results to database (with or without PDF URL)\n        await saveResultsToDatabase(results);\n\n        // Step 3: Show success message\n        if (finalPdfUrl) {\n          toast.success('‚úÖ Results saved! PDF is available for download.');\n        } else {\n          toast.success('‚úÖ Results saved! Generate PDF from history to get report.');\n        }\n\n        console.log('‚úÖ Save complete! PDF URL:', finalPdfUrl || 'Not available');\n\n      } catch (error) {\n        console.error('‚ùå Error saving results:', error);\n        toast.error('Failed to save results: ' + error.message);\n      }\n    }\n  };\n\n  // New function: Generate and download PDF separately\n  const handleGenerateAndDownloadPDF = async () => {\n    if (!results) {\n      toast.error('No results to generate PDF from');\n      return;\n    }\n\n    try {\n      console.log('üìÑ Starting PDF generation...');\n      toast.loading('Generating NeuroSense PDF Report...', { id: 'generate-pdf' });\n\n      const pdfResult = await generatePDFReport(results);\n\n      if (pdfResult && pdfResult.url) {\n        setPdfUrl(pdfResult.url);\n        console.log('‚úÖ PDF generated successfully:', pdfResult.url);\n        toast.success('PDF Report generated!', { id: 'generate-pdf' });\n\n        // Auto-download the newly generated PDF\n        setTimeout(() => {\n          console.log('üì• Auto-downloading newly generated PDF...');\n          handleDownloadPDF();\n        }, 500);\n      } else {\n        console.error('‚ö†Ô∏è PDF generation returned no URL');\n        toast.error('Failed to generate PDF', { id: 'generate-pdf' });\n      }\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      toast.error('Failed to generate PDF: ' + error.message, { id: 'generate-pdf' });\n    }\n  };\n\n  // Helper function to find existing PDF for this patient\n  const findExistingPDF = async () => {\n    try {\n      if (!selectedPatient || !selectedPatient.id) return null;\n\n      // Get patient's processing history\n      const allResults = await DatabaseService.get('algorithmResults');\n      const patientResults = allResults.filter(r => r.patientId === selectedPatient.id);\n\n      console.log(`üîç Found ${patientResults.length} existing records for patient ${getPatientName(selectedPatient)}`);\n\n      // Find most recent record with a PDF\n      const recordsWithPdf = patientResults\n        .filter(r => r.pdfUrl && r.pdfUrl !== 'null' && r.pdfUrl !== '')\n        .sort((a, b) => {\n          const dateA = new Date(a.inputData?.processedAt || a.processedAt || a.createdAt || 0);\n          const dateB = new Date(b.inputData?.processedAt || b.processedAt || b.createdAt || 0);\n          return dateB - dateA; // Most recent first\n        });\n\n      if (recordsWithPdf.length > 0) {\n        const latestPdf = recordsWithPdf[0].pdfUrl;\n        console.log('‚úÖ Found most recent PDF:', latestPdf);\n        return latestPdf;\n      }\n\n      console.log('‚ùå No existing PDF found in database');\n      return null;\n    } catch (error) {\n      console.error('Error finding existing PDF:', error);\n      return null;\n    }\n  };\n\n  const handleExecuteCalculation = () => {\n    if (eyesOpenFile && eyesClosedFile) {\n      processQEEGFiles();\n    } else {\n      toast.error('Please upload both QEEG data files');\n    }\n  };\n\n  const handleExportResults = () => {\n    if (results) {\n      // Create CSV content\n      const csvContent = [\n        ['Parameter', 'Score (%)', 'Status'],\n        ...results.map(r => [r.parameter, r.score, r.status])\n      ].map(row => row.join(',')).join('\\n');\n\n      // Create and download file\n      const blob = new Blob([csvContent], { type: 'text/csv' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'neurosense-algorithm-results.csv';\n      a.click();\n      window.URL.revokeObjectURL(url);\n    }\n  };\n\n  const generatePDFReport = async (resultData) => {\n    if (!resultData || !selectedPatient) {\n      console.error('‚ùå Cannot generate PDF: Missing resultData or selectedPatient');\n      toast.error('Cannot generate PDF: Missing data');\n      return null;\n    }\n\n    try {\n      console.log('üîß Preparing patient data...');\n\n      // Prepare patient data - FIXED: Use current date for recording, not DOB\n      const patientData = {\n        name: getPatientName(selectedPatient),\n        dateOfRecording: new Date().toISOString().split('T')[0], // TODAY'S DATE, not DOB!\n        dateOfBirth: selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified',\n        age: selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A',\n        gender: selectedPatient.gender || 'Not specified',\n        handedness: selectedPatient.handedness || 'Right', // Default to Right if not specified\n        patientId: selectedPatient.id,\n        occupation: selectedPatient.occupation || 'Not specified',\n        symptoms: selectedPatient.symptoms || []\n      };\n\n      console.log('üë§ Patient Data (Fixed):', patientData);\n      console.log('   Name:', patientData.name);\n      console.log('   Recording Date:', patientData.dateOfRecording);\n      console.log('   DOB:', patientData.dateOfBirth);\n      console.log('   Age:', patientData.age);\n      console.log('   Gender:', patientData.gender);\n      console.log('   Handedness:', patientData.handedness);\n\n      // Prepare algorithm results with STRONG validation to avoid NaN errors\n      const algorithmResults = {\n        parameters: resultData.map(result => {\n          const scoreParts = (result.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          const maxScore = parseInt(scoreParts[1]) || 3;\n\n          // Clean metrics to remove any NaN values\n          const cleanMetrics = (result.metrics || []).map(metric => ({\n            name: metric.name || 'Unknown',\n            score: isNaN(metric.score) ? 0 : (parseInt(metric.score) || 0),\n            value: isNaN(metric.value) ? 0 : (parseFloat(metric.value) || 0),\n            threshold: metric.threshold || 'Not provided'\n          }));\n\n          return {\n            name: result.parameter || 'Unknown Parameter',\n            score: isNaN(score) ? 0 : score,\n            maxScore: isNaN(maxScore) ? 3 : maxScore,\n            classification: result.status || 'Unknown',\n            metrics: cleanMetrics\n          };\n        }),\n        overallScore: resultData.reduce((sum, r) => {\n          const scoreParts = (r.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          return sum + (isNaN(score) ? 0 : score);\n        }, 0)\n      };\n\n      console.log('üìä Algorithm Results (NaN-free):', algorithmResults);\n\n      // EXTRA SAFETY: Double-check for any NaN in the data\n      const dataString = JSON.stringify(algorithmResults);\n      if (dataString.includes('NaN')) {\n        console.error('‚ö†Ô∏è WARNING: Found NaN in algorithm results!');\n        console.error('Raw data:', algorithmResults);\n        throw new Error('Data contains NaN values. Please check the calculation results.');\n      }\n\n      console.log('üìä Algorithm Results:', algorithmResults);\n\n      // Prepare QEEG data (use sample data if not available)\n      const qeegData = {\n        EC: {\n          absolute: { Fz: { Delta: 5.2, Theta: 4.1, Alpha: 8.3, Beta: 6.2, HiBeta: 3.1 } },\n          relative: { Pz: { Alpha: 45.2 } },\n          special: { alphaPeak: 10.3, O1: 10.1 }\n        },\n        EO: {\n          absolute: { Fz: { Theta: 3.8, Beta: 3.2, HiBeta: 2.5 } },\n          relative: { Pz: { Alpha: 28.7 } }\n        }\n      };\n\n      // Call backend API to generate PDF\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const pdfEndpoint = `${apiUrl}/qeeg/generate-pdf`;\n\n      console.log('üåê Calling backend API:', pdfEndpoint);\n      console.log('üì° Request payload size:', JSON.stringify({ patientData, algorithmResults, qeegData }).length, 'bytes');\n\n      // Add timeout handling\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 60000); // 60 second timeout (increased for Gemini AI)\n\n      const response = await fetch(pdfEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          patientData,\n          algorithmResults,\n          qeegData\n        }),\n        signal: controller.signal\n      }).catch(error => {\n        clearTimeout(timeoutId);\n        if (error.name === 'AbortError') {\n          throw new Error('PDF generation timed out after 60 seconds. Please check: 1) Backend is running, 2) Gemini API key is configured, 3) Internet connection is stable.');\n        }\n        if (error.message.includes('Failed to fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure backend is running on port 5000 (run: npm run dev:backend)');\n        }\n        throw error;\n      });\n\n      clearTimeout(timeoutId);\n\n      console.log('üì° Backend response status:', response.status);\n      console.log('üì° Backend response headers:', Object.fromEntries(response.headers.entries()));\n\n      if (!response.ok) {\n        let errorMessage = `Server returned ${response.status}`;\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n          console.error('‚ùå Backend error data:', errorData);\n        } catch (e) {\n          const errorText = await response.text();\n          errorMessage = errorText || errorMessage;\n          console.error('‚ùå Backend error text:', errorText);\n        }\n        throw new Error(`Failed to generate PDF: ${errorMessage}`);\n      }\n\n      const data = await response.json();\n      console.log('üì¶ Backend response data:', data);\n\n      if (!data || !data.success || !data.data) {\n        console.error('‚ùå Invalid response format:', data);\n        throw new Error('Invalid response from server');\n      }\n\n      // Use the complete URL from backend instead of constructing it\n      const pdfResult = {\n        url: data.data.url, // Backend already provides complete URL\n        path: data.data.path,\n        filename: data.data.filename\n      };\n\n      console.log('‚úÖ PDF generated successfully!', pdfResult);\n      console.log('‚úÖ PDF URL:', pdfResult.url);\n\n      return pdfResult;\n\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      console.error('‚ùå Error name:', error.name);\n      console.error('‚ùå Error message:', error.message);\n\n      if (error.message && error.stack) {\n        console.error('‚ùå Error stack:', error.stack);\n      }\n\n      // Provide specific error messages based on error type\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\n        console.error('‚ùå NETWORK ERROR: Cannot connect to backend server');\n        console.error('‚ùå Please ensure backend server is running on http://localhost:5000');\n        toast.error('Cannot connect to server. Please ensure backend is running on port 5000.');\n      } else if (error.name === 'AbortError') {\n        console.error('‚ùå TIMEOUT ERROR: PDF generation took too long');\n        toast.error('PDF generation timed out. Server might be overloaded.');\n      } else {\n        console.error('‚ùå PDF GENERATION ERROR:', error.message);\n        toast.error(`PDF generation failed: ${error.message}`);\n      }\n\n      return null;\n    }\n  };\n\n  const handleDownloadPDF = async () => {\n    if (!pdfUrl) {\n      toast.error('PDF not available. Please save results first.');\n      return;\n    }\n\n    try {\n      toast.loading('Downloading PDF...', { id: 'download-pdf' });\n\n      // Construct full backend URL\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\n      const backendBaseUrl = apiUrl.replace('/api', ''); // Remove /api to get base URL\n\n      // Handle both Supabase URLs and local URLs\n      let fullPdfUrl;\n      if (pdfUrl.startsWith('http')) {\n        // It's already a full URL (Supabase)\n        fullPdfUrl = pdfUrl;\n      } else {\n        // It's a local path, construct full URL\n        fullPdfUrl = `${backendBaseUrl}${pdfUrl}`;\n      }\n\n      console.log('üîΩ Download Info:', {\n        originalPdfUrl: pdfUrl,\n        backendBaseUrl,\n        fullPdfUrl,\n        isSupabase: pdfUrl.startsWith('http')\n      });\n\n      // For local files, try direct window.open first (simpler approach)\n      if (!pdfUrl.startsWith('http')) {\n        console.log('üì• Using direct download method for local file');\n\n        // Create a hidden link and click it\n        const link = document.createElement('a');\n        link.href = fullPdfUrl;\n        link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n        link.target = '_blank';\n\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        toast.success('PDF download started!', { id: 'download-pdf' });\n        return;\n      }\n\n      // For Supabase URLs, use fetch method\n      console.log('üì• Using fetch method for Supabase URL');\n\n      const response = await fetch(fullPdfUrl);\n\n      if (!response.ok) {\n        console.error('‚ùå Download failed:', {\n          status: response.status,\n          statusText: response.statusText\n        });\n        throw new Error(`Server returned ${response.status}: ${response.statusText}`);\n      }\n\n      // Convert to blob\n      const blob = await response.blob();\n\n      // Verify blob is valid\n      if (!blob || blob.size === 0) {\n        throw new Error('Downloaded file is empty');\n      }\n\n      console.log('‚úÖ PDF fetched successfully, size:', (blob.size / 1024).toFixed(2), 'KB');\n\n      // Create download link\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n      // Trigger download\n      document.body.appendChild(link);\n      link.click();\n\n      // Cleanup\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(downloadUrl);\n      }, 100);\n\n      toast.success('PDF downloaded successfully!', { id: 'download-pdf' });\n\n    } catch (error) {\n      console.error('‚ùå Download error:', {\n        error: error.message,\n        pdfUrl,\n        stack: error.stack\n      });\n\n      // Provide more helpful error messages\n      let errorMessage = 'Failed to download PDF';\n      if (error.message.includes('404')) {\n        errorMessage = 'PDF file not found on server';\n      } else if (error.message.includes('Failed to fetch')) {\n        errorMessage = 'Network error. Please check your connection.';\n      } else {\n        errorMessage = `Download failed: ${error.message}`;\n      }\n\n      toast.error(errorMessage, { id: 'download-pdf' });\n    }\n  };\n\n  const calculateAge = (dateOfBirth) => {\n    if (!dateOfBirth) return 'N/A';\n    const today = new Date();\n    const birthDate = new Date(dateOfBirth);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    return age;\n  };\n\n  // Helper function to get color based on score\n  // 1/3 = Red, 2/3 = Yellow, 3/3 = Green\n  const getScoreColor = (rawScore) => {\n    if (!rawScore) return 'gray';\n\n    const [score, maxScore] = rawScore.split('/').map(Number);\n\n    if (score === 1) return 'red';      // 1/3\n    if (score === 2) return 'yellow';   // 2/3\n    if (score === 3) return 'green';    // 3/3\n\n    return 'gray';\n  };\n\n  const getStatusColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'text-red-500';\n      case 'yellow': return 'text-yellow-500';\n      case 'green': return 'text-green-500';\n      default: return 'text-gray-500';\n    }\n  };\n\n  const getStatusBgColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    if (color === 'green') return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n    if (color === 'yellow') return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n    if (color === 'red') return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400';\n    return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400';\n  };\n\n  const getProgressBarColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'bg-red-500';\n      case 'yellow': return 'bg-yellow-500';\n      case 'green': return 'bg-green-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading patients...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Patient List View\n  if (!showProcessingUI) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n          <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n          <p className=\"text-primary-light mt-2\">Select a patient to generate Algorithm 1 report</p>\n        </div>\n\n        {/* Filter Bar */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4\">\n          <div className=\"flex flex-col lg:flex-row gap-4\">\n            {/* Patient Search */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Search Patient\n              </label>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search by name or email...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clinic Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Clinic\n              </label>\n              <div className=\"relative\">\n                <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <select\n                  value={selectedClinicFilter}\n                  onChange={(e) => setSelectedClinicFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary appearance-none\"\n                >\n                  <option value=\"\">All Clinics</option>\n                  {clinics.map(clinic => (\n                    <option key={clinic.id} value={clinic.id}>\n                      {clinic.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            {/* Date Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Date\n              </label>\n              <div className=\"relative\">\n                <Calendar className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"date\"\n                  value={dateFilter}\n                  onChange={(e) => setDateFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clear Filters Button */}\n            {(searchTerm || selectedClinicFilter || dateFilter) && (\n              <div className=\"flex items-end\">\n                <button\n                  onClick={clearFilters}\n                  className=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  <span>Clear</span>\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Active Filters Display */}\n          {(searchTerm || selectedClinicFilter || dateFilter) && (\n            <div className=\"mt-3 flex flex-wrap gap-2\">\n              {searchTerm && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\">\n                  Search: \"{searchTerm}\"\n                </span>\n              )}\n              {selectedClinicFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400\">\n                  Clinic: {clinics.find(c => c.id === selectedClinicFilter)?.name}\n                </span>\n              )}\n              {dateFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n                  Date: {new Date(dateFilter).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n                </span>\n              )}\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 self-center\">\n                ({filteredPatients.length} {filteredPatients.length === 1 ? 'patient' : 'patients'} found)\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Patient List - Clinic-wise */}\n        <div className=\"space-y-4\">\n          {groupedPatients.length > 0 ? (\n            groupedPatients.map(({ clinic, patients: clinicPatients }) => (\n            <div key={clinic.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              {/* Clinic Header */}\n              <div className=\"bg-accent-light dark:bg-primary/20 border-b border-primary-light dark:border-primary px-6 py-3\">\n                <div className=\"flex items-center\">\n                  <Building2 className=\"h-5 w-5 text-primary mr-2\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                    {clinic.name}\n                  </h3>\n                  <span className=\"ml-3 text-sm text-gray-600 dark:text-gray-400\">\n                    ({clinicPatients.length} {clinicPatients.length === 1 ? 'patient' : 'patients'})\n                  </span>\n                </div>\n              </div>\n\n              {/* Patient Table */}\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Patient Name\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Email\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Previous Scans\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Action\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n                    {clinicPatients.map(patient => (\n                      <tr key={patient.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex items-center\">\n                            <User className=\"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2\" />\n                            <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                              {getPatientName(patient)}\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          {patient.email || 'N/A'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          <span className=\"flex items-center\">\n                            <History className=\"h-4 w-4 mr-1\" />\n                            {patient.totalScans || 0} {patient.totalScans === 1 ? 'scan' : 'scans'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          {getStatusBadge(patient.algorithmStatus, patient.lastProcessed)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right\">\n                          <button\n                            onClick={() => handleGenerateReport(patient)}\n                            className=\"bg-primary hover:bg-navy-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-md flex items-center ml-auto\"\n                          >\n                            <FileText className=\"h-4 w-4 mr-2\" />\n                            {patient.algorithmStatus === 'completed' ? 'View/Generate' : 'Generate Report'}\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            ))\n          ) : (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center\">\n              <Filter className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4\" />\n              <p className=\"text-gray-600 dark:text-gray-400 font-medium\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'No patients match your filters'\n                  : 'No patients found'\n                }\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-2\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'Try adjusting your search criteria or clear filters'\n                  : 'Patients will appear here once they are registered in the system'\n                }\n              </p>\n              {(searchTerm || selectedClinicFilter || dateFilter) && (\n                <button\n                  onClick={clearFilters}\n                  className=\"mt-4 px-4 py-2 bg-primary hover:bg-navy-700 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Clear Filters\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Processing UI View\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Back Button */}\n      <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n        <button\n          onClick={handleBackToList}\n          className=\"flex items-center text-primary-light hover:text-white mb-3 transition-colors\"\n        >\n          <ArrowLeft className=\"h-5 w-5 mr-2\" />\n          Back to Patient List\n        </button>\n        <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n        <div className=\"flex items-center gap-3 mt-2\">\n          <p className=\"text-primary-light\">\n            Processing for: <span className=\"font-semibold\">{getPatientName(selectedPatient)}</span> | {selectedPatient?.clinicName}\n          </p>\n          {dataType === 'zscore' && (\n            <span className=\"inline-flex items-center px-3 py-1 bg-purple-500/20 text-purple-200 text-xs font-medium rounded-full border border-purple-400/30\">\n              üî¨ Z-Score Mode\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Panel - QEEG Data Input */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            QEEG Data Input\n          </h2>\n          <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <p className=\"text-xs text-blue-800 dark:text-blue-300\">\n              <span className=\"font-semibold\">‚ÑπÔ∏è Note:</span> Data will be extracted from <strong>pages 13 & 24</strong> of both PDF files\n            </p>\n          </div>\n\n          {/* Eyes Open Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EO - Eyes Open PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('eo', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesOpenFile ? eyesOpenFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesOpenFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Eyes Closed Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EC - Eyes Closed PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('ec', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesClosedFile ? eyesClosedFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesClosedFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Data Loaded Progress */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Data Loaded\n            </label>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\">\n              <div\n                className=\"bg-green-500 h-2.5 rounded-full transition-all duration-300\"\n                style={{ width: `${eyesOpenFile && eyesClosedFile ? 100 : eyesOpenFile || eyesClosedFile ? 50 : 0}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Middle Panel - Algorithm Processing */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Algorithm 1 Processing\n          </h2>\n\n          {/* Execute Button */}\n          <button\n            onClick={handleExecuteCalculation}\n            disabled={!eyesOpenFile || !eyesClosedFile || isProcessing || isSaved}\n            className={`w-full mb-6 py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n              eyesOpenFile && eyesClosedFile && !isProcessing && !isSaved\n                ? 'bg-primary hover:bg-navy-700 text-white'\n                : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n            }`}\n          >\n            <Play className=\"h-5 w-5\" />\n            <span>Execute Calculation</span>\n          </button>\n\n          {/* Processing Animation */}\n          {isProcessing && (\n            <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-center mb-6 shadow-lg\">\n              <div className=\"relative inline-block\">\n                <Activity className=\"h-16 w-16 text-white animate-pulse\" />\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-20 h-20 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                </div>\n              </div>\n              <p className=\"text-white font-medium mt-4\">Processing...</p>\n              <p className=\"text-primary-light text-sm\">{consoleLog.length} actions done</p>\n            </div>\n          )}\n\n          {/* Processing Complete */}\n          {processingComplete && (\n            <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 text-center mb-6\">\n              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-2\" />\n              <p className=\"text-green-800 dark:text-green-400 font-medium\">Processing Complete!</p>\n            </div>\n          )}\n\n          {/* Console */}\n          <div className=\"bg-gray-900 dark:bg-black rounded-lg p-4 min-h-[200px] max-h-[300px] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-gray-700\">\n              <h3 className=\"text-sm font-medium text-gray-300\">Console</h3>\n              <button\n                onClick={() => setConsoleLog([])}\n                className=\"text-xs text-gray-400 hover:text-gray-200\"\n              >\n                Clear\n              </button>\n            </div>\n            <div className=\"space-y-1 font-mono text-xs\">\n              {consoleLog.length > 0 ? (\n                consoleLog.map((log, index) => (\n                  <div key={index} className=\"text-green-400\">\n                    &gt; {log}\n                  </div>\n                ))\n              ) : (\n                <div className=\"text-gray-500 italic\">Console output will appear here...</div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Final 7 Parameter Scores */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              Final 7 Parameter Scores\n            </h2>\n            {results && (\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Total: {results.reduce((sum, r) => sum + parseInt(r.rawScore.split('/')[0]), 0)}/21\n              </span>\n            )}\n          </div>\n\n          {/* Algorithm Info Card */}\n          <div className=\"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <div className=\"flex items-start space-x-2\">\n              <Activity className=\"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0\" />\n              <div>\n                <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1\">\n                  7-Parameter Brain Health Analysis\n                </h3>\n                <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                  Each parameter is calculated from 3 sub-metrics. Score: 0-1 (Low), 2 (Medium), 3 (High).\n                  Each metric shows its calculated value and threshold comparison.\n                </p>\n                <div className=\"mt-2 text-xs text-blue-600 dark:text-blue-400\">\n                  <strong>Parameters:</strong> Cognition ‚Ä¢ Stress ‚Ä¢ Focus & Attention ‚Ä¢ Burnout & Fatigue ‚Ä¢\n                  Emotional Regulation ‚Ä¢ Learning ‚Ä¢ Creativity\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {results ? (\n            <>\n              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => (\n                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n                    {/* Main Parameter */}\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                        {result.parameter}\n                      </span>\n                      <div className=\"flex items-center space-x-3\">\n                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                          {result.rawScore}\n                        </span>\n                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                          {result.status}\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n                      <div\n                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n                        style={{ width: `${result.score}%` }}\n                      ></div>\n                    </div>\n\n                    {/* Sub-Parameters with Calculations */}\n                    {result.metrics && result.metrics.length > 0 && (\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n                          Sub-Parameters & Calculations:\n                        </div>\n                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress condition\n                            const isNormal = metric.score === 1;\n                            const bgColorClass = result.parameter === 'Stress'\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    result.parameter === 'Stress'\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>\n                                  <div className=\"flex items-center space-x-2\">\n                                    {metric.score === 1 ? (\n                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                    ) : (\n                                      <X className=\"h-4 w-4 text-red-500\" />\n                                    )}\n                                    <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                      {metric.score}/1\n                                    </span>\n                                  </div>\n                                </div>\n\n                              {/* Calculation Details */}\n                              <div className=\"space-y-1\">\n                                {/* Actual Value */}\n                                {metric.value !== null && metric.value !== undefined && (\n                                  <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-gray-500 dark:text-gray-400\">Value:</span>\n                                    <span className=\"font-mono text-gray-700 dark:text-gray-300\">\n                                      {typeof metric.value === 'object' && metric.value !== null\n                                        ? Object.entries(metric.value).map(([key, val]) =>\n                                            `${key}: ${typeof val === 'number' ? val.toFixed(2) : val}`\n                                          ).join(', ')\n                                        : typeof metric.value === 'number'\n                                        ? metric.value.toFixed(2)\n                                        : metric.value}\n                                    </span>\n                                  </div>\n                                )}\n\n                                {/* Description/Formula */}\n                                {metric.description && (\n                                  <div className=\"text-xs text-gray-600 dark:text-gray-400 italic mt-1\">\n                                    {metric.description}\n                                  </div>\n                                )}\n\n                                {/* Additional Details */}\n                                {metric.details && (\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n                                    {typeof metric.details === 'object'\n                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n                                          <div key={idx} className=\"flex justify-between\">\n                                            <span>{key}:</span>\n                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n                                          </div>\n                                        ))\n                                      : metric.details}\n                                  </div>\n                                )}\n                              </div>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                {/* Save Results Button (No PDF Generation) */}\n                <button\n                  onClick={handleSaveResults}\n                  disabled={isSaving || isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    isSaved\n                      ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 cursor-not-allowed'\n                      : isSaving\n                      ? 'bg-blue-400 text-white cursor-wait'\n                      : 'bg-primary hover:bg-navy-700 text-white'\n                  }`}\n                >\n                  {isSaving ? (\n                    <>\n                      <Activity className=\"h-5 w-5 animate-spin\" />\n                      <span>Saving...</span>\n                    </>\n                  ) : isSaved ? (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Saved ‚úì</span>\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Save Results</span>\n                    </>\n                  )}\n                </button>\n\n                {/* Generate PDF Button (Separate) */}\n                <button\n                  onClick={handleGenerateAndDownloadPDF}\n                  disabled={!results || !isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    !results || !isSaved\n                      ? 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      : pdfUrl\n                      ? 'bg-green-600 hover:bg-green-700 text-white'\n                      : 'bg-blue-600 hover:bg-blue-700 text-white'\n                  }`}\n                  title={!isSaved ? 'Please save results first' : 'Generate and download PDF report'}\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>{pdfUrl ? 'Download PDF Report' : 'Generate PDF Report'}</span>\n                </button>\n\n                {/* Export CSV Button */}\n                <button\n                  onClick={handleExportResults}\n                  className=\"w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md\"\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>Export CSV</span>\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <FileText className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mb-4\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Upload data files and execute calculation to see results\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Processing History */}\n      {selectedPatient && processingHistory.length > 0 && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n              <History className=\"h-5 w-5 mr-2\" />\n              Processing History for {getPatientName(selectedPatient)}\n            </h2>\n            <button\n              onClick={async () => {\n                console.log('üîÑ Manual sync triggered...');\n                toast.loading('Syncing PDFs from Supabase...', { id: 'sync-pdfs' });\n\n                try {\n                  // Force reload from database and sync\n                  await loadProcessingHistory(selectedPatient.id);\n\n                  // Count how many PDFs were found\n                  const results = await DatabaseService.get('algorithmResults');\n                  const patientResults = results.filter(r => r.patientId === selectedPatient.id);\n                  const pdfCount = patientResults.filter(r => r.pdfUrl).length;\n                  const totalCount = patientResults.length;\n\n                  toast.success(`‚úÖ Synced! ${pdfCount}/${totalCount} PDFs available`, { id: 'sync-pdfs' });\n                  console.log(`‚úÖ Sync complete: ${pdfCount}/${totalCount} records have PDFs`);\n                } catch (error) {\n                  console.error('‚ùå Sync failed:', error);\n                  toast.error('Failed to sync PDFs', { id: 'sync-pdfs' });\n                }\n              }}\n              className=\"px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-1\"\n              title=\"Fetch PDFs from Supabase bucket and update database\"\n            >\n              <Download className=\"h-3 w-3\" />\n              <span>Sync PDFs</span>\n            </button>\n          </div>\n          <div className=\"space-y-3\">\n            {processingHistory.map((record, index) => (\n              <div\n                key={record.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <Calendar className=\"h-4 w-4 text-primary\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        {new Date(record.inputData?.processedAt || record.processedAt || record.createdAt).toLocaleDateString('en-US', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </span>\n                      {/* PDF Status Badge */}\n                      {record.pdfUrl ? (\n                        <span className=\"px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full flex items-center space-x-1\">\n                          <CheckCircle className=\"h-3 w-3\" />\n                          <span>PDF Available</span>\n                        </span>\n                      ) : (\n                        <span className=\"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full\">\n                          No PDF\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 space-y-1 mb-3\">\n                      <p>üìÅ Files: {record.inputData?.eyesOpenFile || record.eyesOpenFile || 'N/A'}, {record.inputData?.eyesClosedFile || record.eyesClosedFile || 'N/A'}</p>\n                      <p>üë§ Processed by: {record.inputData?.processedBy || record.processedBy || 'Unknown'}</p>\n                      {record.pdfUrl && (\n                        <p className=\"text-green-600 dark:text-green-400\">\n                          üìÑ PDF: {record.pdfUrl.startsWith('http') ? 'Supabase ‚úì' : 'Local ‚úì'}\n                        </p>\n                      )}\n                      {!record.pdfUrl && (\n                        <p className=\"text-red-600 dark:text-red-400\">üìÑ PDF: Not available</p>\n                      )}\n                    </div>\n\n                    {/* Quick Summary of Results */}\n                    {(() => {\n                      const savedResults = record.outputData || record.results;\n                      return savedResults && savedResults.length > 0 && (\n                        <div className=\"mt-3 grid grid-cols-2 gap-2\">\n                          {savedResults.slice(0, 4).map((result, idx) => (\n                            <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                              <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                              <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                                {result.rawScore}\n                              </span>\n                            </div>\n                          ))}\n                        </div>\n                      );\n                    })()}\n                  </div>\n                  <div className=\"flex flex-col space-y-2\">\n                    {/* View Full Results Button */}\n                    <button\n                      onClick={() => {\n                        // Handle both old format (results) and new format (outputData)\n                        const savedResults = record.outputData || record.results;\n                        if (savedResults) {\n                          setResults(savedResults);\n                          setProcessingComplete(true);\n                          setIsSaved(true);\n                          // Set PDF URL if available\n                          if (record.pdfUrl) {\n                            setPdfUrl(record.pdfUrl);\n                          }\n                          toast.success('Previous results loaded!');\n                          console.log('‚úÖ Loaded results from history:', savedResults);\n                        } else {\n                          toast.error('No results found in this record');\n                          console.error('‚ùå No results found in record:', record);\n                        }\n                      }}\n                      className=\"px-3 py-2 text-sm bg-primary hover:bg-navy-700 text-white rounded-lg transition-colors flex items-center justify-center space-x-1\"\n                    >\n                      <FileText className=\"h-4 w-4\" />\n                      <span>View Results</span>\n                    </button>\n\n                    {/* Download PDF Button - Always visible */}\n                    <button\n                      onClick={async () => {\n                        if (!record.pdfUrl) {\n                          toast.error('No PDF available for this record');\n                          console.log('‚ùå No PDF URL in record:', record);\n                          return;\n                        }\n\n                        console.log('üì• Downloading PDF from record:', {\n                          processedAt: record.processedAt,\n                          pdfUrl: record.pdfUrl\n                        });\n\n                        try {\n                          toast.loading('Downloading PDF...', { id: 'history-download' });\n\n                          // Construct full URL (works with both local and Supabase URLs)\n                          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n                          const backendBaseUrl = apiUrl.replace('/api', '');\n                          const fullPdfUrl = record.pdfUrl.startsWith('http') ? record.pdfUrl : `${backendBaseUrl}${record.pdfUrl}`;\n\n                          console.log('üì• Downloading from:', fullPdfUrl);\n\n                          // Fetch the PDF file\n                          const response = await fetch(fullPdfUrl);\n                          if (!response.ok) throw new Error('Failed to fetch PDF');\n\n                          // Convert to blob\n                          const blob = await response.blob();\n\n                          // Create download link\n                          const downloadUrl = window.URL.createObjectURL(blob);\n                          const link = document.createElement('a');\n                          link.href = downloadUrl;\n                          link.download = record.pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n                          // Trigger download\n                          document.body.appendChild(link);\n                          link.click();\n\n                          // Cleanup\n                          document.body.removeChild(link);\n                          window.URL.revokeObjectURL(downloadUrl);\n\n                          toast.success('PDF downloaded successfully!', { id: 'history-download' });\n                        } catch (error) {\n                          console.error('Download error:', error);\n                          toast.error('Failed to download PDF', { id: 'history-download' });\n                        }\n                      }}\n                      disabled={!record.pdfUrl}\n                      className={`px-3 py-2 text-sm rounded-lg transition-colors flex items-center justify-center space-x-1 ${\n                        record.pdfUrl\n                          ? 'bg-blue-600 hover:bg-blue-700 text-white cursor-pointer'\n                          : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      }`}\n                      title={record.pdfUrl ? 'Download PDF Report' : 'No PDF available'}\n                    >\n                      <Download className=\"h-4 w-4\" />\n                      <span>NeuroSense Report</span>\n                    </button>\n                  </div>\n                </div>\n\n                {/* Expandable Details */}\n                {(() => {\n                  const savedResults = record.outputData || record.results;\n                  return savedResults && savedResults.length > 4 && (\n                    <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                      {savedResults.slice(4).map((result, idx) => (\n                        <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                          <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  );\n                })()}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Info Section */}\n      <div className=\"bg-accent-light dark:bg-primary/20 border border-primary-light dark:border-primary rounded-lg p-4 shadow-sm\">\n        <h3 className=\"text-sm font-medium text-primary dark:text-primary-light mb-2\">\n          About Algorithm 1 Processing\n        </h3>\n        <p className=\"text-sm text-navy-800 dark:text-gray-300\">\n          This processor analyzes QEEG data files (Eyes Open and Eyes Closed) and generates 7 key parameters using proprietary\n          binary scoring logic. The algorithm evaluates brain activity patterns to assess cognitive and emotional health markers.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default AlgorithmDataProcessor;\n","structuredPatch":[{"oldStart":1550,"oldLines":22,"newStart":1550,"newLines":41,"lines":["           {results ? (","             <>","               <div className=\"space-y-4 mb-6\">","-                {results.map((result, index) => (","-                  <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">","-                    {/* Main Parameter */}","-                    <div className=\"flex items-center justify-between mb-2\">","-                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">","-                        {result.parameter}","-                      </span>","-                      <div className=\"flex items-center space-x-3\">","-                        <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>","-                          {result.rawScore}","+                {results.map((result, index) => {","+                  // Determine background color for main parameter card (Stress and Burnout & Fatigue)","+                  const isStressOrBurnout = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';","+                  let mainCardBgClass = 'border border-gray-200 dark:border-gray-700';","+","+                  if (isStressOrBurnout && result.rawScore) {","+                    const [score] = result.rawScore.split('/').map(Number);","+                    // 3/3 = Low problem (all normal) = GREEN","+                    // 2/3 = Medium = YELLOW","+                    // 1/3 or 0/3 = High problem = RED","+                    if (score === 3) {","+                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';","+                    } else if (score === 2) {","+                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';","+                    } else if (score <= 1) {","+                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';","+                    }","+                  }","+","+                  return (","+                    <div key={index} className={`rounded-lg p-3 ${mainCardBgClass}`}>","+                      {/* Main Parameter */}","+                      <div className=\"flex items-center justify-between mb-2\">","+                        <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">","+                          {result.parameter}","                         </span>","-                        <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>","-                          {result.status}","-                        </span>","+                        <div className=\"flex items-center space-x-3\">","+                          <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>","+                            {result.rawScore}","+                          </span>","+                          <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>","+                            {result.status}","+                          </span>","+                        </div>","                       </div>","-                    </div>"," ","                     {/* Progress Bar */}","                     <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"50cd5d5f-ef6d-43bd-8944-ba25ddea783d","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01KPdjPqht9kDe7attUSTTDa","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Good! Now I need to update the sub-parameters section to apply colors to Burnout & Fatigue as well, not just Stress.","signature":"Ep0CCkYIChgCKkCIKPvITnzBzXOsbUqLkwwEpBVOIJhxVROXXUgRF/onV1vinqmyeSfKCIanYVB+JdZl8BiUS3HNTmgMq5fahxRgEgxax+zNYg6rwTQh1JgaDFxUkfcgpnAJJU2LECIwMI6qihx61UAqEH31fbHq6eJzs/vITAG+6/xOItgjPySJF/YEseB1INTQ7f+3CjtkKoQBCWQkwRKHBwu/12oIl8BhehkZW8UysPDWgX5dK+35KGLEBJCpJLj/B6FB8R4EeMWlV6SiRgOHduxs66frhhW1llnxXFgRD9C+X0FYsNy8AhlJbtIvSmb/Ygy3KiVXoG2ZH8Fu3Eqa1uCGR5fDKEkZbPtvsb3vrty/T0UvyXK7yM8osczqGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":3881,"cache_read_input_tokens":59342,"cache_creation":{"ephemeral_5m_input_tokens":3881,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9KV6KGfRxkKz9mBVti","type":"assistant","uuid":"200d8b4b-6bb8-4fd3-bb00-a40609f2a431","timestamp":"2025-12-18T12:22:10.019Z"}
{"parentUuid":"200d8b4b-6bb8-4fd3-bb00-a40609f2a431","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01KPdjPqht9kDe7attUSTTDa","type":"message","role":"assistant","content":[{"type":"text","text":"‡§Ö‡§¨ sub-parameters ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä Burnout & Fatigue ‡§ï‡•ã include ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Ç:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":3881,"cache_read_input_tokens":59342,"cache_creation":{"ephemeral_5m_input_tokens":3881,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9KV6KGfRxkKz9mBVti","type":"assistant","uuid":"b51496f6-e61c-4c6b-a893-438dd1491fd6","timestamp":"2025-12-18T12:22:10.704Z"}
{"parentUuid":"b51496f6-e61c-4c6b-a893-438dd1491fd6","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01KPdjPqht9kDe7attUSTTDa","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01YbgzZjvpcdrB3Awf4HX5PK","name":"Edit","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","old_string":"                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress condition\n                            const isNormal = metric.score === 1;\n                            const bgColorClass = result.parameter === 'Stress'\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    result.parameter === 'Stress'\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>","new_string":"                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress and Burnout & Fatigue\n                            const isNormal = metric.score === 1;\n                            const shouldColorize = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n                            const bgColorClass = shouldColorize\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    shouldColorize\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":3881,"cache_read_input_tokens":59342,"cache_creation":{"ephemeral_5m_input_tokens":3881,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9KV6KGfRxkKz9mBVti","type":"assistant","uuid":"a947e941-4ca0-47a6-bcf5-928ee2720c8d","timestamp":"2025-12-18T12:22:19.465Z"}
{"parentUuid":"a947e941-4ca0-47a6-bcf5-928ee2720c8d","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01YbgzZjvpcdrB3Awf4HX5PK","type":"tool_result","content":"The file D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n  1599‚Üí                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n  1600‚Üí                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n  1601‚Üí                          Sub-Parameters & Calculations:\n  1602‚Üí                        </div>\n  1603‚Üí                        <div className=\"space-y-3\">\n  1604‚Üí                          {result.metrics.map((metric, mIndex) => {\n  1605‚Üí                            // Determine if metric is normal (green) or abnormal (red) for Stress and Burnout & Fatigue\n  1606‚Üí                            const isNormal = metric.score === 1;\n  1607‚Üí                            const shouldColorize = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n  1608‚Üí                            const bgColorClass = shouldColorize\n  1609‚Üí                              ? (isNormal\n  1610‚Üí                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n  1611‚Üí                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n  1612‚Üí                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n  1613‚Üí\n  1614‚Üí                            return (\n  1615‚Üí                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n  1616‚Üí                                {/* Metric Name and Score */}\n  1617‚Üí                                <div className=\"flex items-center justify-between mb-2\">\n  1618‚Üí                                  <span className={`text-xs font-semibold ${\n  1619‚Üí                                    shouldColorize\n  1620‚Üí                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n  1621‚Üí                                      : 'text-gray-700 dark:text-gray-300'\n  1622‚Üí                                  }`}>\n  1623‚Üí                                    {metric.name}\n  1624‚Üí                                  </span>\n  1625‚Üí                                  <div className=\"flex items-center space-x-2\">\n  1626‚Üí                                    {metric.score === 1 ? (\n  1627‚Üí                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n  1628‚Üí                                    ) : ("}]},"uuid":"6a0b2a1f-8164-4053-894f-2f061a5f97f9","timestamp":"2025-12-18T12:22:49.342Z","toolUseResult":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","oldString":"                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress condition\n                            const isNormal = metric.score === 1;\n                            const bgColorClass = result.parameter === 'Stress'\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    result.parameter === 'Stress'\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>","newString":"                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress and Burnout & Fatigue\n                            const isNormal = metric.score === 1;\n                            const shouldColorize = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n                            const bgColorClass = shouldColorize\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    shouldColorize\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>","originalFile":"import React, { useState, useEffect } from 'react';\nimport { Upload, Play, Download, FileText, CheckCircle, Activity, User, Building2, Calendar, History, X, ArrowLeft, Search, Filter } from 'lucide-react';\nimport DatabaseService from '../../services/databaseService';\nimport toast from 'react-hot-toast';\n\nconst AlgorithmDataProcessor = () => {\n  const [patients, setPatients] = useState([]);\n  const [clinics, setClinics] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [showProcessingUI, setShowProcessingUI] = useState(false);\n  const [processingHistory, setProcessingHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Filter states\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedClinicFilter, setSelectedClinicFilter] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n\n  const [eyesOpenFile, setEyesOpenFile] = useState(null);\n  const [eyesClosedFile, setEyesClosedFile] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [processingComplete, setProcessingComplete] = useState(false);\n  const [consoleLog, setConsoleLog] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const [results, setResults] = useState(null);\n  const [isSaved, setIsSaved] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [dataType, setDataType] = useState(null); // 'raw' or 'zscore'\n\n  // Debug function to check database contents\n  useEffect(() => {\n    window.debugAlgorithmResults = async () => {\n      const allResults = await DatabaseService.get('algorithmResults');\n      console.log('üîç All Algorithm Results in Database:', allResults);\n      console.log(`Total records: ${allResults.length}`);\n      allResults.forEach((record, idx) => {\n        console.log(`\\nüìä Record ${idx + 1}:`, {\n          id: record.id,\n          patientName: record.inputData?.patientName || record.patientName,\n          processedAt: record.inputData?.processedAt || record.processedAt,\n          pdfUrl: record.pdfUrl || '‚ùå MISSING',\n          hasResults: !!(record.outputData || record.results)\n        });\n      });\n    };\n    console.log('üí° Debug: Type window.debugAlgorithmResults() in console to check database');\n  }, []);\n\n  useEffect(() => {\n    loadPatients();\n  }, []);\n\n  useEffect(() => {\n    if (selectedPatient && showProcessingUI) {\n      loadProcessingHistory(selectedPatient.id);\n    }\n  }, [selectedPatient, showProcessingUI, isSaved]); // Re-load when saved\n\n  const loadPatients = async () => {\n    try {\n      const patientsData = await DatabaseService.get('patients');\n      const clinicsData = await DatabaseService.get('clinics');\n      const algorithmResults = await DatabaseService.get('algorithmResults') || [];\n\n      // Enrich patients with clinic names and algorithm status\n      const enrichedPatients = patientsData.map(patient => {\n        const patientResults = algorithmResults.filter(r => r.patientId === patient.id);\n        const lastResult = patientResults.length > 0\n          ? patientResults.sort((a, b) => {\n              const aTime = a.inputData?.processedAt || a.processedAt || a.createdAt;\n              const bTime = b.inputData?.processedAt || b.processedAt || b.createdAt;\n              return new Date(bTime) - new Date(aTime);\n            })[0]\n          : null;\n\n        return {\n          ...patient,\n          clinicName: clinicsData.find(c => c.id === patient.clinicId)?.name || 'Unknown Clinic',\n          algorithmStatus: lastResult ? 'completed' : 'pending',\n          lastProcessed: lastResult?.inputData?.processedAt || lastResult?.processedAt || lastResult?.createdAt,\n          totalScans: patientResults.length\n        };\n      });\n\n      setPatients(enrichedPatients);\n      setClinics(clinicsData);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading patients:', error);\n      toast.error('Failed to load patients');\n      setLoading(false);\n    }\n  };\n\n  const loadProcessingHistory = async (patientId) => {\n    try {\n      // Load algorithm results for this patient\n      const results = await DatabaseService.get('algorithmResults');\n      const patientResults = results.filter(r => r.patientId === patientId);\n\n      console.log(`üìã Loaded ${patientResults.length} records for patient ${patientId}`);\n\n      // Log all records for debugging\n      console.log('üìä All records for this patient:');\n      patientResults.forEach((rec, idx) => {\n        const processedTime = rec.inputData?.processedAt || rec.processedAt || rec.createdAt;\n        console.log(`   ${idx + 1}. ${new Date(processedTime).toLocaleString()} - PDF: ${rec.pdfUrl ? '‚úì' : '‚úó'}`);\n      });\n\n      // Check for records without pdfUrl and try to fix them\n      const recordsWithoutPdf = patientResults.filter(r => !r.pdfUrl);\n      if (recordsWithoutPdf.length > 0) {\n        console.log(`\\n‚ö†Ô∏è Found ${recordsWithoutPdf.length} records without PDF URL - attempting auto-fix...`);\n\n        let updatedCount = 0;\n\n        // Step 1: Try to fetch PDFs from Supabase bucket\n        try {\n          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n          const response = await fetch(`${apiUrl}/qeeg/supabase-pdfs`);\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log(`\\n‚òÅÔ∏è Found ${data.count} PDFs in Supabase bucket:`);\n            data.pdfs.forEach(pdf => console.log(`   - ${pdf.name}`));\n\n            // Match PDFs with database records using smart matching\n            console.log(`\\nüîç Attempting to match ${recordsWithoutPdf.length} records...`);\n            for (const record of recordsWithoutPdf) {\n              const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n              const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n              const recordTimestamp = new Date(processedTime).getTime();\n              const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n\n              console.log(`\\n   Record: ${patientName} @ ${new Date(processedTime).toLocaleString()}`);\n              console.log(`   Searching for PDFs matching: neurosense-report-${sanitizedName}-*.pdf`);\n\n              // Find PDFs matching patient name\n              const matchingPdfs = data.pdfs.filter(pdf => {\n                const pdfNameLower = pdf.name.toLowerCase();\n                return pdfNameLower.includes(`neurosense-report-${sanitizedName}-`) &&\n                       pdfNameLower.endsWith('.pdf');\n              });\n\n              console.log(`   Found ${matchingPdfs.length} PDFs for this patient`);\n\n              if (matchingPdfs.length > 0) {\n                // Find PDF with closest timestamp (within 60 seconds)\n                let bestMatch = null;\n                let smallestDiff = Infinity;\n\n                for (const pdf of matchingPdfs) {\n                  // Extract timestamp from filename: neurosense-report-name-TIMESTAMP.pdf\n                  const match = pdf.name.match(/-(\\d+)\\.pdf$/);\n                  if (match) {\n                    const pdfTimestamp = parseInt(match[1]);\n                    const diff = Math.abs(pdfTimestamp - recordTimestamp);\n                    console.log(`      ${pdf.name}: timestamp diff = ${diff}ms (${(diff/1000).toFixed(1)}s)`);\n\n                    // Accept if within 60 seconds (60000ms)\n                    if (diff < 60000 && diff < smallestDiff) {\n                      smallestDiff = diff;\n                      bestMatch = pdf;\n                    }\n                  }\n                }\n\n                if (bestMatch) {\n                  console.log(`   ‚úÖ MATCH FOUND! ${bestMatch.name} (${(smallestDiff/1000).toFixed(1)}s difference)`);\n                  console.log(`   URL: ${bestMatch.url}`);\n                  record.pdfUrl = bestMatch.url;\n                  await DatabaseService.update('algorithmResults', record.id, record);\n                  updatedCount++;\n                } else {\n                  console.log(`   ‚ö†Ô∏è PDFs found but timestamp difference too large (>60s)`);\n                }\n              } else {\n                console.log(`   ‚ùå No PDFs found for patient: ${sanitizedName}`);\n              }\n            }\n          }\n        } catch (supabaseErr) {\n          console.log('‚ö†Ô∏è Could not fetch from Supabase, trying local storage...');\n        }\n\n        // Step 2: If Supabase fails, try local storage\n        for (const record of recordsWithoutPdf) {\n          if (record.pdfUrl) continue; // Already updated from Supabase\n\n          try {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n            const timestamp = new Date(processedTime).getTime();\n            const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n            const possibleFilename = `neurosense-report-${sanitizedName}-${timestamp}.pdf`;\n            const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n            const backendBaseUrl = apiUrl.replace('/api', '');\n            const testUrl = `${backendBaseUrl}/uploads/${possibleFilename}`;\n\n            // Test if file exists locally\n            const response = await fetch(testUrl, { method: 'HEAD' });\n            if (response.ok) {\n              console.log(`‚úÖ Found local PDF for record ${record.id}: ${testUrl}`);\n              record.pdfUrl = `/uploads/${possibleFilename}`;\n              await DatabaseService.update('algorithmResults', record.id, record);\n              updatedCount++;\n            }\n          } catch (err) {\n            console.log(`‚ùå Could not find PDF for record ${record.id}`);\n          }\n        }\n\n        if (updatedCount > 0) {\n          console.log(`‚úÖ Auto-fixed ${updatedCount} records with PDF URLs`);\n          // Reload the results after updating\n          const updatedResults = await DatabaseService.get('algorithmResults');\n          const updatedPatientResults = updatedResults.filter(r => r.patientId === patientId);\n          setProcessingHistory(updatedPatientResults);\n\n          updatedPatientResults.forEach((record, idx) => {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            console.log(`   Record ${idx + 1}:`, {\n              processedAt: processedTime,\n              hasPdfUrl: !!record.pdfUrl,\n              pdfUrl: record.pdfUrl || 'NOT SET',\n              pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n            });\n          });\n          return;\n        }\n      }\n\n      patientResults.forEach((record, idx) => {\n        const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n        console.log(`   Record ${idx + 1}:`, {\n          processedAt: processedTime,\n          hasPdfUrl: !!record.pdfUrl,\n          pdfUrl: record.pdfUrl || 'NOT SET',\n          pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n        });\n      });\n\n      setProcessingHistory(patientResults);\n    } catch (error) {\n      console.error('Error loading processing history:', error);\n      setProcessingHistory([]);\n    }\n  };\n\n  const handleGenerateReport = (patient) => {\n    setSelectedPatient(patient);\n    setShowProcessingUI(true);\n    // Reset upload states\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setIsSaved(false);\n    setPdfUrl(null);\n    setIsSaving(false);\n  };\n\n  const handleBackToList = () => {\n    setShowProcessingUI(false);\n    setSelectedPatient(null);\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setProcessingHistory([]);\n    setIsSaved(false);\n    setIsSaving(false);\n    // Reload patients to update status\n    loadPatients();\n  };\n\n  // Helper function to get patient name (handles different field names)\n  const getPatientName = (patient) => {\n    return patient?.fullName || patient?.full_name || patient?.name || patient?.email || 'Unknown Patient';\n  };\n\n  // Helper function to get status badge\n  const getStatusBadge = (status, lastProcessed) => {\n    if (status === 'completed') {\n      return (\n        <div className=\"flex flex-col items-start\">\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n            <CheckCircle className=\"h-3 w-3 mr-1\" />\n            Completed\n          </span>\n          {lastProcessed && (\n            <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              {new Date(lastProcessed).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n            </span>\n          )}\n        </div>\n      );\n    }\n    return (\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\">\n        <Activity className=\"h-3 w-3 mr-1\" />\n        Pending\n      </span>\n    );\n  };\n\n  // Filter patients based on search and filters\n  const filteredPatients = patients.filter(patient => {\n    const matchesSearch = searchTerm === '' ||\n      getPatientName(patient).toLowerCase().includes(searchTerm.toLowerCase()) ||\n      patient.email?.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesClinic = selectedClinicFilter === '' || patient.clinicId === selectedClinicFilter;\n\n    const matchesDate = dateFilter === '' ||\n      (patient.lastProcessed && new Date(patient.lastProcessed).toISOString().split('T')[0] === dateFilter);\n\n    return matchesSearch && matchesClinic && matchesDate;\n  });\n\n  // Group filtered patients by clinic\n  const groupedPatients = clinics.map(clinic => ({\n    clinic,\n    patients: filteredPatients.filter(p => p.clinicId === clinic.id)\n  })).filter(group => group.patients.length > 0);\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedClinicFilter('');\n    setDateFilter('');\n  };\n\n  const handleFileUpload = (type, event) => {\n    const file = event.target.files[0];\n    if (file) {\n      if (type === 'eo') {\n        setEyesOpenFile(file);\n      } else {\n        setEyesClosedFile(file);\n      }\n      // Reset processing state when new files are uploaded\n      setProcessingComplete(false);\n      setResults(null);\n      setConsoleLog([]);\n      setProgress(0);\n      setIsSaved(false);\n      setIsSaving(false);\n      setPdfUrl(null);\n    }\n  };\n\n  const processQEEGFiles = async () => {\n    setIsProcessing(true);\n    setConsoleLog([]);\n    setProgress(0);\n\n    try {\n      // Console log: Starting process\n      setConsoleLog(prev => [...prev, 'üöÄ Starting QEEG analysis...']);\n      setProgress(10);\n\n      // Create FormData to send files\n      const formData = new FormData();\n      formData.append('eyesOpen', eyesOpenFile);\n      formData.append('eyesClosed', eyesClosedFile);\n      formData.append('patientId', selectedPatient.id);\n      formData.append('patientName', getPatientName(selectedPatient));\n      formData.append('clinicName', selectedPatient.clinicName);\n      // Add complete patient data for PDF\n      formData.append('dateOfBirth', selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified');\n      formData.append('age', selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A');\n      formData.append('gender', selectedPatient.gender || 'Not specified');\n      formData.append('handedness', selectedPatient.handedness || 'Right');\n\n      setConsoleLog(prev => [...prev, 'üì§ Uploading files to server...']);\n      setProgress(20);\n\n      // Validate file sizes before upload (50MB limit)\n      const maxFileSize = 50 * 1024 * 1024; // 50MB\n      if (eyesOpenFile.size > maxFileSize || eyesClosedFile.size > maxFileSize) {\n        const oversizedFile = eyesOpenFile.size > maxFileSize ? eyesOpenFile : eyesClosedFile;\n        const fileSizeMB = (oversizedFile.size / (1024 * 1024)).toFixed(2);\n        throw new Error(`File \"${oversizedFile.name}\" is too large (${fileSizeMB}MB). Maximum file size is 50MB. Please compress or split the file.`);\n      }\n\n      // Call backend API with timeout\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 300000); // 5 minute timeout for large files\n\n      let response;\n      try {\n        response = await fetch(`${apiUrl}/qeeg/process`, {\n          method: 'POST',\n          body: formData,\n          signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n      } catch (fetchError) {\n        clearTimeout(timeoutId);\n        if (fetchError.name === 'AbortError') {\n          throw new Error('Upload timed out after 5 minutes. Please check: 1) File size (<50MB), 2) Backend is running (npm run dev:backend), 3) Internet connection is stable. Try compressing PDF files if too large.');\n        }\n        // Check if it's a network error (backend not running)\n        if (fetchError.message.includes('Failed to fetch') || fetchError.message.includes('fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure the backend is running on port 5000. Run \"npm run dev:backend\" to start the server.');\n        }\n        throw fetchError;\n      }\n\n      setConsoleLog(prev => [...prev, 'üìä Parsing QEEG data tables...']);\n      setProgress(40);\n\n      if (!response.ok) {\n        let errorMessage = 'Failed to process QEEG files';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n\n          // Add specific error messages based on error code\n          if (errorData.code === 'LIMIT_FILE_SIZE') {\n            errorMessage = 'File size exceeds the maximum limit of 50MB. Please compress your files or split them into smaller parts.';\n          } else if (errorData.code === 'GEMINI_QUOTA_EXCEEDED' || response.status === 429) {\n            // Extract retry time if available in error message\n            let retryTime = null;\n            const retryMatch = errorData.message?.match(/retry in ([\\d.]+)s/i);\n            if (retryMatch) {\n              retryTime = Math.ceil(parseFloat(retryMatch[1]));\n            }\n\n            errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                         'The Gemini AI service has reached its daily limit (20 requests/day).\\n\\n' +\n                         '‚úÖ Quick Solutions:\\n' +\n                         (retryTime ? `‚Ä¢ Wait ${retryTime} seconds and try again (quota will reset)\\n` : '‚Ä¢ Wait a few minutes and try again\\n') +\n                         '‚Ä¢ Re-upload the SAME files you processed before (uses cache, no quota needed)\\n' +\n                         '‚Ä¢ Contact administrator to upgrade API plan\\n\\n' +\n                         'üí° Tip: The system remembers files you\\'ve already processed!';\n          } else if (response.status === 503) {\n            errorMessage = 'Backend service is unavailable. Please ensure the server is running.';\n          } else if (response.status === 413) {\n            errorMessage = 'File payload is too large. Maximum allowed size is 50MB.';\n          } else if (response.status === 500) {\n            // Parse detailed error from server for 500 errors\n            if (errorData.message && (errorData.message.includes('Gemini') || errorData.message.includes('quota') || errorData.message.includes('429'))) {\n              // Extract retry time from detailed error\n              let retryTime = null;\n              const retryMatch = errorData.message.match(/retry in ([\\d.]+)s/i);\n              if (retryMatch) {\n                retryTime = Math.ceil(parseFloat(retryMatch[1]));\n              }\n\n              // Check if it's specifically a quota error\n              if (errorData.message.includes('quota') || errorData.message.includes('429')) {\n                errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                             'Google Gemini API has reached its free tier limit.\\n\\n' +\n                             '‚úÖ What to do:\\n' +\n                             (retryTime ? `1. Wait ${retryTime} seconds and try again\\n` : '1. Wait a few minutes and try again\\n') +\n                             '2. Or re-upload the SAME files (cached, no quota used)\\n' +\n                             '3. Or contact admin to upgrade API plan\\n\\n' +\n                             'üìä Free tier: 20 requests per day\\n' +\n                             'üí∞ Upgrade: https://ai.google.dev/pricing';\n              } else if (errorData.message && (\n                errorData.message.includes('PDF text extraction') ||\n                errorData.message.includes('Missing power tables') ||\n                errorData.code === 'PDF_EXTRACTION_FAILED'\n              )) {\n                // PDF extraction specific error\n                errorMessage = '‚ö†Ô∏è PDF Extraction Error\\n\\n' +\n                             errorData.message + '\\n\\n' +\n                             'üí° Troubleshooting:\\n' +\n                             '1. Verify PDFs contain QEEG frequency band tables\\n' +\n                             '2. Ensure PDFs are not password-protected\\n' +\n                             '3. Check if PDFs are scanned images (need OCR)\\n' +\n                             '4. Try exporting PDFs in a different format\\n' +\n                             '5. Contact support if issue persists';\n              } else {\n                errorMessage = '‚ö†Ô∏è Gemini AI Service Error\\n\\n' +\n                             'There was an issue with the AI service.\\n\\n' +\n                             'Please try again in a moment or contact support if the issue persists.';\n              }\n            }\n          }\n        } catch (e) {\n          // If error response is not JSON, use status text\n          errorMessage = `Server error (${response.status}): ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data = await response.json();\n\n      // Capture data type (raw or zscore)\n      if (data.data.dataType) {\n        setDataType(data.data.dataType);\n        console.log('üìä Data type:', data.data.dataType);\n        if (data.data.dataType === 'zscore') {\n          setConsoleLog(prev => [...prev, 'üî¨ Z-Score mode detected']);\n        }\n      }\n\n      // Auto-set PDF URL if returned from backend\n      if (data.data.pdfUrl) {\n        setPdfUrl(data.data.pdfUrl);\n        console.log('‚úÖ PDF auto-generated:', data.data.pdfUrl);\n        setConsoleLog(prev => [...prev, 'üìÑ PDF report generated automatically']);\n      }\n\n      setConsoleLog(prev => [...prev, 'üßÆ Calculating 7 brain health parameters...']);\n      setProgress(60);\n\n      // Simulate calculation steps for better UX\n      await new Promise(resolve => setTimeout(resolve, 500));\n      setConsoleLog(prev => [...prev, '  ‚úì Cognition parameter calculated']);\n      setProgress(65);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Stress parameter calculated']);\n      setProgress(70);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Focus & Attention parameter calculated']);\n      setProgress(75);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Burnout & Fatigue parameter calculated']);\n      setProgress(80);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Emotional Regulation parameter calculated']);\n      setProgress(85);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Learning parameter calculated']);\n      setProgress(90);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Creativity parameter calculated']);\n      setProgress(95);\n\n      // Convert API results to display format with NaN/Infinity protection\n      const finalResults = data.data.results.map(param => {\n        // Sanitize score values to prevent NaN/Infinity\n        const sanitizedScore = Number.isFinite(param.score) ? param.score : 0;\n        const sanitizedMaxScore = Number.isFinite(param.maxScore) && param.maxScore > 0 ? param.maxScore : 3;\n        const percentage = Math.round((sanitizedScore / sanitizedMaxScore) * 100);\n\n        // Sanitize metrics\n        const sanitizedMetrics = (param.metrics || []).map(metric => ({\n          ...metric,\n          score: Number.isFinite(metric.score) ? metric.score : 0,\n          value: Number.isFinite(metric.value) ? metric.value : 0\n        }));\n\n        return {\n          parameter: param.name,\n          score: Number.isFinite(percentage) ? percentage : 0,\n          rawScore: `${sanitizedScore}/${sanitizedMaxScore}`,\n          status: param.classification,\n          color: param.classification === 'High' ? 'green' :\n                 param.classification === 'Medium' ? 'blue' : 'orange',\n          metrics: sanitizedMetrics\n        };\n      });\n\n      setConsoleLog(prev => [...prev, '‚úÖ Analysis complete!']);\n      setConsoleLog(prev => [...prev, `üìà Overall Score: ${data.data.overallScore}/${data.data.maxScore}`]);\n      setProgress(100);\n\n      setResults(finalResults);\n      setIsProcessing(false);\n      setProcessingComplete(true);\n      setIsSaved(false); // Mark as not saved yet\n\n      toast.success('QEEG analysis completed successfully!');\n\n    } catch (error) {\n      console.error('Error processing QEEG files:', error);\n      setConsoleLog(prev => [...prev, `‚ùå Error: ${error.message}`]);\n      setIsProcessing(false);\n      toast.error(error.message || 'Failed to process QEEG files');\n    }\n  };\n\n  const saveResultsToDatabase = async (resultData) => {\n    if (!resultData) {\n      toast.error('No results to save');\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      toast.loading('Saving results to database...', { id: 'save-results' });\n\n      console.log('üíæ Saving results to database...');\n\n      // PDF should already exist from auto-generation\n      if (!pdfUrl) {\n        console.warn('‚ö†Ô∏è No PDF URL available - PDF may not have been generated');\n      }\n\n      const algorithmResult = {\n        // Don't specify ID - let database auto-generate UUID\n        patientId: selectedPatient.id,\n        clinicId: selectedPatient.clinicId,\n        algorithmName: 'Algorithm 1 - 7 Parameters',\n        inputData: {\n          patientName: getPatientName(selectedPatient),\n          clinicName: selectedPatient.clinicName,\n          eyesOpenFile: eyesOpenFile?.name,\n          eyesClosedFile: eyesClosedFile?.name,\n          processedAt: new Date().toISOString(),\n          processedBy: 'super_admin'\n        },\n        outputData: resultData,\n        pdfUrl: pdfUrl || null,\n        status: 'completed',\n        errorMessage: null\n      };\n\n      console.log('üíæ Saving to database...');\n      console.log('   Patient:', algorithmResult.inputData.patientName);\n      console.log('   PDF URL:', pdfUrl || 'NOT SET');\n      console.log('   PDF Type:', pdfUrl ? (pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None');\n\n      await DatabaseService.add('algorithmResults', algorithmResult);\n\n      setIsSaved(true);\n      setIsSaving(false);\n\n      toast.success('‚úÖ Results saved successfully!', { id: 'save-results' });\n\n      // Reload history and patient list to update status\n      loadProcessingHistory(selectedPatient.id);\n      loadPatients();\n    } catch (error) {\n      console.error('‚ùå Error saving results:', error);\n      setIsSaving(false);\n      toast.error('‚ùå Failed to save results: ' + error.message, { id: 'save-results' });\n    }\n  };\n\n  const handleSaveResults = async () => {\n    if (results) {\n      try {\n        console.log('üíæ Saving results to database...');\n\n        // Step 1: Check if existing PDF URL available (no generation!)\n        let finalPdfUrl = pdfUrl;\n\n        if (!finalPdfUrl) {\n          console.log('üîç Checking for existing PDF in database...');\n          const existingPdf = await findExistingPDF();\n\n          if (existingPdf) {\n            console.log('‚úÖ Found existing PDF URL:', existingPdf);\n            finalPdfUrl = existingPdf;\n            setPdfUrl(existingPdf);\n          } else {\n            console.log('‚ÑπÔ∏è No existing PDF found - save data only, PDF can be generated later');\n          }\n        }\n\n        // Step 2: Save results to database (with or without PDF URL)\n        await saveResultsToDatabase(results);\n\n        // Step 3: Show success message\n        if (finalPdfUrl) {\n          toast.success('‚úÖ Results saved! PDF is available for download.');\n        } else {\n          toast.success('‚úÖ Results saved! Generate PDF from history to get report.');\n        }\n\n        console.log('‚úÖ Save complete! PDF URL:', finalPdfUrl || 'Not available');\n\n      } catch (error) {\n        console.error('‚ùå Error saving results:', error);\n        toast.error('Failed to save results: ' + error.message);\n      }\n    }\n  };\n\n  // New function: Generate and download PDF separately\n  const handleGenerateAndDownloadPDF = async () => {\n    if (!results) {\n      toast.error('No results to generate PDF from');\n      return;\n    }\n\n    try {\n      console.log('üìÑ Starting PDF generation...');\n      toast.loading('Generating NeuroSense PDF Report...', { id: 'generate-pdf' });\n\n      const pdfResult = await generatePDFReport(results);\n\n      if (pdfResult && pdfResult.url) {\n        setPdfUrl(pdfResult.url);\n        console.log('‚úÖ PDF generated successfully:', pdfResult.url);\n        toast.success('PDF Report generated!', { id: 'generate-pdf' });\n\n        // Auto-download the newly generated PDF\n        setTimeout(() => {\n          console.log('üì• Auto-downloading newly generated PDF...');\n          handleDownloadPDF();\n        }, 500);\n      } else {\n        console.error('‚ö†Ô∏è PDF generation returned no URL');\n        toast.error('Failed to generate PDF', { id: 'generate-pdf' });\n      }\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      toast.error('Failed to generate PDF: ' + error.message, { id: 'generate-pdf' });\n    }\n  };\n\n  // Helper function to find existing PDF for this patient\n  const findExistingPDF = async () => {\n    try {\n      if (!selectedPatient || !selectedPatient.id) return null;\n\n      // Get patient's processing history\n      const allResults = await DatabaseService.get('algorithmResults');\n      const patientResults = allResults.filter(r => r.patientId === selectedPatient.id);\n\n      console.log(`üîç Found ${patientResults.length} existing records for patient ${getPatientName(selectedPatient)}`);\n\n      // Find most recent record with a PDF\n      const recordsWithPdf = patientResults\n        .filter(r => r.pdfUrl && r.pdfUrl !== 'null' && r.pdfUrl !== '')\n        .sort((a, b) => {\n          const dateA = new Date(a.inputData?.processedAt || a.processedAt || a.createdAt || 0);\n          const dateB = new Date(b.inputData?.processedAt || b.processedAt || b.createdAt || 0);\n          return dateB - dateA; // Most recent first\n        });\n\n      if (recordsWithPdf.length > 0) {\n        const latestPdf = recordsWithPdf[0].pdfUrl;\n        console.log('‚úÖ Found most recent PDF:', latestPdf);\n        return latestPdf;\n      }\n\n      console.log('‚ùå No existing PDF found in database');\n      return null;\n    } catch (error) {\n      console.error('Error finding existing PDF:', error);\n      return null;\n    }\n  };\n\n  const handleExecuteCalculation = () => {\n    if (eyesOpenFile && eyesClosedFile) {\n      processQEEGFiles();\n    } else {\n      toast.error('Please upload both QEEG data files');\n    }\n  };\n\n  const handleExportResults = () => {\n    if (results) {\n      // Create CSV content\n      const csvContent = [\n        ['Parameter', 'Score (%)', 'Status'],\n        ...results.map(r => [r.parameter, r.score, r.status])\n      ].map(row => row.join(',')).join('\\n');\n\n      // Create and download file\n      const blob = new Blob([csvContent], { type: 'text/csv' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'neurosense-algorithm-results.csv';\n      a.click();\n      window.URL.revokeObjectURL(url);\n    }\n  };\n\n  const generatePDFReport = async (resultData) => {\n    if (!resultData || !selectedPatient) {\n      console.error('‚ùå Cannot generate PDF: Missing resultData or selectedPatient');\n      toast.error('Cannot generate PDF: Missing data');\n      return null;\n    }\n\n    try {\n      console.log('üîß Preparing patient data...');\n\n      // Prepare patient data - FIXED: Use current date for recording, not DOB\n      const patientData = {\n        name: getPatientName(selectedPatient),\n        dateOfRecording: new Date().toISOString().split('T')[0], // TODAY'S DATE, not DOB!\n        dateOfBirth: selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified',\n        age: selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A',\n        gender: selectedPatient.gender || 'Not specified',\n        handedness: selectedPatient.handedness || 'Right', // Default to Right if not specified\n        patientId: selectedPatient.id,\n        occupation: selectedPatient.occupation || 'Not specified',\n        symptoms: selectedPatient.symptoms || []\n      };\n\n      console.log('üë§ Patient Data (Fixed):', patientData);\n      console.log('   Name:', patientData.name);\n      console.log('   Recording Date:', patientData.dateOfRecording);\n      console.log('   DOB:', patientData.dateOfBirth);\n      console.log('   Age:', patientData.age);\n      console.log('   Gender:', patientData.gender);\n      console.log('   Handedness:', patientData.handedness);\n\n      // Prepare algorithm results with STRONG validation to avoid NaN errors\n      const algorithmResults = {\n        parameters: resultData.map(result => {\n          const scoreParts = (result.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          const maxScore = parseInt(scoreParts[1]) || 3;\n\n          // Clean metrics to remove any NaN values\n          const cleanMetrics = (result.metrics || []).map(metric => ({\n            name: metric.name || 'Unknown',\n            score: isNaN(metric.score) ? 0 : (parseInt(metric.score) || 0),\n            value: isNaN(metric.value) ? 0 : (parseFloat(metric.value) || 0),\n            threshold: metric.threshold || 'Not provided'\n          }));\n\n          return {\n            name: result.parameter || 'Unknown Parameter',\n            score: isNaN(score) ? 0 : score,\n            maxScore: isNaN(maxScore) ? 3 : maxScore,\n            classification: result.status || 'Unknown',\n            metrics: cleanMetrics\n          };\n        }),\n        overallScore: resultData.reduce((sum, r) => {\n          const scoreParts = (r.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          return sum + (isNaN(score) ? 0 : score);\n        }, 0)\n      };\n\n      console.log('üìä Algorithm Results (NaN-free):', algorithmResults);\n\n      // EXTRA SAFETY: Double-check for any NaN in the data\n      const dataString = JSON.stringify(algorithmResults);\n      if (dataString.includes('NaN')) {\n        console.error('‚ö†Ô∏è WARNING: Found NaN in algorithm results!');\n        console.error('Raw data:', algorithmResults);\n        throw new Error('Data contains NaN values. Please check the calculation results.');\n      }\n\n      console.log('üìä Algorithm Results:', algorithmResults);\n\n      // Prepare QEEG data (use sample data if not available)\n      const qeegData = {\n        EC: {\n          absolute: { Fz: { Delta: 5.2, Theta: 4.1, Alpha: 8.3, Beta: 6.2, HiBeta: 3.1 } },\n          relative: { Pz: { Alpha: 45.2 } },\n          special: { alphaPeak: 10.3, O1: 10.1 }\n        },\n        EO: {\n          absolute: { Fz: { Theta: 3.8, Beta: 3.2, HiBeta: 2.5 } },\n          relative: { Pz: { Alpha: 28.7 } }\n        }\n      };\n\n      // Call backend API to generate PDF\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const pdfEndpoint = `${apiUrl}/qeeg/generate-pdf`;\n\n      console.log('üåê Calling backend API:', pdfEndpoint);\n      console.log('üì° Request payload size:', JSON.stringify({ patientData, algorithmResults, qeegData }).length, 'bytes');\n\n      // Add timeout handling\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 60000); // 60 second timeout (increased for Gemini AI)\n\n      const response = await fetch(pdfEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          patientData,\n          algorithmResults,\n          qeegData\n        }),\n        signal: controller.signal\n      }).catch(error => {\n        clearTimeout(timeoutId);\n        if (error.name === 'AbortError') {\n          throw new Error('PDF generation timed out after 60 seconds. Please check: 1) Backend is running, 2) Gemini API key is configured, 3) Internet connection is stable.');\n        }\n        if (error.message.includes('Failed to fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure backend is running on port 5000 (run: npm run dev:backend)');\n        }\n        throw error;\n      });\n\n      clearTimeout(timeoutId);\n\n      console.log('üì° Backend response status:', response.status);\n      console.log('üì° Backend response headers:', Object.fromEntries(response.headers.entries()));\n\n      if (!response.ok) {\n        let errorMessage = `Server returned ${response.status}`;\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n          console.error('‚ùå Backend error data:', errorData);\n        } catch (e) {\n          const errorText = await response.text();\n          errorMessage = errorText || errorMessage;\n          console.error('‚ùå Backend error text:', errorText);\n        }\n        throw new Error(`Failed to generate PDF: ${errorMessage}`);\n      }\n\n      const data = await response.json();\n      console.log('üì¶ Backend response data:', data);\n\n      if (!data || !data.success || !data.data) {\n        console.error('‚ùå Invalid response format:', data);\n        throw new Error('Invalid response from server');\n      }\n\n      // Use the complete URL from backend instead of constructing it\n      const pdfResult = {\n        url: data.data.url, // Backend already provides complete URL\n        path: data.data.path,\n        filename: data.data.filename\n      };\n\n      console.log('‚úÖ PDF generated successfully!', pdfResult);\n      console.log('‚úÖ PDF URL:', pdfResult.url);\n\n      return pdfResult;\n\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      console.error('‚ùå Error name:', error.name);\n      console.error('‚ùå Error message:', error.message);\n\n      if (error.message && error.stack) {\n        console.error('‚ùå Error stack:', error.stack);\n      }\n\n      // Provide specific error messages based on error type\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\n        console.error('‚ùå NETWORK ERROR: Cannot connect to backend server');\n        console.error('‚ùå Please ensure backend server is running on http://localhost:5000');\n        toast.error('Cannot connect to server. Please ensure backend is running on port 5000.');\n      } else if (error.name === 'AbortError') {\n        console.error('‚ùå TIMEOUT ERROR: PDF generation took too long');\n        toast.error('PDF generation timed out. Server might be overloaded.');\n      } else {\n        console.error('‚ùå PDF GENERATION ERROR:', error.message);\n        toast.error(`PDF generation failed: ${error.message}`);\n      }\n\n      return null;\n    }\n  };\n\n  const handleDownloadPDF = async () => {\n    if (!pdfUrl) {\n      toast.error('PDF not available. Please save results first.');\n      return;\n    }\n\n    try {\n      toast.loading('Downloading PDF...', { id: 'download-pdf' });\n\n      // Construct full backend URL\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\n      const backendBaseUrl = apiUrl.replace('/api', ''); // Remove /api to get base URL\n\n      // Handle both Supabase URLs and local URLs\n      let fullPdfUrl;\n      if (pdfUrl.startsWith('http')) {\n        // It's already a full URL (Supabase)\n        fullPdfUrl = pdfUrl;\n      } else {\n        // It's a local path, construct full URL\n        fullPdfUrl = `${backendBaseUrl}${pdfUrl}`;\n      }\n\n      console.log('üîΩ Download Info:', {\n        originalPdfUrl: pdfUrl,\n        backendBaseUrl,\n        fullPdfUrl,\n        isSupabase: pdfUrl.startsWith('http')\n      });\n\n      // For local files, try direct window.open first (simpler approach)\n      if (!pdfUrl.startsWith('http')) {\n        console.log('üì• Using direct download method for local file');\n\n        // Create a hidden link and click it\n        const link = document.createElement('a');\n        link.href = fullPdfUrl;\n        link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n        link.target = '_blank';\n\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        toast.success('PDF download started!', { id: 'download-pdf' });\n        return;\n      }\n\n      // For Supabase URLs, use fetch method\n      console.log('üì• Using fetch method for Supabase URL');\n\n      const response = await fetch(fullPdfUrl);\n\n      if (!response.ok) {\n        console.error('‚ùå Download failed:', {\n          status: response.status,\n          statusText: response.statusText\n        });\n        throw new Error(`Server returned ${response.status}: ${response.statusText}`);\n      }\n\n      // Convert to blob\n      const blob = await response.blob();\n\n      // Verify blob is valid\n      if (!blob || blob.size === 0) {\n        throw new Error('Downloaded file is empty');\n      }\n\n      console.log('‚úÖ PDF fetched successfully, size:', (blob.size / 1024).toFixed(2), 'KB');\n\n      // Create download link\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n      // Trigger download\n      document.body.appendChild(link);\n      link.click();\n\n      // Cleanup\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(downloadUrl);\n      }, 100);\n\n      toast.success('PDF downloaded successfully!', { id: 'download-pdf' });\n\n    } catch (error) {\n      console.error('‚ùå Download error:', {\n        error: error.message,\n        pdfUrl,\n        stack: error.stack\n      });\n\n      // Provide more helpful error messages\n      let errorMessage = 'Failed to download PDF';\n      if (error.message.includes('404')) {\n        errorMessage = 'PDF file not found on server';\n      } else if (error.message.includes('Failed to fetch')) {\n        errorMessage = 'Network error. Please check your connection.';\n      } else {\n        errorMessage = `Download failed: ${error.message}`;\n      }\n\n      toast.error(errorMessage, { id: 'download-pdf' });\n    }\n  };\n\n  const calculateAge = (dateOfBirth) => {\n    if (!dateOfBirth) return 'N/A';\n    const today = new Date();\n    const birthDate = new Date(dateOfBirth);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    return age;\n  };\n\n  // Helper function to get color based on score\n  // 1/3 = Red, 2/3 = Yellow, 3/3 = Green\n  const getScoreColor = (rawScore) => {\n    if (!rawScore) return 'gray';\n\n    const [score, maxScore] = rawScore.split('/').map(Number);\n\n    if (score === 1) return 'red';      // 1/3\n    if (score === 2) return 'yellow';   // 2/3\n    if (score === 3) return 'green';    // 3/3\n\n    return 'gray';\n  };\n\n  const getStatusColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'text-red-500';\n      case 'yellow': return 'text-yellow-500';\n      case 'green': return 'text-green-500';\n      default: return 'text-gray-500';\n    }\n  };\n\n  const getStatusBgColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    if (color === 'green') return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n    if (color === 'yellow') return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n    if (color === 'red') return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400';\n    return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400';\n  };\n\n  const getProgressBarColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'bg-red-500';\n      case 'yellow': return 'bg-yellow-500';\n      case 'green': return 'bg-green-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading patients...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Patient List View\n  if (!showProcessingUI) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n          <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n          <p className=\"text-primary-light mt-2\">Select a patient to generate Algorithm 1 report</p>\n        </div>\n\n        {/* Filter Bar */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4\">\n          <div className=\"flex flex-col lg:flex-row gap-4\">\n            {/* Patient Search */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Search Patient\n              </label>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search by name or email...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clinic Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Clinic\n              </label>\n              <div className=\"relative\">\n                <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <select\n                  value={selectedClinicFilter}\n                  onChange={(e) => setSelectedClinicFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary appearance-none\"\n                >\n                  <option value=\"\">All Clinics</option>\n                  {clinics.map(clinic => (\n                    <option key={clinic.id} value={clinic.id}>\n                      {clinic.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            {/* Date Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Date\n              </label>\n              <div className=\"relative\">\n                <Calendar className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"date\"\n                  value={dateFilter}\n                  onChange={(e) => setDateFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clear Filters Button */}\n            {(searchTerm || selectedClinicFilter || dateFilter) && (\n              <div className=\"flex items-end\">\n                <button\n                  onClick={clearFilters}\n                  className=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  <span>Clear</span>\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Active Filters Display */}\n          {(searchTerm || selectedClinicFilter || dateFilter) && (\n            <div className=\"mt-3 flex flex-wrap gap-2\">\n              {searchTerm && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\">\n                  Search: \"{searchTerm}\"\n                </span>\n              )}\n              {selectedClinicFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400\">\n                  Clinic: {clinics.find(c => c.id === selectedClinicFilter)?.name}\n                </span>\n              )}\n              {dateFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n                  Date: {new Date(dateFilter).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n                </span>\n              )}\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 self-center\">\n                ({filteredPatients.length} {filteredPatients.length === 1 ? 'patient' : 'patients'} found)\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Patient List - Clinic-wise */}\n        <div className=\"space-y-4\">\n          {groupedPatients.length > 0 ? (\n            groupedPatients.map(({ clinic, patients: clinicPatients }) => (\n            <div key={clinic.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              {/* Clinic Header */}\n              <div className=\"bg-accent-light dark:bg-primary/20 border-b border-primary-light dark:border-primary px-6 py-3\">\n                <div className=\"flex items-center\">\n                  <Building2 className=\"h-5 w-5 text-primary mr-2\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                    {clinic.name}\n                  </h3>\n                  <span className=\"ml-3 text-sm text-gray-600 dark:text-gray-400\">\n                    ({clinicPatients.length} {clinicPatients.length === 1 ? 'patient' : 'patients'})\n                  </span>\n                </div>\n              </div>\n\n              {/* Patient Table */}\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Patient Name\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Email\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Previous Scans\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Action\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n                    {clinicPatients.map(patient => (\n                      <tr key={patient.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex items-center\">\n                            <User className=\"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2\" />\n                            <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                              {getPatientName(patient)}\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          {patient.email || 'N/A'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          <span className=\"flex items-center\">\n                            <History className=\"h-4 w-4 mr-1\" />\n                            {patient.totalScans || 0} {patient.totalScans === 1 ? 'scan' : 'scans'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          {getStatusBadge(patient.algorithmStatus, patient.lastProcessed)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right\">\n                          <button\n                            onClick={() => handleGenerateReport(patient)}\n                            className=\"bg-primary hover:bg-navy-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-md flex items-center ml-auto\"\n                          >\n                            <FileText className=\"h-4 w-4 mr-2\" />\n                            {patient.algorithmStatus === 'completed' ? 'View/Generate' : 'Generate Report'}\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            ))\n          ) : (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center\">\n              <Filter className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4\" />\n              <p className=\"text-gray-600 dark:text-gray-400 font-medium\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'No patients match your filters'\n                  : 'No patients found'\n                }\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-2\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'Try adjusting your search criteria or clear filters'\n                  : 'Patients will appear here once they are registered in the system'\n                }\n              </p>\n              {(searchTerm || selectedClinicFilter || dateFilter) && (\n                <button\n                  onClick={clearFilters}\n                  className=\"mt-4 px-4 py-2 bg-primary hover:bg-navy-700 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Clear Filters\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Processing UI View\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Back Button */}\n      <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n        <button\n          onClick={handleBackToList}\n          className=\"flex items-center text-primary-light hover:text-white mb-3 transition-colors\"\n        >\n          <ArrowLeft className=\"h-5 w-5 mr-2\" />\n          Back to Patient List\n        </button>\n        <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n        <div className=\"flex items-center gap-3 mt-2\">\n          <p className=\"text-primary-light\">\n            Processing for: <span className=\"font-semibold\">{getPatientName(selectedPatient)}</span> | {selectedPatient?.clinicName}\n          </p>\n          {dataType === 'zscore' && (\n            <span className=\"inline-flex items-center px-3 py-1 bg-purple-500/20 text-purple-200 text-xs font-medium rounded-full border border-purple-400/30\">\n              üî¨ Z-Score Mode\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Panel - QEEG Data Input */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            QEEG Data Input\n          </h2>\n          <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <p className=\"text-xs text-blue-800 dark:text-blue-300\">\n              <span className=\"font-semibold\">‚ÑπÔ∏è Note:</span> Data will be extracted from <strong>pages 13 & 24</strong> of both PDF files\n            </p>\n          </div>\n\n          {/* Eyes Open Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EO - Eyes Open PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('eo', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesOpenFile ? eyesOpenFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesOpenFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Eyes Closed Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EC - Eyes Closed PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('ec', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesClosedFile ? eyesClosedFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesClosedFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Data Loaded Progress */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Data Loaded\n            </label>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\">\n              <div\n                className=\"bg-green-500 h-2.5 rounded-full transition-all duration-300\"\n                style={{ width: `${eyesOpenFile && eyesClosedFile ? 100 : eyesOpenFile || eyesClosedFile ? 50 : 0}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Middle Panel - Algorithm Processing */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Algorithm 1 Processing\n          </h2>\n\n          {/* Execute Button */}\n          <button\n            onClick={handleExecuteCalculation}\n            disabled={!eyesOpenFile || !eyesClosedFile || isProcessing || isSaved}\n            className={`w-full mb-6 py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n              eyesOpenFile && eyesClosedFile && !isProcessing && !isSaved\n                ? 'bg-primary hover:bg-navy-700 text-white'\n                : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n            }`}\n          >\n            <Play className=\"h-5 w-5\" />\n            <span>Execute Calculation</span>\n          </button>\n\n          {/* Processing Animation */}\n          {isProcessing && (\n            <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-center mb-6 shadow-lg\">\n              <div className=\"relative inline-block\">\n                <Activity className=\"h-16 w-16 text-white animate-pulse\" />\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-20 h-20 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                </div>\n              </div>\n              <p className=\"text-white font-medium mt-4\">Processing...</p>\n              <p className=\"text-primary-light text-sm\">{consoleLog.length} actions done</p>\n            </div>\n          )}\n\n          {/* Processing Complete */}\n          {processingComplete && (\n            <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 text-center mb-6\">\n              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-2\" />\n              <p className=\"text-green-800 dark:text-green-400 font-medium\">Processing Complete!</p>\n            </div>\n          )}\n\n          {/* Console */}\n          <div className=\"bg-gray-900 dark:bg-black rounded-lg p-4 min-h-[200px] max-h-[300px] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-gray-700\">\n              <h3 className=\"text-sm font-medium text-gray-300\">Console</h3>\n              <button\n                onClick={() => setConsoleLog([])}\n                className=\"text-xs text-gray-400 hover:text-gray-200\"\n              >\n                Clear\n              </button>\n            </div>\n            <div className=\"space-y-1 font-mono text-xs\">\n              {consoleLog.length > 0 ? (\n                consoleLog.map((log, index) => (\n                  <div key={index} className=\"text-green-400\">\n                    &gt; {log}\n                  </div>\n                ))\n              ) : (\n                <div className=\"text-gray-500 italic\">Console output will appear here...</div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Final 7 Parameter Scores */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              Final 7 Parameter Scores\n            </h2>\n            {results && (\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Total: {results.reduce((sum, r) => sum + parseInt(r.rawScore.split('/')[0]), 0)}/21\n              </span>\n            )}\n          </div>\n\n          {/* Algorithm Info Card */}\n          <div className=\"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <div className=\"flex items-start space-x-2\">\n              <Activity className=\"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0\" />\n              <div>\n                <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1\">\n                  7-Parameter Brain Health Analysis\n                </h3>\n                <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                  Each parameter is calculated from 3 sub-metrics. Score: 0-1 (Low), 2 (Medium), 3 (High).\n                  Each metric shows its calculated value and threshold comparison.\n                </p>\n                <div className=\"mt-2 text-xs text-blue-600 dark:text-blue-400\">\n                  <strong>Parameters:</strong> Cognition ‚Ä¢ Stress ‚Ä¢ Focus & Attention ‚Ä¢ Burnout & Fatigue ‚Ä¢\n                  Emotional Regulation ‚Ä¢ Learning ‚Ä¢ Creativity\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {results ? (\n            <>\n              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => {\n                  // Determine background color for main parameter card (Stress and Burnout & Fatigue)\n                  const isStressOrBurnout = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n                  let mainCardBgClass = 'border border-gray-200 dark:border-gray-700';\n\n                  if (isStressOrBurnout && result.rawScore) {\n                    const [score] = result.rawScore.split('/').map(Number);\n                    // 3/3 = Low problem (all normal) = GREEN\n                    // 2/3 = Medium = YELLOW\n                    // 1/3 or 0/3 = High problem = RED\n                    if (score === 3) {\n                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n                    } else if (score === 2) {\n                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n                    } else if (score <= 1) {\n                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n                    }\n                  }\n\n                  return (\n                    <div key={index} className={`rounded-lg p-3 ${mainCardBgClass}`}>\n                      {/* Main Parameter */}\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                          {result.parameter}\n                        </span>\n                        <div className=\"flex items-center space-x-3\">\n                          <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                          <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                            {result.status}\n                          </span>\n                        </div>\n                      </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n                      <div\n                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n                        style={{ width: `${result.score}%` }}\n                      ></div>\n                    </div>\n\n                    {/* Sub-Parameters with Calculations */}\n                    {result.metrics && result.metrics.length > 0 && (\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n                          Sub-Parameters & Calculations:\n                        </div>\n                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress condition\n                            const isNormal = metric.score === 1;\n                            const bgColorClass = result.parameter === 'Stress'\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    result.parameter === 'Stress'\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>\n                                  <div className=\"flex items-center space-x-2\">\n                                    {metric.score === 1 ? (\n                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                    ) : (\n                                      <X className=\"h-4 w-4 text-red-500\" />\n                                    )}\n                                    <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                      {metric.score}/1\n                                    </span>\n                                  </div>\n                                </div>\n\n                              {/* Calculation Details */}\n                              <div className=\"space-y-1\">\n                                {/* Actual Value */}\n                                {metric.value !== null && metric.value !== undefined && (\n                                  <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-gray-500 dark:text-gray-400\">Value:</span>\n                                    <span className=\"font-mono text-gray-700 dark:text-gray-300\">\n                                      {typeof metric.value === 'object' && metric.value !== null\n                                        ? Object.entries(metric.value).map(([key, val]) =>\n                                            `${key}: ${typeof val === 'number' ? val.toFixed(2) : val}`\n                                          ).join(', ')\n                                        : typeof metric.value === 'number'\n                                        ? metric.value.toFixed(2)\n                                        : metric.value}\n                                    </span>\n                                  </div>\n                                )}\n\n                                {/* Description/Formula */}\n                                {metric.description && (\n                                  <div className=\"text-xs text-gray-600 dark:text-gray-400 italic mt-1\">\n                                    {metric.description}\n                                  </div>\n                                )}\n\n                                {/* Additional Details */}\n                                {metric.details && (\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n                                    {typeof metric.details === 'object'\n                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n                                          <div key={idx} className=\"flex justify-between\">\n                                            <span>{key}:</span>\n                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n                                          </div>\n                                        ))\n                                      : metric.details}\n                                  </div>\n                                )}\n                              </div>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                {/* Save Results Button (No PDF Generation) */}\n                <button\n                  onClick={handleSaveResults}\n                  disabled={isSaving || isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    isSaved\n                      ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 cursor-not-allowed'\n                      : isSaving\n                      ? 'bg-blue-400 text-white cursor-wait'\n                      : 'bg-primary hover:bg-navy-700 text-white'\n                  }`}\n                >\n                  {isSaving ? (\n                    <>\n                      <Activity className=\"h-5 w-5 animate-spin\" />\n                      <span>Saving...</span>\n                    </>\n                  ) : isSaved ? (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Saved ‚úì</span>\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Save Results</span>\n                    </>\n                  )}\n                </button>\n\n                {/* Generate PDF Button (Separate) */}\n                <button\n                  onClick={handleGenerateAndDownloadPDF}\n                  disabled={!results || !isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    !results || !isSaved\n                      ? 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      : pdfUrl\n                      ? 'bg-green-600 hover:bg-green-700 text-white'\n                      : 'bg-blue-600 hover:bg-blue-700 text-white'\n                  }`}\n                  title={!isSaved ? 'Please save results first' : 'Generate and download PDF report'}\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>{pdfUrl ? 'Download PDF Report' : 'Generate PDF Report'}</span>\n                </button>\n\n                {/* Export CSV Button */}\n                <button\n                  onClick={handleExportResults}\n                  className=\"w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md\"\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>Export CSV</span>\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <FileText className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mb-4\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Upload data files and execute calculation to see results\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Processing History */}\n      {selectedPatient && processingHistory.length > 0 && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n              <History className=\"h-5 w-5 mr-2\" />\n              Processing History for {getPatientName(selectedPatient)}\n            </h2>\n            <button\n              onClick={async () => {\n                console.log('üîÑ Manual sync triggered...');\n                toast.loading('Syncing PDFs from Supabase...', { id: 'sync-pdfs' });\n\n                try {\n                  // Force reload from database and sync\n                  await loadProcessingHistory(selectedPatient.id);\n\n                  // Count how many PDFs were found\n                  const results = await DatabaseService.get('algorithmResults');\n                  const patientResults = results.filter(r => r.patientId === selectedPatient.id);\n                  const pdfCount = patientResults.filter(r => r.pdfUrl).length;\n                  const totalCount = patientResults.length;\n\n                  toast.success(`‚úÖ Synced! ${pdfCount}/${totalCount} PDFs available`, { id: 'sync-pdfs' });\n                  console.log(`‚úÖ Sync complete: ${pdfCount}/${totalCount} records have PDFs`);\n                } catch (error) {\n                  console.error('‚ùå Sync failed:', error);\n                  toast.error('Failed to sync PDFs', { id: 'sync-pdfs' });\n                }\n              }}\n              className=\"px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-1\"\n              title=\"Fetch PDFs from Supabase bucket and update database\"\n            >\n              <Download className=\"h-3 w-3\" />\n              <span>Sync PDFs</span>\n            </button>\n          </div>\n          <div className=\"space-y-3\">\n            {processingHistory.map((record, index) => (\n              <div\n                key={record.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <Calendar className=\"h-4 w-4 text-primary\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        {new Date(record.inputData?.processedAt || record.processedAt || record.createdAt).toLocaleDateString('en-US', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </span>\n                      {/* PDF Status Badge */}\n                      {record.pdfUrl ? (\n                        <span className=\"px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full flex items-center space-x-1\">\n                          <CheckCircle className=\"h-3 w-3\" />\n                          <span>PDF Available</span>\n                        </span>\n                      ) : (\n                        <span className=\"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full\">\n                          No PDF\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 space-y-1 mb-3\">\n                      <p>üìÅ Files: {record.inputData?.eyesOpenFile || record.eyesOpenFile || 'N/A'}, {record.inputData?.eyesClosedFile || record.eyesClosedFile || 'N/A'}</p>\n                      <p>üë§ Processed by: {record.inputData?.processedBy || record.processedBy || 'Unknown'}</p>\n                      {record.pdfUrl && (\n                        <p className=\"text-green-600 dark:text-green-400\">\n                          üìÑ PDF: {record.pdfUrl.startsWith('http') ? 'Supabase ‚úì' : 'Local ‚úì'}\n                        </p>\n                      )}\n                      {!record.pdfUrl && (\n                        <p className=\"text-red-600 dark:text-red-400\">üìÑ PDF: Not available</p>\n                      )}\n                    </div>\n\n                    {/* Quick Summary of Results */}\n                    {(() => {\n                      const savedResults = record.outputData || record.results;\n                      return savedResults && savedResults.length > 0 && (\n                        <div className=\"mt-3 grid grid-cols-2 gap-2\">\n                          {savedResults.slice(0, 4).map((result, idx) => (\n                            <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                              <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                              <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                                {result.rawScore}\n                              </span>\n                            </div>\n                          ))}\n                        </div>\n                      );\n                    })()}\n                  </div>\n                  <div className=\"flex flex-col space-y-2\">\n                    {/* View Full Results Button */}\n                    <button\n                      onClick={() => {\n                        // Handle both old format (results) and new format (outputData)\n                        const savedResults = record.outputData || record.results;\n                        if (savedResults) {\n                          setResults(savedResults);\n                          setProcessingComplete(true);\n                          setIsSaved(true);\n                          // Set PDF URL if available\n                          if (record.pdfUrl) {\n                            setPdfUrl(record.pdfUrl);\n                          }\n                          toast.success('Previous results loaded!');\n                          console.log('‚úÖ Loaded results from history:', savedResults);\n                        } else {\n                          toast.error('No results found in this record');\n                          console.error('‚ùå No results found in record:', record);\n                        }\n                      }}\n                      className=\"px-3 py-2 text-sm bg-primary hover:bg-navy-700 text-white rounded-lg transition-colors flex items-center justify-center space-x-1\"\n                    >\n                      <FileText className=\"h-4 w-4\" />\n                      <span>View Results</span>\n                    </button>\n\n                    {/* Download PDF Button - Always visible */}\n                    <button\n                      onClick={async () => {\n                        if (!record.pdfUrl) {\n                          toast.error('No PDF available for this record');\n                          console.log('‚ùå No PDF URL in record:', record);\n                          return;\n                        }\n\n                        console.log('üì• Downloading PDF from record:', {\n                          processedAt: record.processedAt,\n                          pdfUrl: record.pdfUrl\n                        });\n\n                        try {\n                          toast.loading('Downloading PDF...', { id: 'history-download' });\n\n                          // Construct full URL (works with both local and Supabase URLs)\n                          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n                          const backendBaseUrl = apiUrl.replace('/api', '');\n                          const fullPdfUrl = record.pdfUrl.startsWith('http') ? record.pdfUrl : `${backendBaseUrl}${record.pdfUrl}`;\n\n                          console.log('üì• Downloading from:', fullPdfUrl);\n\n                          // Fetch the PDF file\n                          const response = await fetch(fullPdfUrl);\n                          if (!response.ok) throw new Error('Failed to fetch PDF');\n\n                          // Convert to blob\n                          const blob = await response.blob();\n\n                          // Create download link\n                          const downloadUrl = window.URL.createObjectURL(blob);\n                          const link = document.createElement('a');\n                          link.href = downloadUrl;\n                          link.download = record.pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n                          // Trigger download\n                          document.body.appendChild(link);\n                          link.click();\n\n                          // Cleanup\n                          document.body.removeChild(link);\n                          window.URL.revokeObjectURL(downloadUrl);\n\n                          toast.success('PDF downloaded successfully!', { id: 'history-download' });\n                        } catch (error) {\n                          console.error('Download error:', error);\n                          toast.error('Failed to download PDF', { id: 'history-download' });\n                        }\n                      }}\n                      disabled={!record.pdfUrl}\n                      className={`px-3 py-2 text-sm rounded-lg transition-colors flex items-center justify-center space-x-1 ${\n                        record.pdfUrl\n                          ? 'bg-blue-600 hover:bg-blue-700 text-white cursor-pointer'\n                          : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      }`}\n                      title={record.pdfUrl ? 'Download PDF Report' : 'No PDF available'}\n                    >\n                      <Download className=\"h-4 w-4\" />\n                      <span>NeuroSense Report</span>\n                    </button>\n                  </div>\n                </div>\n\n                {/* Expandable Details */}\n                {(() => {\n                  const savedResults = record.outputData || record.results;\n                  return savedResults && savedResults.length > 4 && (\n                    <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                      {savedResults.slice(4).map((result, idx) => (\n                        <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                          <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  );\n                })()}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Info Section */}\n      <div className=\"bg-accent-light dark:bg-primary/20 border border-primary-light dark:border-primary rounded-lg p-4 shadow-sm\">\n        <h3 className=\"text-sm font-medium text-primary dark:text-primary-light mb-2\">\n          About Algorithm 1 Processing\n        </h3>\n        <p className=\"text-sm text-navy-800 dark:text-gray-300\">\n          This processor analyzes QEEG data files (Eyes Open and Eyes Closed) and generates 7 key parameters using proprietary\n          binary scoring logic. The algorithm evaluates brain activity patterns to assess cognitive and emotional health markers.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default AlgorithmDataProcessor;\n","structuredPatch":[{"oldStart":1602,"oldLines":9,"newStart":1602,"newLines":10,"lines":["                         </div>","                         <div className=\"space-y-3\">","                           {result.metrics.map((metric, mIndex) => {","-                            // Determine if metric is normal (green) or abnormal (red) for Stress condition","+                            // Determine if metric is normal (green) or abnormal (red) for Stress and Burnout & Fatigue","                             const isNormal = metric.score === 1;","-                            const bgColorClass = result.parameter === 'Stress'","+                            const shouldColorize = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';","+                            const bgColorClass = shouldColorize","                               ? (isNormal","                                   ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'","                                   : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')"]},{"oldStart":1615,"oldLines":7,"newStart":1616,"newLines":7,"lines":["                                 {/* Metric Name and Score */}","                                 <div className=\"flex items-center justify-between mb-2\">","                                   <span className={`text-xs font-semibold ${","-                                    result.parameter === 'Stress'","+                                    shouldColorize","                                       ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')","                                       : 'text-gray-700 dark:text-gray-300'","                                   }`}>"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"6a0b2a1f-8164-4053-894f-2f061a5f97f9","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018ByN2FWWdRwfNo7popjb6f","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Good! Now I need to close the return statement properly. Let me check if there's a closing bracket issue.","signature":"EpECCkYIChgCKkC5Tysfon2fff5zCngIHdXjW4VDXc5j5aiNcsi2Yq/atVnYSE5teZr4BoO30oLmv2moFI1GKVc1bWB23/zMmjx4Egw685vTk+YFt6ZKM7IaDKtb0l2U7SmRCRtkBSIwean6Cou6XtKHIA1feLQZCCejButi0jRBQUsAj58a0r9pod2y+7NDgZmzdrfWK8ErKnmWpmP1t5nNSA9LmvrtdWJEBXJwLAbbZBJfMLFuFyY4uoaSRxrNNfXB+hcHocoP7Bg/IHhRXufkoFszA4k6Tu55PqFfafX9e2QeksIKxyoyBc47XVH2umh6LQCl8KE3bROLh1MI+iX0jAttuItoOmURJ+qrL3K3wDiHGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1766,"cache_read_input_tokens":63223,"cache_creation":{"ephemeral_5m_input_tokens":1766,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9Nr6wmgBs9yyiiHzHY","type":"assistant","uuid":"49fc2c66-a67e-4135-8725-48270fe6ff76","timestamp":"2025-12-18T12:22:53.118Z"}
{"parentUuid":"49fc2c66-a67e-4135-8725-48270fe6ff76","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018ByN2FWWdRwfNo7popjb6f","type":"message","role":"assistant","content":[{"type":"text","text":"‡§Ö‡§¨ closing bracket check ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Ç:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1766,"cache_read_input_tokens":63223,"cache_creation":{"ephemeral_5m_input_tokens":1766,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9Nr6wmgBs9yyiiHzHY","type":"assistant","uuid":"2c4598f9-4607-46e2-be34-b56d16fb23d6","timestamp":"2025-12-18T12:22:53.493Z"}
{"parentUuid":"2c4598f9-4607-46e2-be34-b56d16fb23d6","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018ByN2FWWdRwfNo7popjb6f","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01JxPnQJFm5iXgHNE1DpRvrF","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","offset":1675,"limit":15}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1766,"cache_read_input_tokens":63223,"cache_creation":{"ephemeral_5m_input_tokens":1766,"ephemeral_1h_input_tokens":0},"output_tokens":167,"service_tier":"standard"}},"requestId":"req_011CWE9Nr6wmgBs9yyiiHzHY","type":"assistant","uuid":"546f66b2-5d3f-469a-9228-ae4149e8b5c8","timestamp":"2025-12-18T12:22:54.390Z"}
{"parentUuid":"546f66b2-5d3f-469a-9228-ae4149e8b5c8","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01JxPnQJFm5iXgHNE1DpRvrF","type":"tool_result","content":"  1675‚Üí                              </div>\n  1676‚Üí                              </div>\n  1677‚Üí                            );\n  1678‚Üí                          })}\n  1679‚Üí                        </div>\n  1680‚Üí                      </div>\n  1681‚Üí                    )}\n  1682‚Üí                  </div>\n  1683‚Üí                ))}\n  1684‚Üí              </div>\n  1685‚Üí\n  1686‚Üí              {/* Action Buttons */}\n  1687‚Üí              <div className=\"space-y-3\">\n  1688‚Üí                {/* Save Results Button (No PDF Generation) */}\n  1689‚Üí                <button\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"4c391d07-ddc1-49da-8096-e37146e51ab4","timestamp":"2025-12-18T12:22:55.966Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","content":"                              </div>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                {/* Save Results Button (No PDF Generation) */}\n                <button","numLines":15,"startLine":1675,"totalLines":1983}}}
{"parentUuid":"4c391d07-ddc1-49da-8096-e37146e51ab4","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01W94BxHQuKjymaRKRtLjEVt","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"I need to add the closing bracket for the main map function. Let me check line 1682-1683.","signature":"EoECCkYIChgCKkB5Dh51EfEHn4lxPmTN4wggQAu9A9ZR4dItn+pt6BrmJ8vKY7QP0pnvLCbr/T3c17lShMN0Bqkz2Zwropl3EiXREgzeYqFbaXA/296sTPgaDJzTjDcaCrHGEMICYiIwnP0rreByI6uZEA6E/IY+S3YErXLCitefrctkRTcr64YoRXr2sA1PxqPiBmPcZc4yKmkLnSHntm0Efy78rrACv1Jli6NhNk+cErwKT9uJyyt4GesXcET8N02d7JtZhNqHkt44iCB5jLbRBjbMIrEbxJ8fqsuOyzbKBdPiNOdYR26Z48VEQDG/XF5LTTR9AgEIJxZSlXXjpI8RBeYYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":417,"cache_read_input_tokens":64989,"cache_creation":{"ephemeral_5m_input_tokens":417,"ephemeral_1h_input_tokens":0},"output_tokens":4,"service_tier":"standard"}},"requestId":"req_011CWE9PJnZSSiXXGChZXuNH","type":"assistant","uuid":"568b6a4d-f2f3-41df-915f-ce9a51be360d","timestamp":"2025-12-18T12:23:00.031Z"}
{"parentUuid":"568b6a4d-f2f3-41df-915f-ce9a51be360d","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01W94BxHQuKjymaRKRtLjEVt","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_0196nPNqtTRDu8PTzQJyxvHA","name":"Edit","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","old_string":"                  </div>\n                ))}","new_string":"                    </div>\n                  );\n                })}"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":417,"cache_read_input_tokens":64989,"cache_creation":{"ephemeral_5m_input_tokens":417,"ephemeral_1h_input_tokens":0},"output_tokens":177,"service_tier":"standard"}},"requestId":"req_011CWE9PJnZSSiXXGChZXuNH","type":"assistant","uuid":"f62cc86a-3a42-4dab-b85b-a8249bc63dae","timestamp":"2025-12-18T12:23:01.050Z"}
{"parentUuid":"f62cc86a-3a42-4dab-b85b-a8249bc63dae","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_0196nPNqtTRDu8PTzQJyxvHA","type":"tool_result","content":"The file D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n  1678‚Üí                          })}\n  1679‚Üí                        </div>\n  1680‚Üí                      </div>\n  1681‚Üí                    )}\n  1682‚Üí                    </div>\n  1683‚Üí                  );\n  1684‚Üí                })}\n  1685‚Üí              </div>\n  1686‚Üí\n  1687‚Üí              {/* Action Buttons */}\n  1688‚Üí              <div className=\"space-y-3\">"}]},"uuid":"3f0a70e7-0716-4f63-8aec-cdfedbe529ed","timestamp":"2025-12-18T12:23:15.809Z","toolUseResult":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","oldString":"                  </div>\n                ))}","newString":"                    </div>\n                  );\n                })}","originalFile":"import React, { useState, useEffect } from 'react';\nimport { Upload, Play, Download, FileText, CheckCircle, Activity, User, Building2, Calendar, History, X, ArrowLeft, Search, Filter } from 'lucide-react';\nimport DatabaseService from '../../services/databaseService';\nimport toast from 'react-hot-toast';\n\nconst AlgorithmDataProcessor = () => {\n  const [patients, setPatients] = useState([]);\n  const [clinics, setClinics] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [showProcessingUI, setShowProcessingUI] = useState(false);\n  const [processingHistory, setProcessingHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Filter states\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedClinicFilter, setSelectedClinicFilter] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n\n  const [eyesOpenFile, setEyesOpenFile] = useState(null);\n  const [eyesClosedFile, setEyesClosedFile] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [processingComplete, setProcessingComplete] = useState(false);\n  const [consoleLog, setConsoleLog] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const [results, setResults] = useState(null);\n  const [isSaved, setIsSaved] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [dataType, setDataType] = useState(null); // 'raw' or 'zscore'\n\n  // Debug function to check database contents\n  useEffect(() => {\n    window.debugAlgorithmResults = async () => {\n      const allResults = await DatabaseService.get('algorithmResults');\n      console.log('üîç All Algorithm Results in Database:', allResults);\n      console.log(`Total records: ${allResults.length}`);\n      allResults.forEach((record, idx) => {\n        console.log(`\\nüìä Record ${idx + 1}:`, {\n          id: record.id,\n          patientName: record.inputData?.patientName || record.patientName,\n          processedAt: record.inputData?.processedAt || record.processedAt,\n          pdfUrl: record.pdfUrl || '‚ùå MISSING',\n          hasResults: !!(record.outputData || record.results)\n        });\n      });\n    };\n    console.log('üí° Debug: Type window.debugAlgorithmResults() in console to check database');\n  }, []);\n\n  useEffect(() => {\n    loadPatients();\n  }, []);\n\n  useEffect(() => {\n    if (selectedPatient && showProcessingUI) {\n      loadProcessingHistory(selectedPatient.id);\n    }\n  }, [selectedPatient, showProcessingUI, isSaved]); // Re-load when saved\n\n  const loadPatients = async () => {\n    try {\n      const patientsData = await DatabaseService.get('patients');\n      const clinicsData = await DatabaseService.get('clinics');\n      const algorithmResults = await DatabaseService.get('algorithmResults') || [];\n\n      // Enrich patients with clinic names and algorithm status\n      const enrichedPatients = patientsData.map(patient => {\n        const patientResults = algorithmResults.filter(r => r.patientId === patient.id);\n        const lastResult = patientResults.length > 0\n          ? patientResults.sort((a, b) => {\n              const aTime = a.inputData?.processedAt || a.processedAt || a.createdAt;\n              const bTime = b.inputData?.processedAt || b.processedAt || b.createdAt;\n              return new Date(bTime) - new Date(aTime);\n            })[0]\n          : null;\n\n        return {\n          ...patient,\n          clinicName: clinicsData.find(c => c.id === patient.clinicId)?.name || 'Unknown Clinic',\n          algorithmStatus: lastResult ? 'completed' : 'pending',\n          lastProcessed: lastResult?.inputData?.processedAt || lastResult?.processedAt || lastResult?.createdAt,\n          totalScans: patientResults.length\n        };\n      });\n\n      setPatients(enrichedPatients);\n      setClinics(clinicsData);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading patients:', error);\n      toast.error('Failed to load patients');\n      setLoading(false);\n    }\n  };\n\n  const loadProcessingHistory = async (patientId) => {\n    try {\n      // Load algorithm results for this patient\n      const results = await DatabaseService.get('algorithmResults');\n      const patientResults = results.filter(r => r.patientId === patientId);\n\n      console.log(`üìã Loaded ${patientResults.length} records for patient ${patientId}`);\n\n      // Log all records for debugging\n      console.log('üìä All records for this patient:');\n      patientResults.forEach((rec, idx) => {\n        const processedTime = rec.inputData?.processedAt || rec.processedAt || rec.createdAt;\n        console.log(`   ${idx + 1}. ${new Date(processedTime).toLocaleString()} - PDF: ${rec.pdfUrl ? '‚úì' : '‚úó'}`);\n      });\n\n      // Check for records without pdfUrl and try to fix them\n      const recordsWithoutPdf = patientResults.filter(r => !r.pdfUrl);\n      if (recordsWithoutPdf.length > 0) {\n        console.log(`\\n‚ö†Ô∏è Found ${recordsWithoutPdf.length} records without PDF URL - attempting auto-fix...`);\n\n        let updatedCount = 0;\n\n        // Step 1: Try to fetch PDFs from Supabase bucket\n        try {\n          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n          const response = await fetch(`${apiUrl}/qeeg/supabase-pdfs`);\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log(`\\n‚òÅÔ∏è Found ${data.count} PDFs in Supabase bucket:`);\n            data.pdfs.forEach(pdf => console.log(`   - ${pdf.name}`));\n\n            // Match PDFs with database records using smart matching\n            console.log(`\\nüîç Attempting to match ${recordsWithoutPdf.length} records...`);\n            for (const record of recordsWithoutPdf) {\n              const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n              const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n              const recordTimestamp = new Date(processedTime).getTime();\n              const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n\n              console.log(`\\n   Record: ${patientName} @ ${new Date(processedTime).toLocaleString()}`);\n              console.log(`   Searching for PDFs matching: neurosense-report-${sanitizedName}-*.pdf`);\n\n              // Find PDFs matching patient name\n              const matchingPdfs = data.pdfs.filter(pdf => {\n                const pdfNameLower = pdf.name.toLowerCase();\n                return pdfNameLower.includes(`neurosense-report-${sanitizedName}-`) &&\n                       pdfNameLower.endsWith('.pdf');\n              });\n\n              console.log(`   Found ${matchingPdfs.length} PDFs for this patient`);\n\n              if (matchingPdfs.length > 0) {\n                // Find PDF with closest timestamp (within 60 seconds)\n                let bestMatch = null;\n                let smallestDiff = Infinity;\n\n                for (const pdf of matchingPdfs) {\n                  // Extract timestamp from filename: neurosense-report-name-TIMESTAMP.pdf\n                  const match = pdf.name.match(/-(\\d+)\\.pdf$/);\n                  if (match) {\n                    const pdfTimestamp = parseInt(match[1]);\n                    const diff = Math.abs(pdfTimestamp - recordTimestamp);\n                    console.log(`      ${pdf.name}: timestamp diff = ${diff}ms (${(diff/1000).toFixed(1)}s)`);\n\n                    // Accept if within 60 seconds (60000ms)\n                    if (diff < 60000 && diff < smallestDiff) {\n                      smallestDiff = diff;\n                      bestMatch = pdf;\n                    }\n                  }\n                }\n\n                if (bestMatch) {\n                  console.log(`   ‚úÖ MATCH FOUND! ${bestMatch.name} (${(smallestDiff/1000).toFixed(1)}s difference)`);\n                  console.log(`   URL: ${bestMatch.url}`);\n                  record.pdfUrl = bestMatch.url;\n                  await DatabaseService.update('algorithmResults', record.id, record);\n                  updatedCount++;\n                } else {\n                  console.log(`   ‚ö†Ô∏è PDFs found but timestamp difference too large (>60s)`);\n                }\n              } else {\n                console.log(`   ‚ùå No PDFs found for patient: ${sanitizedName}`);\n              }\n            }\n          }\n        } catch (supabaseErr) {\n          console.log('‚ö†Ô∏è Could not fetch from Supabase, trying local storage...');\n        }\n\n        // Step 2: If Supabase fails, try local storage\n        for (const record of recordsWithoutPdf) {\n          if (record.pdfUrl) continue; // Already updated from Supabase\n\n          try {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n            const timestamp = new Date(processedTime).getTime();\n            const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n            const possibleFilename = `neurosense-report-${sanitizedName}-${timestamp}.pdf`;\n            const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n            const backendBaseUrl = apiUrl.replace('/api', '');\n            const testUrl = `${backendBaseUrl}/uploads/${possibleFilename}`;\n\n            // Test if file exists locally\n            const response = await fetch(testUrl, { method: 'HEAD' });\n            if (response.ok) {\n              console.log(`‚úÖ Found local PDF for record ${record.id}: ${testUrl}`);\n              record.pdfUrl = `/uploads/${possibleFilename}`;\n              await DatabaseService.update('algorithmResults', record.id, record);\n              updatedCount++;\n            }\n          } catch (err) {\n            console.log(`‚ùå Could not find PDF for record ${record.id}`);\n          }\n        }\n\n        if (updatedCount > 0) {\n          console.log(`‚úÖ Auto-fixed ${updatedCount} records with PDF URLs`);\n          // Reload the results after updating\n          const updatedResults = await DatabaseService.get('algorithmResults');\n          const updatedPatientResults = updatedResults.filter(r => r.patientId === patientId);\n          setProcessingHistory(updatedPatientResults);\n\n          updatedPatientResults.forEach((record, idx) => {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            console.log(`   Record ${idx + 1}:`, {\n              processedAt: processedTime,\n              hasPdfUrl: !!record.pdfUrl,\n              pdfUrl: record.pdfUrl || 'NOT SET',\n              pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n            });\n          });\n          return;\n        }\n      }\n\n      patientResults.forEach((record, idx) => {\n        const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n        console.log(`   Record ${idx + 1}:`, {\n          processedAt: processedTime,\n          hasPdfUrl: !!record.pdfUrl,\n          pdfUrl: record.pdfUrl || 'NOT SET',\n          pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n        });\n      });\n\n      setProcessingHistory(patientResults);\n    } catch (error) {\n      console.error('Error loading processing history:', error);\n      setProcessingHistory([]);\n    }\n  };\n\n  const handleGenerateReport = (patient) => {\n    setSelectedPatient(patient);\n    setShowProcessingUI(true);\n    // Reset upload states\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setIsSaved(false);\n    setPdfUrl(null);\n    setIsSaving(false);\n  };\n\n  const handleBackToList = () => {\n    setShowProcessingUI(false);\n    setSelectedPatient(null);\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setProcessingHistory([]);\n    setIsSaved(false);\n    setIsSaving(false);\n    // Reload patients to update status\n    loadPatients();\n  };\n\n  // Helper function to get patient name (handles different field names)\n  const getPatientName = (patient) => {\n    return patient?.fullName || patient?.full_name || patient?.name || patient?.email || 'Unknown Patient';\n  };\n\n  // Helper function to get status badge\n  const getStatusBadge = (status, lastProcessed) => {\n    if (status === 'completed') {\n      return (\n        <div className=\"flex flex-col items-start\">\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n            <CheckCircle className=\"h-3 w-3 mr-1\" />\n            Completed\n          </span>\n          {lastProcessed && (\n            <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              {new Date(lastProcessed).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n            </span>\n          )}\n        </div>\n      );\n    }\n    return (\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\">\n        <Activity className=\"h-3 w-3 mr-1\" />\n        Pending\n      </span>\n    );\n  };\n\n  // Filter patients based on search and filters\n  const filteredPatients = patients.filter(patient => {\n    const matchesSearch = searchTerm === '' ||\n      getPatientName(patient).toLowerCase().includes(searchTerm.toLowerCase()) ||\n      patient.email?.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesClinic = selectedClinicFilter === '' || patient.clinicId === selectedClinicFilter;\n\n    const matchesDate = dateFilter === '' ||\n      (patient.lastProcessed && new Date(patient.lastProcessed).toISOString().split('T')[0] === dateFilter);\n\n    return matchesSearch && matchesClinic && matchesDate;\n  });\n\n  // Group filtered patients by clinic\n  const groupedPatients = clinics.map(clinic => ({\n    clinic,\n    patients: filteredPatients.filter(p => p.clinicId === clinic.id)\n  })).filter(group => group.patients.length > 0);\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedClinicFilter('');\n    setDateFilter('');\n  };\n\n  const handleFileUpload = (type, event) => {\n    const file = event.target.files[0];\n    if (file) {\n      if (type === 'eo') {\n        setEyesOpenFile(file);\n      } else {\n        setEyesClosedFile(file);\n      }\n      // Reset processing state when new files are uploaded\n      setProcessingComplete(false);\n      setResults(null);\n      setConsoleLog([]);\n      setProgress(0);\n      setIsSaved(false);\n      setIsSaving(false);\n      setPdfUrl(null);\n    }\n  };\n\n  const processQEEGFiles = async () => {\n    setIsProcessing(true);\n    setConsoleLog([]);\n    setProgress(0);\n\n    try {\n      // Console log: Starting process\n      setConsoleLog(prev => [...prev, 'üöÄ Starting QEEG analysis...']);\n      setProgress(10);\n\n      // Create FormData to send files\n      const formData = new FormData();\n      formData.append('eyesOpen', eyesOpenFile);\n      formData.append('eyesClosed', eyesClosedFile);\n      formData.append('patientId', selectedPatient.id);\n      formData.append('patientName', getPatientName(selectedPatient));\n      formData.append('clinicName', selectedPatient.clinicName);\n      // Add complete patient data for PDF\n      formData.append('dateOfBirth', selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified');\n      formData.append('age', selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A');\n      formData.append('gender', selectedPatient.gender || 'Not specified');\n      formData.append('handedness', selectedPatient.handedness || 'Right');\n\n      setConsoleLog(prev => [...prev, 'üì§ Uploading files to server...']);\n      setProgress(20);\n\n      // Validate file sizes before upload (50MB limit)\n      const maxFileSize = 50 * 1024 * 1024; // 50MB\n      if (eyesOpenFile.size > maxFileSize || eyesClosedFile.size > maxFileSize) {\n        const oversizedFile = eyesOpenFile.size > maxFileSize ? eyesOpenFile : eyesClosedFile;\n        const fileSizeMB = (oversizedFile.size / (1024 * 1024)).toFixed(2);\n        throw new Error(`File \"${oversizedFile.name}\" is too large (${fileSizeMB}MB). Maximum file size is 50MB. Please compress or split the file.`);\n      }\n\n      // Call backend API with timeout\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 300000); // 5 minute timeout for large files\n\n      let response;\n      try {\n        response = await fetch(`${apiUrl}/qeeg/process`, {\n          method: 'POST',\n          body: formData,\n          signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n      } catch (fetchError) {\n        clearTimeout(timeoutId);\n        if (fetchError.name === 'AbortError') {\n          throw new Error('Upload timed out after 5 minutes. Please check: 1) File size (<50MB), 2) Backend is running (npm run dev:backend), 3) Internet connection is stable. Try compressing PDF files if too large.');\n        }\n        // Check if it's a network error (backend not running)\n        if (fetchError.message.includes('Failed to fetch') || fetchError.message.includes('fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure the backend is running on port 5000. Run \"npm run dev:backend\" to start the server.');\n        }\n        throw fetchError;\n      }\n\n      setConsoleLog(prev => [...prev, 'üìä Parsing QEEG data tables...']);\n      setProgress(40);\n\n      if (!response.ok) {\n        let errorMessage = 'Failed to process QEEG files';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n\n          // Add specific error messages based on error code\n          if (errorData.code === 'LIMIT_FILE_SIZE') {\n            errorMessage = 'File size exceeds the maximum limit of 50MB. Please compress your files or split them into smaller parts.';\n          } else if (errorData.code === 'GEMINI_QUOTA_EXCEEDED' || response.status === 429) {\n            // Extract retry time if available in error message\n            let retryTime = null;\n            const retryMatch = errorData.message?.match(/retry in ([\\d.]+)s/i);\n            if (retryMatch) {\n              retryTime = Math.ceil(parseFloat(retryMatch[1]));\n            }\n\n            errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                         'The Gemini AI service has reached its daily limit (20 requests/day).\\n\\n' +\n                         '‚úÖ Quick Solutions:\\n' +\n                         (retryTime ? `‚Ä¢ Wait ${retryTime} seconds and try again (quota will reset)\\n` : '‚Ä¢ Wait a few minutes and try again\\n') +\n                         '‚Ä¢ Re-upload the SAME files you processed before (uses cache, no quota needed)\\n' +\n                         '‚Ä¢ Contact administrator to upgrade API plan\\n\\n' +\n                         'üí° Tip: The system remembers files you\\'ve already processed!';\n          } else if (response.status === 503) {\n            errorMessage = 'Backend service is unavailable. Please ensure the server is running.';\n          } else if (response.status === 413) {\n            errorMessage = 'File payload is too large. Maximum allowed size is 50MB.';\n          } else if (response.status === 500) {\n            // Parse detailed error from server for 500 errors\n            if (errorData.message && (errorData.message.includes('Gemini') || errorData.message.includes('quota') || errorData.message.includes('429'))) {\n              // Extract retry time from detailed error\n              let retryTime = null;\n              const retryMatch = errorData.message.match(/retry in ([\\d.]+)s/i);\n              if (retryMatch) {\n                retryTime = Math.ceil(parseFloat(retryMatch[1]));\n              }\n\n              // Check if it's specifically a quota error\n              if (errorData.message.includes('quota') || errorData.message.includes('429')) {\n                errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                             'Google Gemini API has reached its free tier limit.\\n\\n' +\n                             '‚úÖ What to do:\\n' +\n                             (retryTime ? `1. Wait ${retryTime} seconds and try again\\n` : '1. Wait a few minutes and try again\\n') +\n                             '2. Or re-upload the SAME files (cached, no quota used)\\n' +\n                             '3. Or contact admin to upgrade API plan\\n\\n' +\n                             'üìä Free tier: 20 requests per day\\n' +\n                             'üí∞ Upgrade: https://ai.google.dev/pricing';\n              } else if (errorData.message && (\n                errorData.message.includes('PDF text extraction') ||\n                errorData.message.includes('Missing power tables') ||\n                errorData.code === 'PDF_EXTRACTION_FAILED'\n              )) {\n                // PDF extraction specific error\n                errorMessage = '‚ö†Ô∏è PDF Extraction Error\\n\\n' +\n                             errorData.message + '\\n\\n' +\n                             'üí° Troubleshooting:\\n' +\n                             '1. Verify PDFs contain QEEG frequency band tables\\n' +\n                             '2. Ensure PDFs are not password-protected\\n' +\n                             '3. Check if PDFs are scanned images (need OCR)\\n' +\n                             '4. Try exporting PDFs in a different format\\n' +\n                             '5. Contact support if issue persists';\n              } else {\n                errorMessage = '‚ö†Ô∏è Gemini AI Service Error\\n\\n' +\n                             'There was an issue with the AI service.\\n\\n' +\n                             'Please try again in a moment or contact support if the issue persists.';\n              }\n            }\n          }\n        } catch (e) {\n          // If error response is not JSON, use status text\n          errorMessage = `Server error (${response.status}): ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data = await response.json();\n\n      // Capture data type (raw or zscore)\n      if (data.data.dataType) {\n        setDataType(data.data.dataType);\n        console.log('üìä Data type:', data.data.dataType);\n        if (data.data.dataType === 'zscore') {\n          setConsoleLog(prev => [...prev, 'üî¨ Z-Score mode detected']);\n        }\n      }\n\n      // Auto-set PDF URL if returned from backend\n      if (data.data.pdfUrl) {\n        setPdfUrl(data.data.pdfUrl);\n        console.log('‚úÖ PDF auto-generated:', data.data.pdfUrl);\n        setConsoleLog(prev => [...prev, 'üìÑ PDF report generated automatically']);\n      }\n\n      setConsoleLog(prev => [...prev, 'üßÆ Calculating 7 brain health parameters...']);\n      setProgress(60);\n\n      // Simulate calculation steps for better UX\n      await new Promise(resolve => setTimeout(resolve, 500));\n      setConsoleLog(prev => [...prev, '  ‚úì Cognition parameter calculated']);\n      setProgress(65);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Stress parameter calculated']);\n      setProgress(70);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Focus & Attention parameter calculated']);\n      setProgress(75);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Burnout & Fatigue parameter calculated']);\n      setProgress(80);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Emotional Regulation parameter calculated']);\n      setProgress(85);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Learning parameter calculated']);\n      setProgress(90);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Creativity parameter calculated']);\n      setProgress(95);\n\n      // Convert API results to display format with NaN/Infinity protection\n      const finalResults = data.data.results.map(param => {\n        // Sanitize score values to prevent NaN/Infinity\n        const sanitizedScore = Number.isFinite(param.score) ? param.score : 0;\n        const sanitizedMaxScore = Number.isFinite(param.maxScore) && param.maxScore > 0 ? param.maxScore : 3;\n        const percentage = Math.round((sanitizedScore / sanitizedMaxScore) * 100);\n\n        // Sanitize metrics\n        const sanitizedMetrics = (param.metrics || []).map(metric => ({\n          ...metric,\n          score: Number.isFinite(metric.score) ? metric.score : 0,\n          value: Number.isFinite(metric.value) ? metric.value : 0\n        }));\n\n        return {\n          parameter: param.name,\n          score: Number.isFinite(percentage) ? percentage : 0,\n          rawScore: `${sanitizedScore}/${sanitizedMaxScore}`,\n          status: param.classification,\n          color: param.classification === 'High' ? 'green' :\n                 param.classification === 'Medium' ? 'blue' : 'orange',\n          metrics: sanitizedMetrics\n        };\n      });\n\n      setConsoleLog(prev => [...prev, '‚úÖ Analysis complete!']);\n      setConsoleLog(prev => [...prev, `üìà Overall Score: ${data.data.overallScore}/${data.data.maxScore}`]);\n      setProgress(100);\n\n      setResults(finalResults);\n      setIsProcessing(false);\n      setProcessingComplete(true);\n      setIsSaved(false); // Mark as not saved yet\n\n      toast.success('QEEG analysis completed successfully!');\n\n    } catch (error) {\n      console.error('Error processing QEEG files:', error);\n      setConsoleLog(prev => [...prev, `‚ùå Error: ${error.message}`]);\n      setIsProcessing(false);\n      toast.error(error.message || 'Failed to process QEEG files');\n    }\n  };\n\n  const saveResultsToDatabase = async (resultData) => {\n    if (!resultData) {\n      toast.error('No results to save');\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      toast.loading('Saving results to database...', { id: 'save-results' });\n\n      console.log('üíæ Saving results to database...');\n\n      // PDF should already exist from auto-generation\n      if (!pdfUrl) {\n        console.warn('‚ö†Ô∏è No PDF URL available - PDF may not have been generated');\n      }\n\n      const algorithmResult = {\n        // Don't specify ID - let database auto-generate UUID\n        patientId: selectedPatient.id,\n        clinicId: selectedPatient.clinicId,\n        algorithmName: 'Algorithm 1 - 7 Parameters',\n        inputData: {\n          patientName: getPatientName(selectedPatient),\n          clinicName: selectedPatient.clinicName,\n          eyesOpenFile: eyesOpenFile?.name,\n          eyesClosedFile: eyesClosedFile?.name,\n          processedAt: new Date().toISOString(),\n          processedBy: 'super_admin'\n        },\n        outputData: resultData,\n        pdfUrl: pdfUrl || null,\n        status: 'completed',\n        errorMessage: null\n      };\n\n      console.log('üíæ Saving to database...');\n      console.log('   Patient:', algorithmResult.inputData.patientName);\n      console.log('   PDF URL:', pdfUrl || 'NOT SET');\n      console.log('   PDF Type:', pdfUrl ? (pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None');\n\n      await DatabaseService.add('algorithmResults', algorithmResult);\n\n      setIsSaved(true);\n      setIsSaving(false);\n\n      toast.success('‚úÖ Results saved successfully!', { id: 'save-results' });\n\n      // Reload history and patient list to update status\n      loadProcessingHistory(selectedPatient.id);\n      loadPatients();\n    } catch (error) {\n      console.error('‚ùå Error saving results:', error);\n      setIsSaving(false);\n      toast.error('‚ùå Failed to save results: ' + error.message, { id: 'save-results' });\n    }\n  };\n\n  const handleSaveResults = async () => {\n    if (results) {\n      try {\n        console.log('üíæ Saving results to database...');\n\n        // Step 1: Check if existing PDF URL available (no generation!)\n        let finalPdfUrl = pdfUrl;\n\n        if (!finalPdfUrl) {\n          console.log('üîç Checking for existing PDF in database...');\n          const existingPdf = await findExistingPDF();\n\n          if (existingPdf) {\n            console.log('‚úÖ Found existing PDF URL:', existingPdf);\n            finalPdfUrl = existingPdf;\n            setPdfUrl(existingPdf);\n          } else {\n            console.log('‚ÑπÔ∏è No existing PDF found - save data only, PDF can be generated later');\n          }\n        }\n\n        // Step 2: Save results to database (with or without PDF URL)\n        await saveResultsToDatabase(results);\n\n        // Step 3: Show success message\n        if (finalPdfUrl) {\n          toast.success('‚úÖ Results saved! PDF is available for download.');\n        } else {\n          toast.success('‚úÖ Results saved! Generate PDF from history to get report.');\n        }\n\n        console.log('‚úÖ Save complete! PDF URL:', finalPdfUrl || 'Not available');\n\n      } catch (error) {\n        console.error('‚ùå Error saving results:', error);\n        toast.error('Failed to save results: ' + error.message);\n      }\n    }\n  };\n\n  // New function: Generate and download PDF separately\n  const handleGenerateAndDownloadPDF = async () => {\n    if (!results) {\n      toast.error('No results to generate PDF from');\n      return;\n    }\n\n    try {\n      console.log('üìÑ Starting PDF generation...');\n      toast.loading('Generating NeuroSense PDF Report...', { id: 'generate-pdf' });\n\n      const pdfResult = await generatePDFReport(results);\n\n      if (pdfResult && pdfResult.url) {\n        setPdfUrl(pdfResult.url);\n        console.log('‚úÖ PDF generated successfully:', pdfResult.url);\n        toast.success('PDF Report generated!', { id: 'generate-pdf' });\n\n        // Auto-download the newly generated PDF\n        setTimeout(() => {\n          console.log('üì• Auto-downloading newly generated PDF...');\n          handleDownloadPDF();\n        }, 500);\n      } else {\n        console.error('‚ö†Ô∏è PDF generation returned no URL');\n        toast.error('Failed to generate PDF', { id: 'generate-pdf' });\n      }\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      toast.error('Failed to generate PDF: ' + error.message, { id: 'generate-pdf' });\n    }\n  };\n\n  // Helper function to find existing PDF for this patient\n  const findExistingPDF = async () => {\n    try {\n      if (!selectedPatient || !selectedPatient.id) return null;\n\n      // Get patient's processing history\n      const allResults = await DatabaseService.get('algorithmResults');\n      const patientResults = allResults.filter(r => r.patientId === selectedPatient.id);\n\n      console.log(`üîç Found ${patientResults.length} existing records for patient ${getPatientName(selectedPatient)}`);\n\n      // Find most recent record with a PDF\n      const recordsWithPdf = patientResults\n        .filter(r => r.pdfUrl && r.pdfUrl !== 'null' && r.pdfUrl !== '')\n        .sort((a, b) => {\n          const dateA = new Date(a.inputData?.processedAt || a.processedAt || a.createdAt || 0);\n          const dateB = new Date(b.inputData?.processedAt || b.processedAt || b.createdAt || 0);\n          return dateB - dateA; // Most recent first\n        });\n\n      if (recordsWithPdf.length > 0) {\n        const latestPdf = recordsWithPdf[0].pdfUrl;\n        console.log('‚úÖ Found most recent PDF:', latestPdf);\n        return latestPdf;\n      }\n\n      console.log('‚ùå No existing PDF found in database');\n      return null;\n    } catch (error) {\n      console.error('Error finding existing PDF:', error);\n      return null;\n    }\n  };\n\n  const handleExecuteCalculation = () => {\n    if (eyesOpenFile && eyesClosedFile) {\n      processQEEGFiles();\n    } else {\n      toast.error('Please upload both QEEG data files');\n    }\n  };\n\n  const handleExportResults = () => {\n    if (results) {\n      // Create CSV content\n      const csvContent = [\n        ['Parameter', 'Score (%)', 'Status'],\n        ...results.map(r => [r.parameter, r.score, r.status])\n      ].map(row => row.join(',')).join('\\n');\n\n      // Create and download file\n      const blob = new Blob([csvContent], { type: 'text/csv' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'neurosense-algorithm-results.csv';\n      a.click();\n      window.URL.revokeObjectURL(url);\n    }\n  };\n\n  const generatePDFReport = async (resultData) => {\n    if (!resultData || !selectedPatient) {\n      console.error('‚ùå Cannot generate PDF: Missing resultData or selectedPatient');\n      toast.error('Cannot generate PDF: Missing data');\n      return null;\n    }\n\n    try {\n      console.log('üîß Preparing patient data...');\n\n      // Prepare patient data - FIXED: Use current date for recording, not DOB\n      const patientData = {\n        name: getPatientName(selectedPatient),\n        dateOfRecording: new Date().toISOString().split('T')[0], // TODAY'S DATE, not DOB!\n        dateOfBirth: selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified',\n        age: selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A',\n        gender: selectedPatient.gender || 'Not specified',\n        handedness: selectedPatient.handedness || 'Right', // Default to Right if not specified\n        patientId: selectedPatient.id,\n        occupation: selectedPatient.occupation || 'Not specified',\n        symptoms: selectedPatient.symptoms || []\n      };\n\n      console.log('üë§ Patient Data (Fixed):', patientData);\n      console.log('   Name:', patientData.name);\n      console.log('   Recording Date:', patientData.dateOfRecording);\n      console.log('   DOB:', patientData.dateOfBirth);\n      console.log('   Age:', patientData.age);\n      console.log('   Gender:', patientData.gender);\n      console.log('   Handedness:', patientData.handedness);\n\n      // Prepare algorithm results with STRONG validation to avoid NaN errors\n      const algorithmResults = {\n        parameters: resultData.map(result => {\n          const scoreParts = (result.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          const maxScore = parseInt(scoreParts[1]) || 3;\n\n          // Clean metrics to remove any NaN values\n          const cleanMetrics = (result.metrics || []).map(metric => ({\n            name: metric.name || 'Unknown',\n            score: isNaN(metric.score) ? 0 : (parseInt(metric.score) || 0),\n            value: isNaN(metric.value) ? 0 : (parseFloat(metric.value) || 0),\n            threshold: metric.threshold || 'Not provided'\n          }));\n\n          return {\n            name: result.parameter || 'Unknown Parameter',\n            score: isNaN(score) ? 0 : score,\n            maxScore: isNaN(maxScore) ? 3 : maxScore,\n            classification: result.status || 'Unknown',\n            metrics: cleanMetrics\n          };\n        }),\n        overallScore: resultData.reduce((sum, r) => {\n          const scoreParts = (r.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          return sum + (isNaN(score) ? 0 : score);\n        }, 0)\n      };\n\n      console.log('üìä Algorithm Results (NaN-free):', algorithmResults);\n\n      // EXTRA SAFETY: Double-check for any NaN in the data\n      const dataString = JSON.stringify(algorithmResults);\n      if (dataString.includes('NaN')) {\n        console.error('‚ö†Ô∏è WARNING: Found NaN in algorithm results!');\n        console.error('Raw data:', algorithmResults);\n        throw new Error('Data contains NaN values. Please check the calculation results.');\n      }\n\n      console.log('üìä Algorithm Results:', algorithmResults);\n\n      // Prepare QEEG data (use sample data if not available)\n      const qeegData = {\n        EC: {\n          absolute: { Fz: { Delta: 5.2, Theta: 4.1, Alpha: 8.3, Beta: 6.2, HiBeta: 3.1 } },\n          relative: { Pz: { Alpha: 45.2 } },\n          special: { alphaPeak: 10.3, O1: 10.1 }\n        },\n        EO: {\n          absolute: { Fz: { Theta: 3.8, Beta: 3.2, HiBeta: 2.5 } },\n          relative: { Pz: { Alpha: 28.7 } }\n        }\n      };\n\n      // Call backend API to generate PDF\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const pdfEndpoint = `${apiUrl}/qeeg/generate-pdf`;\n\n      console.log('üåê Calling backend API:', pdfEndpoint);\n      console.log('üì° Request payload size:', JSON.stringify({ patientData, algorithmResults, qeegData }).length, 'bytes');\n\n      // Add timeout handling\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 60000); // 60 second timeout (increased for Gemini AI)\n\n      const response = await fetch(pdfEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          patientData,\n          algorithmResults,\n          qeegData\n        }),\n        signal: controller.signal\n      }).catch(error => {\n        clearTimeout(timeoutId);\n        if (error.name === 'AbortError') {\n          throw new Error('PDF generation timed out after 60 seconds. Please check: 1) Backend is running, 2) Gemini API key is configured, 3) Internet connection is stable.');\n        }\n        if (error.message.includes('Failed to fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure backend is running on port 5000 (run: npm run dev:backend)');\n        }\n        throw error;\n      });\n\n      clearTimeout(timeoutId);\n\n      console.log('üì° Backend response status:', response.status);\n      console.log('üì° Backend response headers:', Object.fromEntries(response.headers.entries()));\n\n      if (!response.ok) {\n        let errorMessage = `Server returned ${response.status}`;\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n          console.error('‚ùå Backend error data:', errorData);\n        } catch (e) {\n          const errorText = await response.text();\n          errorMessage = errorText || errorMessage;\n          console.error('‚ùå Backend error text:', errorText);\n        }\n        throw new Error(`Failed to generate PDF: ${errorMessage}`);\n      }\n\n      const data = await response.json();\n      console.log('üì¶ Backend response data:', data);\n\n      if (!data || !data.success || !data.data) {\n        console.error('‚ùå Invalid response format:', data);\n        throw new Error('Invalid response from server');\n      }\n\n      // Use the complete URL from backend instead of constructing it\n      const pdfResult = {\n        url: data.data.url, // Backend already provides complete URL\n        path: data.data.path,\n        filename: data.data.filename\n      };\n\n      console.log('‚úÖ PDF generated successfully!', pdfResult);\n      console.log('‚úÖ PDF URL:', pdfResult.url);\n\n      return pdfResult;\n\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      console.error('‚ùå Error name:', error.name);\n      console.error('‚ùå Error message:', error.message);\n\n      if (error.message && error.stack) {\n        console.error('‚ùå Error stack:', error.stack);\n      }\n\n      // Provide specific error messages based on error type\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\n        console.error('‚ùå NETWORK ERROR: Cannot connect to backend server');\n        console.error('‚ùå Please ensure backend server is running on http://localhost:5000');\n        toast.error('Cannot connect to server. Please ensure backend is running on port 5000.');\n      } else if (error.name === 'AbortError') {\n        console.error('‚ùå TIMEOUT ERROR: PDF generation took too long');\n        toast.error('PDF generation timed out. Server might be overloaded.');\n      } else {\n        console.error('‚ùå PDF GENERATION ERROR:', error.message);\n        toast.error(`PDF generation failed: ${error.message}`);\n      }\n\n      return null;\n    }\n  };\n\n  const handleDownloadPDF = async () => {\n    if (!pdfUrl) {\n      toast.error('PDF not available. Please save results first.');\n      return;\n    }\n\n    try {\n      toast.loading('Downloading PDF...', { id: 'download-pdf' });\n\n      // Construct full backend URL\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\n      const backendBaseUrl = apiUrl.replace('/api', ''); // Remove /api to get base URL\n\n      // Handle both Supabase URLs and local URLs\n      let fullPdfUrl;\n      if (pdfUrl.startsWith('http')) {\n        // It's already a full URL (Supabase)\n        fullPdfUrl = pdfUrl;\n      } else {\n        // It's a local path, construct full URL\n        fullPdfUrl = `${backendBaseUrl}${pdfUrl}`;\n      }\n\n      console.log('üîΩ Download Info:', {\n        originalPdfUrl: pdfUrl,\n        backendBaseUrl,\n        fullPdfUrl,\n        isSupabase: pdfUrl.startsWith('http')\n      });\n\n      // For local files, try direct window.open first (simpler approach)\n      if (!pdfUrl.startsWith('http')) {\n        console.log('üì• Using direct download method for local file');\n\n        // Create a hidden link and click it\n        const link = document.createElement('a');\n        link.href = fullPdfUrl;\n        link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n        link.target = '_blank';\n\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        toast.success('PDF download started!', { id: 'download-pdf' });\n        return;\n      }\n\n      // For Supabase URLs, use fetch method\n      console.log('üì• Using fetch method for Supabase URL');\n\n      const response = await fetch(fullPdfUrl);\n\n      if (!response.ok) {\n        console.error('‚ùå Download failed:', {\n          status: response.status,\n          statusText: response.statusText\n        });\n        throw new Error(`Server returned ${response.status}: ${response.statusText}`);\n      }\n\n      // Convert to blob\n      const blob = await response.blob();\n\n      // Verify blob is valid\n      if (!blob || blob.size === 0) {\n        throw new Error('Downloaded file is empty');\n      }\n\n      console.log('‚úÖ PDF fetched successfully, size:', (blob.size / 1024).toFixed(2), 'KB');\n\n      // Create download link\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n      // Trigger download\n      document.body.appendChild(link);\n      link.click();\n\n      // Cleanup\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(downloadUrl);\n      }, 100);\n\n      toast.success('PDF downloaded successfully!', { id: 'download-pdf' });\n\n    } catch (error) {\n      console.error('‚ùå Download error:', {\n        error: error.message,\n        pdfUrl,\n        stack: error.stack\n      });\n\n      // Provide more helpful error messages\n      let errorMessage = 'Failed to download PDF';\n      if (error.message.includes('404')) {\n        errorMessage = 'PDF file not found on server';\n      } else if (error.message.includes('Failed to fetch')) {\n        errorMessage = 'Network error. Please check your connection.';\n      } else {\n        errorMessage = `Download failed: ${error.message}`;\n      }\n\n      toast.error(errorMessage, { id: 'download-pdf' });\n    }\n  };\n\n  const calculateAge = (dateOfBirth) => {\n    if (!dateOfBirth) return 'N/A';\n    const today = new Date();\n    const birthDate = new Date(dateOfBirth);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    return age;\n  };\n\n  // Helper function to get color based on score\n  // 1/3 = Red, 2/3 = Yellow, 3/3 = Green\n  const getScoreColor = (rawScore) => {\n    if (!rawScore) return 'gray';\n\n    const [score, maxScore] = rawScore.split('/').map(Number);\n\n    if (score === 1) return 'red';      // 1/3\n    if (score === 2) return 'yellow';   // 2/3\n    if (score === 3) return 'green';    // 3/3\n\n    return 'gray';\n  };\n\n  const getStatusColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'text-red-500';\n      case 'yellow': return 'text-yellow-500';\n      case 'green': return 'text-green-500';\n      default: return 'text-gray-500';\n    }\n  };\n\n  const getStatusBgColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    if (color === 'green') return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n    if (color === 'yellow') return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n    if (color === 'red') return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400';\n    return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400';\n  };\n\n  const getProgressBarColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'bg-red-500';\n      case 'yellow': return 'bg-yellow-500';\n      case 'green': return 'bg-green-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading patients...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Patient List View\n  if (!showProcessingUI) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n          <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n          <p className=\"text-primary-light mt-2\">Select a patient to generate Algorithm 1 report</p>\n        </div>\n\n        {/* Filter Bar */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4\">\n          <div className=\"flex flex-col lg:flex-row gap-4\">\n            {/* Patient Search */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Search Patient\n              </label>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search by name or email...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clinic Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Clinic\n              </label>\n              <div className=\"relative\">\n                <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <select\n                  value={selectedClinicFilter}\n                  onChange={(e) => setSelectedClinicFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary appearance-none\"\n                >\n                  <option value=\"\">All Clinics</option>\n                  {clinics.map(clinic => (\n                    <option key={clinic.id} value={clinic.id}>\n                      {clinic.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            {/* Date Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Date\n              </label>\n              <div className=\"relative\">\n                <Calendar className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"date\"\n                  value={dateFilter}\n                  onChange={(e) => setDateFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clear Filters Button */}\n            {(searchTerm || selectedClinicFilter || dateFilter) && (\n              <div className=\"flex items-end\">\n                <button\n                  onClick={clearFilters}\n                  className=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  <span>Clear</span>\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Active Filters Display */}\n          {(searchTerm || selectedClinicFilter || dateFilter) && (\n            <div className=\"mt-3 flex flex-wrap gap-2\">\n              {searchTerm && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\">\n                  Search: \"{searchTerm}\"\n                </span>\n              )}\n              {selectedClinicFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400\">\n                  Clinic: {clinics.find(c => c.id === selectedClinicFilter)?.name}\n                </span>\n              )}\n              {dateFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n                  Date: {new Date(dateFilter).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n                </span>\n              )}\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 self-center\">\n                ({filteredPatients.length} {filteredPatients.length === 1 ? 'patient' : 'patients'} found)\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Patient List - Clinic-wise */}\n        <div className=\"space-y-4\">\n          {groupedPatients.length > 0 ? (\n            groupedPatients.map(({ clinic, patients: clinicPatients }) => (\n            <div key={clinic.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              {/* Clinic Header */}\n              <div className=\"bg-accent-light dark:bg-primary/20 border-b border-primary-light dark:border-primary px-6 py-3\">\n                <div className=\"flex items-center\">\n                  <Building2 className=\"h-5 w-5 text-primary mr-2\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                    {clinic.name}\n                  </h3>\n                  <span className=\"ml-3 text-sm text-gray-600 dark:text-gray-400\">\n                    ({clinicPatients.length} {clinicPatients.length === 1 ? 'patient' : 'patients'})\n                  </span>\n                </div>\n              </div>\n\n              {/* Patient Table */}\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Patient Name\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Email\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Previous Scans\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Action\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n                    {clinicPatients.map(patient => (\n                      <tr key={patient.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex items-center\">\n                            <User className=\"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2\" />\n                            <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                              {getPatientName(patient)}\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          {patient.email || 'N/A'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          <span className=\"flex items-center\">\n                            <History className=\"h-4 w-4 mr-1\" />\n                            {patient.totalScans || 0} {patient.totalScans === 1 ? 'scan' : 'scans'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          {getStatusBadge(patient.algorithmStatus, patient.lastProcessed)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right\">\n                          <button\n                            onClick={() => handleGenerateReport(patient)}\n                            className=\"bg-primary hover:bg-navy-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-md flex items-center ml-auto\"\n                          >\n                            <FileText className=\"h-4 w-4 mr-2\" />\n                            {patient.algorithmStatus === 'completed' ? 'View/Generate' : 'Generate Report'}\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            ))\n          ) : (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center\">\n              <Filter className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4\" />\n              <p className=\"text-gray-600 dark:text-gray-400 font-medium\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'No patients match your filters'\n                  : 'No patients found'\n                }\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-2\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'Try adjusting your search criteria or clear filters'\n                  : 'Patients will appear here once they are registered in the system'\n                }\n              </p>\n              {(searchTerm || selectedClinicFilter || dateFilter) && (\n                <button\n                  onClick={clearFilters}\n                  className=\"mt-4 px-4 py-2 bg-primary hover:bg-navy-700 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Clear Filters\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Processing UI View\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Back Button */}\n      <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n        <button\n          onClick={handleBackToList}\n          className=\"flex items-center text-primary-light hover:text-white mb-3 transition-colors\"\n        >\n          <ArrowLeft className=\"h-5 w-5 mr-2\" />\n          Back to Patient List\n        </button>\n        <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n        <div className=\"flex items-center gap-3 mt-2\">\n          <p className=\"text-primary-light\">\n            Processing for: <span className=\"font-semibold\">{getPatientName(selectedPatient)}</span> | {selectedPatient?.clinicName}\n          </p>\n          {dataType === 'zscore' && (\n            <span className=\"inline-flex items-center px-3 py-1 bg-purple-500/20 text-purple-200 text-xs font-medium rounded-full border border-purple-400/30\">\n              üî¨ Z-Score Mode\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Panel - QEEG Data Input */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            QEEG Data Input\n          </h2>\n          <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <p className=\"text-xs text-blue-800 dark:text-blue-300\">\n              <span className=\"font-semibold\">‚ÑπÔ∏è Note:</span> Data will be extracted from <strong>pages 13 & 24</strong> of both PDF files\n            </p>\n          </div>\n\n          {/* Eyes Open Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EO - Eyes Open PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('eo', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesOpenFile ? eyesOpenFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesOpenFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Eyes Closed Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EC - Eyes Closed PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('ec', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesClosedFile ? eyesClosedFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesClosedFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Data Loaded Progress */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Data Loaded\n            </label>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\">\n              <div\n                className=\"bg-green-500 h-2.5 rounded-full transition-all duration-300\"\n                style={{ width: `${eyesOpenFile && eyesClosedFile ? 100 : eyesOpenFile || eyesClosedFile ? 50 : 0}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Middle Panel - Algorithm Processing */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Algorithm 1 Processing\n          </h2>\n\n          {/* Execute Button */}\n          <button\n            onClick={handleExecuteCalculation}\n            disabled={!eyesOpenFile || !eyesClosedFile || isProcessing || isSaved}\n            className={`w-full mb-6 py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n              eyesOpenFile && eyesClosedFile && !isProcessing && !isSaved\n                ? 'bg-primary hover:bg-navy-700 text-white'\n                : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n            }`}\n          >\n            <Play className=\"h-5 w-5\" />\n            <span>Execute Calculation</span>\n          </button>\n\n          {/* Processing Animation */}\n          {isProcessing && (\n            <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-center mb-6 shadow-lg\">\n              <div className=\"relative inline-block\">\n                <Activity className=\"h-16 w-16 text-white animate-pulse\" />\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-20 h-20 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                </div>\n              </div>\n              <p className=\"text-white font-medium mt-4\">Processing...</p>\n              <p className=\"text-primary-light text-sm\">{consoleLog.length} actions done</p>\n            </div>\n          )}\n\n          {/* Processing Complete */}\n          {processingComplete && (\n            <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 text-center mb-6\">\n              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-2\" />\n              <p className=\"text-green-800 dark:text-green-400 font-medium\">Processing Complete!</p>\n            </div>\n          )}\n\n          {/* Console */}\n          <div className=\"bg-gray-900 dark:bg-black rounded-lg p-4 min-h-[200px] max-h-[300px] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-gray-700\">\n              <h3 className=\"text-sm font-medium text-gray-300\">Console</h3>\n              <button\n                onClick={() => setConsoleLog([])}\n                className=\"text-xs text-gray-400 hover:text-gray-200\"\n              >\n                Clear\n              </button>\n            </div>\n            <div className=\"space-y-1 font-mono text-xs\">\n              {consoleLog.length > 0 ? (\n                consoleLog.map((log, index) => (\n                  <div key={index} className=\"text-green-400\">\n                    &gt; {log}\n                  </div>\n                ))\n              ) : (\n                <div className=\"text-gray-500 italic\">Console output will appear here...</div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Final 7 Parameter Scores */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              Final 7 Parameter Scores\n            </h2>\n            {results && (\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Total: {results.reduce((sum, r) => sum + parseInt(r.rawScore.split('/')[0]), 0)}/21\n              </span>\n            )}\n          </div>\n\n          {/* Algorithm Info Card */}\n          <div className=\"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <div className=\"flex items-start space-x-2\">\n              <Activity className=\"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0\" />\n              <div>\n                <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1\">\n                  7-Parameter Brain Health Analysis\n                </h3>\n                <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                  Each parameter is calculated from 3 sub-metrics. Score: 0-1 (Low), 2 (Medium), 3 (High).\n                  Each metric shows its calculated value and threshold comparison.\n                </p>\n                <div className=\"mt-2 text-xs text-blue-600 dark:text-blue-400\">\n                  <strong>Parameters:</strong> Cognition ‚Ä¢ Stress ‚Ä¢ Focus & Attention ‚Ä¢ Burnout & Fatigue ‚Ä¢\n                  Emotional Regulation ‚Ä¢ Learning ‚Ä¢ Creativity\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {results ? (\n            <>\n              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => {\n                  // Determine background color for main parameter card (Stress and Burnout & Fatigue)\n                  const isStressOrBurnout = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n                  let mainCardBgClass = 'border border-gray-200 dark:border-gray-700';\n\n                  if (isStressOrBurnout && result.rawScore) {\n                    const [score] = result.rawScore.split('/').map(Number);\n                    // 3/3 = Low problem (all normal) = GREEN\n                    // 2/3 = Medium = YELLOW\n                    // 1/3 or 0/3 = High problem = RED\n                    if (score === 3) {\n                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n                    } else if (score === 2) {\n                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n                    } else if (score <= 1) {\n                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n                    }\n                  }\n\n                  return (\n                    <div key={index} className={`rounded-lg p-3 ${mainCardBgClass}`}>\n                      {/* Main Parameter */}\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                          {result.parameter}\n                        </span>\n                        <div className=\"flex items-center space-x-3\">\n                          <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                          <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                            {result.status}\n                          </span>\n                        </div>\n                      </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n                      <div\n                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n                        style={{ width: `${result.score}%` }}\n                      ></div>\n                    </div>\n\n                    {/* Sub-Parameters with Calculations */}\n                    {result.metrics && result.metrics.length > 0 && (\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n                          Sub-Parameters & Calculations:\n                        </div>\n                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress and Burnout & Fatigue\n                            const isNormal = metric.score === 1;\n                            const shouldColorize = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n                            const bgColorClass = shouldColorize\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    shouldColorize\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>\n                                  <div className=\"flex items-center space-x-2\">\n                                    {metric.score === 1 ? (\n                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                    ) : (\n                                      <X className=\"h-4 w-4 text-red-500\" />\n                                    )}\n                                    <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                      {metric.score}/1\n                                    </span>\n                                  </div>\n                                </div>\n\n                              {/* Calculation Details */}\n                              <div className=\"space-y-1\">\n                                {/* Actual Value */}\n                                {metric.value !== null && metric.value !== undefined && (\n                                  <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-gray-500 dark:text-gray-400\">Value:</span>\n                                    <span className=\"font-mono text-gray-700 dark:text-gray-300\">\n                                      {typeof metric.value === 'object' && metric.value !== null\n                                        ? Object.entries(metric.value).map(([key, val]) =>\n                                            `${key}: ${typeof val === 'number' ? val.toFixed(2) : val}`\n                                          ).join(', ')\n                                        : typeof metric.value === 'number'\n                                        ? metric.value.toFixed(2)\n                                        : metric.value}\n                                    </span>\n                                  </div>\n                                )}\n\n                                {/* Description/Formula */}\n                                {metric.description && (\n                                  <div className=\"text-xs text-gray-600 dark:text-gray-400 italic mt-1\">\n                                    {metric.description}\n                                  </div>\n                                )}\n\n                                {/* Additional Details */}\n                                {metric.details && (\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n                                    {typeof metric.details === 'object'\n                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n                                          <div key={idx} className=\"flex justify-between\">\n                                            <span>{key}:</span>\n                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n                                          </div>\n                                        ))\n                                      : metric.details}\n                                  </div>\n                                )}\n                              </div>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                {/* Save Results Button (No PDF Generation) */}\n                <button\n                  onClick={handleSaveResults}\n                  disabled={isSaving || isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    isSaved\n                      ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 cursor-not-allowed'\n                      : isSaving\n                      ? 'bg-blue-400 text-white cursor-wait'\n                      : 'bg-primary hover:bg-navy-700 text-white'\n                  }`}\n                >\n                  {isSaving ? (\n                    <>\n                      <Activity className=\"h-5 w-5 animate-spin\" />\n                      <span>Saving...</span>\n                    </>\n                  ) : isSaved ? (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Saved ‚úì</span>\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Save Results</span>\n                    </>\n                  )}\n                </button>\n\n                {/* Generate PDF Button (Separate) */}\n                <button\n                  onClick={handleGenerateAndDownloadPDF}\n                  disabled={!results || !isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    !results || !isSaved\n                      ? 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      : pdfUrl\n                      ? 'bg-green-600 hover:bg-green-700 text-white'\n                      : 'bg-blue-600 hover:bg-blue-700 text-white'\n                  }`}\n                  title={!isSaved ? 'Please save results first' : 'Generate and download PDF report'}\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>{pdfUrl ? 'Download PDF Report' : 'Generate PDF Report'}</span>\n                </button>\n\n                {/* Export CSV Button */}\n                <button\n                  onClick={handleExportResults}\n                  className=\"w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md\"\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>Export CSV</span>\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <FileText className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mb-4\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Upload data files and execute calculation to see results\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Processing History */}\n      {selectedPatient && processingHistory.length > 0 && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n              <History className=\"h-5 w-5 mr-2\" />\n              Processing History for {getPatientName(selectedPatient)}\n            </h2>\n            <button\n              onClick={async () => {\n                console.log('üîÑ Manual sync triggered...');\n                toast.loading('Syncing PDFs from Supabase...', { id: 'sync-pdfs' });\n\n                try {\n                  // Force reload from database and sync\n                  await loadProcessingHistory(selectedPatient.id);\n\n                  // Count how many PDFs were found\n                  const results = await DatabaseService.get('algorithmResults');\n                  const patientResults = results.filter(r => r.patientId === selectedPatient.id);\n                  const pdfCount = patientResults.filter(r => r.pdfUrl).length;\n                  const totalCount = patientResults.length;\n\n                  toast.success(`‚úÖ Synced! ${pdfCount}/${totalCount} PDFs available`, { id: 'sync-pdfs' });\n                  console.log(`‚úÖ Sync complete: ${pdfCount}/${totalCount} records have PDFs`);\n                } catch (error) {\n                  console.error('‚ùå Sync failed:', error);\n                  toast.error('Failed to sync PDFs', { id: 'sync-pdfs' });\n                }\n              }}\n              className=\"px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-1\"\n              title=\"Fetch PDFs from Supabase bucket and update database\"\n            >\n              <Download className=\"h-3 w-3\" />\n              <span>Sync PDFs</span>\n            </button>\n          </div>\n          <div className=\"space-y-3\">\n            {processingHistory.map((record, index) => (\n              <div\n                key={record.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <Calendar className=\"h-4 w-4 text-primary\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        {new Date(record.inputData?.processedAt || record.processedAt || record.createdAt).toLocaleDateString('en-US', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </span>\n                      {/* PDF Status Badge */}\n                      {record.pdfUrl ? (\n                        <span className=\"px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full flex items-center space-x-1\">\n                          <CheckCircle className=\"h-3 w-3\" />\n                          <span>PDF Available</span>\n                        </span>\n                      ) : (\n                        <span className=\"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full\">\n                          No PDF\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 space-y-1 mb-3\">\n                      <p>üìÅ Files: {record.inputData?.eyesOpenFile || record.eyesOpenFile || 'N/A'}, {record.inputData?.eyesClosedFile || record.eyesClosedFile || 'N/A'}</p>\n                      <p>üë§ Processed by: {record.inputData?.processedBy || record.processedBy || 'Unknown'}</p>\n                      {record.pdfUrl && (\n                        <p className=\"text-green-600 dark:text-green-400\">\n                          üìÑ PDF: {record.pdfUrl.startsWith('http') ? 'Supabase ‚úì' : 'Local ‚úì'}\n                        </p>\n                      )}\n                      {!record.pdfUrl && (\n                        <p className=\"text-red-600 dark:text-red-400\">üìÑ PDF: Not available</p>\n                      )}\n                    </div>\n\n                    {/* Quick Summary of Results */}\n                    {(() => {\n                      const savedResults = record.outputData || record.results;\n                      return savedResults && savedResults.length > 0 && (\n                        <div className=\"mt-3 grid grid-cols-2 gap-2\">\n                          {savedResults.slice(0, 4).map((result, idx) => (\n                            <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                              <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                              <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                                {result.rawScore}\n                              </span>\n                            </div>\n                          ))}\n                        </div>\n                      );\n                    })()}\n                  </div>\n                  <div className=\"flex flex-col space-y-2\">\n                    {/* View Full Results Button */}\n                    <button\n                      onClick={() => {\n                        // Handle both old format (results) and new format (outputData)\n                        const savedResults = record.outputData || record.results;\n                        if (savedResults) {\n                          setResults(savedResults);\n                          setProcessingComplete(true);\n                          setIsSaved(true);\n                          // Set PDF URL if available\n                          if (record.pdfUrl) {\n                            setPdfUrl(record.pdfUrl);\n                          }\n                          toast.success('Previous results loaded!');\n                          console.log('‚úÖ Loaded results from history:', savedResults);\n                        } else {\n                          toast.error('No results found in this record');\n                          console.error('‚ùå No results found in record:', record);\n                        }\n                      }}\n                      className=\"px-3 py-2 text-sm bg-primary hover:bg-navy-700 text-white rounded-lg transition-colors flex items-center justify-center space-x-1\"\n                    >\n                      <FileText className=\"h-4 w-4\" />\n                      <span>View Results</span>\n                    </button>\n\n                    {/* Download PDF Button - Always visible */}\n                    <button\n                      onClick={async () => {\n                        if (!record.pdfUrl) {\n                          toast.error('No PDF available for this record');\n                          console.log('‚ùå No PDF URL in record:', record);\n                          return;\n                        }\n\n                        console.log('üì• Downloading PDF from record:', {\n                          processedAt: record.processedAt,\n                          pdfUrl: record.pdfUrl\n                        });\n\n                        try {\n                          toast.loading('Downloading PDF...', { id: 'history-download' });\n\n                          // Construct full URL (works with both local and Supabase URLs)\n                          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n                          const backendBaseUrl = apiUrl.replace('/api', '');\n                          const fullPdfUrl = record.pdfUrl.startsWith('http') ? record.pdfUrl : `${backendBaseUrl}${record.pdfUrl}`;\n\n                          console.log('üì• Downloading from:', fullPdfUrl);\n\n                          // Fetch the PDF file\n                          const response = await fetch(fullPdfUrl);\n                          if (!response.ok) throw new Error('Failed to fetch PDF');\n\n                          // Convert to blob\n                          const blob = await response.blob();\n\n                          // Create download link\n                          const downloadUrl = window.URL.createObjectURL(blob);\n                          const link = document.createElement('a');\n                          link.href = downloadUrl;\n                          link.download = record.pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n                          // Trigger download\n                          document.body.appendChild(link);\n                          link.click();\n\n                          // Cleanup\n                          document.body.removeChild(link);\n                          window.URL.revokeObjectURL(downloadUrl);\n\n                          toast.success('PDF downloaded successfully!', { id: 'history-download' });\n                        } catch (error) {\n                          console.error('Download error:', error);\n                          toast.error('Failed to download PDF', { id: 'history-download' });\n                        }\n                      }}\n                      disabled={!record.pdfUrl}\n                      className={`px-3 py-2 text-sm rounded-lg transition-colors flex items-center justify-center space-x-1 ${\n                        record.pdfUrl\n                          ? 'bg-blue-600 hover:bg-blue-700 text-white cursor-pointer'\n                          : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      }`}\n                      title={record.pdfUrl ? 'Download PDF Report' : 'No PDF available'}\n                    >\n                      <Download className=\"h-4 w-4\" />\n                      <span>NeuroSense Report</span>\n                    </button>\n                  </div>\n                </div>\n\n                {/* Expandable Details */}\n                {(() => {\n                  const savedResults = record.outputData || record.results;\n                  return savedResults && savedResults.length > 4 && (\n                    <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                      {savedResults.slice(4).map((result, idx) => (\n                        <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                          <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  );\n                })()}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Info Section */}\n      <div className=\"bg-accent-light dark:bg-primary/20 border border-primary-light dark:border-primary rounded-lg p-4 shadow-sm\">\n        <h3 className=\"text-sm font-medium text-primary dark:text-primary-light mb-2\">\n          About Algorithm 1 Processing\n        </h3>\n        <p className=\"text-sm text-navy-800 dark:text-gray-300\">\n          This processor analyzes QEEG data files (Eyes Open and Eyes Closed) and generates 7 key parameters using proprietary\n          binary scoring logic. The algorithm evaluates brain activity patterns to assess cognitive and emotional health markers.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default AlgorithmDataProcessor;\n","structuredPatch":[{"oldStart":1679,"oldLines":8,"newStart":1679,"newLines":9,"lines":["                         </div>","                       </div>","                     )}","-                  </div>","-                ))}","+                    </div>","+                  );","+                })}","               </div>"," ","               {/* Action Buttons */}"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"3f0a70e7-0716-4f63-8aec-cdfedbe529ed","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01BYXYwwJsdSnwpSpfrAuaq4","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Good! Now let me test the build to make sure there are no syntax errors.","signature":"EvABCkYIChgCKkBROLa4pMCMU3PiHAUTlk1GHkwdRSQhGqjfLTYfIwMUb8LoTKb89p6GgSx+Or5fDL/Bi3JQluhyEgZdoZWpsE/cEgxC4wHE27IFwmnqFHIaDPRT+PAG9FlRDEPM9SIwN5MMMaL+sg8/MjHc3kd9fWYM5GiWNSTz8ssDyxSlEuiLY/Uo17GMw1A0bRbeBSG8KlhJlADQx5QKXy64MQe8W+a6QAdUFaIttvFQqn+mek3ac4nChm/UV7PKWNBR4t5cphxkWwfyT7oykNbENI8MFfxLHGIA+/p+KZjI6ZsskgoXXk+RsUsnwfHzGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":551,"cache_read_input_tokens":65406,"cache_creation":{"ephemeral_5m_input_tokens":551,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9Qo4Smt8iMxffvWeS8","type":"assistant","uuid":"820c86f8-5fff-4e4c-834b-ceb36790b0c0","timestamp":"2025-12-18T12:23:23.462Z"}
{"parentUuid":"820c86f8-5fff-4e4c-834b-ceb36790b0c0","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01BYXYwwJsdSnwpSpfrAuaq4","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_013QoeGN6ptZ6ENiPDAXbxLH","name":"TodoWrite","input":{"todos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"completed","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Add background color to main parameter card for Stress and Burnout","status":"completed","activeForm":"Adding background colors to main parameter cards"},{"content":"Extend sub-parameter colors to Burnout & Fatigue","status":"completed","activeForm":"Extending sub-parameter colors to Burnout"},{"content":"Test the implementation and build project","status":"in_progress","activeForm":"Testing the implementation"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":551,"cache_read_input_tokens":65406,"cache_creation":{"ephemeral_5m_input_tokens":551,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9Qo4Smt8iMxffvWeS8","type":"assistant","uuid":"3e908343-f314-466d-b2f7-81330d7506c6","timestamp":"2025-12-18T12:23:25.937Z"}
{"parentUuid":"3e908343-f314-466d-b2f7-81330d7506c6","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01BYXYwwJsdSnwpSpfrAuaq4","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01UxW6yr32BYwR2KgJznaXvP","name":"Bash","input":{"command":"cd \"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\" && npm run build 2>&1 | head -60","description":"Build project to verify changes","timeout":60000}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":551,"cache_read_input_tokens":65406,"cache_creation":{"ephemeral_5m_input_tokens":551,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9Qo4Smt8iMxffvWeS8","type":"assistant","uuid":"a5ab87f4-2990-400e-a857-04846a5d52a8","timestamp":"2025-12-18T12:23:27.084Z"}
{"parentUuid":"a5ab87f4-2990-400e-a857-04846a5d52a8","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_013QoeGN6ptZ6ENiPDAXbxLH","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"2c09213e-b463-46f1-b49e-0903dfe0598f","timestamp":"2025-12-18T12:23:27.329Z","toolUseResult":{"oldTodos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"completed","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Add background color to main parameter card for Stress and Burnout","status":"in_progress","activeForm":"Adding background colors to main parameter cards"},{"content":"Extend sub-parameter colors to Burnout & Fatigue","status":"pending","activeForm":"Extending sub-parameter colors to Burnout"},{"content":"Test the color indicators","status":"pending","activeForm":"Testing the color indicators"}],"newTodos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"completed","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Add background color to main parameter card for Stress and Burnout","status":"completed","activeForm":"Adding background colors to main parameter cards"},{"content":"Extend sub-parameter colors to Burnout & Fatigue","status":"completed","activeForm":"Extending sub-parameter colors to Burnout"},{"content":"Test the implementation and build project","status":"in_progress","activeForm":"Testing the implementation"}]}}
{"parentUuid":"2c09213e-b463-46f1-b49e-0903dfe0598f","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01UxW6yr32BYwR2KgJznaXvP","type":"tool_result","content":"> @neuro360/web@2.0.0 build\n> vite build\n\n\u001b[36mvite v4.5.14 \u001b[32mbuilding for production...\u001b[36m\u001b[39m\ntransforming...\n[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`\n\u001b[32m‚úì\u001b[39m 1619 modules transformed.\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminAssignmentModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AgreementManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AlgorithmDataProcessor.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AnalyticsDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/BrandingConfiguration.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/ClinicManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PaymentHistory.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PersonalizedCarePlan.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/SuperAdminPanel.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/auth/ForgotPasswordForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/SubscriptionManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/contexts/AuthContext.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/alertService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseBackupService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/neuroSenseService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/paymentService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/razorpayService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/storageService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/layout/ProfileModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/emailService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, dynamic import will not move module into another chunk.\n\u001b[39m\nrendering chunks...\ncomputing gzip size...\n\u001b[2mdist/\u001b[22m\u001b[32mindex.html                 \u001b[39m\u001b[1m\u001b[2m    1.68 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:   0.80 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[35massets/index-2324ea4d.css  \u001b[39m\u001b[1m\u001b[2m  122.98 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:  17.74 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[36massets/index-8c6c6fc1.js   \u001b[39m\u001b[1m\u001b[33m2,667.09 kB\u001b[39m\u001b[22m\u001b[2m ‚îÇ gzip: 477.30 kB\u001b[22m\u001b[2m ‚îÇ map: 5,769.75 kB\u001b[22m\n\u001b[33m\n(!) Some chunks are larger than 500 kBs after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\u001b[39m\n\u001b[32m‚úì built in 11.56s\u001b[39m","is_error":false}]},"uuid":"5b8395ef-9ff2-4096-948e-188f00b692f5","timestamp":"2025-12-18T12:23:58.996Z","toolUseResult":{"stdout":"> @neuro360/web@2.0.0 build\n> vite build\n\n\u001b[36mvite v4.5.14 \u001b[32mbuilding for production...\u001b[36m\u001b[39m\ntransforming...\n[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`\n\u001b[32m‚úì\u001b[39m 1619 modules transformed.\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminAssignmentModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AgreementManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AlgorithmDataProcessor.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AnalyticsDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/BrandingConfiguration.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/ClinicManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PaymentHistory.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PersonalizedCarePlan.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/SuperAdminPanel.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/auth/ForgotPasswordForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/SubscriptionManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/contexts/AuthContext.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/alertService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseBackupService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/neuroSenseService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/paymentService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/razorpayService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/storageService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/layout/ProfileModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/emailService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, dynamic import will not move module into another chunk.\n\u001b[39m\nrendering chunks...\ncomputing gzip size...\n\u001b[2mdist/\u001b[22m\u001b[32mindex.html                 \u001b[39m\u001b[1m\u001b[2m    1.68 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:   0.80 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[35massets/index-2324ea4d.css  \u001b[39m\u001b[1m\u001b[2m  122.98 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:  17.74 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[36massets/index-8c6c6fc1.js   \u001b[39m\u001b[1m\u001b[33m2,667.09 kB\u001b[39m\u001b[22m\u001b[2m ‚îÇ gzip: 477.30 kB\u001b[22m\u001b[2m ‚îÇ map: 5,769.75 kB\u001b[22m\n\u001b[33m\n(!) Some chunks are larger than 500 kBs after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\u001b[39m\n\u001b[32m‚úì built in 11.56s\u001b[39m\r","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"5b8395ef-9ff2-4096-948e-188f00b692f5","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_016y9M79CWV4HXsBowPQ1zAa","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! The build succeeded with no errors. Let me update the todo list and provide a summary to the user.","signature":"EpMCCkYIChgCKkCHFMYNjMHKvMmHpb3M6rRhJVPrbO5a6Yy/HE+kPpp3ktDpmZc7WZb2U2J/j5/svvbx8FPUM18Ozh3CV/+kZE+BEgxz2GKCsavroL3UhEIaDIyfGskOLTA01+x9cyIwtsKvdBkP/gWqob3aS8RpHXzvOcLK0MixAxH64VaGUzUF3aWascLocfCrasa12O7eKntJS7/1oXz6xFsXuT1QtAtEJw91pbtoKV8xHO3of92Kba6/uxV+oyEtIEMg8CwmB0viHkzKMyc5NHBdN4nSKIBuvW2zL0m4z7NgxInPGEwXU0YCyfE51/FDeu+TfNyupxMqeaUlogRrkJn3Y+fNeO45vajvrA1uYdjCknEYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":2798,"cache_read_input_tokens":65957,"cache_creation":{"ephemeral_5m_input_tokens":2798,"ephemeral_1h_input_tokens":0},"output_tokens":5,"service_tier":"standard"}},"requestId":"req_011CWE9TyDDZV7yap2FU5rLB","type":"assistant","uuid":"0ccd0b6b-45a9-4194-abaa-4c9eedcedbab","timestamp":"2025-12-18T12:24:02.737Z"}
{"parentUuid":"0ccd0b6b-45a9-4194-abaa-4c9eedcedbab","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_016y9M79CWV4HXsBowPQ1zAa","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_011BzR1XQq7prhrKS9NLuH37","name":"TodoWrite","input":{"todos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"completed","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Add background color to main parameter card for Stress and Burnout","status":"completed","activeForm":"Adding background colors to main parameter cards"},{"content":"Extend sub-parameter colors to Burnout & Fatigue","status":"completed","activeForm":"Extending sub-parameter colors to Burnout"},{"content":"Test the implementation and build project","status":"completed","activeForm":"Testing the implementation"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":2798,"cache_read_input_tokens":65957,"cache_creation":{"ephemeral_5m_input_tokens":2798,"ephemeral_1h_input_tokens":0},"output_tokens":231,"service_tier":"standard"}},"requestId":"req_011CWE9TyDDZV7yap2FU5rLB","type":"assistant","uuid":"70d03cd2-3d91-42de-8e8a-2075125f1051","timestamp":"2025-12-18T12:24:06.138Z"}
{"parentUuid":"70d03cd2-3d91-42de-8e8a-2075125f1051","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_011BzR1XQq7prhrKS9NLuH37","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"52e94688-f4f7-4e29-aafe-cb1e5b83e592","timestamp":"2025-12-18T12:24:06.303Z","toolUseResult":{"oldTodos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"completed","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Add background color to main parameter card for Stress and Burnout","status":"completed","activeForm":"Adding background colors to main parameter cards"},{"content":"Extend sub-parameter colors to Burnout & Fatigue","status":"completed","activeForm":"Extending sub-parameter colors to Burnout"},{"content":"Test the implementation and build project","status":"in_progress","activeForm":"Testing the implementation"}],"newTodos":[{"content":"Understand Burnout & Fatigue parameter scoring logic","status":"completed","activeForm":"Understanding Burnout & Fatigue scoring logic"},{"content":"Add background color to main parameter card for Stress and Burnout","status":"completed","activeForm":"Adding background colors to main parameter cards"},{"content":"Extend sub-parameter colors to Burnout & Fatigue","status":"completed","activeForm":"Extending sub-parameter colors to Burnout"},{"content":"Test the implementation and build project","status":"completed","activeForm":"Testing the implementation"}]}}
{"parentUuid":"52e94688-f4f7-4e29-aafe-cb1e5b83e592","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01XdWKVyBqNfgjQ3usZDm53z","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! All done. Let me provide a comprehensive summary to the user in Hindi/English mix as they prefer.","signature":"EpICCkYIChgCKkCFcDSTgnOqp3KiL67DxHqNqBIRU9XisEi8Mc/bQReuE8xH7ClKKV/3Bwk6ubK4YpRLqGrknkAZ2c8gmN+Ai+yzEgxvMe6piyTNa3Q9hs0aDFcUWS2btpgH1whWRCIwrg95l6CEWzWaQrm/3mINCHjEN6ojoqH6IxqAmw/bl0I8CHePTFHovzZNbXYZ7OSsKnophxJVqCg/vtx2tzUf+LU4sQHSi+oX71zmS4P4kHiWkdge5W/BqE34/o5XKLcrrio2Z0kmCQ5EZuCNfLfyoTuCMk9MxmcFC88BdP//A8C82aCHSxteo64XDek8pl4GEXkped3U4hgB/hEb6ZH64IEFf1O7DGpqyMi2tRgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":281,"cache_read_input_tokens":68755,"cache_creation":{"ephemeral_5m_input_tokens":281,"ephemeral_1h_input_tokens":0},"output_tokens":4,"service_tier":"standard"}},"requestId":"req_011CWE9UWLya4iAm55NREnBX","type":"assistant","uuid":"ce853f3c-b2aa-4727-850f-ecd45fdb982c","timestamp":"2025-12-18T12:24:09.988Z"}
{"parentUuid":"ce853f3c-b2aa-4727-850f-ecd45fdb982c","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01XdWKVyBqNfgjQ3usZDm53z","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! ‚úÖ ‡§∏‡§≠‡•Ä changes successfully implement ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç‡•§ Build ‡§≠‡•Ä ‡§¨‡§ø‡§®‡§æ ‡§ï‡§ø‡§∏‡•Ä error ‡§ï‡•á complete ‡§π‡•Å‡§Ü‡•§\n\n## üé® Implemented Changes Summary\n\n‡§Æ‡•à‡§Ç‡§®‡•á **Stress** ‡§î‡§∞ **Burnout & Fatigue** ‡§¶‡•ã‡§®‡•ã‡§Ç parameters ‡§ï‡•á ‡§≤‡§ø‡§è conditional color indicators add ‡§ï‡§ø‡§è ‡§π‡•à‡§Ç:\n\n### 1. **Main Parameter Card** (‡§ú‡§π‡§æ‡§Ç parameter name ‡§π‡•à)\n`AlgorithmDataProcessor.jsx:1553-1587`\n\n**Color Logic:**\n- **üü¢ GREEN** - Score 3/3 (Low stress/burnout - ‡§∏‡§≠‡•Ä metrics normal ‡§π‡•à‡§Ç) ‚úÖ ‡§Ö‡§ö‡•ç‡§õ‡§æ\n- **üü° YELLOW** - Score 2/3 (Medium - ‡§ï‡•Å‡§õ metrics abnormal ‡§π‡•à‡§Ç) ‚ö†Ô∏è ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç\n- **üî¥ RED** - Score 1/3 or 0/3 (High stress/burnout - ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ‡§§‡§∞ metrics abnormal ‡§π‡•à‡§Ç) ‚ùå ‡§ñ‡§∞‡§æ‡§¨\n\n### 2. **Sub-Parameters** (Arousal Score, Relaxation Score, Regeneration, etc.)\n`AlgorithmDataProcessor.jsx:1604-1677`\n\n**Color Logic for Both Stress & Burnout & Fatigue:**\n- **üü¢ GREEN background** - Score 1/1 (Normal/Healthy) ‚úÖ\n  - Arousal Score < 1\n  - Relaxation Score > 10\n  - Regeneration > 30%\n  - Excessive Delta < 70%\n  \n- **üî¥ RED background** - Score 0/1 (Abnormal/High) ‚ùå\n  - Arousal Score >= 1\n  - Relaxation Score <= 10\n  - Regeneration <= 30%\n  - Excessive Delta >= 70%\n\n### Visual Features:\n‚úÖ Background colors (light green/red)  \n‚úÖ Border colors (darker green/red)  \n‚úÖ Text colors matching the status  \n‚úÖ Dark mode support  \n‚úÖ Smooth transitions  \n\n‡§Ö‡§¨ ‡§ú‡§¨ ‡§≠‡•Ä:\n- **Stress** ‡§Ø‡§æ **Burnout & Fatigue** parameter ‡§Æ‡•á‡§Ç score high ‡§π‡•ã‡§ó‡§æ (3/3) ‡§§‡•ã ‡§™‡•Ç‡§∞‡§æ card **GREEN** ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ\n- Score low ‡§π‡•ã‡§ó‡§æ (1/3) ‡§§‡•ã card **RED** ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ\n- Sub-parameters ‡§Æ‡•á‡§Ç normal values **GREEN** ‡§î‡§∞ abnormal values **RED** ‡§Æ‡•á‡§Ç highlight ‡§π‡•ã‡§Ç‡§ó‡•á\n\nBuild successful - ‡§ï‡•ã‡§à errors ‡§®‡§π‡•Ä‡§Ç! üéâ"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":12,"cache_creation_input_tokens":281,"cache_read_input_tokens":68755,"cache_creation":{"ephemeral_5m_input_tokens":281,"ephemeral_1h_input_tokens":0},"output_tokens":663,"service_tier":"standard"}},"requestId":"req_011CWE9UWLya4iAm55NREnBX","type":"assistant","uuid":"374516bd-64b6-4089-850a-2851d7ce7f54","timestamp":"2025-12-18T12:24:22.036Z"}
{"type":"file-history-snapshot","messageId":"c640385a-2b29-439c-b926-85cf1921aa23","snapshot":{"messageId":"c640385a-2b29-439c-b926-85cf1921aa23","trackedFileBackups":{"src\\components\\admin\\AlgorithmDataProcessor.jsx":{"backupFileName":"9777bd81bdc80e4c@v3","version":3,"backupTime":"2025-12-18T12:26:45.604Z"}},"timestamp":"2025-12-18T12:26:45.596Z"},"isSnapshotUpdate":false}
{"parentUuid":"374516bd-64b6-4089-850a-2851d7ce7f54","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":"Stress ‡§Ø‡§æ Burnout & Fatigue parameter ‡§Æ‡•á‡§Ç score high ‡§π‡•ã‡§ó‡§æ (3/3) ‡§§‡•ã ‡§™‡•Ç‡§∞‡§æ card GREEN ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ\n  - Score low ‡§π‡•ã‡§ó‡§æ (1/3) ‡§§‡•ã card RED ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ\n  - Sub-parameters ‡§Æ‡•á‡§Ç normal values GREEN ‡§î‡§∞ abnormal values RED ‡§Æ‡•á‡§Ç highlight ‡§π‡•ã‡§Ç‡§ó‡•á   galat kiya hai tumne iska ulta hai krna .\ndono me agar score low and value normal hai to score ko green se indicate krna hai "},"uuid":"c640385a-2b29-439c-b926-85cf1921aa23","timestamp":"2025-12-18T12:26:45.578Z","thinkingMetadata":{"level":"high","disabled":false,"triggers":[]}}
{"parentUuid":"c640385a-2b29-439c-b926-85cf1921aa23","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YLYwrX9VD2F7FJXvzE9Gjs","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"‡§Ö‡§∞‡•á ‡§π‡§æ‡§Ç, ‡§Æ‡•à‡§Ç‡§®‡•á ‡§ó‡§≤‡§§ ‡§∏‡§Æ‡§ù‡§æ! User ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§∏‡§π‡•Ä ‡§ï‡§π ‡§∞‡§π‡§æ ‡§π‡•à‡•§ \n\nLogic ‡§ï‡•ã ‡§∏‡§Æ‡§ù‡§§‡•á ‡§π‡•à‡§Ç:\n- **Stress** ‡§î‡§∞ **Burnout & Fatigue** ‡§Æ‡•á‡§Ç:\n  - Score **LOW** (1/3) = GOOD = GREEN (‡§ï‡§Æ stress/burnout ‡§π‡•à)\n  - Score **HIGH** (3/3) = BAD = RED (‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ stress/burnout ‡§π‡•à)\n\n‡§Æ‡•à‡§Ç‡§®‡•á ‡§â‡§≤‡•ç‡§ü‡§æ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§•‡§æ - ‡§Æ‡•à‡§Ç‡§®‡•á 3/3 ‡§ï‡•ã GREEN ‡§î‡§∞ 1/3 ‡§ï‡•ã RED ‡§¨‡§®‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§•‡§æ‡•§ \n\n‡§∏‡§π‡•Ä logic ‡§π‡•ã‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è:\n- 1/3 = Low stress/burnout = GREEN (‡§Ö‡§ö‡•ç‡§õ‡§æ)\n- 2/3 = Medium = YELLOW (‡§Æ‡§ß‡•ç‡§Ø‡§Æ)\n- 3/3 = High stress/burnout = RED (‡§ñ‡§∞‡§æ‡§¨)\n\nSub-parameters ‡§ï‡•á ‡§≤‡§ø‡§è logic ‡§∏‡§π‡•Ä ‡§π‡•à (score 1/1 = green, 0/1 = red), ‡§≤‡•á‡§ï‡§ø‡§® main parameter card ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡•Å‡§ù‡•á logic reverse ‡§ï‡§∞‡§®‡•Ä ‡§π‡•ã‡§ó‡•Ä‡•§","signature":"ErEICkYIChgCKkC8CqcQlypCBgFruTI6EcU7dM+BaytBj2EfpBL5AChsJEYro1t06zX65uFzCLrNDVnYz43An/IwL7fq5/6ej9K+EgzL6JSUypT1OHOLm9QaDKLKYaHIL/KcDJ+JECIwCN0vV3L4dlaWEY0iUJWsCRfDoBwAlINc+kTkD71Sl/muirXUzpTfUT+kOSAOLeIRKpgHaMCtwBMjNH8pNdxjss/8/bPSQWxK/L2YShzFX+h8wq1O/OUK43LxlUun/twVcuq4/9PPaDzhT07wuuYrFkEB0ydIcdpr/dxzRK9dpPiZDs+HnYYXx0bZYb8UNSSPqBYFDwGFGd3+50j6S7v19IfcgV1FZ3YouNgYOSmuTpKOSDbYL8oDaRAGPsWet4NhpS3myfJMDWafha+lQdFLowkFAga7rhhGnOIqdbDugCOYMAAlIEU450UWR4P4fOYniS6SUqRv2k4eTiuKloNAIpTnzCvmzJXyygh3fDyotMgdDGC4n+0X+Cv5Xhz9/bFUo7Eaj5Wcp1o5webWmHeFrCudy/p4MOu/9BDRx4nCSuoeWWRzGJ5jChGhkeubfk2oXQGkCgGJMIoaPhSAIZ1gW5TnnUUF6bJmFgFzkpm5U6EWj2xen7vcprfFgGjdWAYyjCvJGHfPLxJ7GtXQ+aiepZVxOi29znVpQTxfqVFmz9bsBVODBOpjs4qPJ+6nAoCHXVWDg8D1lTO+LNoJ10Ov3mrZU/XNv1Fy/LPpsOhm7INT6hf/+5T2xLtnaELkHXrf9FvzzcsEFOw6rLI1UxYdTolu9QsdA+9tb3wU7TM5h+Ug7gjfB9nQpYbc5AhGQ7Lf//ZFjMKhe04URsBK1dpjm3ijQyrCu2CUc3UqYnupYFQZ6l470J2MyomLmkYFQil/bjyXk32HklkN0nvkv6AiNBuRqo26MNTz4fSkyPr213gDT2Q/5qFTxWQyPjdV6hYWXKVTur9P99E7MzacLDfO6RHy6Vfb/9HNCY+g8Ag0v3en8jYDTco31rq9wLKXl5DBMc6ChrmT83Ls4qgh6Q3Mdjm2MUjpVG2fv58G7mWrOyHlnmGRRxVij0Amwim8uz+76EKT7y/fG+/9/a3ooL8NxlVbanIBPBZn7s1Rs9HlWri4q1v3EKRf+qzlh6d0yqwULhldycAuvmjw5WdaPXdyOi/ytOGTyZSTgu3Z8jLnZixuAvQD8MdwPPq1L/wdWEnAmXQaOxnuiTzZ6nNTyN9dSTqffakkWCxi8QQKPr/JKgKgXpkaddMA0gyGrZonlIfobODZbSSRErhit6MF3e25jUb9nnLijC3In3bTkVT/FU8ZUR0ulUzSgs3pld2PwaQYuoQbo8JEC3nJA5Yf61xqiq7hvhjViLuU3A+ss3/nxpcJ+s2asDzBanPdgzkvgq1u+xcqeze/0lo0CqQYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":50941,"cache_read_input_tokens":16181,"cache_creation":{"ephemeral_5m_input_tokens":50941,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9gFA156RE71M2uN21X","type":"assistant","uuid":"1d9524df-b2c4-4ab2-b673-59c25f87cfac","timestamp":"2025-12-18T12:26:56.167Z"}
{"parentUuid":"1d9524df-b2c4-4ab2-b673-59c25f87cfac","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YLYwrX9VD2F7FJXvzE9Gjs","type":"message","role":"assistant","content":[{"type":"text","text":"‡§Ö‡§∞‡•á ‡§π‡§æ‡§Ç, ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§∏‡§π‡•Ä! ‡§Æ‡•à‡§Ç‡§®‡•á ‡§ó‡§≤‡§§‡•Ä ‡§ï‡•Ä‡•§ Let me fix this:\n\n**Stress ‡§î‡§∞ Burnout & Fatigue** ‡§Æ‡•á‡§Ç:\n- Score **LOW** (1/3) = ‡§ï‡§Æ stress/burnout = **GREEN** ‚úÖ ‡§Ö‡§ö‡•ç‡§õ‡§æ\n- Score **HIGH** (3/3) = ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ stress/burnout = **RED** ‚ùå ‡§ñ‡§∞‡§æ‡§¨\n\n‡§Æ‡•à‡§Ç ‡§Ö‡§≠‡•Ä ‡§†‡•Ä‡§ï ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Ç:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":50941,"cache_read_input_tokens":16181,"cache_creation":{"ephemeral_5m_input_tokens":50941,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9gFA156RE71M2uN21X","type":"assistant","uuid":"4d2aded7-dea4-447e-a0fd-b3b98372586a","timestamp":"2025-12-18T12:26:58.389Z"}
{"parentUuid":"4d2aded7-dea4-447e-a0fd-b3b98372586a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YLYwrX9VD2F7FJXvzE9Gjs","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01A5GpnjcRpLQ7CQsYg7YZPV","name":"TodoWrite","input":{"todos":[{"content":"Fix reversed color logic for Stress and Burnout main parameter","status":"in_progress","activeForm":"Fixing reversed color logic"},{"content":"Verify the corrected logic with build","status":"pending","activeForm":"Verifying corrected logic"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":50941,"cache_read_input_tokens":16181,"cache_creation":{"ephemeral_5m_input_tokens":50941,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9gFA156RE71M2uN21X","type":"assistant","uuid":"93f90636-1664-4713-9a1b-150e24c7abb6","timestamp":"2025-12-18T12:26:59.982Z"}
{"parentUuid":"93f90636-1664-4713-9a1b-150e24c7abb6","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01YLYwrX9VD2F7FJXvzE9Gjs","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_016P2uDSe8NE8WySE4o3rTab","name":"Edit","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","old_string":"                  if (isStressOrBurnout && result.rawScore) {\n                    const [score] = result.rawScore.split('/').map(Number);\n                    // 3/3 = Low problem (all normal) = GREEN\n                    // 2/3 = Medium = YELLOW\n                    // 1/3 or 0/3 = High problem = RED\n                    if (score === 3) {\n                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n                    } else if (score === 2) {\n                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n                    } else if (score <= 1) {\n                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n                    }\n                  }","new_string":"                  if (isStressOrBurnout && result.rawScore) {\n                    const [score] = result.rawScore.split('/').map(Number);\n                    // For Stress & Burnout: Lower score = Better (less stress/burnout)\n                    // 1/3 = Low stress/burnout = GREEN (GOOD)\n                    // 2/3 = Medium = YELLOW\n                    // 3/3 = High stress/burnout = RED (BAD)\n                    if (score === 1) {\n                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n                    } else if (score === 2) {\n                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n                    } else if (score >= 3) {\n                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n                    }\n                  }"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":50941,"cache_read_input_tokens":16181,"cache_creation":{"ephemeral_5m_input_tokens":50941,"ephemeral_1h_input_tokens":0},"output_tokens":1224,"service_tier":"standard"}},"requestId":"req_011CWE9gFA156RE71M2uN21X","type":"assistant","uuid":"ca64fc54-8f14-4c4e-98af-541c5c515268","timestamp":"2025-12-18T12:27:07.200Z"}
{"parentUuid":"ca64fc54-8f14-4c4e-98af-541c5c515268","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01A5GpnjcRpLQ7CQsYg7YZPV","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"afeeae00-617d-4238-b0ca-3b8114ae71e1","timestamp":"2025-12-18T12:27:07.406Z","toolUseResult":{"oldTodos":[],"newTodos":[{"content":"Fix reversed color logic for Stress and Burnout main parameter","status":"in_progress","activeForm":"Fixing reversed color logic"},{"content":"Verify the corrected logic with build","status":"pending","activeForm":"Verifying corrected logic"}]}}
{"parentUuid":"afeeae00-617d-4238-b0ca-3b8114ae71e1","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_016P2uDSe8NE8WySE4o3rTab","type":"tool_result","content":"The file D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n  1554‚Üí                  // Determine background color for main parameter card (Stress and Burnout & Fatigue)\n  1555‚Üí                  const isStressOrBurnout = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n  1556‚Üí                  let mainCardBgClass = 'border border-gray-200 dark:border-gray-700';\n  1557‚Üí\n  1558‚Üí                  if (isStressOrBurnout && result.rawScore) {\n  1559‚Üí                    const [score] = result.rawScore.split('/').map(Number);\n  1560‚Üí                    // For Stress & Burnout: Lower score = Better (less stress/burnout)\n  1561‚Üí                    // 1/3 = Low stress/burnout = GREEN (GOOD)\n  1562‚Üí                    // 2/3 = Medium = YELLOW\n  1563‚Üí                    // 3/3 = High stress/burnout = RED (BAD)\n  1564‚Üí                    if (score === 1) {\n  1565‚Üí                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n  1566‚Üí                    } else if (score === 2) {\n  1567‚Üí                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n  1568‚Üí                    } else if (score >= 3) {\n  1569‚Üí                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n  1570‚Üí                    }\n  1571‚Üí                  }\n  1572‚Üí\n  1573‚Üí                  return (\n  1574‚Üí                    <div key={index} className={`rounded-lg p-3 ${mainCardBgClass}`}>\n  1575‚Üí                      {/* Main Parameter */}"}]},"uuid":"56cf08af-b49a-4e72-bc11-e235cfb85baa","timestamp":"2025-12-18T12:27:11.909Z","toolUseResult":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","oldString":"                  if (isStressOrBurnout && result.rawScore) {\n                    const [score] = result.rawScore.split('/').map(Number);\n                    // 3/3 = Low problem (all normal) = GREEN\n                    // 2/3 = Medium = YELLOW\n                    // 1/3 or 0/3 = High problem = RED\n                    if (score === 3) {\n                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n                    } else if (score === 2) {\n                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n                    } else if (score <= 1) {\n                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n                    }\n                  }","newString":"                  if (isStressOrBurnout && result.rawScore) {\n                    const [score] = result.rawScore.split('/').map(Number);\n                    // For Stress & Burnout: Lower score = Better (less stress/burnout)\n                    // 1/3 = Low stress/burnout = GREEN (GOOD)\n                    // 2/3 = Medium = YELLOW\n                    // 3/3 = High stress/burnout = RED (BAD)\n                    if (score === 1) {\n                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n                    } else if (score === 2) {\n                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n                    } else if (score >= 3) {\n                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n                    }\n                  }","originalFile":"import React, { useState, useEffect } from 'react';\nimport { Upload, Play, Download, FileText, CheckCircle, Activity, User, Building2, Calendar, History, X, ArrowLeft, Search, Filter } from 'lucide-react';\nimport DatabaseService from '../../services/databaseService';\nimport toast from 'react-hot-toast';\n\nconst AlgorithmDataProcessor = () => {\n  const [patients, setPatients] = useState([]);\n  const [clinics, setClinics] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [showProcessingUI, setShowProcessingUI] = useState(false);\n  const [processingHistory, setProcessingHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Filter states\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedClinicFilter, setSelectedClinicFilter] = useState('');\n  const [dateFilter, setDateFilter] = useState('');\n\n  const [eyesOpenFile, setEyesOpenFile] = useState(null);\n  const [eyesClosedFile, setEyesClosedFile] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [processingComplete, setProcessingComplete] = useState(false);\n  const [consoleLog, setConsoleLog] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const [results, setResults] = useState(null);\n  const [isSaved, setIsSaved] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [dataType, setDataType] = useState(null); // 'raw' or 'zscore'\n\n  // Debug function to check database contents\n  useEffect(() => {\n    window.debugAlgorithmResults = async () => {\n      const allResults = await DatabaseService.get('algorithmResults');\n      console.log('üîç All Algorithm Results in Database:', allResults);\n      console.log(`Total records: ${allResults.length}`);\n      allResults.forEach((record, idx) => {\n        console.log(`\\nüìä Record ${idx + 1}:`, {\n          id: record.id,\n          patientName: record.inputData?.patientName || record.patientName,\n          processedAt: record.inputData?.processedAt || record.processedAt,\n          pdfUrl: record.pdfUrl || '‚ùå MISSING',\n          hasResults: !!(record.outputData || record.results)\n        });\n      });\n    };\n    console.log('üí° Debug: Type window.debugAlgorithmResults() in console to check database');\n  }, []);\n\n  useEffect(() => {\n    loadPatients();\n  }, []);\n\n  useEffect(() => {\n    if (selectedPatient && showProcessingUI) {\n      loadProcessingHistory(selectedPatient.id);\n    }\n  }, [selectedPatient, showProcessingUI, isSaved]); // Re-load when saved\n\n  const loadPatients = async () => {\n    try {\n      const patientsData = await DatabaseService.get('patients');\n      const clinicsData = await DatabaseService.get('clinics');\n      const algorithmResults = await DatabaseService.get('algorithmResults') || [];\n\n      // Enrich patients with clinic names and algorithm status\n      const enrichedPatients = patientsData.map(patient => {\n        const patientResults = algorithmResults.filter(r => r.patientId === patient.id);\n        const lastResult = patientResults.length > 0\n          ? patientResults.sort((a, b) => {\n              const aTime = a.inputData?.processedAt || a.processedAt || a.createdAt;\n              const bTime = b.inputData?.processedAt || b.processedAt || b.createdAt;\n              return new Date(bTime) - new Date(aTime);\n            })[0]\n          : null;\n\n        return {\n          ...patient,\n          clinicName: clinicsData.find(c => c.id === patient.clinicId)?.name || 'Unknown Clinic',\n          algorithmStatus: lastResult ? 'completed' : 'pending',\n          lastProcessed: lastResult?.inputData?.processedAt || lastResult?.processedAt || lastResult?.createdAt,\n          totalScans: patientResults.length\n        };\n      });\n\n      setPatients(enrichedPatients);\n      setClinics(clinicsData);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading patients:', error);\n      toast.error('Failed to load patients');\n      setLoading(false);\n    }\n  };\n\n  const loadProcessingHistory = async (patientId) => {\n    try {\n      // Load algorithm results for this patient\n      const results = await DatabaseService.get('algorithmResults');\n      const patientResults = results.filter(r => r.patientId === patientId);\n\n      console.log(`üìã Loaded ${patientResults.length} records for patient ${patientId}`);\n\n      // Log all records for debugging\n      console.log('üìä All records for this patient:');\n      patientResults.forEach((rec, idx) => {\n        const processedTime = rec.inputData?.processedAt || rec.processedAt || rec.createdAt;\n        console.log(`   ${idx + 1}. ${new Date(processedTime).toLocaleString()} - PDF: ${rec.pdfUrl ? '‚úì' : '‚úó'}`);\n      });\n\n      // Check for records without pdfUrl and try to fix them\n      const recordsWithoutPdf = patientResults.filter(r => !r.pdfUrl);\n      if (recordsWithoutPdf.length > 0) {\n        console.log(`\\n‚ö†Ô∏è Found ${recordsWithoutPdf.length} records without PDF URL - attempting auto-fix...`);\n\n        let updatedCount = 0;\n\n        // Step 1: Try to fetch PDFs from Supabase bucket\n        try {\n          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n          const response = await fetch(`${apiUrl}/qeeg/supabase-pdfs`);\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log(`\\n‚òÅÔ∏è Found ${data.count} PDFs in Supabase bucket:`);\n            data.pdfs.forEach(pdf => console.log(`   - ${pdf.name}`));\n\n            // Match PDFs with database records using smart matching\n            console.log(`\\nüîç Attempting to match ${recordsWithoutPdf.length} records...`);\n            for (const record of recordsWithoutPdf) {\n              const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n              const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n              const recordTimestamp = new Date(processedTime).getTime();\n              const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n\n              console.log(`\\n   Record: ${patientName} @ ${new Date(processedTime).toLocaleString()}`);\n              console.log(`   Searching for PDFs matching: neurosense-report-${sanitizedName}-*.pdf`);\n\n              // Find PDFs matching patient name\n              const matchingPdfs = data.pdfs.filter(pdf => {\n                const pdfNameLower = pdf.name.toLowerCase();\n                return pdfNameLower.includes(`neurosense-report-${sanitizedName}-`) &&\n                       pdfNameLower.endsWith('.pdf');\n              });\n\n              console.log(`   Found ${matchingPdfs.length} PDFs for this patient`);\n\n              if (matchingPdfs.length > 0) {\n                // Find PDF with closest timestamp (within 60 seconds)\n                let bestMatch = null;\n                let smallestDiff = Infinity;\n\n                for (const pdf of matchingPdfs) {\n                  // Extract timestamp from filename: neurosense-report-name-TIMESTAMP.pdf\n                  const match = pdf.name.match(/-(\\d+)\\.pdf$/);\n                  if (match) {\n                    const pdfTimestamp = parseInt(match[1]);\n                    const diff = Math.abs(pdfTimestamp - recordTimestamp);\n                    console.log(`      ${pdf.name}: timestamp diff = ${diff}ms (${(diff/1000).toFixed(1)}s)`);\n\n                    // Accept if within 60 seconds (60000ms)\n                    if (diff < 60000 && diff < smallestDiff) {\n                      smallestDiff = diff;\n                      bestMatch = pdf;\n                    }\n                  }\n                }\n\n                if (bestMatch) {\n                  console.log(`   ‚úÖ MATCH FOUND! ${bestMatch.name} (${(smallestDiff/1000).toFixed(1)}s difference)`);\n                  console.log(`   URL: ${bestMatch.url}`);\n                  record.pdfUrl = bestMatch.url;\n                  await DatabaseService.update('algorithmResults', record.id, record);\n                  updatedCount++;\n                } else {\n                  console.log(`   ‚ö†Ô∏è PDFs found but timestamp difference too large (>60s)`);\n                }\n              } else {\n                console.log(`   ‚ùå No PDFs found for patient: ${sanitizedName}`);\n              }\n            }\n          }\n        } catch (supabaseErr) {\n          console.log('‚ö†Ô∏è Could not fetch from Supabase, trying local storage...');\n        }\n\n        // Step 2: If Supabase fails, try local storage\n        for (const record of recordsWithoutPdf) {\n          if (record.pdfUrl) continue; // Already updated from Supabase\n\n          try {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            const patientName = record.inputData?.patientName || record.patientName || 'unknown';\n            const timestamp = new Date(processedTime).getTime();\n            const sanitizedName = patientName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n            const possibleFilename = `neurosense-report-${sanitizedName}-${timestamp}.pdf`;\n            const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n            const backendBaseUrl = apiUrl.replace('/api', '');\n            const testUrl = `${backendBaseUrl}/uploads/${possibleFilename}`;\n\n            // Test if file exists locally\n            const response = await fetch(testUrl, { method: 'HEAD' });\n            if (response.ok) {\n              console.log(`‚úÖ Found local PDF for record ${record.id}: ${testUrl}`);\n              record.pdfUrl = `/uploads/${possibleFilename}`;\n              await DatabaseService.update('algorithmResults', record.id, record);\n              updatedCount++;\n            }\n          } catch (err) {\n            console.log(`‚ùå Could not find PDF for record ${record.id}`);\n          }\n        }\n\n        if (updatedCount > 0) {\n          console.log(`‚úÖ Auto-fixed ${updatedCount} records with PDF URLs`);\n          // Reload the results after updating\n          const updatedResults = await DatabaseService.get('algorithmResults');\n          const updatedPatientResults = updatedResults.filter(r => r.patientId === patientId);\n          setProcessingHistory(updatedPatientResults);\n\n          updatedPatientResults.forEach((record, idx) => {\n            const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n            console.log(`   Record ${idx + 1}:`, {\n              processedAt: processedTime,\n              hasPdfUrl: !!record.pdfUrl,\n              pdfUrl: record.pdfUrl || 'NOT SET',\n              pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n            });\n          });\n          return;\n        }\n      }\n\n      patientResults.forEach((record, idx) => {\n        const processedTime = record.inputData?.processedAt || record.processedAt || record.createdAt;\n        console.log(`   Record ${idx + 1}:`, {\n          processedAt: processedTime,\n          hasPdfUrl: !!record.pdfUrl,\n          pdfUrl: record.pdfUrl || 'NOT SET',\n          pdfType: record.pdfUrl ? (record.pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None'\n        });\n      });\n\n      setProcessingHistory(patientResults);\n    } catch (error) {\n      console.error('Error loading processing history:', error);\n      setProcessingHistory([]);\n    }\n  };\n\n  const handleGenerateReport = (patient) => {\n    setSelectedPatient(patient);\n    setShowProcessingUI(true);\n    // Reset upload states\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setIsSaved(false);\n    setPdfUrl(null);\n    setIsSaving(false);\n  };\n\n  const handleBackToList = () => {\n    setShowProcessingUI(false);\n    setSelectedPatient(null);\n    setEyesOpenFile(null);\n    setEyesClosedFile(null);\n    setResults(null);\n    setProcessingComplete(false);\n    setConsoleLog([]);\n    setProcessingHistory([]);\n    setIsSaved(false);\n    setIsSaving(false);\n    // Reload patients to update status\n    loadPatients();\n  };\n\n  // Helper function to get patient name (handles different field names)\n  const getPatientName = (patient) => {\n    return patient?.fullName || patient?.full_name || patient?.name || patient?.email || 'Unknown Patient';\n  };\n\n  // Helper function to get status badge\n  const getStatusBadge = (status, lastProcessed) => {\n    if (status === 'completed') {\n      return (\n        <div className=\"flex flex-col items-start\">\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n            <CheckCircle className=\"h-3 w-3 mr-1\" />\n            Completed\n          </span>\n          {lastProcessed && (\n            <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              {new Date(lastProcessed).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n            </span>\n          )}\n        </div>\n      );\n    }\n    return (\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\">\n        <Activity className=\"h-3 w-3 mr-1\" />\n        Pending\n      </span>\n    );\n  };\n\n  // Filter patients based on search and filters\n  const filteredPatients = patients.filter(patient => {\n    const matchesSearch = searchTerm === '' ||\n      getPatientName(patient).toLowerCase().includes(searchTerm.toLowerCase()) ||\n      patient.email?.toLowerCase().includes(searchTerm.toLowerCase());\n\n    const matchesClinic = selectedClinicFilter === '' || patient.clinicId === selectedClinicFilter;\n\n    const matchesDate = dateFilter === '' ||\n      (patient.lastProcessed && new Date(patient.lastProcessed).toISOString().split('T')[0] === dateFilter);\n\n    return matchesSearch && matchesClinic && matchesDate;\n  });\n\n  // Group filtered patients by clinic\n  const groupedPatients = clinics.map(clinic => ({\n    clinic,\n    patients: filteredPatients.filter(p => p.clinicId === clinic.id)\n  })).filter(group => group.patients.length > 0);\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedClinicFilter('');\n    setDateFilter('');\n  };\n\n  const handleFileUpload = (type, event) => {\n    const file = event.target.files[0];\n    if (file) {\n      if (type === 'eo') {\n        setEyesOpenFile(file);\n      } else {\n        setEyesClosedFile(file);\n      }\n      // Reset processing state when new files are uploaded\n      setProcessingComplete(false);\n      setResults(null);\n      setConsoleLog([]);\n      setProgress(0);\n      setIsSaved(false);\n      setIsSaving(false);\n      setPdfUrl(null);\n    }\n  };\n\n  const processQEEGFiles = async () => {\n    setIsProcessing(true);\n    setConsoleLog([]);\n    setProgress(0);\n\n    try {\n      // Console log: Starting process\n      setConsoleLog(prev => [...prev, 'üöÄ Starting QEEG analysis...']);\n      setProgress(10);\n\n      // Create FormData to send files\n      const formData = new FormData();\n      formData.append('eyesOpen', eyesOpenFile);\n      formData.append('eyesClosed', eyesClosedFile);\n      formData.append('patientId', selectedPatient.id);\n      formData.append('patientName', getPatientName(selectedPatient));\n      formData.append('clinicName', selectedPatient.clinicName);\n      // Add complete patient data for PDF\n      formData.append('dateOfBirth', selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified');\n      formData.append('age', selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A');\n      formData.append('gender', selectedPatient.gender || 'Not specified');\n      formData.append('handedness', selectedPatient.handedness || 'Right');\n\n      setConsoleLog(prev => [...prev, 'üì§ Uploading files to server...']);\n      setProgress(20);\n\n      // Validate file sizes before upload (50MB limit)\n      const maxFileSize = 50 * 1024 * 1024; // 50MB\n      if (eyesOpenFile.size > maxFileSize || eyesClosedFile.size > maxFileSize) {\n        const oversizedFile = eyesOpenFile.size > maxFileSize ? eyesOpenFile : eyesClosedFile;\n        const fileSizeMB = (oversizedFile.size / (1024 * 1024)).toFixed(2);\n        throw new Error(`File \"${oversizedFile.name}\" is too large (${fileSizeMB}MB). Maximum file size is 50MB. Please compress or split the file.`);\n      }\n\n      // Call backend API with timeout\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 300000); // 5 minute timeout for large files\n\n      let response;\n      try {\n        response = await fetch(`${apiUrl}/qeeg/process`, {\n          method: 'POST',\n          body: formData,\n          signal: controller.signal\n        });\n        clearTimeout(timeoutId);\n      } catch (fetchError) {\n        clearTimeout(timeoutId);\n        if (fetchError.name === 'AbortError') {\n          throw new Error('Upload timed out after 5 minutes. Please check: 1) File size (<50MB), 2) Backend is running (npm run dev:backend), 3) Internet connection is stable. Try compressing PDF files if too large.');\n        }\n        // Check if it's a network error (backend not running)\n        if (fetchError.message.includes('Failed to fetch') || fetchError.message.includes('fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure the backend is running on port 5000. Run \"npm run dev:backend\" to start the server.');\n        }\n        throw fetchError;\n      }\n\n      setConsoleLog(prev => [...prev, 'üìä Parsing QEEG data tables...']);\n      setProgress(40);\n\n      if (!response.ok) {\n        let errorMessage = 'Failed to process QEEG files';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n\n          // Add specific error messages based on error code\n          if (errorData.code === 'LIMIT_FILE_SIZE') {\n            errorMessage = 'File size exceeds the maximum limit of 50MB. Please compress your files or split them into smaller parts.';\n          } else if (errorData.code === 'GEMINI_QUOTA_EXCEEDED' || response.status === 429) {\n            // Extract retry time if available in error message\n            let retryTime = null;\n            const retryMatch = errorData.message?.match(/retry in ([\\d.]+)s/i);\n            if (retryMatch) {\n              retryTime = Math.ceil(parseFloat(retryMatch[1]));\n            }\n\n            errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                         'The Gemini AI service has reached its daily limit (20 requests/day).\\n\\n' +\n                         '‚úÖ Quick Solutions:\\n' +\n                         (retryTime ? `‚Ä¢ Wait ${retryTime} seconds and try again (quota will reset)\\n` : '‚Ä¢ Wait a few minutes and try again\\n') +\n                         '‚Ä¢ Re-upload the SAME files you processed before (uses cache, no quota needed)\\n' +\n                         '‚Ä¢ Contact administrator to upgrade API plan\\n\\n' +\n                         'üí° Tip: The system remembers files you\\'ve already processed!';\n          } else if (response.status === 503) {\n            errorMessage = 'Backend service is unavailable. Please ensure the server is running.';\n          } else if (response.status === 413) {\n            errorMessage = 'File payload is too large. Maximum allowed size is 50MB.';\n          } else if (response.status === 500) {\n            // Parse detailed error from server for 500 errors\n            if (errorData.message && (errorData.message.includes('Gemini') || errorData.message.includes('quota') || errorData.message.includes('429'))) {\n              // Extract retry time from detailed error\n              let retryTime = null;\n              const retryMatch = errorData.message.match(/retry in ([\\d.]+)s/i);\n              if (retryMatch) {\n                retryTime = Math.ceil(parseFloat(retryMatch[1]));\n              }\n\n              // Check if it's specifically a quota error\n              if (errorData.message.includes('quota') || errorData.message.includes('429')) {\n                errorMessage = '‚ö†Ô∏è API Quota Exceeded\\n\\n' +\n                             'Google Gemini API has reached its free tier limit.\\n\\n' +\n                             '‚úÖ What to do:\\n' +\n                             (retryTime ? `1. Wait ${retryTime} seconds and try again\\n` : '1. Wait a few minutes and try again\\n') +\n                             '2. Or re-upload the SAME files (cached, no quota used)\\n' +\n                             '3. Or contact admin to upgrade API plan\\n\\n' +\n                             'üìä Free tier: 20 requests per day\\n' +\n                             'üí∞ Upgrade: https://ai.google.dev/pricing';\n              } else if (errorData.message && (\n                errorData.message.includes('PDF text extraction') ||\n                errorData.message.includes('Missing power tables') ||\n                errorData.code === 'PDF_EXTRACTION_FAILED'\n              )) {\n                // PDF extraction specific error\n                errorMessage = '‚ö†Ô∏è PDF Extraction Error\\n\\n' +\n                             errorData.message + '\\n\\n' +\n                             'üí° Troubleshooting:\\n' +\n                             '1. Verify PDFs contain QEEG frequency band tables\\n' +\n                             '2. Ensure PDFs are not password-protected\\n' +\n                             '3. Check if PDFs are scanned images (need OCR)\\n' +\n                             '4. Try exporting PDFs in a different format\\n' +\n                             '5. Contact support if issue persists';\n              } else {\n                errorMessage = '‚ö†Ô∏è Gemini AI Service Error\\n\\n' +\n                             'There was an issue with the AI service.\\n\\n' +\n                             'Please try again in a moment or contact support if the issue persists.';\n              }\n            }\n          }\n        } catch (e) {\n          // If error response is not JSON, use status text\n          errorMessage = `Server error (${response.status}): ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data = await response.json();\n\n      // Capture data type (raw or zscore)\n      if (data.data.dataType) {\n        setDataType(data.data.dataType);\n        console.log('üìä Data type:', data.data.dataType);\n        if (data.data.dataType === 'zscore') {\n          setConsoleLog(prev => [...prev, 'üî¨ Z-Score mode detected']);\n        }\n      }\n\n      // Auto-set PDF URL if returned from backend\n      if (data.data.pdfUrl) {\n        setPdfUrl(data.data.pdfUrl);\n        console.log('‚úÖ PDF auto-generated:', data.data.pdfUrl);\n        setConsoleLog(prev => [...prev, 'üìÑ PDF report generated automatically']);\n      }\n\n      setConsoleLog(prev => [...prev, 'üßÆ Calculating 7 brain health parameters...']);\n      setProgress(60);\n\n      // Simulate calculation steps for better UX\n      await new Promise(resolve => setTimeout(resolve, 500));\n      setConsoleLog(prev => [...prev, '  ‚úì Cognition parameter calculated']);\n      setProgress(65);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Stress parameter calculated']);\n      setProgress(70);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Focus & Attention parameter calculated']);\n      setProgress(75);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Burnout & Fatigue parameter calculated']);\n      setProgress(80);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Emotional Regulation parameter calculated']);\n      setProgress(85);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Learning parameter calculated']);\n      setProgress(90);\n\n      await new Promise(resolve => setTimeout(resolve, 400));\n      setConsoleLog(prev => [...prev, '  ‚úì Creativity parameter calculated']);\n      setProgress(95);\n\n      // Convert API results to display format with NaN/Infinity protection\n      const finalResults = data.data.results.map(param => {\n        // Sanitize score values to prevent NaN/Infinity\n        const sanitizedScore = Number.isFinite(param.score) ? param.score : 0;\n        const sanitizedMaxScore = Number.isFinite(param.maxScore) && param.maxScore > 0 ? param.maxScore : 3;\n        const percentage = Math.round((sanitizedScore / sanitizedMaxScore) * 100);\n\n        // Sanitize metrics\n        const sanitizedMetrics = (param.metrics || []).map(metric => ({\n          ...metric,\n          score: Number.isFinite(metric.score) ? metric.score : 0,\n          value: Number.isFinite(metric.value) ? metric.value : 0\n        }));\n\n        return {\n          parameter: param.name,\n          score: Number.isFinite(percentage) ? percentage : 0,\n          rawScore: `${sanitizedScore}/${sanitizedMaxScore}`,\n          status: param.classification,\n          color: param.classification === 'High' ? 'green' :\n                 param.classification === 'Medium' ? 'blue' : 'orange',\n          metrics: sanitizedMetrics\n        };\n      });\n\n      setConsoleLog(prev => [...prev, '‚úÖ Analysis complete!']);\n      setConsoleLog(prev => [...prev, `üìà Overall Score: ${data.data.overallScore}/${data.data.maxScore}`]);\n      setProgress(100);\n\n      setResults(finalResults);\n      setIsProcessing(false);\n      setProcessingComplete(true);\n      setIsSaved(false); // Mark as not saved yet\n\n      toast.success('QEEG analysis completed successfully!');\n\n    } catch (error) {\n      console.error('Error processing QEEG files:', error);\n      setConsoleLog(prev => [...prev, `‚ùå Error: ${error.message}`]);\n      setIsProcessing(false);\n      toast.error(error.message || 'Failed to process QEEG files');\n    }\n  };\n\n  const saveResultsToDatabase = async (resultData) => {\n    if (!resultData) {\n      toast.error('No results to save');\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      toast.loading('Saving results to database...', { id: 'save-results' });\n\n      console.log('üíæ Saving results to database...');\n\n      // PDF should already exist from auto-generation\n      if (!pdfUrl) {\n        console.warn('‚ö†Ô∏è No PDF URL available - PDF may not have been generated');\n      }\n\n      const algorithmResult = {\n        // Don't specify ID - let database auto-generate UUID\n        patientId: selectedPatient.id,\n        clinicId: selectedPatient.clinicId,\n        algorithmName: 'Algorithm 1 - 7 Parameters',\n        inputData: {\n          patientName: getPatientName(selectedPatient),\n          clinicName: selectedPatient.clinicName,\n          eyesOpenFile: eyesOpenFile?.name,\n          eyesClosedFile: eyesClosedFile?.name,\n          processedAt: new Date().toISOString(),\n          processedBy: 'super_admin'\n        },\n        outputData: resultData,\n        pdfUrl: pdfUrl || null,\n        status: 'completed',\n        errorMessage: null\n      };\n\n      console.log('üíæ Saving to database...');\n      console.log('   Patient:', algorithmResult.inputData.patientName);\n      console.log('   PDF URL:', pdfUrl || 'NOT SET');\n      console.log('   PDF Type:', pdfUrl ? (pdfUrl.startsWith('http') ? 'Supabase' : 'Local') : 'None');\n\n      await DatabaseService.add('algorithmResults', algorithmResult);\n\n      setIsSaved(true);\n      setIsSaving(false);\n\n      toast.success('‚úÖ Results saved successfully!', { id: 'save-results' });\n\n      // Reload history and patient list to update status\n      loadProcessingHistory(selectedPatient.id);\n      loadPatients();\n    } catch (error) {\n      console.error('‚ùå Error saving results:', error);\n      setIsSaving(false);\n      toast.error('‚ùå Failed to save results: ' + error.message, { id: 'save-results' });\n    }\n  };\n\n  const handleSaveResults = async () => {\n    if (results) {\n      try {\n        console.log('üíæ Saving results to database...');\n\n        // Step 1: Check if existing PDF URL available (no generation!)\n        let finalPdfUrl = pdfUrl;\n\n        if (!finalPdfUrl) {\n          console.log('üîç Checking for existing PDF in database...');\n          const existingPdf = await findExistingPDF();\n\n          if (existingPdf) {\n            console.log('‚úÖ Found existing PDF URL:', existingPdf);\n            finalPdfUrl = existingPdf;\n            setPdfUrl(existingPdf);\n          } else {\n            console.log('‚ÑπÔ∏è No existing PDF found - save data only, PDF can be generated later');\n          }\n        }\n\n        // Step 2: Save results to database (with or without PDF URL)\n        await saveResultsToDatabase(results);\n\n        // Step 3: Show success message\n        if (finalPdfUrl) {\n          toast.success('‚úÖ Results saved! PDF is available for download.');\n        } else {\n          toast.success('‚úÖ Results saved! Generate PDF from history to get report.');\n        }\n\n        console.log('‚úÖ Save complete! PDF URL:', finalPdfUrl || 'Not available');\n\n      } catch (error) {\n        console.error('‚ùå Error saving results:', error);\n        toast.error('Failed to save results: ' + error.message);\n      }\n    }\n  };\n\n  // New function: Generate and download PDF separately\n  const handleGenerateAndDownloadPDF = async () => {\n    if (!results) {\n      toast.error('No results to generate PDF from');\n      return;\n    }\n\n    try {\n      console.log('üìÑ Starting PDF generation...');\n      toast.loading('Generating NeuroSense PDF Report...', { id: 'generate-pdf' });\n\n      const pdfResult = await generatePDFReport(results);\n\n      if (pdfResult && pdfResult.url) {\n        setPdfUrl(pdfResult.url);\n        console.log('‚úÖ PDF generated successfully:', pdfResult.url);\n        toast.success('PDF Report generated!', { id: 'generate-pdf' });\n\n        // Auto-download the newly generated PDF\n        setTimeout(() => {\n          console.log('üì• Auto-downloading newly generated PDF...');\n          handleDownloadPDF();\n        }, 500);\n      } else {\n        console.error('‚ö†Ô∏è PDF generation returned no URL');\n        toast.error('Failed to generate PDF', { id: 'generate-pdf' });\n      }\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      toast.error('Failed to generate PDF: ' + error.message, { id: 'generate-pdf' });\n    }\n  };\n\n  // Helper function to find existing PDF for this patient\n  const findExistingPDF = async () => {\n    try {\n      if (!selectedPatient || !selectedPatient.id) return null;\n\n      // Get patient's processing history\n      const allResults = await DatabaseService.get('algorithmResults');\n      const patientResults = allResults.filter(r => r.patientId === selectedPatient.id);\n\n      console.log(`üîç Found ${patientResults.length} existing records for patient ${getPatientName(selectedPatient)}`);\n\n      // Find most recent record with a PDF\n      const recordsWithPdf = patientResults\n        .filter(r => r.pdfUrl && r.pdfUrl !== 'null' && r.pdfUrl !== '')\n        .sort((a, b) => {\n          const dateA = new Date(a.inputData?.processedAt || a.processedAt || a.createdAt || 0);\n          const dateB = new Date(b.inputData?.processedAt || b.processedAt || b.createdAt || 0);\n          return dateB - dateA; // Most recent first\n        });\n\n      if (recordsWithPdf.length > 0) {\n        const latestPdf = recordsWithPdf[0].pdfUrl;\n        console.log('‚úÖ Found most recent PDF:', latestPdf);\n        return latestPdf;\n      }\n\n      console.log('‚ùå No existing PDF found in database');\n      return null;\n    } catch (error) {\n      console.error('Error finding existing PDF:', error);\n      return null;\n    }\n  };\n\n  const handleExecuteCalculation = () => {\n    if (eyesOpenFile && eyesClosedFile) {\n      processQEEGFiles();\n    } else {\n      toast.error('Please upload both QEEG data files');\n    }\n  };\n\n  const handleExportResults = () => {\n    if (results) {\n      // Create CSV content\n      const csvContent = [\n        ['Parameter', 'Score (%)', 'Status'],\n        ...results.map(r => [r.parameter, r.score, r.status])\n      ].map(row => row.join(',')).join('\\n');\n\n      // Create and download file\n      const blob = new Blob([csvContent], { type: 'text/csv' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'neurosense-algorithm-results.csv';\n      a.click();\n      window.URL.revokeObjectURL(url);\n    }\n  };\n\n  const generatePDFReport = async (resultData) => {\n    if (!resultData || !selectedPatient) {\n      console.error('‚ùå Cannot generate PDF: Missing resultData or selectedPatient');\n      toast.error('Cannot generate PDF: Missing data');\n      return null;\n    }\n\n    try {\n      console.log('üîß Preparing patient data...');\n\n      // Prepare patient data - FIXED: Use current date for recording, not DOB\n      const patientData = {\n        name: getPatientName(selectedPatient),\n        dateOfRecording: new Date().toISOString().split('T')[0], // TODAY'S DATE, not DOB!\n        dateOfBirth: selectedPatient.dateOfBirth || selectedPatient.date_of_birth || 'Not specified',\n        age: selectedPatient.age || calculateAge(selectedPatient.dateOfBirth || selectedPatient.date_of_birth) || 'N/A',\n        gender: selectedPatient.gender || 'Not specified',\n        handedness: selectedPatient.handedness || 'Right', // Default to Right if not specified\n        patientId: selectedPatient.id,\n        occupation: selectedPatient.occupation || 'Not specified',\n        symptoms: selectedPatient.symptoms || []\n      };\n\n      console.log('üë§ Patient Data (Fixed):', patientData);\n      console.log('   Name:', patientData.name);\n      console.log('   Recording Date:', patientData.dateOfRecording);\n      console.log('   DOB:', patientData.dateOfBirth);\n      console.log('   Age:', patientData.age);\n      console.log('   Gender:', patientData.gender);\n      console.log('   Handedness:', patientData.handedness);\n\n      // Prepare algorithm results with STRONG validation to avoid NaN errors\n      const algorithmResults = {\n        parameters: resultData.map(result => {\n          const scoreParts = (result.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          const maxScore = parseInt(scoreParts[1]) || 3;\n\n          // Clean metrics to remove any NaN values\n          const cleanMetrics = (result.metrics || []).map(metric => ({\n            name: metric.name || 'Unknown',\n            score: isNaN(metric.score) ? 0 : (parseInt(metric.score) || 0),\n            value: isNaN(metric.value) ? 0 : (parseFloat(metric.value) || 0),\n            threshold: metric.threshold || 'Not provided'\n          }));\n\n          return {\n            name: result.parameter || 'Unknown Parameter',\n            score: isNaN(score) ? 0 : score,\n            maxScore: isNaN(maxScore) ? 3 : maxScore,\n            classification: result.status || 'Unknown',\n            metrics: cleanMetrics\n          };\n        }),\n        overallScore: resultData.reduce((sum, r) => {\n          const scoreParts = (r.rawScore || '0/3').split('/');\n          const score = parseInt(scoreParts[0]) || 0;\n          return sum + (isNaN(score) ? 0 : score);\n        }, 0)\n      };\n\n      console.log('üìä Algorithm Results (NaN-free):', algorithmResults);\n\n      // EXTRA SAFETY: Double-check for any NaN in the data\n      const dataString = JSON.stringify(algorithmResults);\n      if (dataString.includes('NaN')) {\n        console.error('‚ö†Ô∏è WARNING: Found NaN in algorithm results!');\n        console.error('Raw data:', algorithmResults);\n        throw new Error('Data contains NaN values. Please check the calculation results.');\n      }\n\n      console.log('üìä Algorithm Results:', algorithmResults);\n\n      // Prepare QEEG data (use sample data if not available)\n      const qeegData = {\n        EC: {\n          absolute: { Fz: { Delta: 5.2, Theta: 4.1, Alpha: 8.3, Beta: 6.2, HiBeta: 3.1 } },\n          relative: { Pz: { Alpha: 45.2 } },\n          special: { alphaPeak: 10.3, O1: 10.1 }\n        },\n        EO: {\n          absolute: { Fz: { Theta: 3.8, Beta: 3.2, HiBeta: 2.5 } },\n          relative: { Pz: { Alpha: 28.7 } }\n        }\n      };\n\n      // Call backend API to generate PDF\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n      const pdfEndpoint = `${apiUrl}/qeeg/generate-pdf`;\n\n      console.log('üåê Calling backend API:', pdfEndpoint);\n      console.log('üì° Request payload size:', JSON.stringify({ patientData, algorithmResults, qeegData }).length, 'bytes');\n\n      // Add timeout handling\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 60000); // 60 second timeout (increased for Gemini AI)\n\n      const response = await fetch(pdfEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          patientData,\n          algorithmResults,\n          qeegData\n        }),\n        signal: controller.signal\n      }).catch(error => {\n        clearTimeout(timeoutId);\n        if (error.name === 'AbortError') {\n          throw new Error('PDF generation timed out after 60 seconds. Please check: 1) Backend is running, 2) Gemini API key is configured, 3) Internet connection is stable.');\n        }\n        if (error.message.includes('Failed to fetch')) {\n          throw new Error('Cannot connect to backend server. Please ensure backend is running on port 5000 (run: npm run dev:backend)');\n        }\n        throw error;\n      });\n\n      clearTimeout(timeoutId);\n\n      console.log('üì° Backend response status:', response.status);\n      console.log('üì° Backend response headers:', Object.fromEntries(response.headers.entries()));\n\n      if (!response.ok) {\n        let errorMessage = `Server returned ${response.status}`;\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n          console.error('‚ùå Backend error data:', errorData);\n        } catch (e) {\n          const errorText = await response.text();\n          errorMessage = errorText || errorMessage;\n          console.error('‚ùå Backend error text:', errorText);\n        }\n        throw new Error(`Failed to generate PDF: ${errorMessage}`);\n      }\n\n      const data = await response.json();\n      console.log('üì¶ Backend response data:', data);\n\n      if (!data || !data.success || !data.data) {\n        console.error('‚ùå Invalid response format:', data);\n        throw new Error('Invalid response from server');\n      }\n\n      // Use the complete URL from backend instead of constructing it\n      const pdfResult = {\n        url: data.data.url, // Backend already provides complete URL\n        path: data.data.path,\n        filename: data.data.filename\n      };\n\n      console.log('‚úÖ PDF generated successfully!', pdfResult);\n      console.log('‚úÖ PDF URL:', pdfResult.url);\n\n      return pdfResult;\n\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      console.error('‚ùå Error name:', error.name);\n      console.error('‚ùå Error message:', error.message);\n\n      if (error.message && error.stack) {\n        console.error('‚ùå Error stack:', error.stack);\n      }\n\n      // Provide specific error messages based on error type\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\n        console.error('‚ùå NETWORK ERROR: Cannot connect to backend server');\n        console.error('‚ùå Please ensure backend server is running on http://localhost:5000');\n        toast.error('Cannot connect to server. Please ensure backend is running on port 5000.');\n      } else if (error.name === 'AbortError') {\n        console.error('‚ùå TIMEOUT ERROR: PDF generation took too long');\n        toast.error('PDF generation timed out. Server might be overloaded.');\n      } else {\n        console.error('‚ùå PDF GENERATION ERROR:', error.message);\n        toast.error(`PDF generation failed: ${error.message}`);\n      }\n\n      return null;\n    }\n  };\n\n  const handleDownloadPDF = async () => {\n    if (!pdfUrl) {\n      toast.error('PDF not available. Please save results first.');\n      return;\n    }\n\n    try {\n      toast.loading('Downloading PDF...', { id: 'download-pdf' });\n\n      // Construct full backend URL\n      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\n      const backendBaseUrl = apiUrl.replace('/api', ''); // Remove /api to get base URL\n\n      // Handle both Supabase URLs and local URLs\n      let fullPdfUrl;\n      if (pdfUrl.startsWith('http')) {\n        // It's already a full URL (Supabase)\n        fullPdfUrl = pdfUrl;\n      } else {\n        // It's a local path, construct full URL\n        fullPdfUrl = `${backendBaseUrl}${pdfUrl}`;\n      }\n\n      console.log('üîΩ Download Info:', {\n        originalPdfUrl: pdfUrl,\n        backendBaseUrl,\n        fullPdfUrl,\n        isSupabase: pdfUrl.startsWith('http')\n      });\n\n      // For local files, try direct window.open first (simpler approach)\n      if (!pdfUrl.startsWith('http')) {\n        console.log('üì• Using direct download method for local file');\n\n        // Create a hidden link and click it\n        const link = document.createElement('a');\n        link.href = fullPdfUrl;\n        link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n        link.target = '_blank';\n\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        toast.success('PDF download started!', { id: 'download-pdf' });\n        return;\n      }\n\n      // For Supabase URLs, use fetch method\n      console.log('üì• Using fetch method for Supabase URL');\n\n      const response = await fetch(fullPdfUrl);\n\n      if (!response.ok) {\n        console.error('‚ùå Download failed:', {\n          status: response.status,\n          statusText: response.statusText\n        });\n        throw new Error(`Server returned ${response.status}: ${response.statusText}`);\n      }\n\n      // Convert to blob\n      const blob = await response.blob();\n\n      // Verify blob is valid\n      if (!blob || blob.size === 0) {\n        throw new Error('Downloaded file is empty');\n      }\n\n      console.log('‚úÖ PDF fetched successfully, size:', (blob.size / 1024).toFixed(2), 'KB');\n\n      // Create download link\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n      // Trigger download\n      document.body.appendChild(link);\n      link.click();\n\n      // Cleanup\n      setTimeout(() => {\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(downloadUrl);\n      }, 100);\n\n      toast.success('PDF downloaded successfully!', { id: 'download-pdf' });\n\n    } catch (error) {\n      console.error('‚ùå Download error:', {\n        error: error.message,\n        pdfUrl,\n        stack: error.stack\n      });\n\n      // Provide more helpful error messages\n      let errorMessage = 'Failed to download PDF';\n      if (error.message.includes('404')) {\n        errorMessage = 'PDF file not found on server';\n      } else if (error.message.includes('Failed to fetch')) {\n        errorMessage = 'Network error. Please check your connection.';\n      } else {\n        errorMessage = `Download failed: ${error.message}`;\n      }\n\n      toast.error(errorMessage, { id: 'download-pdf' });\n    }\n  };\n\n  const calculateAge = (dateOfBirth) => {\n    if (!dateOfBirth) return 'N/A';\n    const today = new Date();\n    const birthDate = new Date(dateOfBirth);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    return age;\n  };\n\n  // Helper function to get color based on score\n  // 1/3 = Red, 2/3 = Yellow, 3/3 = Green\n  const getScoreColor = (rawScore) => {\n    if (!rawScore) return 'gray';\n\n    const [score, maxScore] = rawScore.split('/').map(Number);\n\n    if (score === 1) return 'red';      // 1/3\n    if (score === 2) return 'yellow';   // 2/3\n    if (score === 3) return 'green';    // 3/3\n\n    return 'gray';\n  };\n\n  const getStatusColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'text-red-500';\n      case 'yellow': return 'text-yellow-500';\n      case 'green': return 'text-green-500';\n      default: return 'text-gray-500';\n    }\n  };\n\n  const getStatusBgColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    if (color === 'green') return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400';\n    if (color === 'yellow') return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400';\n    if (color === 'red') return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400';\n    return 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400';\n  };\n\n  const getProgressBarColor = (rawScore) => {\n    const color = getScoreColor(rawScore);\n    switch (color) {\n      case 'red': return 'bg-red-500';\n      case 'yellow': return 'bg-yellow-500';\n      case 'green': return 'bg-green-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading patients...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Patient List View\n  if (!showProcessingUI) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n          <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n          <p className=\"text-primary-light mt-2\">Select a patient to generate Algorithm 1 report</p>\n        </div>\n\n        {/* Filter Bar */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4\">\n          <div className=\"flex flex-col lg:flex-row gap-4\">\n            {/* Patient Search */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Search Patient\n              </label>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search by name or email...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clinic Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Clinic\n              </label>\n              <div className=\"relative\">\n                <Building2 className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <select\n                  value={selectedClinicFilter}\n                  onChange={(e) => setSelectedClinicFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary appearance-none\"\n                >\n                  <option value=\"\">All Clinics</option>\n                  {clinics.map(clinic => (\n                    <option key={clinic.id} value={clinic.id}>\n                      {clinic.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            {/* Date Filter */}\n            <div className=\"flex-1\">\n              <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Filter by Date\n              </label>\n              <div className=\"relative\">\n                <Calendar className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                <input\n                  type=\"date\"\n                  value={dateFilter}\n                  onChange={(e) => setDateFilter(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Clear Filters Button */}\n            {(searchTerm || selectedClinicFilter || dateFilter) && (\n              <div className=\"flex items-end\">\n                <button\n                  onClick={clearFilters}\n                  className=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  <span>Clear</span>\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Active Filters Display */}\n          {(searchTerm || selectedClinicFilter || dateFilter) && (\n            <div className=\"mt-3 flex flex-wrap gap-2\">\n              {searchTerm && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\">\n                  Search: \"{searchTerm}\"\n                </span>\n              )}\n              {selectedClinicFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400\">\n                  Clinic: {clinics.find(c => c.id === selectedClinicFilter)?.name}\n                </span>\n              )}\n              {dateFilter && (\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\">\n                  Date: {new Date(dateFilter).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}\n                </span>\n              )}\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 self-center\">\n                ({filteredPatients.length} {filteredPatients.length === 1 ? 'patient' : 'patients'} found)\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Patient List - Clinic-wise */}\n        <div className=\"space-y-4\">\n          {groupedPatients.length > 0 ? (\n            groupedPatients.map(({ clinic, patients: clinicPatients }) => (\n            <div key={clinic.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              {/* Clinic Header */}\n              <div className=\"bg-accent-light dark:bg-primary/20 border-b border-primary-light dark:border-primary px-6 py-3\">\n                <div className=\"flex items-center\">\n                  <Building2 className=\"h-5 w-5 text-primary mr-2\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                    {clinic.name}\n                  </h3>\n                  <span className=\"ml-3 text-sm text-gray-600 dark:text-gray-400\">\n                    ({clinicPatients.length} {clinicPatients.length === 1 ? 'patient' : 'patients'})\n                  </span>\n                </div>\n              </div>\n\n              {/* Patient Table */}\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Patient Name\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Email\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Previous Scans\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Status\n                      </th>\n                      <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                        Action\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n                    {clinicPatients.map(patient => (\n                      <tr key={patient.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700/50\">\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex items-center\">\n                            <User className=\"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2\" />\n                            <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                              {getPatientName(patient)}\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          {patient.email || 'N/A'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\n                          <span className=\"flex items-center\">\n                            <History className=\"h-4 w-4 mr-1\" />\n                            {patient.totalScans || 0} {patient.totalScans === 1 ? 'scan' : 'scans'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          {getStatusBadge(patient.algorithmStatus, patient.lastProcessed)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right\">\n                          <button\n                            onClick={() => handleGenerateReport(patient)}\n                            className=\"bg-primary hover:bg-navy-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-md flex items-center ml-auto\"\n                          >\n                            <FileText className=\"h-4 w-4 mr-2\" />\n                            {patient.algorithmStatus === 'completed' ? 'View/Generate' : 'Generate Report'}\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            ))\n          ) : (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center\">\n              <Filter className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4\" />\n              <p className=\"text-gray-600 dark:text-gray-400 font-medium\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'No patients match your filters'\n                  : 'No patients found'\n                }\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-500 mt-2\">\n                {searchTerm || selectedClinicFilter || dateFilter\n                  ? 'Try adjusting your search criteria or clear filters'\n                  : 'Patients will appear here once they are registered in the system'\n                }\n              </p>\n              {(searchTerm || selectedClinicFilter || dateFilter) && (\n                <button\n                  onClick={clearFilters}\n                  className=\"mt-4 px-4 py-2 bg-primary hover:bg-navy-700 text-white rounded-lg text-sm font-medium transition-colors\"\n                >\n                  Clear Filters\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // Processing UI View\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Back Button */}\n      <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-white shadow-lg\">\n        <button\n          onClick={handleBackToList}\n          className=\"flex items-center text-primary-light hover:text-white mb-3 transition-colors\"\n        >\n          <ArrowLeft className=\"h-5 w-5 mr-2\" />\n          Back to Patient List\n        </button>\n        <h1 className=\"text-2xl font-bold\">NeuroSense - Algorithm 1 Data Processor</h1>\n        <div className=\"flex items-center gap-3 mt-2\">\n          <p className=\"text-primary-light\">\n            Processing for: <span className=\"font-semibold\">{getPatientName(selectedPatient)}</span> | {selectedPatient?.clinicName}\n          </p>\n          {dataType === 'zscore' && (\n            <span className=\"inline-flex items-center px-3 py-1 bg-purple-500/20 text-purple-200 text-xs font-medium rounded-full border border-purple-400/30\">\n              üî¨ Z-Score Mode\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Panel - QEEG Data Input */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            QEEG Data Input\n          </h2>\n          <div className=\"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <p className=\"text-xs text-blue-800 dark:text-blue-300\">\n              <span className=\"font-semibold\">‚ÑπÔ∏è Note:</span> Data will be extracted from <strong>pages 13 & 24</strong> of both PDF files\n            </p>\n          </div>\n\n          {/* Eyes Open Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EO - Eyes Open PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('eo', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesOpenFile ? eyesOpenFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesOpenFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Eyes Closed Upload */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              EC - Eyes Closed PDF <span className=\"text-xs text-gray-500\">(Pages 13 & 24)</span>\n            </label>\n            <div className=\"relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-primary dark:hover:border-primary-light transition-colors\">\n              <input\n                type=\"file\"\n                accept=\".csv,.txt,.dat,.pdf\"\n                onChange={(e) => handleFileUpload('ec', e)}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n              />\n              <Upload className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {eyesClosedFile ? eyesClosedFile.name : 'Drag & Drop or Click to Upload'}\n              </p>\n              {eyesClosedFile && (\n                <CheckCircle className=\"h-6 w-6 text-green-500 mx-auto mt-2\" />\n              )}\n            </div>\n          </div>\n\n          {/* Data Loaded Progress */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Data Loaded\n            </label>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\">\n              <div\n                className=\"bg-green-500 h-2.5 rounded-full transition-all duration-300\"\n                style={{ width: `${eyesOpenFile && eyesClosedFile ? 100 : eyesOpenFile || eyesClosedFile ? 50 : 0}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Middle Panel - Algorithm Processing */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Algorithm 1 Processing\n          </h2>\n\n          {/* Execute Button */}\n          <button\n            onClick={handleExecuteCalculation}\n            disabled={!eyesOpenFile || !eyesClosedFile || isProcessing || isSaved}\n            className={`w-full mb-6 py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n              eyesOpenFile && eyesClosedFile && !isProcessing && !isSaved\n                ? 'bg-primary hover:bg-navy-700 text-white'\n                : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n            }`}\n          >\n            <Play className=\"h-5 w-5\" />\n            <span>Execute Calculation</span>\n          </button>\n\n          {/* Processing Animation */}\n          {isProcessing && (\n            <div className=\"bg-gradient-to-r from-primary to-navy-700 rounded-lg p-6 text-center mb-6 shadow-lg\">\n              <div className=\"relative inline-block\">\n                <Activity className=\"h-16 w-16 text-white animate-pulse\" />\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-20 h-20 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                </div>\n              </div>\n              <p className=\"text-white font-medium mt-4\">Processing...</p>\n              <p className=\"text-primary-light text-sm\">{consoleLog.length} actions done</p>\n            </div>\n          )}\n\n          {/* Processing Complete */}\n          {processingComplete && (\n            <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 text-center mb-6\">\n              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-2\" />\n              <p className=\"text-green-800 dark:text-green-400 font-medium\">Processing Complete!</p>\n            </div>\n          )}\n\n          {/* Console */}\n          <div className=\"bg-gray-900 dark:bg-black rounded-lg p-4 min-h-[200px] max-h-[300px] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-gray-700\">\n              <h3 className=\"text-sm font-medium text-gray-300\">Console</h3>\n              <button\n                onClick={() => setConsoleLog([])}\n                className=\"text-xs text-gray-400 hover:text-gray-200\"\n              >\n                Clear\n              </button>\n            </div>\n            <div className=\"space-y-1 font-mono text-xs\">\n              {consoleLog.length > 0 ? (\n                consoleLog.map((log, index) => (\n                  <div key={index} className=\"text-green-400\">\n                    &gt; {log}\n                  </div>\n                ))\n              ) : (\n                <div className=\"text-gray-500 italic\">Console output will appear here...</div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Final 7 Parameter Scores */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              Final 7 Parameter Scores\n            </h2>\n            {results && (\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Total: {results.reduce((sum, r) => sum + parseInt(r.rawScore.split('/')[0]), 0)}/21\n              </span>\n            )}\n          </div>\n\n          {/* Algorithm Info Card */}\n          <div className=\"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n            <div className=\"flex items-start space-x-2\">\n              <Activity className=\"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0\" />\n              <div>\n                <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1\">\n                  7-Parameter Brain Health Analysis\n                </h3>\n                <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                  Each parameter is calculated from 3 sub-metrics. Score: 0-1 (Low), 2 (Medium), 3 (High).\n                  Each metric shows its calculated value and threshold comparison.\n                </p>\n                <div className=\"mt-2 text-xs text-blue-600 dark:text-blue-400\">\n                  <strong>Parameters:</strong> Cognition ‚Ä¢ Stress ‚Ä¢ Focus & Attention ‚Ä¢ Burnout & Fatigue ‚Ä¢\n                  Emotional Regulation ‚Ä¢ Learning ‚Ä¢ Creativity\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {results ? (\n            <>\n              <div className=\"space-y-4 mb-6\">\n                {results.map((result, index) => {\n                  // Determine background color for main parameter card (Stress and Burnout & Fatigue)\n                  const isStressOrBurnout = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n                  let mainCardBgClass = 'border border-gray-200 dark:border-gray-700';\n\n                  if (isStressOrBurnout && result.rawScore) {\n                    const [score] = result.rawScore.split('/').map(Number);\n                    // 3/3 = Low problem (all normal) = GREEN\n                    // 2/3 = Medium = YELLOW\n                    // 1/3 or 0/3 = High problem = RED\n                    if (score === 3) {\n                      mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';\n                    } else if (score === 2) {\n                      mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';\n                    } else if (score <= 1) {\n                      mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';\n                    }\n                  }\n\n                  return (\n                    <div key={index} className={`rounded-lg p-3 ${mainCardBgClass}`}>\n                      {/* Main Parameter */}\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">\n                          {result.parameter}\n                        </span>\n                        <div className=\"flex items-center space-x-3\">\n                          <span className={`text-base font-bold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                          <span className={`text-xs px-2.5 py-1 rounded-full font-medium ${getStatusBgColor(result.rawScore)}`}>\n                            {result.status}\n                          </span>\n                        </div>\n                      </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3\">\n                      <div\n                        className={`h-2 rounded-full ${getProgressBarColor(result.rawScore)}`}\n                        style={{ width: `${result.score}%` }}\n                      ></div>\n                    </div>\n\n                    {/* Sub-Parameters with Calculations */}\n                    {result.metrics && result.metrics.length > 0 && (\n                      <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2\">\n                          Sub-Parameters & Calculations:\n                        </div>\n                        <div className=\"space-y-3\">\n                          {result.metrics.map((metric, mIndex) => {\n                            // Determine if metric is normal (green) or abnormal (red) for Stress and Burnout & Fatigue\n                            const isNormal = metric.score === 1;\n                            const shouldColorize = result.parameter === 'Stress' || result.parameter === 'Burnout & Fatigue';\n                            const bgColorClass = shouldColorize\n                              ? (isNormal\n                                  ? 'bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700'\n                                  : 'bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700')\n                              : 'bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700';\n\n                            return (\n                              <div key={mIndex} className={`rounded-lg p-3 border-2 ${bgColorClass} transition-all duration-200`}>\n                                {/* Metric Name and Score */}\n                                <div className=\"flex items-center justify-between mb-2\">\n                                  <span className={`text-xs font-semibold ${\n                                    shouldColorize\n                                      ? (isNormal ? 'text-green-800 dark:text-green-300' : 'text-red-800 dark:text-red-300')\n                                      : 'text-gray-700 dark:text-gray-300'\n                                  }`}>\n                                    {metric.name}\n                                  </span>\n                                  <div className=\"flex items-center space-x-2\">\n                                    {metric.score === 1 ? (\n                                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                                    ) : (\n                                      <X className=\"h-4 w-4 text-red-500\" />\n                                    )}\n                                    <span className={`font-bold text-sm ${metric.score === 1 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>\n                                      {metric.score}/1\n                                    </span>\n                                  </div>\n                                </div>\n\n                              {/* Calculation Details */}\n                              <div className=\"space-y-1\">\n                                {/* Actual Value */}\n                                {metric.value !== null && metric.value !== undefined && (\n                                  <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-gray-500 dark:text-gray-400\">Value:</span>\n                                    <span className=\"font-mono text-gray-700 dark:text-gray-300\">\n                                      {typeof metric.value === 'object' && metric.value !== null\n                                        ? Object.entries(metric.value).map(([key, val]) =>\n                                            `${key}: ${typeof val === 'number' ? val.toFixed(2) : val}`\n                                          ).join(', ')\n                                        : typeof metric.value === 'number'\n                                        ? metric.value.toFixed(2)\n                                        : metric.value}\n                                    </span>\n                                  </div>\n                                )}\n\n                                {/* Description/Formula */}\n                                {metric.description && (\n                                  <div className=\"text-xs text-gray-600 dark:text-gray-400 italic mt-1\">\n                                    {metric.description}\n                                  </div>\n                                )}\n\n                                {/* Additional Details */}\n                                {metric.details && (\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-500 mt-1 pl-2 border-l-2 border-gray-300 dark:border-gray-600\">\n                                    {typeof metric.details === 'object'\n                                      ? Object.entries(metric.details).map(([key, val], idx) => (\n                                          <div key={idx} className=\"flex justify-between\">\n                                            <span>{key}:</span>\n                                            <span className=\"font-mono\">{typeof val === 'number' ? Number(val).toFixed(2) : val}</span>\n                                          </div>\n                                        ))\n                                      : metric.details}\n                                  </div>\n                                )}\n                              </div>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    )}\n                    </div>\n                  );\n                })}\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"space-y-3\">\n                {/* Save Results Button (No PDF Generation) */}\n                <button\n                  onClick={handleSaveResults}\n                  disabled={isSaving || isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    isSaved\n                      ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 cursor-not-allowed'\n                      : isSaving\n                      ? 'bg-blue-400 text-white cursor-wait'\n                      : 'bg-primary hover:bg-navy-700 text-white'\n                  }`}\n                >\n                  {isSaving ? (\n                    <>\n                      <Activity className=\"h-5 w-5 animate-spin\" />\n                      <span>Saving...</span>\n                    </>\n                  ) : isSaved ? (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Saved ‚úì</span>\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"h-5 w-5\" />\n                      <span>Save Results</span>\n                    </>\n                  )}\n                </button>\n\n                {/* Generate PDF Button (Separate) */}\n                <button\n                  onClick={handleGenerateAndDownloadPDF}\n                  disabled={!results || !isSaved}\n                  className={`w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md ${\n                    !results || !isSaved\n                      ? 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      : pdfUrl\n                      ? 'bg-green-600 hover:bg-green-700 text-white'\n                      : 'bg-blue-600 hover:bg-blue-700 text-white'\n                  }`}\n                  title={!isSaved ? 'Please save results first' : 'Generate and download PDF report'}\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>{pdfUrl ? 'Download PDF Report' : 'Generate PDF Report'}</span>\n                </button>\n\n                {/* Export CSV Button */}\n                <button\n                  onClick={handleExportResults}\n                  className=\"w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors shadow-md\"\n                >\n                  <Download className=\"h-5 w-5\" />\n                  <span>Export CSV</span>\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <FileText className=\"h-16 w-16 text-gray-400 dark:text-gray-500 mb-4\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Upload data files and execute calculation to see results\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Processing History */}\n      {selectedPatient && processingHistory.length > 0 && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n              <History className=\"h-5 w-5 mr-2\" />\n              Processing History for {getPatientName(selectedPatient)}\n            </h2>\n            <button\n              onClick={async () => {\n                console.log('üîÑ Manual sync triggered...');\n                toast.loading('Syncing PDFs from Supabase...', { id: 'sync-pdfs' });\n\n                try {\n                  // Force reload from database and sync\n                  await loadProcessingHistory(selectedPatient.id);\n\n                  // Count how many PDFs were found\n                  const results = await DatabaseService.get('algorithmResults');\n                  const patientResults = results.filter(r => r.patientId === selectedPatient.id);\n                  const pdfCount = patientResults.filter(r => r.pdfUrl).length;\n                  const totalCount = patientResults.length;\n\n                  toast.success(`‚úÖ Synced! ${pdfCount}/${totalCount} PDFs available`, { id: 'sync-pdfs' });\n                  console.log(`‚úÖ Sync complete: ${pdfCount}/${totalCount} records have PDFs`);\n                } catch (error) {\n                  console.error('‚ùå Sync failed:', error);\n                  toast.error('Failed to sync PDFs', { id: 'sync-pdfs' });\n                }\n              }}\n              className=\"px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-1\"\n              title=\"Fetch PDFs from Supabase bucket and update database\"\n            >\n              <Download className=\"h-3 w-3\" />\n              <span>Sync PDFs</span>\n            </button>\n          </div>\n          <div className=\"space-y-3\">\n            {processingHistory.map((record, index) => (\n              <div\n                key={record.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <Calendar className=\"h-4 w-4 text-primary\" />\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        {new Date(record.inputData?.processedAt || record.processedAt || record.createdAt).toLocaleDateString('en-US', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </span>\n                      {/* PDF Status Badge */}\n                      {record.pdfUrl ? (\n                        <span className=\"px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full flex items-center space-x-1\">\n                          <CheckCircle className=\"h-3 w-3\" />\n                          <span>PDF Available</span>\n                        </span>\n                      ) : (\n                        <span className=\"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full\">\n                          No PDF\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 space-y-1 mb-3\">\n                      <p>üìÅ Files: {record.inputData?.eyesOpenFile || record.eyesOpenFile || 'N/A'}, {record.inputData?.eyesClosedFile || record.eyesClosedFile || 'N/A'}</p>\n                      <p>üë§ Processed by: {record.inputData?.processedBy || record.processedBy || 'Unknown'}</p>\n                      {record.pdfUrl && (\n                        <p className=\"text-green-600 dark:text-green-400\">\n                          üìÑ PDF: {record.pdfUrl.startsWith('http') ? 'Supabase ‚úì' : 'Local ‚úì'}\n                        </p>\n                      )}\n                      {!record.pdfUrl && (\n                        <p className=\"text-red-600 dark:text-red-400\">üìÑ PDF: Not available</p>\n                      )}\n                    </div>\n\n                    {/* Quick Summary of Results */}\n                    {(() => {\n                      const savedResults = record.outputData || record.results;\n                      return savedResults && savedResults.length > 0 && (\n                        <div className=\"mt-3 grid grid-cols-2 gap-2\">\n                          {savedResults.slice(0, 4).map((result, idx) => (\n                            <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                              <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                              <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                                {result.rawScore}\n                              </span>\n                            </div>\n                          ))}\n                        </div>\n                      );\n                    })()}\n                  </div>\n                  <div className=\"flex flex-col space-y-2\">\n                    {/* View Full Results Button */}\n                    <button\n                      onClick={() => {\n                        // Handle both old format (results) and new format (outputData)\n                        const savedResults = record.outputData || record.results;\n                        if (savedResults) {\n                          setResults(savedResults);\n                          setProcessingComplete(true);\n                          setIsSaved(true);\n                          // Set PDF URL if available\n                          if (record.pdfUrl) {\n                            setPdfUrl(record.pdfUrl);\n                          }\n                          toast.success('Previous results loaded!');\n                          console.log('‚úÖ Loaded results from history:', savedResults);\n                        } else {\n                          toast.error('No results found in this record');\n                          console.error('‚ùå No results found in record:', record);\n                        }\n                      }}\n                      className=\"px-3 py-2 text-sm bg-primary hover:bg-navy-700 text-white rounded-lg transition-colors flex items-center justify-center space-x-1\"\n                    >\n                      <FileText className=\"h-4 w-4\" />\n                      <span>View Results</span>\n                    </button>\n\n                    {/* Download PDF Button - Always visible */}\n                    <button\n                      onClick={async () => {\n                        if (!record.pdfUrl) {\n                          toast.error('No PDF available for this record');\n                          console.log('‚ùå No PDF URL in record:', record);\n                          return;\n                        }\n\n                        console.log('üì• Downloading PDF from record:', {\n                          processedAt: record.processedAt,\n                          pdfUrl: record.pdfUrl\n                        });\n\n                        try {\n                          toast.loading('Downloading PDF...', { id: 'history-download' });\n\n                          // Construct full URL (works with both local and Supabase URLs)\n                          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n                          const backendBaseUrl = apiUrl.replace('/api', '');\n                          const fullPdfUrl = record.pdfUrl.startsWith('http') ? record.pdfUrl : `${backendBaseUrl}${record.pdfUrl}`;\n\n                          console.log('üì• Downloading from:', fullPdfUrl);\n\n                          // Fetch the PDF file\n                          const response = await fetch(fullPdfUrl);\n                          if (!response.ok) throw new Error('Failed to fetch PDF');\n\n                          // Convert to blob\n                          const blob = await response.blob();\n\n                          // Create download link\n                          const downloadUrl = window.URL.createObjectURL(blob);\n                          const link = document.createElement('a');\n                          link.href = downloadUrl;\n                          link.download = record.pdfUrl.split('/').pop() || 'neurosense-report.pdf';\n\n                          // Trigger download\n                          document.body.appendChild(link);\n                          link.click();\n\n                          // Cleanup\n                          document.body.removeChild(link);\n                          window.URL.revokeObjectURL(downloadUrl);\n\n                          toast.success('PDF downloaded successfully!', { id: 'history-download' });\n                        } catch (error) {\n                          console.error('Download error:', error);\n                          toast.error('Failed to download PDF', { id: 'history-download' });\n                        }\n                      }}\n                      disabled={!record.pdfUrl}\n                      className={`px-3 py-2 text-sm rounded-lg transition-colors flex items-center justify-center space-x-1 ${\n                        record.pdfUrl\n                          ? 'bg-blue-600 hover:bg-blue-700 text-white cursor-pointer'\n                          : 'bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed'\n                      }`}\n                      title={record.pdfUrl ? 'Download PDF Report' : 'No PDF available'}\n                    >\n                      <Download className=\"h-4 w-4\" />\n                      <span>NeuroSense Report</span>\n                    </button>\n                  </div>\n                </div>\n\n                {/* Expandable Details */}\n                {(() => {\n                  const savedResults = record.outputData || record.results;\n                  return savedResults && savedResults.length > 4 && (\n                    <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                      {savedResults.slice(4).map((result, idx) => (\n                        <div key={idx} className=\"text-xs bg-gray-50 dark:bg-gray-700 rounded p-2\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">{result.parameter}:</span>\n                          <span className={`ml-2 font-semibold ${getStatusColor(result.rawScore)}`}>\n                            {result.rawScore}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  );\n                })()}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Info Section */}\n      <div className=\"bg-accent-light dark:bg-primary/20 border border-primary-light dark:border-primary rounded-lg p-4 shadow-sm\">\n        <h3 className=\"text-sm font-medium text-primary dark:text-primary-light mb-2\">\n          About Algorithm 1 Processing\n        </h3>\n        <p className=\"text-sm text-navy-800 dark:text-gray-300\">\n          This processor analyzes QEEG data files (Eyes Open and Eyes Closed) and generates 7 key parameters using proprietary\n          binary scoring logic. The algorithm evaluates brain activity patterns to assess cognitive and emotional health markers.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default AlgorithmDataProcessor;\n","structuredPatch":[{"oldStart":1557,"oldLines":14,"newStart":1557,"newLines":15,"lines":[" ","                   if (isStressOrBurnout && result.rawScore) {","                     const [score] = result.rawScore.split('/').map(Number);","-                    // 3/3 = Low problem (all normal) = GREEN","+                    // For Stress & Burnout: Lower score = Better (less stress/burnout)","+                    // 1/3 = Low stress/burnout = GREEN (GOOD)","                     // 2/3 = Medium = YELLOW","-                    // 1/3 or 0/3 = High problem = RED","-                    if (score === 3) {","+                    // 3/3 = High stress/burnout = RED (BAD)","+                    if (score === 1) {","                       mainCardBgClass = 'border-2 border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/10';","                     } else if (score === 2) {","                       mainCardBgClass = 'border-2 border-yellow-400 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/10';","-                    } else if (score <= 1) {","+                    } else if (score >= 3) {","                       mainCardBgClass = 'border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/10';","                     }","                   }"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"56cf08af-b49a-4e72-bc11-e235cfb85baa","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Cg9tUDFWF1Frf8iV9a7EeX","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"‡§Ö‡§ö‡•ç‡§õ‡§æ, main parameter card ‡§ï‡§æ logic ‡§†‡•Ä‡§ï ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§ ‡§Ö‡§¨ sub-parameters ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä check ‡§ï‡§∞‡§®‡§æ ‡§π‡•à ‡§ï‡§ø ‡§µ‡•ã ‡§∏‡§π‡•Ä ‡§π‡•à ‡§Ø‡§æ ‡§®‡§π‡•Ä‡§Ç‡•§\n\nSub-parameters ‡§ï‡•á ‡§≤‡§ø‡§è current logic ‡§π‡•à:\n- isNormal = metric.score === 1\n- isNormal ‡§π‡•ã‡§®‡•á ‡§™‡§∞ GREEN, ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§®‡•á ‡§™‡§∞ RED\n\n‡§Ø‡§π logic ‡§∏‡§π‡•Ä ‡§π‡•à ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø:\n- Arousal Score < 1 (normal) ‚Üí score = 1 ‚Üí GREEN ‚úì\n- Arousal Score >= 1 (abnormal) ‚Üí score = 0 ‚Üí RED ‚úì\n- Relaxation Score > 10 (healthy) ‚Üí score = 1 ‚Üí GREEN ‚úì\n- Relaxation Score <= 10 (abnormal) ‚Üí score = 0 ‚Üí RED ‚úì\n\n‡§§‡•ã sub-parameter logic ‡§§‡•ã ‡§∏‡§π‡•Ä ‡§π‡•à‡•§ ‡§¨‡§∏ main parameter ‡§ï‡§æ logic ‡§â‡§≤‡•ç‡§ü‡§æ ‡§•‡§æ ‡§ú‡•ã ‡§Ö‡§¨ ‡§†‡•Ä‡§ï ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§","signature":"EtYHCkYIChgCKkC8g8oSi98k3pu7BXlU3AO6LRlR3bA+sX6lR6EqRCrQpkHFhkrS3B00UBzrxHA2HN06cnMmGC5UongsSgFJNg65Egwp0q3cZlCf/bbJjc4aDKRspHRgoOMjxS22nSIwZqMLhGfA2majIeRuEFuEPotUQdozOwUTGvpQcNsghYoBnDaxyal3RxFfXZcjCdJyKr0GEp6rFIded4PYYlBFd61LapZxvp+RqPnyYYCG9U5PXKCKQeD9Tx+ZFdpl9+/9izYkGJuyLxfIa/7ddj4BgvDNzUmqAgIyxWNMG8MLGP/vp2oy3Af9V9/maEk4ThPaPBbB7BCaFSnVUDrEI/8+5WideKho6TjBhsWalCc9TgPKW5Yx6AGsmNy/+dhvs2fuMamF9Ng61I65N+nfZl/jEFWZGp3osU1fDWX9i2wlLmIlh1gMyzYNCw4Iyz3Rn+IyOG7ZKiCQL8AM6sBPyiuZb78p8sgU6yXlmCupk6K4sjMiovT1E/vALbxq/LfqpP9OVj/g9dog1sQJV2AhyzzazqNCOGKnGLKSC9ZksZH8vMZpKnTv0jY9LTBcDf3IsXhKkN6wCfhusvyoSDWOEMrz7bBa/x1izY1HCskz/rgG3aFSo1TQ1Psa6JxBOlOYY9XzQxW0AG0qexbq4F6G2j1DFr3h82kgIjwmaAvnNCeKMBcJmDYUDCdcMN66LGvWr+g5o5I6UP2JDkm4MgKZuURwleSGUKPezK2/t93z6+JOuI43invwpDkAp9KEQSQCtgK5j65MP2cXm4pGrPh0wvih96omEndvcylzkc8B7YkqLlvxza0ed1G8nZRQ+vRbG8txW2H1g9ZXB40i5wv3b7Su76gDDXvfPiYeJh3P4I/xXGdC9KwTSVVP4cb5bWrHyyqdpuKZUz1knxw3U5HBvduF7PGDdrZwp5FioXsPBgsgHLPPn+JADDO7oufTw6IeDUgY7zNwT0PoA6EpDwBgwIA2QhnPuBngbIIdcFCxVMp2+xT2GDnIethPqF8G0TH+kpJPz3xJYYt0hv5V8IfqeE4LMXVnL+jUfWhw1tVKbu/70e3EtVxQBrpqDefvTkxT529WyPM3XAmkA2c2y1wFsCvq1xm9pyIgjIKBmsqc7QzEEtF/xR/RYpMb8HSVKx7TazZFCR0Xw5e2W+fcKq+CkGhVFBZl38JmJrXTGFQmxgu2Gpwv50+UfykenwSNG4MZ3gbAoh6hpT8mCAIxcyz2fmkfC420wVvpqtLNIAAAB+eavVbJ/h6cBMnHTWAvjWEBqnWBStmkQ7b1UjvScBpkeDfBgxgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":1890,"cache_read_input_tokens":67122,"cache_creation":{"ephemeral_5m_input_tokens":1890,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9iD7H6ggeDkgNNszkM","type":"assistant","uuid":"16c1b865-58ee-4a52-a115-543d3f8aae80","timestamp":"2025-12-18T12:27:22.893Z"}
{"parentUuid":"16c1b865-58ee-4a52-a115-543d3f8aae80","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Cg9tUDFWF1Frf8iV9a7EeX","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! ‡§Ö‡§¨ build ‡§ï‡§∞‡§ï‡•á verify ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":1890,"cache_read_input_tokens":67122,"cache_creation":{"ephemeral_5m_input_tokens":1890,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9iD7H6ggeDkgNNszkM","type":"assistant","uuid":"96aea103-de38-4c98-9efb-035129134f82","timestamp":"2025-12-18T12:27:23.339Z"}
{"parentUuid":"96aea103-de38-4c98-9efb-035129134f82","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Cg9tUDFWF1Frf8iV9a7EeX","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01D5kMe8xVRiJ4NmD95e8kmy","name":"TodoWrite","input":{"todos":[{"content":"Fix reversed color logic for Stress and Burnout main parameter","status":"completed","activeForm":"Fixing reversed color logic"},{"content":"Verify the corrected logic with build","status":"in_progress","activeForm":"Verifying corrected logic"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":1890,"cache_read_input_tokens":67122,"cache_creation":{"ephemeral_5m_input_tokens":1890,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9iD7H6ggeDkgNNszkM","type":"assistant","uuid":"ce32863d-fc05-44c3-8da5-80c5dc696351","timestamp":"2025-12-18T12:27:25.398Z"}
{"parentUuid":"ce32863d-fc05-44c3-8da5-80c5dc696351","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Cg9tUDFWF1Frf8iV9a7EeX","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01S1JGQ7rD1rWbUqetkY3aMM","name":"Bash","input":{"command":"cd \"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\" && npm run build 2>&1 | tail -20","description":"Build to verify corrected logic","timeout":60000}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":1890,"cache_read_input_tokens":67122,"cache_creation":{"ephemeral_5m_input_tokens":1890,"ephemeral_1h_input_tokens":0},"output_tokens":500,"service_tier":"standard"}},"requestId":"req_011CWE9iD7H6ggeDkgNNszkM","type":"assistant","uuid":"707a8d22-7bce-484b-bb14-214db5dcc055","timestamp":"2025-12-18T12:27:26.528Z"}
{"parentUuid":"707a8d22-7bce-484b-bb14-214db5dcc055","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01D5kMe8xVRiJ4NmD95e8kmy","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"a8c2c687-84ae-4459-8a84-605982a6ef6f","timestamp":"2025-12-18T12:27:26.666Z","toolUseResult":{"oldTodos":[{"content":"Fix reversed color logic for Stress and Burnout main parameter","status":"in_progress","activeForm":"Fixing reversed color logic"},{"content":"Verify the corrected logic with build","status":"pending","activeForm":"Verifying corrected logic"}],"newTodos":[{"content":"Fix reversed color logic for Stress and Burnout main parameter","status":"completed","activeForm":"Fixing reversed color logic"},{"content":"Verify the corrected logic with build","status":"in_progress","activeForm":"Verifying corrected logic"}]}}
{"parentUuid":"a8c2c687-84ae-4459-8a84-605982a6ef6f","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01S1JGQ7rD1rWbUqetkY3aMM","type":"tool_result","content":"\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminAssignmentModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AgreementManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AlgorithmDataProcessor.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AnalyticsDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/BrandingConfiguration.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/ClinicManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PaymentHistory.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PersonalizedCarePlan.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/SuperAdminPanel.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/auth/ForgotPasswordForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/SubscriptionManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/contexts/AuthContext.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/alertService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseBackupService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/neuroSenseService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/paymentService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/razorpayService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/storageService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/layout/ProfileModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/emailService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, dynamic import will not move module into another chunk.\n\u001b[39m\nrendering chunks...\ncomputing gzip size...\n\u001b[2mdist/\u001b[22m\u001b[32mindex.html                 \u001b[39m\u001b[1m\u001b[2m    1.68 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:   0.80 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[35massets/index-2324ea4d.css  \u001b[39m\u001b[1m\u001b[2m  122.98 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:  17.74 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[36massets/index-7f69d9b8.js   \u001b[39m\u001b[1m\u001b[33m2,667.09 kB\u001b[39m\u001b[22m\u001b[2m ‚îÇ gzip: 477.32 kB\u001b[22m\u001b[2m ‚îÇ map: 5,769.85 kB\u001b[22m\n\u001b[33m\n(!) Some chunks are larger than 500 kBs after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\u001b[39m\n\u001b[32m‚úì built in 11.60s\u001b[39m","is_error":false}]},"uuid":"cb3bd62d-0c1e-4bc7-9b9f-b484b0502e17","timestamp":"2025-12-18T12:27:42.218Z","toolUseResult":{"stdout":"\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminAssignmentModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AgreementManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AlgorithmDataProcessor.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AnalyticsDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/BrandingConfiguration.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/ClinicManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PaymentHistory.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PersonalizedCarePlan.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/SuperAdminPanel.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/auth/ForgotPasswordForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/SubscriptionManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/contexts/AuthContext.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/alertService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseBackupService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/neuroSenseService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/paymentService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/razorpayService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/storageService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/layout/ProfileModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/emailService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, dynamic import will not move module into another chunk.\n\u001b[39m\nrendering chunks...\ncomputing gzip size...\n\u001b[2mdist/\u001b[22m\u001b[32mindex.html                 \u001b[39m\u001b[1m\u001b[2m    1.68 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:   0.80 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[35massets/index-2324ea4d.css  \u001b[39m\u001b[1m\u001b[2m  122.98 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:  17.74 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[36massets/index-7f69d9b8.js   \u001b[39m\u001b[1m\u001b[33m2,667.09 kB\u001b[39m\u001b[22m\u001b[2m ‚îÇ gzip: 477.32 kB\u001b[22m\u001b[2m ‚îÇ map: 5,769.85 kB\u001b[22m\n\u001b[33m\n(!) Some chunks are larger than 500 kBs after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\u001b[39m\n\u001b[32m‚úì built in 11.60s\u001b[39m\r","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"cb3bd62d-0c1e-4bc7-9b9f-b484b0502e17","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01VTxDsZiFntvdy9XExXc57r","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! Build successful. ‡§Ö‡§¨ ‡§∏‡§π‡•Ä logic ‡§π‡•à:\n- Main parameter: Score 1/3 (low stress) = GREEN, 3/3 (high stress) = RED\n- Sub-parameters: Score 1/1 (normal) = GREEN, 0/1 (abnormal) = RED","signature":"Eu4CCkYIChgCKkAkU5/uR6DoPBNW8oMvUdrS2LLkSSTKbaDhZBMNLgK5X57T9Kw/n25MfIGGggbUmFzF8lAcXyjAcEOhrl4ICv9CEgyihBhFg6RXPZ2TfYYaDDKHwpma8LKGR8G9XSIw4O50WxDKnQYnIgbuqF8E0Udmt965iPg14PuA000cSaMYjLw5+5DP2BGNdrY5gZNmKtUBrEQRLO5ZY4iRjaEWIROVThVsaQhlfAC5srdddpIg0NKHFzL4uL+NeM7pGvYTak2oyoEzkfVbxlVMe9ngPu0xqDyBht+Bo4qdVNA0Z9SJU0eF0bkkTpAP0CpcK1e5XA1oh5CkteC1GC8OKBg1AHxuS/EYpRPX2ZE8273xEIdDum5Oc/U21YnWQq3oflSzYljOVPYc52yU7FBZSXObCmLJvZPq20cKw8iERSJrRGC3YAO46tsSXNFAgCJivDETdHfbH/c5DmomVdJHaw3aBVwV8VWVVwX9GAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":2848,"cache_read_input_tokens":69012,"cache_creation":{"ephemeral_5m_input_tokens":2848,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE9kRVTy7rhjYigX3GN4","type":"assistant","uuid":"f2edde67-0572-4cf4-bf2f-d905f1dda25a","timestamp":"2025-12-18T12:27:49.119Z"}
{"parentUuid":"f2edde67-0572-4cf4-bf2f-d905f1dda25a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01VTxDsZiFntvdy9XExXc57r","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Xn63G6ZhBVq3TsmewazRes","name":"TodoWrite","input":{"todos":[{"content":"Fix reversed color logic for Stress and Burnout main parameter","status":"completed","activeForm":"Fixing reversed color logic"},{"content":"Verify the corrected logic with build","status":"completed","activeForm":"Verifying corrected logic"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":2848,"cache_read_input_tokens":69012,"cache_creation":{"ephemeral_5m_input_tokens":2848,"ephemeral_1h_input_tokens":0},"output_tokens":198,"service_tier":"standard"}},"requestId":"req_011CWE9kRVTy7rhjYigX3GN4","type":"assistant","uuid":"ea038a27-daff-4939-8976-b2c9514bb254","timestamp":"2025-12-18T12:27:51.049Z"}
{"parentUuid":"ea038a27-daff-4939-8976-b2c9514bb254","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Xn63G6ZhBVq3TsmewazRes","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"8f7de04f-8a28-4935-9652-5b12c28864b4","timestamp":"2025-12-18T12:27:51.170Z","toolUseResult":{"oldTodos":[{"content":"Fix reversed color logic for Stress and Burnout main parameter","status":"completed","activeForm":"Fixing reversed color logic"},{"content":"Verify the corrected logic with build","status":"in_progress","activeForm":"Verifying corrected logic"}],"newTodos":[{"content":"Fix reversed color logic for Stress and Burnout main parameter","status":"completed","activeForm":"Fixing reversed color logic"},{"content":"Verify the corrected logic with build","status":"completed","activeForm":"Verifying corrected logic"}]}}
{"parentUuid":"8f7de04f-8a28-4935-9652-5b12c28864b4","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_014tT389uaTq92s4gemB2Xso","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Great! ‡§Ö‡§¨ ‡§∏‡§¨ ‡§†‡•Ä‡§ï ‡§π‡•à‡•§ ‡§Æ‡•Å‡§ù‡•á user ‡§ï‡•ã summary ‡§¶‡•á‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è‡•§","signature":"EpECCkYIChgCKkAs5cY8lH0vkT1MWLICeqHZ6x/pqoZQX4mmfIfbEFJqpkfEP158izHsrqz60RxUO04lTQYDMcP5wzpAIRpS7FxqEgyP4l8rQRL4Tdrt/uoaDACxmDWvONui4zLG+CIwNO99VfqSCQG7qMMRVYv7tzp59pmrltOJI55doSbWP2w2/ZREwm9prWs1cvNjVxqsKnm8COK2fFQmVAb+mQWbixokxmrhrrrwTFpiyaSNVtKqo3zKC/x+XyJMqPzh8Snv2tL0uZnqsgol2ms5DTGYMNEAFM466pw80g+JcjmozLrWu6JaQghK1QcFQBLax2PVDVZSafe9vvTOmwa9Cf4cBncEjW8uBLz46sJjGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":247,"cache_read_input_tokens":71860,"cache_creation":{"ephemeral_5m_input_tokens":247,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CWE9m5K45Y1vBEJNCmTga","type":"assistant","uuid":"d9342b27-2a19-4786-9b58-820a853bff10","timestamp":"2025-12-18T12:27:55.044Z"}
{"parentUuid":"d9342b27-2a19-4786-9b58-820a853bff10","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_014tT389uaTq92s4gemB2Xso","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! ‚úÖ ‡§Ö‡§¨ ‡§∏‡§π‡•Ä logic implement ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ Build ‡§≠‡•Ä successfully complete ‡§π‡•Å‡§Ü‡•§\n\n## üé® Corrected Implementation Summary\n\n### Main Parameter Card Colors (Stress & Burnout & Fatigue):\n`AlgorithmDataProcessor.jsx:1558-1571`\n\n**‚úÖ ‡§∏‡§π‡•Ä Logic:**\n- **üü¢ GREEN** - Score **1/3** = Low stress/burnout (‡§ï‡§Æ ‡§π‡•à - ‡§Ö‡§ö‡•ç‡§õ‡§æ! ‚úÖ)\n- **üü° YELLOW** - Score **2/3** = Medium (‡§Æ‡§ß‡•ç‡§Ø‡§Æ - ‡§∏‡§æ‡§µ‡§ß‡§æ‡§® ‡§∞‡§π‡•á‡§Ç ‚ö†Ô∏è)\n- **üî¥ RED** - Score **3/3** = High stress/burnout (‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§π‡•à - ‡§ñ‡§∞‡§æ‡§¨ ‚ùå)\n\n### Sub-Parameters Colors (‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è same):\n`AlgorithmDataProcessor.jsx:1604-1677`\n\n**‚úÖ ‡§∏‡§π‡•Ä Logic:**\n- **üü¢ GREEN background** - Score **1/1** (Normal/Healthy values)\n  - Arousal Score < 1 ‚úÖ\n  - Relaxation Score > 10 ‚úÖ\n  - Regeneration > 30% ‚úÖ\n  - Excessive Delta < 70% ‚úÖ\n\n- **üî¥ RED background** - Score **0/1** (Abnormal/High values)\n  - Arousal Score >= 1 ‚ùå\n  - Relaxation Score <= 10 ‚ùå\n  - Regeneration <= 30% ‚ùå\n  - Excessive Delta >= 70% ‚ùå\n\n‡§Ö‡§¨ ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§∏‡§π‡•Ä ‡§π‡•à! ‡§ú‡§¨ stress/burnout **‡§ï‡§Æ** ‡§π‡•ã‡§ó‡§æ ‡§§‡•ã **GREEN**, ‡§î‡§∞ ‡§ú‡§¨ **‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ** ‡§π‡•ã‡§ó‡§æ ‡§§‡•ã **RED** ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ‡•§ üéâ"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":247,"cache_read_input_tokens":71860,"cache_creation":{"ephemeral_5m_input_tokens":247,"ephemeral_1h_input_tokens":0},"output_tokens":497,"service_tier":"standard"}},"requestId":"req_011CWE9m5K45Y1vBEJNCmTga","type":"assistant","uuid":"225539cc-b040-4859-b47e-281cfc0a4d59","timestamp":"2025-12-18T12:28:03.661Z"}
{"type":"file-history-snapshot","messageId":"e064c179-0655-48a1-8393-1368675484ea","snapshot":{"messageId":"e064c179-0655-48a1-8393-1368675484ea","trackedFileBackups":{"src\\components\\admin\\AlgorithmDataProcessor.jsx":{"backupFileName":"9777bd81bdc80e4c@v4","version":4,"backupTime":"2025-12-18T12:29:47.566Z"}},"timestamp":"2025-12-18T12:29:47.557Z"},"isSnapshotUpdate":false}
{"parentUuid":"225539cc-b040-4859-b47e-281cfc0a4d59","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":"\n  ‚úÖ ‡§∏‡§π‡•Ä Logic:\n  - üü¢ GREEN - Score 1/3 = Low stress/burnout (‡§ï‡§Æ ‡§π‡•à - ‡§Ö‡§ö‡•ç‡§õ‡§æ! ‚úÖ)\n  - üü° YELLOW - Score 2/3 = Medium (‡§Æ‡§ß‡•ç‡§Ø‡§Æ - ‡§∏‡§æ‡§µ‡§ß‡§æ‡§® ‡§∞‡§π‡•á‡§Ç ‚ö†Ô∏è)\n  - üî¥ RED - Score 3/3 = High stress/burnout (‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§π‡•à - ‡§ñ‡§∞‡§æ‡§¨ ‚ùå)  ye correct hai"},"uuid":"e064c179-0655-48a1-8393-1368675484ea","timestamp":"2025-12-18T12:29:47.524Z","thinkingMetadata":{"level":"high","disabled":false,"triggers":[]}}
{"parentUuid":"e064c179-0655-48a1-8393-1368675484ea","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01LTYLNBfaxv5yYvwCuTceHk","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"User is confirming that the logic I just implemented is correct:\n- GREEN for 1/3 (Low stress/burnout - Good)\n- YELLOW for 2/3 (Medium - Moderate)\n- RED for 3/3 (High stress/burnout - Bad)\n\nThey're saying \"ye correct hai\" which means \"this is correct\" in Hindi. So they're happy with the fix I made.\n\nI should acknowledge this confirmation and summarize what was done.","signature":"EpYECkYIChgCKkBHufh9OY+FqMxlhMg5BtiuoVhfksdnQ3re/CtpdRQDszLQ2gpyGPDnLA8bs4LJGtb8HbZVxkW4Kww6J4qqmHEyEgyNTZy3H8yX8PYNlGMaDCJ+3/CmEsymDNJo/iIwye/t1qFhM0B4KYj5monqev7EskHBYzJQR2ZF/1PN8OxbzbA+lCx3CxpAT27h9ahVKv0CqFY9JZ32VOjQ47yfP72ynrO30w+k23uhpkfy8S0n65Z0+Kq5Qk/24PsE3NBovI/gvrStfpAfEjgDF7T9PpgbcNm1yKh1Tjq2Mng+hOtFWS1RoGGyG6iHsX09i4UJuQoLoHzZKNJxx9nbizjX9F6ZAV9vHStOj1mzzu0ciLI/kv22ukxJ1UOK/wiP6ax/sAq9kztTjHTTNKKQb86RVlGx5bFjjaSsrGuZUkUcV7hde4TMmT70Kr8sdnRjlvq9QmZSUtOQ3ETO2GaM7u+o0O7Nq27d1D9m6lI8/2PQw5Dui2m+FA7ITuzgQL98Cz0bfPpqIpzCpL4hNiCSBdGb8XLUYDf0toFkxV+QnY68vj9enrfIyw6XTIAk6indqrzv899scXFPcyQ0+pqjsehSXVOSUVVmt6XeS9QxVVDhSBBDeCOpr3cx6SKb+DF+R2ODrLg1IUID26Jp6bO1KIz53GIJgsnVg8b7iayvG+7rXpKgaIjEQkG+awe9WYMIhZH4GAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":5007,"cache_read_input_tokens":67122,"cache_creation":{"ephemeral_5m_input_tokens":5007,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWE9ufGwc5jLzBhkbRUWf","type":"assistant","uuid":"ecc85b77-7909-4b10-9e8e-faaeebdb15e8","timestamp":"2025-12-18T12:29:53.317Z"}
{"parentUuid":"ecc85b77-7909-4b10-9e8e-faaeebdb15e8","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01LTYLNBfaxv5yYvwCuTceHk","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! ‚úÖ ‡§π‡§æ‡§Ç, ‡§Ö‡§¨ ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§∏‡§π‡•Ä ‡§π‡•à!\n\n## üìã Final Implementation Summary\n\n### ‚úÖ Stress & Burnout & Fatigue Parameters - Complete Color Coding\n\n**1Ô∏è‚É£ Main Parameter Card Background:**\n- **üü¢ GREEN** (1/3) ‚Üí Low stress/burnout ‚Üí ‡§Ö‡§ö‡•ç‡§õ‡§æ! \n- **üü° YELLOW** (2/3) ‚Üí Medium ‚Üí ‡§∏‡§æ‡§µ‡§ß‡§æ‡§® ‡§∞‡§π‡•á‡§Ç\n- **üî¥ RED** (3/3) ‚Üí High stress/burnout ‚Üí ‡§ñ‡§∞‡§æ‡§¨\n\n**2Ô∏è‚É£ Sub-Parameters (Individual Metrics):**\n- **üü¢ GREEN background** (1/1) ‚Üí Normal/Healthy values\n  - Arousal Score < 1\n  - Relaxation Score > 10\n  - Regeneration & Repair > 30%\n  - Excessive Delta < 70%\n\n- **üî¥ RED background** (0/1) ‚Üí Abnormal/High values\n  - ‡§ú‡§¨ values normal range ‡§∏‡•á ‡§¨‡§æ‡§π‡§∞ ‡§π‡•ã‡§Ç\n\n### üìÅ Modified File:\n`src/components/admin/AlgorithmDataProcessor.jsx`\n- Lines 1558-1571 (Main card colors)\n- Lines 1604-1677 (Sub-parameter colors)\n\nBuild successful! ‡§ï‡•ã‡§à errors ‡§®‡§π‡•Ä‡§Ç‡•§ ‡§Ö‡§¨ stress ‡§î‡§∞ burnout ‡§ï‡•á parameters visually clear ‡§¶‡§ø‡§ñ‡•á‡§Ç‡§ó‡•á - normal values green ‡§Æ‡•á‡§Ç ‡§î‡§∞ abnormal values red ‡§Æ‡•á‡§Ç! üéâ"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":5007,"cache_read_input_tokens":67122,"cache_creation":{"ephemeral_5m_input_tokens":5007,"ephemeral_1h_input_tokens":0},"output_tokens":482,"service_tier":"standard"}},"requestId":"req_011CWE9ufGwc5jLzBhkbRUWf","type":"assistant","uuid":"e69328c9-7831-4121-928f-f3666e0523a4","timestamp":"2025-12-18T12:29:58.905Z"}
{"type":"file-history-snapshot","messageId":"83a192a4-46bd-44b6-ab23-348f7e2e190a","snapshot":{"messageId":"83a192a4-46bd-44b6-ab23-348f7e2e190a","trackedFileBackups":{"src\\components\\admin\\AlgorithmDataProcessor.jsx":{"backupFileName":"9777bd81bdc80e4c@v4","version":4,"backupTime":"2025-12-18T12:29:47.566Z"}},"timestamp":"2025-12-18T12:33:23.724Z"},"isSnapshotUpdate":false}
{"parentUuid":"e69328c9-7831-4121-928f-f3666e0523a4","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"type":"image","source":{"type":"base64","media_type":"image/png","data":"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"}},{"type":"text","text":"[Image #1] ye image me dekho jo highlight kiya hai vo green me dikhna chahiye and uska score 1/1 aana hciaye qki normal hai uska value "}]},"uuid":"83a192a4-46bd-44b6-ab23-348f7e2e190a","timestamp":"2025-12-18T12:33:23.706Z","thinkingMetadata":{"level":"high","disabled":false,"triggers":[]}}
{"parentUuid":"83a192a4-46bd-44b6-ab23-348f7e2e190a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018MAt2yvXKA5gqqpyY8dE4P","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"‡§Ø‡•Ç‡§ú‡§∞ screenshot ‡§¶‡§ø‡§ñ‡§æ ‡§∞‡§π‡§æ ‡§π‡•à ‡§ú‡§π‡§æ‡§Ç:\n1. Stress parameter ‡§ï‡§æ main card 1/3 Low ‡§¶‡§ø‡§ñ‡§æ ‡§∞‡§π‡§æ ‡§π‡•à ‡§î‡§∞ ‡§µ‡•ã GREEN background ‡§Æ‡•á‡§Ç ‡§π‡•à - ‡§Ø‡§π ‡§∏‡§π‡•Ä ‡§π‡•à\n2. Sub-parameters ‡§Æ‡•á‡§Ç:\n   - Arousal Score: 0/1 (RED background) - value 0.59 ‡§π‡•à ‡§ú‡•ã < 1 ‡§π‡•à ‡§§‡•ã ‡§Ø‡§π normal ‡§π‡•à, ‡§á‡§∏‡•á 1/1 GREEN ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è\n   - Relaxation Score: 0/1 (RED background) - value 3.13 ‡§π‡•à ‡§ú‡•ã > 1 ‡§π‡•à ‡§≤‡•á‡§ï‡§ø‡§® normal range > 10 ‡§π‡•à, ‡§§‡•ã ‡§Ø‡§π abnormal ‡§π‡•à, RED ‡§∏‡§π‡•Ä ‡§π‡•à\n   - Regeneration (Alpha Modulation): 1/1 (GREEN background) - value 11.36 ‡§π‡•à ‡§ú‡•ã > 30% requirement ‡§∏‡•á ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§π‡•à... wait, 11.36% ‡§π‡•à ‡§ú‡•ã < 30% ‡§π‡•à, ‡§§‡•ã ‡§Ø‡§π abnormal ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è, ‡§≤‡•á‡§ï‡§ø‡§® image ‡§Æ‡•á‡§Ç 1/1 green ‡§¶‡§ø‡§ñ ‡§∞‡§π‡§æ ‡§π‡•à\n\n‡§Æ‡•Å‡§ù‡•á algorithm logic ‡§´‡§ø‡§∞ ‡§∏‡•á check ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§ ‡§¶‡•á‡§ñ‡§§‡•á ‡§π‡•à‡§Ç:\n\nArousal Score: value 0.59, normal < 1 ‚Üí ‡§Ø‡§π normal ‡§π‡•à, score 1/1 ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è\nRelaxation Score: value 3.13, normal > 10 ‚Üí ‡§Ø‡§π abnormal ‡§π‡•à, score 0/1 ‡§∏‡§π‡•Ä ‡§π‡•à\nRegeneration: value 11.36 (‡§Ø‡§π ‡§∂‡§æ‡§Ø‡§¶ 11.4% ‡§π‡•à), normal > 30% ‚Üí ‡§Ø‡§π abnormal ‡§π‡•à\n\n‡§≤‡•á‡§ï‡§ø‡§® ‡§Ø‡•Ç‡§ú‡§∞ ‡§ï‡§π ‡§∞‡§π‡§æ ‡§π‡•à ‡§ï‡§ø screenshot ‡§Æ‡•á‡§Ç ‡§ú‡•ã green ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ ‡§∞‡§π‡§æ ‡§π‡•à ‡§µ‡•ã ‡§∏‡§π‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§â‡§∏‡§ï‡§æ value normal ‡§π‡•à‡•§\n\n‡§¶‡•á‡§ñ‡§§‡•á ‡§π‡•à‡§Ç screenshot ‡§´‡§ø‡§∞ ‡§∏‡•á:\n\n\n- Arousal Score ‡§ï‡•Ä value 0.59 ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á normal ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® RED ‡§Æ‡•á‡§Ç 0/1 ‡§¶‡§ø‡§ñ ‡§∞‡§π‡§æ ‡§π‡•à\n- Relaxation Score ‡§ï‡•á ‡§≤‡§ø‡§è threshold ‡§ó‡§≤‡§§ ‡§≤‡§ó ‡§∞‡§π‡§æ ‡§π‡•à, ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ ‡§Æ‡•á‡§Ç > 10 ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è\n- Regeneration ‡§ï‡§æ value 11.4% ‡§π‡•à, ‡§ú‡•ã 30% ‡§∏‡•á ‡§ï‡§Æ ‡§π‡•à ‡§î‡§∞ ‡§á‡§∏‡§≤‡§ø‡§è abnormal ‡§Æ‡§æ‡§®‡§æ ‡§ú‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è\n\n, ‡§´‡§ø‡§∞ ‡§≠‡•Ä GREEN ‡§Æ‡•á‡§Ç 1/1 ‡§¶‡§ø‡§ñ‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à\n\n‡§Æ‡•Å‡§ù‡•á ‡§≤‡§ó‡§§‡§æ ‡§π‡•à ‡§ï‡§ø calculation algorithm ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•à‡•§ Frontend ‡§ï‡•á‡§µ‡§≤ service ‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§Æ‡•Å‡§ù‡•á scores ‡§ï‡•á ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡§®‡•Ä ‡§π‡•ã‡§ó‡•Ä - ‡§Ø‡§π server-side ‡§Ø‡§æ client-side algorithm ‡§∏‡•á calculate ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§","signature":"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"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":628,"cache_read_input_tokens":72129,"cache_creation":{"ephemeral_5m_input_tokens":628,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEABbbP94TFndrxahwGG","type":"assistant","uuid":"7f48080a-1c65-4b3d-90e9-2ae967c6d0d2","timestamp":"2025-12-18T12:33:46.380Z"}
{"parentUuid":"7f48080a-1c65-4b3d-90e9-2ae967c6d0d2","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018MAt2yvXKA5gqqpyY8dE4P","type":"message","role":"assistant","content":[{"type":"text","text":"‡§Ü‡§π, ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§ó‡§Ø‡§æ! Screenshot ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§ñ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç ‡§ï‡§ø **Arousal Score** ‡§ï‡•Ä value `0.59` ‡§π‡•à ‡§ú‡•ã `< 1 is normal` ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§µ‡•ã **0/1 RED** ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π **1/1 GREEN** ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø value normal range ‡§Æ‡•á‡§Ç ‡§π‡•à‡•§\n\nProblem ‡§Ø‡§π ‡§π‡•à ‡§ï‡§ø **score calculation** ‡§ó‡§≤‡§§ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ Frontend ‡§§‡•ã ‡§∏‡§π‡•Ä display ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à ‡§ú‡•ã score ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® algorithm service ‡§ó‡§≤‡§§ score calculate ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à‡•§\n\nLet me check the algorithm calculation logic:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":628,"cache_read_input_tokens":72129,"cache_creation":{"ephemeral_5m_input_tokens":628,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEABbbP94TFndrxahwGG","type":"assistant","uuid":"e8c3e6c7-4b7d-4dc9-8cd8-e6c855b555fb","timestamp":"2025-12-18T12:33:47.524Z"}
{"parentUuid":"e8c3e6c7-4b7d-4dc9-8cd8-e6c855b555fb","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018MAt2yvXKA5gqqpyY8dE4P","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01KhAnsAukHSW2BjA7hCBp39","name":"TodoWrite","input":{"todos":[{"content":"Find where metric scores are being calculated incorrectly","status":"in_progress","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Arousal Score calculation logic","status":"pending","activeForm":"Fixing Arousal Score calculation"},{"content":"Fix other stress metric calculations if needed","status":"pending","activeForm":"Fixing other metric calculations"},{"content":"Test the corrected calculations","status":"pending","activeForm":"Testing corrected calculations"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":628,"cache_read_input_tokens":72129,"cache_creation":{"ephemeral_5m_input_tokens":628,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEABbbP94TFndrxahwGG","type":"assistant","uuid":"219d8188-9a32-4846-8fd0-54930cdf9fee","timestamp":"2025-12-18T12:33:48.175Z"}
{"parentUuid":"219d8188-9a32-4846-8fd0-54930cdf9fee","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018MAt2yvXKA5gqqpyY8dE4P","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01DSRnUsnDh9MChwkdo8RzcY","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","offset":0,"limit":100}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":10,"cache_creation_input_tokens":628,"cache_read_input_tokens":72129,"cache_creation":{"ephemeral_5m_input_tokens":628,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEABbbP94TFndrxahwGG","type":"assistant","uuid":"903eb1bc-93f7-491e-8825-dd50a9c2a78b","timestamp":"2025-12-18T12:33:48.449Z"}
{"parentUuid":"903eb1bc-93f7-491e-8825-dd50a9c2a78b","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01KhAnsAukHSW2BjA7hCBp39","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"7b0c6447-faff-41e3-a7d1-be4ca9d48ff6","timestamp":"2025-12-18T12:33:48.723Z","toolUseResult":{"oldTodos":[],"newTodos":[{"content":"Find where metric scores are being calculated incorrectly","status":"in_progress","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Arousal Score calculation logic","status":"pending","activeForm":"Fixing Arousal Score calculation"},{"content":"Fix other stress metric calculations if needed","status":"pending","activeForm":"Fixing other metric calculations"},{"content":"Test the corrected calculations","status":"pending","activeForm":"Testing corrected calculations"}]}}
{"parentUuid":"7b0c6447-faff-41e3-a7d1-be4ca9d48ff6","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01DSRnUsnDh9MChwkdo8RzcY","type":"tool_result","content":"     0‚Üí/**\n     1‚Üí * QEEG Algorithm Calculator\n     2‚Üí * Based on Rhea's Report - Calculates 7 brain health parameters\n     3‚Üí * Each parameter has 3 sub-metrics, scored 0-3, classified as Low/Medium/High\n     4‚Üí */\n     5‚Üí\n     6‚Üíclass AlgorithmCalculator {\n     7‚Üí  constructor(qeegData) {\n     8‚Üí    this.data = qeegData;\n     9‚Üí    this.results = {\n    10‚Üí      parameters: [],\n    11‚Üí      rawCalculations: {},\n    12‚Üí      overallScore: 0\n    13‚Üí    };\n    14‚Üí  }\n    15‚Üí\n    16‚Üí  /**\n    17‚Üí   * Main calculation method - calculates all 7 parameters\n    18‚Üí   */\n    19‚Üí  calculate() {\n    20‚Üí    console.log('\\nüßÆ ========== STARTING ALGORITHM CALCULATIONS ==========');\n    21‚Üí    console.log('üìä Input Data Structure:', JSON.stringify(this.data, null, 2));\n    22‚Üí\n    23‚Üí    console.log('\\nüêõ === ENHANCED DEBUG MODE ACTIVATED ===');\n    24‚Üí    console.log('üìã This debug output will show:');\n    25‚Üí    console.log('   1. Every raw value extracted from QEEG data');\n    26‚Üí    console.log('   2. All mathematical formulas and calculations');\n    27‚Üí    console.log('   3. Threshold comparisons and scoring logic');\n    28‚Üí    console.log('   4. Final score aggregation for each parameter');\n    29‚Üí    console.log('===========================================\\n');\n    30‚Üí\n    31‚Üí    const parameters = [\n    32‚Üí      this.calculateCognition(),\n    33‚Üí      this.calculateStress(),\n    34‚Üí      this.calculateFocusAttention(),\n    35‚Üí      this.calculateBurnoutFatigue(),\n    36‚Üí      this.calculateEmotionalRegulation(),\n    37‚Üí      this.calculateLearning(),\n    38‚Üí      this.calculateCreativity()\n    39‚Üí    ];\n    40‚Üí\n    41‚Üí    console.log('\\n‚úÖ Final 7 Parameter Scores Calculated:');\n    42‚Üí    parameters.forEach((p, i) => {\n    43‚Üí      console.log(`${i + 1}. ${p.name}: ${p.score}/${p.maxScore} (${p.classification}) ${this.getEmoji(p.classification)}`);\n    44‚Üí      p.metrics.forEach(m => {\n    45‚Üí        console.log(`   - ${m.name}: ${m.score} point (value: ${JSON.stringify(m.value)})`);\n    46‚Üí      });\n    47‚Üí    });\n    48‚Üí\n    49‚Üí    // === ENHANCED DEBUG: Show complete calculation summary ===\n    50‚Üí    console.log('\\nüêõ === DEBUG: COMPLETE CALCULATION SUMMARY ===');\n    51‚Üí    console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');\n    52‚Üí    console.log('‚îÇ Parameter                   ‚îÇ Score ‚îÇ Classification‚îÇ');\n    53‚Üí    console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§');\n    54‚Üí    parameters.forEach(p => {\n    55‚Üí      const padding = ' '.repeat(28 - p.name.length);\n    56‚Üí      console.log(`‚îÇ ${p.name}${padding}‚îÇ  ${p.score}/3  ‚îÇ ${p.classification.padEnd(12)} ‚îÇ`);\n    57‚Üí    });\n    58‚Üí    console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò');\n    59‚Üí    console.log(`\\nüìä OVERALL BRAIN HEALTH SCORE: ${parameters.reduce((sum, p) => sum + p.score, 0)}/21`);\n    60‚Üí    console.log('=== END DEBUG: CALCULATION SUMMARY ===\\n');\n    61‚Üí\n    62‚Üí    console.log('========== CALCULATIONS COMPLETE ==========\\n');\n    63‚Üí\n    64‚Üí    this.results.parameters = parameters;\n    65‚Üí    this.results.overallScore = parameters.reduce((sum, p) => sum + p.score, 0);\n    66‚Üí\n    67‚Üí    return this.results;\n    68‚Üí  }\n    69‚Üí\n    70‚Üí  getEmoji(classification) {\n    71‚Üí    if (classification === 'Low') return 'üî¥';\n    72‚Üí    if (classification === 'Medium') return 'üü°';\n    73‚Üí    return 'üü¢';\n    74‚Üí  }\n    75‚Üí\n    76‚Üí  // ==================== HELPER METHODS ====================\n    77‚Üí\n    78‚Üí  /**\n    79‚Üí   * Get value from QEEG data table\n    80‚Üí   * @param {string} condition - 'EC' (Eyes Closed) or 'EO' (Eyes Open)\n    81‚Üí   * @param {string} powerType - 'absolute' or 'relative'\n    82‚Üí   * @param {string} channel - e.g., 'Fz', 'Cz', 'Pz'\n    83‚Üí   * @param {string} band - e.g., 'Theta', 'Alpha', 'Beta', 'HiBeta', 'Delta'\n    84‚Üí   */\n    85‚Üí  getValue(condition, powerType, channel, band) {\n    86‚Üí    try {\n    87‚Üí      return this.data[condition][powerType][channel][band];\n    88‚Üí    } catch (error) {\n    89‚Üí      console.error(`Error getting value: ${condition}.${powerType}.${channel}.${band}`);\n    90‚Üí      return null;\n    91‚Üí    }\n    92‚Üí  }\n    93‚Üí\n    94‚Üí  /**\n    95‚Üí   * Score a metric based on threshold\n    96‚Üí   * Returns 1 if condition is met (HEALTHY/NORMAL state by default)\n    97‚Üí   * Use 'invert: true' for stress/problem indicators\n    98‚Üí   */\n    99‚Üí  scoreMetric(value, threshold, comparison = 'less', invert = false) {\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"4e4f87aa-c5cc-42c0-a1d7-34b5dc574f8f","timestamp":"2025-12-18T12:33:50.475Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","content":"/**\n * QEEG Algorithm Calculator\n * Based on Rhea's Report - Calculates 7 brain health parameters\n * Each parameter has 3 sub-metrics, scored 0-3, classified as Low/Medium/High\n */\n\nclass AlgorithmCalculator {\n  constructor(qeegData) {\n    this.data = qeegData;\n    this.results = {\n      parameters: [],\n      rawCalculations: {},\n      overallScore: 0\n    };\n  }\n\n  /**\n   * Main calculation method - calculates all 7 parameters\n   */\n  calculate() {\n    console.log('\\nüßÆ ========== STARTING ALGORITHM CALCULATIONS ==========');\n    console.log('üìä Input Data Structure:', JSON.stringify(this.data, null, 2));\n\n    console.log('\\nüêõ === ENHANCED DEBUG MODE ACTIVATED ===');\n    console.log('üìã This debug output will show:');\n    console.log('   1. Every raw value extracted from QEEG data');\n    console.log('   2. All mathematical formulas and calculations');\n    console.log('   3. Threshold comparisons and scoring logic');\n    console.log('   4. Final score aggregation for each parameter');\n    console.log('===========================================\\n');\n\n    const parameters = [\n      this.calculateCognition(),\n      this.calculateStress(),\n      this.calculateFocusAttention(),\n      this.calculateBurnoutFatigue(),\n      this.calculateEmotionalRegulation(),\n      this.calculateLearning(),\n      this.calculateCreativity()\n    ];\n\n    console.log('\\n‚úÖ Final 7 Parameter Scores Calculated:');\n    parameters.forEach((p, i) => {\n      console.log(`${i + 1}. ${p.name}: ${p.score}/${p.maxScore} (${p.classification}) ${this.getEmoji(p.classification)}`);\n      p.metrics.forEach(m => {\n        console.log(`   - ${m.name}: ${m.score} point (value: ${JSON.stringify(m.value)})`);\n      });\n    });\n\n    // === ENHANCED DEBUG: Show complete calculation summary ===\n    console.log('\\nüêõ === DEBUG: COMPLETE CALCULATION SUMMARY ===');\n    console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');\n    console.log('‚îÇ Parameter                   ‚îÇ Score ‚îÇ Classification‚îÇ');\n    console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§');\n    parameters.forEach(p => {\n      const padding = ' '.repeat(28 - p.name.length);\n      console.log(`‚îÇ ${p.name}${padding}‚îÇ  ${p.score}/3  ‚îÇ ${p.classification.padEnd(12)} ‚îÇ`);\n    });\n    console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò');\n    console.log(`\\nüìä OVERALL BRAIN HEALTH SCORE: ${parameters.reduce((sum, p) => sum + p.score, 0)}/21`);\n    console.log('=== END DEBUG: CALCULATION SUMMARY ===\\n');\n\n    console.log('========== CALCULATIONS COMPLETE ==========\\n');\n\n    this.results.parameters = parameters;\n    this.results.overallScore = parameters.reduce((sum, p) => sum + p.score, 0);\n\n    return this.results;\n  }\n\n  getEmoji(classification) {\n    if (classification === 'Low') return 'üî¥';\n    if (classification === 'Medium') return 'üü°';\n    return 'üü¢';\n  }\n\n  // ==================== HELPER METHODS ====================\n\n  /**\n   * Get value from QEEG data table\n   * @param {string} condition - 'EC' (Eyes Closed) or 'EO' (Eyes Open)\n   * @param {string} powerType - 'absolute' or 'relative'\n   * @param {string} channel - e.g., 'Fz', 'Cz', 'Pz'\n   * @param {string} band - e.g., 'Theta', 'Alpha', 'Beta', 'HiBeta', 'Delta'\n   */\n  getValue(condition, powerType, channel, band) {\n    try {\n      return this.data[condition][powerType][channel][band];\n    } catch (error) {\n      console.error(`Error getting value: ${condition}.${powerType}.${channel}.${band}`);\n      return null;\n    }\n  }\n\n  /**\n   * Score a metric based on threshold\n   * Returns 1 if condition is met (HEALTHY/NORMAL state by default)\n   * Use 'invert: true' for stress/problem indicators\n   */\n  scoreMetric(value, threshold, comparison = 'less', invert = false) {","numLines":100,"startLine":0,"totalLines":832}}}
{"parentUuid":"4e4f87aa-c5cc-42c0-a1d7-34b5dc574f8f","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018dZ2wSAEqtNYPeY35NBp1N","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"‡§Ö‡§ö‡•ç‡§õ‡§æ, ‡§§‡•ã ‡§Ø‡§π server-side algorithm ‡§π‡•à‡•§ ‡§Æ‡•Å‡§ù‡•á ‡§¶‡•á‡§ñ‡§®‡§æ ‡§π‡•ã‡§ó‡§æ `scoreMetric` function ‡§ï‡•à‡§∏‡•á ‡§ï‡§æ‡§Æ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à ‡§î‡§∞ stress calculation ‡§ï‡•à‡§∏‡•á ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§","signature":"EpkDCkYIChgCKkAYXh+woyjgr92rq/2ju1ipgdgiBbvVhoFkf2E521Xbt8aBCKI+dKf7WAMhm/h+2UjE2SmHOHsHAQK18b+b/sWhEgyEXdTwmnH48voz0eQaDF3UB+zBo+zWve9l4iIw2YoLy4u9wQPncmrD54Gbl+tFNlp54Gd1VcarSTlVa41gnyGNoKMKzFJsNy/qone3KoACZ8EiJO7DAs2QDmATixdHKps2PqAOzJiX0uNvkmvSpQu5bENjss4UhBmKNum3Qvm3xUm65K73TbwA1GUwCikhCj4YNyUq5lFixzdDUL2Bi9jeHOFBOw+gx2Pkjn2+tC4tWbDU1oWVSSCbi+W1b/Jz5nvUAm4o28MOw5bMgIg24CdCGgNdA3IrSc3OSsx6k7WRoaav/ju6IxKd4Uu3pTaiCmikC+P0OolQG2oKKXCr0mr7LUiZM4CspnyOx3iAcImh29vkFw9WzrFpV01qIfwgEMuTa/H7LEsHWeyQhi7zmruuaeuSVqBwFvXLjxylVr7lgJR2ZiV+K2rTdiwlFNYvCxgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":2927,"cache_read_input_tokens":72757,"cache_creation":{"ephemeral_5m_input_tokens":2927,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEADZr1bE17u5u2HQrw6","type":"assistant","uuid":"753c769c-0f85-4a4f-8d9c-bd847c213785","timestamp":"2025-12-18T12:33:55.301Z"}
{"parentUuid":"753c769c-0f85-4a4f-8d9c-bd847c213785","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018dZ2wSAEqtNYPeY35NBp1N","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01D8gLxCpk8rmU68M3x7pycM","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","offset":95,"limit":80}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":2927,"cache_read_input_tokens":72757,"cache_creation":{"ephemeral_5m_input_tokens":2927,"ephemeral_1h_input_tokens":0},"output_tokens":186,"service_tier":"standard"}},"requestId":"req_011CWEADZr1bE17u5u2HQrw6","type":"assistant","uuid":"bc23526a-8028-45bb-92e1-bb041d439346","timestamp":"2025-12-18T12:33:57.428Z"}
{"parentUuid":"bc23526a-8028-45bb-92e1-bb041d439346","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01D8gLxCpk8rmU68M3x7pycM","type":"tool_result","content":"    95‚Üí  /**\n    96‚Üí   * Score a metric based on threshold\n    97‚Üí   * Returns 1 if condition is met (HEALTHY/NORMAL state by default)\n    98‚Üí   * Use 'invert: true' for stress/problem indicators\n    99‚Üí   */\n   100‚Üí  scoreMetric(value, threshold, comparison = 'less', invert = false) {\n   101‚Üí    if (value === null || value === undefined) return 0;\n   102‚Üí\n   103‚Üí    let result = 0;\n   104‚Üí\n   105‚Üí    if (comparison === 'less') {\n   106‚Üí      result = value < threshold ? 1 : 0;\n   107‚Üí    } else if (comparison === 'more') {\n   108‚Üí      result = value > threshold ? 1 : 0;\n   109‚Üí    } else if (comparison === 'equal') {\n   110‚Üí      result = value === threshold ? 1 : 0;\n   111‚Üí    }\n   112‚Üí\n   113‚Üí    // Invert for stress/problem indicators (where 1 point = problem detected)\n   114‚Üí    return invert ? (1 - result) : result;\n   115‚Üí  }\n   116‚Üí\n   117‚Üí  /**\n   118‚Üí   * Classify score to bucket (Low/Medium/High)\n   119‚Üí   */\n   120‚Üí  classifyScore(score) {\n   121‚Üí    if (score <= 1) return 'Low';\n   122‚Üí    if (score === 2) return 'Medium';\n   123‚Üí    return 'High';\n   124‚Üí  }\n   125‚Üí\n   126‚Üí  // ==================== INDIVIDUAL METRICS ====================\n   127‚Üí\n   128‚Üí  /**\n   129‚Üí   * Focus Score Stimulation Control (Theta:Beta Ratio) - ABSOLUTE POWER - For Cognition parameter\n   130‚Üí   * Eyes Open, Absolute Power, Fz & Cz average\n   131‚Üí   * < 1.5 is normal (as per specification)\n   132‚Üí   */\n   133‚Üí  calculateFocusScoreAbsolute() {\n   134‚Üí    console.log('\\n  üîç === Calculating Focus Score Stimulation Control (Theta:Beta) - ABSOLUTE POWER ===');\n   135‚Üí    console.log('  üìã Purpose: Measures mental focus by comparing slow (Theta) vs fast (Beta) brain waves');\n   136‚Üí    console.log('  üìä Data Source: Eyes Open (EO), ABSOLUTE Power (ŒºV¬≤), Channels Fz & Cz');\n   137‚Üí    console.log('  üéØ Expected: Ratio < 1.5 indicates good focus (more Beta than Theta)\\n');\n   138‚Üí\n   139‚Üí    const fzTheta = this.getValue('EO', 'absolute', 'Fz', 'Theta');\n   140‚Üí    const fzBeta = this.getValue('EO', 'absolute', 'Fz', 'Beta');\n   141‚Üí    const czTheta = this.getValue('EO', 'absolute', 'Cz', 'Theta');\n   142‚Üí    const czBeta = this.getValue('EO', 'absolute', 'Cz', 'Beta');\n   143‚Üí\n   144‚Üí    console.log('  üêõ DEBUG - Step 1: Extract Raw Values from QEEG Data');\n   145‚Üí    console.log('     ‚îú‚îÄ EO.absolute.Fz.Theta =', fzTheta, 'ŒºV¬≤');\n   146‚Üí    console.log('     ‚îú‚îÄ EO.absolute.Fz.Beta  =', fzBeta, 'ŒºV¬≤');\n   147‚Üí    console.log('     ‚îú‚îÄ EO.absolute.Cz.Theta =', czTheta, 'ŒºV¬≤');\n   148‚Üí    console.log('     ‚îî‚îÄ EO.absolute.Cz.Beta  =', czBeta, 'ŒºV¬≤');\n   149‚Üí\n   150‚Üí    // Fix: Use == null to allow 0 values (valid EEG readings)\n   151‚Üí    // Also check for zero denominators to prevent Infinity/NaN\n   152‚Üí    if (fzTheta == null || fzBeta == null || czTheta == null || czBeta == null || fzBeta === 0 || czBeta === 0) {\n   153‚Üí      console.log('     ‚ùå Missing or zero Beta values (division by zero prevented), returning 0');\n   154‚Üí      return { value: null, score: 0 };\n   155‚Üí    }\n   156‚Üí\n   157‚Üí    console.log('\\n  üêõ DEBUG - Step 2: Calculate Theta:Beta Ratios');\n   158‚Üí    const fzRatio = fzTheta / fzBeta;\n   159‚Üí    const czRatio = czTheta / czBeta;\n   160‚Üí    console.log('     ‚îú‚îÄ Fz Ratio = Theta/Beta = ' + fzTheta + ' / ' + fzBeta + ' = ' + fzRatio.toFixed(3));\n   161‚Üí    console.log('     ‚îî‚îÄ Cz Ratio = Theta/Beta = ' + czTheta + ' / ' + czBeta + ' = ' + czRatio.toFixed(3));\n   162‚Üí\n   163‚Üí    console.log('\\n  üêõ DEBUG - Step 3: Calculate Average Ratio');\n   164‚Üí    const avgRatio = (fzRatio + czRatio) / 2;\n   165‚Üí    console.log('     ‚îî‚îÄ Average = (Fz + Cz) / 2 = (' + fzRatio.toFixed(3) + ' + ' + czRatio.toFixed(3) + ') / 2 = ' + avgRatio.toFixed(3));\n   166‚Üí\n   167‚Üí    console.log('\\n  üêõ DEBUG - Step 4: Score Against Threshold');\n   168‚Üí    console.log('     ‚îú‚îÄ Threshold: < 1.5 = Normal (good focus, per spec)');\n   169‚Üí    console.log('     ‚îú‚îÄ Actual Value: ' + avgRatio.toFixed(3));\n   170‚Üí    console.log('     ‚îú‚îÄ Comparison: ' + avgRatio.toFixed(3) + ' < 1.5 ? ' + (avgRatio < 1.5));\n   171‚Üí    const score = this.scoreMetric(avgRatio, 1.5, 'less');\n   172‚Üí    console.log('     ‚îî‚îÄ ‚úÖ SCORE: ' + score + '/1 ' + (score === 1 ? '(PASS - Good focus)' : '(FAIL - Poor focus)'));\n   173‚Üí\n   174‚Üí    return {\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"dee8af82-c12b-4c71-a874-3d64b860a872","timestamp":"2025-12-18T12:33:59.176Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","content":"  /**\n   * Score a metric based on threshold\n   * Returns 1 if condition is met (HEALTHY/NORMAL state by default)\n   * Use 'invert: true' for stress/problem indicators\n   */\n  scoreMetric(value, threshold, comparison = 'less', invert = false) {\n    if (value === null || value === undefined) return 0;\n\n    let result = 0;\n\n    if (comparison === 'less') {\n      result = value < threshold ? 1 : 0;\n    } else if (comparison === 'more') {\n      result = value > threshold ? 1 : 0;\n    } else if (comparison === 'equal') {\n      result = value === threshold ? 1 : 0;\n    }\n\n    // Invert for stress/problem indicators (where 1 point = problem detected)\n    return invert ? (1 - result) : result;\n  }\n\n  /**\n   * Classify score to bucket (Low/Medium/High)\n   */\n  classifyScore(score) {\n    if (score <= 1) return 'Low';\n    if (score === 2) return 'Medium';\n    return 'High';\n  }\n\n  // ==================== INDIVIDUAL METRICS ====================\n\n  /**\n   * Focus Score Stimulation Control (Theta:Beta Ratio) - ABSOLUTE POWER - For Cognition parameter\n   * Eyes Open, Absolute Power, Fz & Cz average\n   * < 1.5 is normal (as per specification)\n   */\n  calculateFocusScoreAbsolute() {\n    console.log('\\n  üîç === Calculating Focus Score Stimulation Control (Theta:Beta) - ABSOLUTE POWER ===');\n    console.log('  üìã Purpose: Measures mental focus by comparing slow (Theta) vs fast (Beta) brain waves');\n    console.log('  üìä Data Source: Eyes Open (EO), ABSOLUTE Power (ŒºV¬≤), Channels Fz & Cz');\n    console.log('  üéØ Expected: Ratio < 1.5 indicates good focus (more Beta than Theta)\\n');\n\n    const fzTheta = this.getValue('EO', 'absolute', 'Fz', 'Theta');\n    const fzBeta = this.getValue('EO', 'absolute', 'Fz', 'Beta');\n    const czTheta = this.getValue('EO', 'absolute', 'Cz', 'Theta');\n    const czBeta = this.getValue('EO', 'absolute', 'Cz', 'Beta');\n\n    console.log('  üêõ DEBUG - Step 1: Extract Raw Values from QEEG Data');\n    console.log('     ‚îú‚îÄ EO.absolute.Fz.Theta =', fzTheta, 'ŒºV¬≤');\n    console.log('     ‚îú‚îÄ EO.absolute.Fz.Beta  =', fzBeta, 'ŒºV¬≤');\n    console.log('     ‚îú‚îÄ EO.absolute.Cz.Theta =', czTheta, 'ŒºV¬≤');\n    console.log('     ‚îî‚îÄ EO.absolute.Cz.Beta  =', czBeta, 'ŒºV¬≤');\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    // Also check for zero denominators to prevent Infinity/NaN\n    if (fzTheta == null || fzBeta == null || czTheta == null || czBeta == null || fzBeta === 0 || czBeta === 0) {\n      console.log('     ‚ùå Missing or zero Beta values (division by zero prevented), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    console.log('\\n  üêõ DEBUG - Step 2: Calculate Theta:Beta Ratios');\n    const fzRatio = fzTheta / fzBeta;\n    const czRatio = czTheta / czBeta;\n    console.log('     ‚îú‚îÄ Fz Ratio = Theta/Beta = ' + fzTheta + ' / ' + fzBeta + ' = ' + fzRatio.toFixed(3));\n    console.log('     ‚îî‚îÄ Cz Ratio = Theta/Beta = ' + czTheta + ' / ' + czBeta + ' = ' + czRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 3: Calculate Average Ratio');\n    const avgRatio = (fzRatio + czRatio) / 2;\n    console.log('     ‚îî‚îÄ Average = (Fz + Cz) / 2 = (' + fzRatio.toFixed(3) + ' + ' + czRatio.toFixed(3) + ') / 2 = ' + avgRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 4: Score Against Threshold');\n    console.log('     ‚îú‚îÄ Threshold: < 1.5 = Normal (good focus, per spec)');\n    console.log('     ‚îú‚îÄ Actual Value: ' + avgRatio.toFixed(3));\n    console.log('     ‚îú‚îÄ Comparison: ' + avgRatio.toFixed(3) + ' < 1.5 ? ' + (avgRatio < 1.5));\n    const score = this.scoreMetric(avgRatio, 1.5, 'less');\n    console.log('     ‚îî‚îÄ ‚úÖ SCORE: ' + score + '/1 ' + (score === 1 ? '(PASS - Good focus)' : '(FAIL - Poor focus)'));\n\n    return {","numLines":80,"startLine":95,"totalLines":832}}}
{"parentUuid":"dee8af82-c12b-4c71-a874-3d64b860a872","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_019BemRH9NXU5XAmWrMcpt22","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"‡§Ö‡§ö‡•ç‡§õ‡§æ, ‡§§‡•ã `scoreMetric` function ‡§¶‡•á‡§ñ‡§æ‡•§ ‡§Ö‡§¨ ‡§Æ‡•Å‡§ù‡•á Stress parameter ‡§ï‡§æ calculation ‡§¶‡•á‡§ñ‡§®‡§æ ‡§π‡•ã‡§ó‡§æ ‡§ú‡§π‡§æ‡§Ç Arousal Score calculate ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§","signature":"EvwCCkYIChgCKkAQQemHtBxuzXYZaNjKCBiuCQvhTde6gvT7Gw7EaCXxMK4Kb9yHPT955glUq5QjuLg/AinfCpyAA6TxkrcrUvmCEgyolsbL5O8sLka8vZ0aDFEIwNHaKETMQEuGjiIwQ38cA40HWXciknS/N5inzhWXuZv3x4xdNn1LWej8Oq+7qmFQS3Kx1f59P+KRjJbJKuMB9UdNWpwNPYDGN8XMka50GrOaqYyKFF/Bd2aV+MmMOVRmUXzoyvVofxGaxr+VEpGinLIelzEMMFoo3lrTH6mCBSMb2bHIaBg/8qVahen8xjIGoE3M13UhPY/ZxiawAmEfcZSVFejUz2L9U1p4UK18sEWAeWs5Aoo2rdMh06POKBUuPdGrr5FK9aVEcqVXK6wpIkNRcin+ctMewwR6LHAjAEHZYCoaddSmTgPKQejTpX5YlwzMyZxMywgxWkwT+ofkYg4z3gW9V6VfKjNbckaA9cKgStmkUva8RgfykvFbbhcUMdgYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1945,"cache_read_input_tokens":75684,"cache_creation":{"ephemeral_5m_input_tokens":1945,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAEDJ2MnNiyaNmydHFg","type":"assistant","uuid":"ede94961-e820-4707-b0de-d02e3d8443c7","timestamp":"2025-12-18T12:34:04.645Z"}
{"parentUuid":"ede94961-e820-4707-b0de-d02e3d8443c7","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_019BemRH9NXU5XAmWrMcpt22","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01G1S6vcowRT5Yf7H5hbHEzH","name":"Grep","input":{"pattern":"calculateStress|Arousal Score","path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","output_mode":"content","-n":true,"-C":5}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1945,"cache_read_input_tokens":75684,"cache_creation":{"ephemeral_5m_input_tokens":1945,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAEDJ2MnNiyaNmydHFg","type":"assistant","uuid":"ecfb7fff-83ce-4ab4-91b4-2de3657e7c88","timestamp":"2025-12-18T12:34:07.449Z"}
{"parentUuid":"ecfb7fff-83ce-4ab4-91b4-2de3657e7c88","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01G1S6vcowRT5Yf7H5hbHEzH","type":"tool_result","content":"29-    console.log('   4. Final score aggregation for each parameter');\r\n30-    console.log('===========================================\\n');\r\n31-\r\n32-    const parameters = [\r\n33-      this.calculateCognition(),\r\n34:      this.calculateStress(),\r\n35-      this.calculateFocusAttention(),\r\n36-      this.calculateBurnoutFatigue(),\r\n37-      this.calculateEmotionalRegulation(),\r\n38-      this.calculateLearning(),\r\n39-      this.calculateCreativity()\r\n--\n342-      details: { fzRatio, czRatio, pzRatio, order: isNormalOrder }\r\n343-    };\r\n344-  }\r\n345-\r\n346-  /**\r\n347:   * Arousal Score (HiBeta:Beta Ratio) - Used in multiple parameters\r\n348-   * Eyes Open, Absolute Power, Fz & Cz average\r\n349-   * < 1 is normal\r\n350-   */\r\n351-  calculateArousalScore() {\r\n352:    console.log('\\n  üîç === Calculating Arousal Score (HiBeta:Beta) ===');\r\n353-    const fzBeta = this.getValue('EO', 'absolute', 'Fz', 'Beta');\r\n354-    const fzHiBeta = this.getValue('EO', 'absolute', 'Fz', 'HiBeta');\r\n355-    const czBeta = this.getValue('EO', 'absolute', 'Cz', 'Beta');\r\n356-    const czHiBeta = this.getValue('EO', 'absolute', 'Cz', 'HiBeta');\r\n357-\r\n--\n378-    console.log(`     ‚úÖ SCORE: ${score}/1`);\r\n379-\r\n380-    return {\r\n381-      value: avgRatio,\r\n382-      score: score,\r\n383:      description: `Arousal Score = ${avgRatio.toFixed(2)} (< 1 is normal)`,\r\n384-      details: { fzRatio: fzRatio.toFixed(2), czRatio: czRatio.toFixed(2) }\r\n385-    };\r\n386-  }\r\n387-\r\n388-  /**\r\n--\n639-    };\r\n640-  }\r\n641-\r\n642-  /**\r\n643-   * 2. Stress (Note: 0/3 is healthy, 3/3 is high stress)\r\n644:   * - Arousal Score (inverted: abnormal = 1 point)\r\n645-   * - Relaxation Score (inverted: abnormal = 1 point)\r\n646-   * - Regeneration (inverted: abnormal = 1 point)\r\n647-   */\r\n648:  calculateStress() {\r\n649-    console.log('\\nüìä === STRESS PARAMETER (0/3 = Healthy, 3/3 = High Stress) ===');\r\n650-    const metric1 = this.calculateArousalScore();\r\n651-    const metric2 = this.calculateRelaxationScore();\r\n652-    const metric3 = this.calculateRegeneration();\r\n653-\r\n--\n668-      name: 'Stress',\r\n669-      score: totalScore,\r\n670-      maxScore: 3,\r\n671-      classification: this.classifyScore(totalScore),\r\n672-      metrics: [\r\n673:        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\r\n674-        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\r\n675-        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }\r\n676-      ]\r\n677-    };\r\n678-  }\r\n--\n705-    };\r\n706-  }\r\n707-\r\n708-  /**\r\n709-   * 4. Burnout & Fatigue (Note: 0/3 is healthy)\r\n710:   * - Arousal Score (inverted: abnormal = 1 point)\r\n711-   * - Relaxation Score (inverted: abnormal = 1 point)\r\n712-   * - Excessive Delta (inverted: abnormal = 1 point)\r\n713-   */\r\n714-  calculateBurnoutFatigue() {\r\n715-    console.log('\\nüìä === BURNOUT & FATIGUE PARAMETER (0/3 = Healthy, 3/3 = High Burnout) ===');\r\n--\n734-      name: 'Burnout & Fatigue',\r\n735-      score: totalScore,\r\n736-      maxScore: 3,\r\n737-      classification: this.classifyScore(totalScore),\r\n738-      metrics: [\r\n739:        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\r\n740-        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\r\n741-        { name: 'Excessive Delta', ...metric3, score: invertedScore3 }\r\n742-      ]\r\n743-    };\r\n744-  }\r\n745-\r\n746-  /**\r\n747-   * 5. Emotional Regulation\r\n748-   * - Alpha Asymmetry\r\n749:   * - Arousal Score\r\n750-   * - Regeneration\r\n751-   */\r\n752-  calculateEmotionalRegulation() {\r\n753-    console.log('\\nüìä Calculating EMOTIONAL REGULATION...');\r\n754-    const metric1 = this.calculateAlphaAsymmetry();\r\n--\n763-      score: totalScore,\r\n764-      maxScore: 3,\r\n765-      classification: this.classifyScore(totalScore),\r\n766-      metrics: [\r\n767-        { name: 'Alpha Asymmetry (Frontal)', ...metric1 },\r\n768:        { name: 'Arousal Score', ...metric2 },\r\n769-        { name: 'Regeneration (Alpha Modulation)', ...metric3 }\r\n770-      ]\r\n771-    };\r\n772-  }\r\n773-\r\n774-  /**\r\n775-   * 6. Learning\r\n776-   * - Alpha Peak\r\n777-   * - Focus Score (Theta:Beta)\r\n778:   * - Arousal Score\r\n779-   */\r\n780-  calculateLearning() {\r\n781-    console.log('\\nüìä Calculating LEARNING...');\r\n782-    const metric1 = this.calculateAlphaPeak();\r\n783-    const metric2 = this.calculateFocusScoreRelative(); // Use RELATIVE power\r\n--\n792-      maxScore: 3,\r\n793-      classification: this.classifyScore(totalScore),\r\n794-      metrics: [\r\n795-        { name: 'Alpha Peak', ...metric1 },\r\n796-        { name: 'Focus Score (Theta:Beta)', ...metric2 },\r\n797:        { name: 'Arousal Score', ...metric3 }\r\n798-      ]\r\n799-    };\r\n800-  }\r\n801-\r\n802-  /**"}]},"uuid":"62d36452-90ca-49be-88d8-0bef94b025be","timestamp":"2025-12-18T12:34:09.344Z","toolUseResult":{"mode":"content","numFiles":0,"filenames":[],"content":"29-    console.log('   4. Final score aggregation for each parameter');\r\n30-    console.log('===========================================\\n');\r\n31-\r\n32-    const parameters = [\r\n33-      this.calculateCognition(),\r\n34:      this.calculateStress(),\r\n35-      this.calculateFocusAttention(),\r\n36-      this.calculateBurnoutFatigue(),\r\n37-      this.calculateEmotionalRegulation(),\r\n38-      this.calculateLearning(),\r\n39-      this.calculateCreativity()\r\n--\n342-      details: { fzRatio, czRatio, pzRatio, order: isNormalOrder }\r\n343-    };\r\n344-  }\r\n345-\r\n346-  /**\r\n347:   * Arousal Score (HiBeta:Beta Ratio) - Used in multiple parameters\r\n348-   * Eyes Open, Absolute Power, Fz & Cz average\r\n349-   * < 1 is normal\r\n350-   */\r\n351-  calculateArousalScore() {\r\n352:    console.log('\\n  üîç === Calculating Arousal Score (HiBeta:Beta) ===');\r\n353-    const fzBeta = this.getValue('EO', 'absolute', 'Fz', 'Beta');\r\n354-    const fzHiBeta = this.getValue('EO', 'absolute', 'Fz', 'HiBeta');\r\n355-    const czBeta = this.getValue('EO', 'absolute', 'Cz', 'Beta');\r\n356-    const czHiBeta = this.getValue('EO', 'absolute', 'Cz', 'HiBeta');\r\n357-\r\n--\n378-    console.log(`     ‚úÖ SCORE: ${score}/1`);\r\n379-\r\n380-    return {\r\n381-      value: avgRatio,\r\n382-      score: score,\r\n383:      description: `Arousal Score = ${avgRatio.toFixed(2)} (< 1 is normal)`,\r\n384-      details: { fzRatio: fzRatio.toFixed(2), czRatio: czRatio.toFixed(2) }\r\n385-    };\r\n386-  }\r\n387-\r\n388-  /**\r\n--\n639-    };\r\n640-  }\r\n641-\r\n642-  /**\r\n643-   * 2. Stress (Note: 0/3 is healthy, 3/3 is high stress)\r\n644:   * - Arousal Score (inverted: abnormal = 1 point)\r\n645-   * - Relaxation Score (inverted: abnormal = 1 point)\r\n646-   * - Regeneration (inverted: abnormal = 1 point)\r\n647-   */\r\n648:  calculateStress() {\r\n649-    console.log('\\nüìä === STRESS PARAMETER (0/3 = Healthy, 3/3 = High Stress) ===');\r\n650-    const metric1 = this.calculateArousalScore();\r\n651-    const metric2 = this.calculateRelaxationScore();\r\n652-    const metric3 = this.calculateRegeneration();\r\n653-\r\n--\n668-      name: 'Stress',\r\n669-      score: totalScore,\r\n670-      maxScore: 3,\r\n671-      classification: this.classifyScore(totalScore),\r\n672-      metrics: [\r\n673:        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\r\n674-        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\r\n675-        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }\r\n676-      ]\r\n677-    };\r\n678-  }\r\n--\n705-    };\r\n706-  }\r\n707-\r\n708-  /**\r\n709-   * 4. Burnout & Fatigue (Note: 0/3 is healthy)\r\n710:   * - Arousal Score (inverted: abnormal = 1 point)\r\n711-   * - Relaxation Score (inverted: abnormal = 1 point)\r\n712-   * - Excessive Delta (inverted: abnormal = 1 point)\r\n713-   */\r\n714-  calculateBurnoutFatigue() {\r\n715-    console.log('\\nüìä === BURNOUT & FATIGUE PARAMETER (0/3 = Healthy, 3/3 = High Burnout) ===');\r\n--\n734-      name: 'Burnout & Fatigue',\r\n735-      score: totalScore,\r\n736-      maxScore: 3,\r\n737-      classification: this.classifyScore(totalScore),\r\n738-      metrics: [\r\n739:        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\r\n740-        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\r\n741-        { name: 'Excessive Delta', ...metric3, score: invertedScore3 }\r\n742-      ]\r\n743-    };\r\n744-  }\r\n745-\r\n746-  /**\r\n747-   * 5. Emotional Regulation\r\n748-   * - Alpha Asymmetry\r\n749:   * - Arousal Score\r\n750-   * - Regeneration\r\n751-   */\r\n752-  calculateEmotionalRegulation() {\r\n753-    console.log('\\nüìä Calculating EMOTIONAL REGULATION...');\r\n754-    const metric1 = this.calculateAlphaAsymmetry();\r\n--\n763-      score: totalScore,\r\n764-      maxScore: 3,\r\n765-      classification: this.classifyScore(totalScore),\r\n766-      metrics: [\r\n767-        { name: 'Alpha Asymmetry (Frontal)', ...metric1 },\r\n768:        { name: 'Arousal Score', ...metric2 },\r\n769-        { name: 'Regeneration (Alpha Modulation)', ...metric3 }\r\n770-      ]\r\n771-    };\r\n772-  }\r\n773-\r\n774-  /**\r\n775-   * 6. Learning\r\n776-   * - Alpha Peak\r\n777-   * - Focus Score (Theta:Beta)\r\n778:   * - Arousal Score\r\n779-   */\r\n780-  calculateLearning() {\r\n781-    console.log('\\nüìä Calculating LEARNING...');\r\n782-    const metric1 = this.calculateAlphaPeak();\r\n783-    const metric2 = this.calculateFocusScoreRelative(); // Use RELATIVE power\r\n--\n792-      maxScore: 3,\r\n793-      classification: this.classifyScore(totalScore),\r\n794-      metrics: [\r\n795-        { name: 'Alpha Peak', ...metric1 },\r\n796-        { name: 'Focus Score (Theta:Beta)', ...metric2 },\r\n797:        { name: 'Arousal Score', ...metric3 }\r\n798-      ]\r\n799-    };\r\n800-  }\r\n801-\r\n802-  /**","numLines":136}}
{"parentUuid":"62d36452-90ca-49be-88d8-0bef94b025be","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Mvh9fsesJMxQ2E3WZpCoUJ","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! ‡§Ö‡§¨ ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§ó‡§Ø‡§æ‡•§ Line 650-677 ‡§™‡§∞ `calculateStress()` function ‡§π‡•à‡•§ ‡§¶‡•á‡§ñ‡§§‡•á ‡§π‡•à‡§Ç:\n\n```javascript\ncalculateStress() {\n  console.log('\\nüìä === STRESS PARAMETER (0/3 = Healthy, 3/3 = High Stress) ===');\n  const metric1 = this.calculateArousalScore();\n  const metric2 = this.calculateRelaxationScore();\n  const metric3 = this.calculateRegeneration();\n  \n  // Invert scores (0 becomes 1, 1 becomes 0) for stress indicators\n  const invertedScore1 = 1 - metric1.score;\n  const invertedScore2 = 1 - metric2.score;\n  const invertedScore3 = 1 - metric3.score;\n  ...\n  metrics: [\n    { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n    { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n    { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }\n  ]\n}\n```\n\n‡§§‡•ã ‡§Ø‡§π‡§æ‡§Ç problem ‡§π‡•à! Scores ‡§ï‡•ã invert ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à:\n- `metric1.score` = 1 (normal, < 1 threshold met)\n- ‡§≤‡•á‡§ï‡§ø‡§® `invertedScore1 = 1 - 1 = 0`\n- ‡§§‡•ã display ‡§Æ‡•á‡§Ç `0/1` ‡§¶‡§ø‡§ñ ‡§∞‡§π‡§æ ‡§π‡•à\n\n‡§Ø‡§π logic ‡§ó‡§≤‡§§ ‡§π‡•à‡•§ ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø:\n- Arousal Score < 1 = normal = 1/1 green ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è\n- Arousal Score >= 1 = abnormal = 0/1 red ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è\n \nThe core issue is misunderstanding the score inversion logic. Individual metrics should not be inverted, as this distorts their original meaning. The overall stress parameter calculation requires a different approach to accurately represent each metric's health status.","signature":"EuoQCkYIChgCKkAB56GLglgfl4mCsQQ+myHxnpIA6oaVDmlHycblBxXBzpEzKFXXVe7uQFQ8kyuW/7FvVGAqDGKkmQ3G2kjUDlX1EgwSrPHOXrYngJwFhLIaDEUgW0WxFaQ1uD+ztyIwTrouxiWStxh9/47h8reMrdca5aDsEe6pwbGZXRbzeccQiXHRK6X7qyu0R6tLtC6IKtEPJwd6FHFHjOI0TlDXBLydE4sg9qRx2PbkIPxsXPtxmq7LboevXy+8d8wjulZ8cPzJ5Syrag9Z+ZuuIOmAPF1o6uvipbHTglQwDntCyanPeaSA9/jZ5dxxEBWOQsASPvv8ZouQbAFUDQ8+5XGMpyc4TUKz1eqNMBp5NzehQ6bI80BFblF6FabOtI0dsXoMp/fpj60CZ3XCAIxrY1wEnQ85XtTE86mzpl/GOh05ViyOIyJQuBpPuuzpWBDiyb06iZTEMlvONyMakTXhA66l3t1hvza62uTjrTW45gbujbmk5CuMqE1j36zAlWD4DF134QLxV1GiF5nm6EwaY+nsAyE2BouOS0w3xuo/urwN5qvnxf6Kr6iO6qf46JKIz8ZKMjkttO3XmlHwl+gqvX9nxOjKEqmD/3JHJlKqAZGRvZYX+fruLVUSoHwplfGJ0aMkfsu+R0TUPUGfIAhEbBTHpJ7HBUCl+VYVT+CxgSqUG9I9bKHx//JL/tcrZ5+4OzpragqmB+nSM1PJ9P0pYcCgAVTOXQGjgPnDDzgagQyxRqyJF6An7JUt1NBO2PbiYOH7q97shF5L/CZ4DbSluFdwyThuevjGpprMk4XH3IF0o8fm37/eW5ym+l1JYEJhGAo3Bl4Qxng4+fwuKIMQQJ+2HaFcN/yxNDMLHvUnrbnI+RnupuzUhxsWR9XsUP3Uvc2MFYBbEXfSE9O4FNkTLhQS4KS4y3Xs+aUDo3/p1HM3HIM/9YO72ARdwGTwGmFqhGT5eh2YlA+J3u5L8mnWzoC714hG7+tgZq0tMU+QHabeLR1XPB3GbZ2wzQSOZr5Uc30ZnunpsJQqiA2Fj9lkhhrnme0NXHyci1I6nH1MQ9fYgrOK+vJa+aglRw5DOrtk6ZOStioynNqu77SK6NS4K6RYo2IxqCDFjB2Wvu2ygFBMUiODuJux3+6AD2h1pZAoD9G6C/As2YIFoj6NlxOzTZzeJMABXJoJLrqlFfCMyfz9117AF6Js9JU6NOI/ymQPAuHWTOy3shr32mVSMNa68MJWS+2YGO/ZuoQSGQb4ZU1vl1DNKvwUQOBaHMAq7f92zaFrv7CgKpmyOXNquUdsrZYnqGEIGj3MWgjf9y4KQfXNQaESZA9LUL7L4+M4He6xfaIuheFXrPMEYpa7TUY56wGt3bmxNJncSx8HNnn3hloW7xKjd/fYrCoskTeItTmA3kRe1FYs8oFeczbUui1P8LvpYWstQvKDt+N8LNo2bn0+A7nmaiw+W+AsZpeXCyWtu11ZBhwZ4vuJC6XKWQZDyW1N1joCUadfsCEGgqG46HuE6nYH4U/4SJffM4yEwfTSLmGZwZQVQ4jWOtDgDIxZwW15yNwpkml3eNHNJWSWK66JLq7FCktAppJ+1/R7nna28xCGpLX0sA6+q4eZ6KI26hIOji13QEGSMzn46qBZixp47w7Yepl0OQcczpcOQzEDs92VUAQ7A3nf8f7+ZQIA/Q9vv4Q2vsRar6sHj9oxvgzno+bKvXXlx3clqEjbaTCDqqgdTxch2g/yOiU+WiIAnN9sTn2GqliOGeU8aX2l/EZOKwTHz15DQCBSI7PX//La1zYGLofdjDtyQpJ4FmaWDWjmHkECzU8DhY2fZORboUByVzyurB3iiQ77cQHVZX9LADPdsFQWb7dEotFj7worbsOAqc6NzUyX4Ox3CXdgMtP/d7E/kj+VKOhSxeMnG7pGo2ZeSYVeTUmCvbSWVJOQnZq49FZRMWAjI5nXSrx7DuwEEB0or5j4jrH5LbYkQg6ynqP9TNAf3BAKiNAGl4BS4L5093xhe8Wwo/JwcCgemCsxDpKXSO8BEz4o6SKYotjEfSEQ60n6vp8hxR9e0/srDK56Gkj5N4h1ufc3Xy6/hr4fkj7Vr4FqiaF0HXn/yMTym/6KKZTU0o+wVKAV77EFMmAMTAnQ7S0eBjV1SamIx7DrNWiBa4I05DflBqcmXQqIMcXcN5SMZSje5fRIr8mdBclHlA3ihrGdUH2/oQ91HIx73RhHrFartUqNZ0F6VpNPC1UT70EfesHUPCVTrCNDmld738N3VEHaxpMvB4NcsctAtc5LnhpI7/jo9n9nmVLtwZW+8FGz+7aJID7QE9Zo51J/j67ZG2liZ7wm6xN31sW1gvp2egCLkwJoHG/OQFSSS5Gd7kfACLs0f9m2WTN2ScJbhCFkr5efo2Ewv5J2Pauc0w48IN8yBBu7cLEDGqXgzapjLPzEPIOh9hyqejxYyRgyQHfaNa8vco6h6RHUzZvLygGh+oCB5JQsy0eKu7xPapatTxi90zLItccJTiq5CE1H/qSOhG7YTlZFFfMQqBhVelS/53rQOPngUAOmkisyAQotoBDhPtpE6YhYD1d8VfO+TzMfxXzrI0LIrvhD76qiMGPoyzkPzG5cv2DZCu5qfMbvN73x8NJSVr6ggLINN8d7lqb3zM9Aa/ZWgXQ31SQIx+PKidvLo1NHvxaECpRfabsAnlrjbecUKaf319W36BStOC/kjMi8irOBMbkfrKUqpyfFWjrScz1MihxKdh+grKqYi4XXCojP6jfHbmWep2Zvm7jrDA3GY0Q4uIr+tqXAA3CiLMSqxniYi9VoPuv7k8Uv5JaBg7r2TQwXBKfcz5Jwc3GwiOgRfGZ5SV8wWQ1SLWMNdU4cGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1950,"cache_read_input_tokens":77629,"cache_creation":{"ephemeral_5m_input_tokens":1950,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAEwhgtbKSrdzhicQnn","type":"assistant","uuid":"71076ddb-e271-408d-ba2e-ade74a61ff34","timestamp":"2025-12-18T12:34:27.553Z"}
{"parentUuid":"71076ddb-e271-408d-ba2e-ade74a61ff34","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Mvh9fsesJMxQ2E3WZpCoUJ","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Piavfb3ezadbQejQooYwhw","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","offset":648,"limit":35}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1950,"cache_read_input_tokens":77629,"cache_creation":{"ephemeral_5m_input_tokens":1950,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAEwhgtbKSrdzhicQnn","type":"assistant","uuid":"47d3eb88-d0a3-42ce-b768-6464cc30811b","timestamp":"2025-12-18T12:34:27.819Z"}
{"parentUuid":"47d3eb88-d0a3-42ce-b768-6464cc30811b","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Piavfb3ezadbQejQooYwhw","type":"tool_result","content":"   648‚Üí  calculateStress() {\n   649‚Üí    console.log('\\nüìä === STRESS PARAMETER (0/3 = Healthy, 3/3 = High Stress) ===');\n   650‚Üí    const metric1 = this.calculateArousalScore();\n   651‚Üí    const metric2 = this.calculateRelaxationScore();\n   652‚Üí    const metric3 = this.calculateRegeneration();\n   653‚Üí\n   654‚Üí    // Invert scores: 0->1, 1->0 (so abnormal values add to stress score)\n   655‚Üí    const invertedScore1 = 1 - metric1.score;\n   656‚Üí    const invertedScore2 = 1 - metric2.score;\n   657‚Üí    const invertedScore3 = 1 - metric3.score;\n   658‚Üí\n   659‚Üí    console.log(`\\n  üîÑ INVERTING SCORES (abnormal values = stress):`);\n   660‚Üí    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (stress): ${invertedScore1}`);\n   661‚Üí    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (stress): ${invertedScore2}`);\n   662‚Üí    console.log(`     Regeneration normal score: ${metric3.score} ‚Üí Inverted (stress): ${invertedScore3}`);\n   663‚Üí\n   664‚Üí    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n   665‚Üí    console.log(`\\n  üìä STRESS TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n   666‚Üí\n   667‚Üí    return {\n   668‚Üí      name: 'Stress',\n   669‚Üí      score: totalScore,\n   670‚Üí      maxScore: 3,\n   671‚Üí      classification: this.classifyScore(totalScore),\n   672‚Üí      metrics: [\n   673‚Üí        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n   674‚Üí        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n   675‚Üí        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }\n   676‚Üí      ]\n   677‚Üí    };\n   678‚Üí  }\n   679‚Üí\n   680‚Üí  /**\n   681‚Üí   * 3. Focus & Attention\n   682‚Üí   * - Focus Theta\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"5153188a-263d-4d14-92d5-8fe281a67137","timestamp":"2025-12-18T12:34:29.669Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","content":"  calculateStress() {\n    console.log('\\nüìä === STRESS PARAMETER (0/3 = Healthy, 3/3 = High Stress) ===');\n    const metric1 = this.calculateArousalScore();\n    const metric2 = this.calculateRelaxationScore();\n    const metric3 = this.calculateRegeneration();\n\n    // Invert scores: 0->1, 1->0 (so abnormal values add to stress score)\n    const invertedScore1 = 1 - metric1.score;\n    const invertedScore2 = 1 - metric2.score;\n    const invertedScore3 = 1 - metric3.score;\n\n    console.log(`\\n  üîÑ INVERTING SCORES (abnormal values = stress):`);\n    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (stress): ${invertedScore1}`);\n    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (stress): ${invertedScore2}`);\n    console.log(`     Regeneration normal score: ${metric3.score} ‚Üí Inverted (stress): ${invertedScore3}`);\n\n    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä STRESS TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Stress',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }\n      ]\n    };\n  }\n\n  /**\n   * 3. Focus & Attention\n   * - Focus Theta","numLines":35,"startLine":648,"totalLines":832}}}
{"parentUuid":"5153188a-263d-4d14-92d5-8fe281a67137","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01EE4ybZHx6HbTeW56TqkDcg","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! ‡§Ö‡§¨ ‡§Æ‡•Å‡§ù‡•á ‡§∏‡§Æ‡§ù ‡§Ü ‡§ó‡§Ø‡§æ‡•§ Problem line 673-675 ‡§Æ‡•á‡§Ç ‡§π‡•à:\n\n```javascript\nmetrics: [\n  { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n  { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n  { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }\n]\n```\n\n‡§Ø‡§π‡§æ‡§Ç `invertedScore` use ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à ‡§ú‡•ã display ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ó‡§≤‡§§ ‡§π‡•à‡•§ \n\n**‡§∏‡§π‡•Ä logic ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è:**\n- Overall parameter score ‡§ï‡•á ‡§≤‡§ø‡§è: inverted scores ‡§ï‡§æ sum use ‡§ï‡§∞‡•ã (‡§ú‡•à‡§∏‡§æ ‡§Ö‡§≠‡•Ä ‡§π‡•à)\n- Individual metric display ‡§ï‡•á ‡§≤‡§ø‡§è: original scores use ‡§ï‡§∞‡•ã (`metric1.score`, `metric2.score`, etc.)\n\n‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø:\n- Arousal Score < 1 = normal = `metric1.score = 1` = display ‡§Æ‡•á‡§Ç **1/1 green** ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è\n- ‡§≤‡•á‡§ï‡§ø‡§® stress parameter score ‡§Æ‡•á‡§Ç contribute = `invertedScore1 = 0` (‡§ï‡•ã‡§à stress ‡§®‡§π‡•Ä‡§Ç)\n\n‡§§‡•ã ‡§Æ‡•Å‡§ù‡•á line 673-675 ‡§Æ‡•á‡§Ç `invertedScore` ‡§ï‡•Ä ‡§ú‡§ó‡§π original `metric.score` use ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§","signature":"EoUKCkYIChgCKkBZgLe9u9uheiVPMTXWOJbox/MIuNQD9uAsVh4/zYxFT9UmR3dNXJ077cluNF6gVghUY9eQCziYfh6NRlW7cuVzEgzlVD+iQRR+dBFaLO8aDPrwXITSYqj6LwVI9iIwZvodo8OqG1pz/rBk+BcHrz0oQiyhB5oYY9EySqrxdJIJWOrBrUGVrYN7tV2uG9SbKuwI/x0873JH4MwewfK04R4BSz7nFuyk4yM1Tp0Wt5E+87X3i2ZiOB01J0DD3BT1UeXCUHSO1Biak9oWKzOoomkJH+FqUgNP/vY9rENYoQgcZba8b8YJqSbC2b71heAiR9xcJ5yaMUG+wHH5zxCnferqBGm3OBfCWb5PI2IykMWum+7lRPYJ4BhiOFwwkCIC4PdIj31B7YOxQ6MFCGUqipHK4zmcDVvn5Mz2/CjDxumjEgqYFclYWffle7RXUiMgNXSYxiAz4lNFd02qgH94oZ9WX4i5JmSCkfuohq8TEDlXHmYM347brBwiR2kdeMAtcGqqtOuJzm52Ct0sJ5kViu/iWawzsocw71J9lwUjZfrbYd2YfxTJ1/s8Jj6MxhsYmq4hc95b/uLwM80zmD9KdUvQHlQ0qcH4cLWkHur4iif2HtphylmTphSB6eBURAIBH4WIsMsgTEQJp6//4MIJNS5H9eECQ+6km3398M9K2MCBJQBmoKTOJn6Ow0Qmw3gsYpyUHVZeqlbMN18Ofrq0GhjfmlULLojEAepkx9w5ZSum8HdcV2pj7vZwteWOZF2uSm5F77isG3vQYurlpvA5wuClWQ7lk7qHxh6FeGfLrsufOUThjr6sOxfZRkDWyDstbQ3UzPuh/8oS8CxC/QV2WKRlstLd6Ke1d4D3sryGFEU8FQpgRhjoIvQiUBVg9rULGo2M9wK5+UUSF33uUSrQVBruclpTvrGuNUC3k2AZbl7f1yVqBaBOwIkv2gcpsUixZi5ZbAneqhlW/X2DJrFYOKur2vxmm1Ia6cRuVMUZzePpMMsShK51yFUiar0aYq+rNEjQG73kij2l/3vBoSWUCLnVAIZ6J+mWEPUZGlO7XAar5oAcdxTBObptvMftxUbhZ3VT3Bkyu2dgeygE2GUcWq97Ta5UJr69oCaA0fnXAjfrJ76kz/YjUQl7AL3G4s0sGr235aO2BwGqVwzwY6kO159gLuGtAPMRaPZcUZIKwg2HqH4tj54K0XPztvmfhARsf4Jv5qPO2bPXk2iQ4HPpGTv1ebep1QkCwSLbsRRdfbmg2cYshLQChgm9sIFDroE6vNRClM737/jNTK2aE4fjR6CxGMrTaZ7VBON2k1vVWT5wSTbJtFdazzTCeXCCiR+pRBTgX8sFzze3NIlGycDvkvLF8263hK0A/G3kTiFH5WPV8qvywQCZDQ0hSVGInwasIKcT52FC+Lmsm81Wvtec9ZHKY7w7qn0XbMKFqP1jA+AAr7vM6yDFcOraejYVV5wGc7oZHEXGErZ5QfvenCxYITx82lC2Z8niUS+/CSJXOCJ7gY072ddCP/ttkc14vjO4Gy5AwLoZRpQOza13HPh3BhroVuwluWrhUHXDyicZilJ5gVwgx7SJmvKA8/Hiazcl+lUAMG2FHbG8XFRfznKlI4d/7R2qCMbWMbaCnpH+Q8QkSZKiej4mt/eQ5LuVKrBgSdj/uDhaAqea9CQ8VyUA2ZQ/sPfIlQ0pd3H+jUGlVRgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1463,"cache_read_input_tokens":79579,"cache_creation":{"ephemeral_5m_input_tokens":1463,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAGT4KM9MDMCkR75UVD","type":"assistant","uuid":"499393ba-003e-4c2b-9208-816d256eac81","timestamp":"2025-12-18T12:34:39.057Z"}
{"parentUuid":"499393ba-003e-4c2b-9208-816d256eac81","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01EE4ybZHx6HbTeW56TqkDcg","type":"message","role":"assistant","content":[{"type":"text","text":"‡§Ö‡§¨ ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§ó‡§Ø‡§æ! Problem ‡§Ø‡§π ‡§π‡•à ‡§ï‡§ø **individual metrics ‡§Æ‡•á‡§Ç inverted score ‡§¶‡§ø‡§ñ ‡§∞‡§π‡§æ ‡§π‡•à**, ‡§ú‡§¨‡§ï‡§ø **original score** ‡§¶‡§ø‡§ñ‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§\n\n‡§¶‡•á‡§ñ‡§ø‡§è ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à:\n- `calculateArousalScore()` ‡§∏‡§π‡•Ä score ‡§¶‡•á‡§§‡§æ ‡§π‡•à: value `0.59 < 1` = **score 1/1** (normal)\n- ‡§≤‡•á‡§ï‡§ø‡§® Stress parameter ‡§Æ‡•á‡§Ç ‡§á‡§∏‡•á invert ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à: `invertedScore1 = 1 - 1 = 0`\n- ‡§´‡§ø‡§∞ display ‡§Æ‡•á‡§Ç ‡§Ø‡§π `0/1` ‡§¶‡§ø‡§ñ‡§§‡§æ ‡§π‡•à ‚ùå\n\n**Fix:** Individual metrics ‡§ï‡•ã original score ‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è, inverted ‡§®‡§π‡•Ä‡§Ç‡•§"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1463,"cache_read_input_tokens":79579,"cache_creation":{"ephemeral_5m_input_tokens":1463,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAGT4KM9MDMCkR75UVD","type":"assistant","uuid":"e4ae93c5-a72c-4fb9-abc2-9aaf4e24609b","timestamp":"2025-12-18T12:34:43.682Z"}
{"parentUuid":"e4ae93c5-a72c-4fb9-abc2-9aaf4e24609b","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01EE4ybZHx6HbTeW56TqkDcg","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01HBu3rrNnAeZSA7vR8DHvBx","name":"TodoWrite","input":{"todos":[{"content":"Find where metric scores are being calculated incorrectly","status":"completed","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Stress metrics to show original scores instead of inverted","status":"in_progress","activeForm":"Fixing Stress metric display scores"},{"content":"Fix Burnout & Fatigue metrics similarly","status":"pending","activeForm":"Fixing Burnout metric display scores"},{"content":"Test the corrected calculations","status":"pending","activeForm":"Testing corrected calculations"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1463,"cache_read_input_tokens":79579,"cache_creation":{"ephemeral_5m_input_tokens":1463,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAGT4KM9MDMCkR75UVD","type":"assistant","uuid":"374eef9b-2b95-45b9-9a8c-07132753702a","timestamp":"2025-12-18T12:34:46.887Z"}
{"parentUuid":"374eef9b-2b95-45b9-9a8c-07132753702a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01EE4ybZHx6HbTeW56TqkDcg","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01E91d8nE8FkkaQHqybaDBWP","name":"Edit","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","old_string":"    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä STRESS TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Stress',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }\n      ]\n    };","new_string":"    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä STRESS TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Stress',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        // Display original scores (1 = normal, 0 = abnormal) for individual metrics\n        // But use inverted scores for overall parameter calculation\n        { name: 'Arousal Score', ...metric1, score: metric1.score },\n        { name: 'Relaxation Score', ...metric2, score: metric2.score },\n        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: metric3.score }\n      ]\n    };"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1463,"cache_read_input_tokens":79579,"cache_creation":{"ephemeral_5m_input_tokens":1463,"ephemeral_1h_input_tokens":0},"output_tokens":1246,"service_tier":"standard"}},"requestId":"req_011CWEAGT4KM9MDMCkR75UVD","type":"assistant","uuid":"cf8f5a59-1fc5-4dcd-a59c-6c872ab44c23","timestamp":"2025-12-18T12:34:51.389Z"}
{"parentUuid":"cf8f5a59-1fc5-4dcd-a59c-6c872ab44c23","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01HBu3rrNnAeZSA7vR8DHvBx","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"b5374ab1-815f-4760-a7bd-774ec644b995","timestamp":"2025-12-18T12:34:51.527Z","toolUseResult":{"oldTodos":[{"content":"Find where metric scores are being calculated incorrectly","status":"in_progress","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Arousal Score calculation logic","status":"pending","activeForm":"Fixing Arousal Score calculation"},{"content":"Fix other stress metric calculations if needed","status":"pending","activeForm":"Fixing other metric calculations"},{"content":"Test the corrected calculations","status":"pending","activeForm":"Testing corrected calculations"}],"newTodos":[{"content":"Find where metric scores are being calculated incorrectly","status":"completed","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Stress metrics to show original scores instead of inverted","status":"in_progress","activeForm":"Fixing Stress metric display scores"},{"content":"Fix Burnout & Fatigue metrics similarly","status":"pending","activeForm":"Fixing Burnout metric display scores"},{"content":"Test the corrected calculations","status":"pending","activeForm":"Testing corrected calculations"}]}}
{"type":"file-history-snapshot","messageId":"cf8f5a59-1fc5-4dcd-a59c-6c872ab44c23","snapshot":{"messageId":"83a192a4-46bd-44b6-ab23-348f7e2e190a","trackedFileBackups":{"src\\components\\admin\\AlgorithmDataProcessor.jsx":{"backupFileName":"9777bd81bdc80e4c@v4","version":4,"backupTime":"2025-12-18T12:29:47.566Z"},"server\\services\\algorithmCalculator.js":{"backupFileName":"c0572ad555593f90@v1","version":1,"backupTime":"2025-12-18T12:34:54.858Z"}},"timestamp":"2025-12-18T12:33:23.724Z"},"isSnapshotUpdate":true}
{"parentUuid":"b5374ab1-815f-4760-a7bd-774ec644b995","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01E91d8nE8FkkaQHqybaDBWP","type":"tool_result","content":"The file D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n   660‚Üí    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (stress): ${invertedScore1}`);\n   661‚Üí    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (stress): ${invertedScore2}`);\n   662‚Üí    console.log(`     Regeneration normal score: ${metric3.score} ‚Üí Inverted (stress): ${invertedScore3}`);\n   663‚Üí\n   664‚Üí    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n   665‚Üí    console.log(`\\n  üìä STRESS TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n   666‚Üí\n   667‚Üí    return {\n   668‚Üí      name: 'Stress',\n   669‚Üí      score: totalScore,\n   670‚Üí      maxScore: 3,\n   671‚Üí      classification: this.classifyScore(totalScore),\n   672‚Üí      metrics: [\n   673‚Üí        // Display original scores (1 = normal, 0 = abnormal) for individual metrics\n   674‚Üí        // But use inverted scores for overall parameter calculation\n   675‚Üí        { name: 'Arousal Score', ...metric1, score: metric1.score },\n   676‚Üí        { name: 'Relaxation Score', ...metric2, score: metric2.score },\n   677‚Üí        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: metric3.score }\n   678‚Üí      ]\n   679‚Üí    };\n   680‚Üí  }\n   681‚Üí\n   682‚Üí  /**\n   683‚Üí   * 3. Focus & Attention"}]},"uuid":"c008ecbf-51c9-4abc-b21f-b4bff7772435","timestamp":"2025-12-18T12:34:54.907Z","toolUseResult":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","oldString":"    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä STRESS TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Stress',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }\n      ]\n    };","newString":"    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä STRESS TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Stress',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        // Display original scores (1 = normal, 0 = abnormal) for individual metrics\n        // But use inverted scores for overall parameter calculation\n        { name: 'Arousal Score', ...metric1, score: metric1.score },\n        { name: 'Relaxation Score', ...metric2, score: metric2.score },\n        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: metric3.score }\n      ]\n    };","originalFile":"/**\n * QEEG Algorithm Calculator\n * Based on Rhea's Report - Calculates 7 brain health parameters\n * Each parameter has 3 sub-metrics, scored 0-3, classified as Low/Medium/High\n */\n\nclass AlgorithmCalculator {\n  constructor(qeegData) {\n    this.data = qeegData;\n    this.results = {\n      parameters: [],\n      rawCalculations: {},\n      overallScore: 0\n    };\n  }\n\n  /**\n   * Main calculation method - calculates all 7 parameters\n   */\n  calculate() {\n    console.log('\\nüßÆ ========== STARTING ALGORITHM CALCULATIONS ==========');\n    console.log('üìä Input Data Structure:', JSON.stringify(this.data, null, 2));\n\n    console.log('\\nüêõ === ENHANCED DEBUG MODE ACTIVATED ===');\n    console.log('üìã This debug output will show:');\n    console.log('   1. Every raw value extracted from QEEG data');\n    console.log('   2. All mathematical formulas and calculations');\n    console.log('   3. Threshold comparisons and scoring logic');\n    console.log('   4. Final score aggregation for each parameter');\n    console.log('===========================================\\n');\n\n    const parameters = [\n      this.calculateCognition(),\n      this.calculateStress(),\n      this.calculateFocusAttention(),\n      this.calculateBurnoutFatigue(),\n      this.calculateEmotionalRegulation(),\n      this.calculateLearning(),\n      this.calculateCreativity()\n    ];\n\n    console.log('\\n‚úÖ Final 7 Parameter Scores Calculated:');\n    parameters.forEach((p, i) => {\n      console.log(`${i + 1}. ${p.name}: ${p.score}/${p.maxScore} (${p.classification}) ${this.getEmoji(p.classification)}`);\n      p.metrics.forEach(m => {\n        console.log(`   - ${m.name}: ${m.score} point (value: ${JSON.stringify(m.value)})`);\n      });\n    });\n\n    // === ENHANCED DEBUG: Show complete calculation summary ===\n    console.log('\\nüêõ === DEBUG: COMPLETE CALCULATION SUMMARY ===');\n    console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');\n    console.log('‚îÇ Parameter                   ‚îÇ Score ‚îÇ Classification‚îÇ');\n    console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§');\n    parameters.forEach(p => {\n      const padding = ' '.repeat(28 - p.name.length);\n      console.log(`‚îÇ ${p.name}${padding}‚îÇ  ${p.score}/3  ‚îÇ ${p.classification.padEnd(12)} ‚îÇ`);\n    });\n    console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò');\n    console.log(`\\nüìä OVERALL BRAIN HEALTH SCORE: ${parameters.reduce((sum, p) => sum + p.score, 0)}/21`);\n    console.log('=== END DEBUG: CALCULATION SUMMARY ===\\n');\n\n    console.log('========== CALCULATIONS COMPLETE ==========\\n');\n\n    this.results.parameters = parameters;\n    this.results.overallScore = parameters.reduce((sum, p) => sum + p.score, 0);\n\n    return this.results;\n  }\n\n  getEmoji(classification) {\n    if (classification === 'Low') return 'üî¥';\n    if (classification === 'Medium') return 'üü°';\n    return 'üü¢';\n  }\n\n  // ==================== HELPER METHODS ====================\n\n  /**\n   * Get value from QEEG data table\n   * @param {string} condition - 'EC' (Eyes Closed) or 'EO' (Eyes Open)\n   * @param {string} powerType - 'absolute' or 'relative'\n   * @param {string} channel - e.g., 'Fz', 'Cz', 'Pz'\n   * @param {string} band - e.g., 'Theta', 'Alpha', 'Beta', 'HiBeta', 'Delta'\n   */\n  getValue(condition, powerType, channel, band) {\n    try {\n      return this.data[condition][powerType][channel][band];\n    } catch (error) {\n      console.error(`Error getting value: ${condition}.${powerType}.${channel}.${band}`);\n      return null;\n    }\n  }\n\n  /**\n   * Score a metric based on threshold\n   * Returns 1 if condition is met (HEALTHY/NORMAL state by default)\n   * Use 'invert: true' for stress/problem indicators\n   */\n  scoreMetric(value, threshold, comparison = 'less', invert = false) {\n    if (value === null || value === undefined) return 0;\n\n    let result = 0;\n\n    if (comparison === 'less') {\n      result = value < threshold ? 1 : 0;\n    } else if (comparison === 'more') {\n      result = value > threshold ? 1 : 0;\n    } else if (comparison === 'equal') {\n      result = value === threshold ? 1 : 0;\n    }\n\n    // Invert for stress/problem indicators (where 1 point = problem detected)\n    return invert ? (1 - result) : result;\n  }\n\n  /**\n   * Classify score to bucket (Low/Medium/High)\n   */\n  classifyScore(score) {\n    if (score <= 1) return 'Low';\n    if (score === 2) return 'Medium';\n    return 'High';\n  }\n\n  // ==================== INDIVIDUAL METRICS ====================\n\n  /**\n   * Focus Score Stimulation Control (Theta:Beta Ratio) - ABSOLUTE POWER - For Cognition parameter\n   * Eyes Open, Absolute Power, Fz & Cz average\n   * < 1.5 is normal (as per specification)\n   */\n  calculateFocusScoreAbsolute() {\n    console.log('\\n  üîç === Calculating Focus Score Stimulation Control (Theta:Beta) - ABSOLUTE POWER ===');\n    console.log('  üìã Purpose: Measures mental focus by comparing slow (Theta) vs fast (Beta) brain waves');\n    console.log('  üìä Data Source: Eyes Open (EO), ABSOLUTE Power (ŒºV¬≤), Channels Fz & Cz');\n    console.log('  üéØ Expected: Ratio < 1.5 indicates good focus (more Beta than Theta)\\n');\n\n    const fzTheta = this.getValue('EO', 'absolute', 'Fz', 'Theta');\n    const fzBeta = this.getValue('EO', 'absolute', 'Fz', 'Beta');\n    const czTheta = this.getValue('EO', 'absolute', 'Cz', 'Theta');\n    const czBeta = this.getValue('EO', 'absolute', 'Cz', 'Beta');\n\n    console.log('  üêõ DEBUG - Step 1: Extract Raw Values from QEEG Data');\n    console.log('     ‚îú‚îÄ EO.absolute.Fz.Theta =', fzTheta, 'ŒºV¬≤');\n    console.log('     ‚îú‚îÄ EO.absolute.Fz.Beta  =', fzBeta, 'ŒºV¬≤');\n    console.log('     ‚îú‚îÄ EO.absolute.Cz.Theta =', czTheta, 'ŒºV¬≤');\n    console.log('     ‚îî‚îÄ EO.absolute.Cz.Beta  =', czBeta, 'ŒºV¬≤');\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    // Also check for zero denominators to prevent Infinity/NaN\n    if (fzTheta == null || fzBeta == null || czTheta == null || czBeta == null || fzBeta === 0 || czBeta === 0) {\n      console.log('     ‚ùå Missing or zero Beta values (division by zero prevented), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    console.log('\\n  üêõ DEBUG - Step 2: Calculate Theta:Beta Ratios');\n    const fzRatio = fzTheta / fzBeta;\n    const czRatio = czTheta / czBeta;\n    console.log('     ‚îú‚îÄ Fz Ratio = Theta/Beta = ' + fzTheta + ' / ' + fzBeta + ' = ' + fzRatio.toFixed(3));\n    console.log('     ‚îî‚îÄ Cz Ratio = Theta/Beta = ' + czTheta + ' / ' + czBeta + ' = ' + czRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 3: Calculate Average Ratio');\n    const avgRatio = (fzRatio + czRatio) / 2;\n    console.log('     ‚îî‚îÄ Average = (Fz + Cz) / 2 = (' + fzRatio.toFixed(3) + ' + ' + czRatio.toFixed(3) + ') / 2 = ' + avgRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 4: Score Against Threshold');\n    console.log('     ‚îú‚îÄ Threshold: < 1.5 = Normal (good focus, per spec)');\n    console.log('     ‚îú‚îÄ Actual Value: ' + avgRatio.toFixed(3));\n    console.log('     ‚îú‚îÄ Comparison: ' + avgRatio.toFixed(3) + ' < 1.5 ? ' + (avgRatio < 1.5));\n    const score = this.scoreMetric(avgRatio, 1.5, 'less');\n    console.log('     ‚îî‚îÄ ‚úÖ SCORE: ' + score + '/1 ' + (score === 1 ? '(PASS - Good focus)' : '(FAIL - Poor focus)'));\n\n    return {\n      value: avgRatio,\n      score: score,\n      description: `Theta:Beta Ratio = ${avgRatio.toFixed(2)} (< 1.5 is normal per spec)`,\n      details: { fzRatio: fzRatio.toFixed(2), czRatio: czRatio.toFixed(2) }\n    };\n  }\n\n  /**\n   * Focus Score (Theta:Beta Ratio) - RELATIVE POWER - For Learning, Creativity, Focus&Attention parameters\n   * Eyes Open, Relative Power, Fz & Cz average\n   * < 1.5 is normal (as per specification)\n   */\n  calculateFocusScoreRelative() {\n    console.log('\\n  üîç === Calculating Focus Score (Theta:Beta) - RELATIVE POWER ===');\n    console.log('  üìã Purpose: Measures mental focus by comparing slow (Theta) vs fast (Beta) brain waves');\n    console.log('  üìä Data Source: Eyes Open (EO), RELATIVE Power (%), Channels Fz & Cz');\n    console.log('  üéØ Expected: Ratio < 1.5 indicates good focus (more Beta than Theta)\\n');\n\n    const fzTheta = this.getValue('EO', 'relative', 'Fz', 'Theta');\n    const fzBeta = this.getValue('EO', 'relative', 'Fz', 'Beta');\n    const czTheta = this.getValue('EO', 'relative', 'Cz', 'Theta');\n    const czBeta = this.getValue('EO', 'relative', 'Cz', 'Beta');\n\n    console.log('  üêõ DEBUG - Step 1: Extract Raw Values from QEEG Data');\n    console.log('     ‚îú‚îÄ EO.relative.Fz.Theta =', fzTheta, '%');\n    console.log('     ‚îú‚îÄ EO.relative.Fz.Beta  =', fzBeta, '%');\n    console.log('     ‚îú‚îÄ EO.relative.Cz.Theta =', czTheta, '%');\n    console.log('     ‚îî‚îÄ EO.relative.Cz.Beta  =', czBeta, '%');\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    // Also check for zero denominators to prevent Infinity/NaN\n    if (fzTheta == null || fzBeta == null || czTheta == null || czBeta == null || fzBeta === 0 || czBeta === 0) {\n      console.log('     ‚ùå Missing or zero Beta values (division by zero prevented), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    console.log('\\n  üêõ DEBUG - Step 2: Calculate Theta:Beta Ratios');\n    const fzRatio = fzTheta / fzBeta;\n    const czRatio = czTheta / czBeta;\n    console.log('     ‚îú‚îÄ Fz Ratio = Theta/Beta = ' + fzTheta + ' / ' + fzBeta + ' = ' + fzRatio.toFixed(3));\n    console.log('     ‚îî‚îÄ Cz Ratio = Theta/Beta = ' + czTheta + ' / ' + czBeta + ' = ' + czRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 3: Calculate Average Ratio');\n    const avgRatio = (fzRatio + czRatio) / 2;\n    console.log('     ‚îî‚îÄ Average = (Fz + Cz) / 2 = (' + fzRatio.toFixed(3) + ' + ' + czRatio.toFixed(3) + ') / 2 = ' + avgRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 4: Score Against Threshold');\n    console.log('     ‚îú‚îÄ Threshold: < 1.5 = Normal (good focus, per spec)');\n    console.log('     ‚îú‚îÄ Actual Value: ' + avgRatio.toFixed(3));\n    console.log('     ‚îú‚îÄ Comparison: ' + avgRatio.toFixed(3) + ' < 1.5 ? ' + (avgRatio < 1.5));\n    const score = this.scoreMetric(avgRatio, 1.5, 'less');\n    console.log('     ‚îî‚îÄ ‚úÖ SCORE: ' + score + '/1 ' + (score === 1 ? '(PASS - Good focus)' : '(FAIL - Poor focus)'));\n\n    return {\n      value: avgRatio,\n      score: score,\n      description: `Theta:Beta Ratio = ${avgRatio.toFixed(2)} (< 1.5 is normal per spec)`,\n      details: { fzRatio: fzRatio.toFixed(2), czRatio: czRatio.toFixed(2) }\n    };\n  }\n\n  /**\n   * Alpha Peak - Used in multiple parameters\n   * Eyes Closed, Special (highest frequency at Pz or below)\n   * > 9 Hz is normal\n   * As per specification: \"Alpha peak - Eyes Closed Special PZ or below - the highest score will be taken\"\n   */\n  calculateAlphaPeak() {\n    console.log('\\n  üîç === Calculating Alpha Peak ===');\n    console.log('  üìã Purpose: Find highest alpha peak frequency at Pz or below (posterior electrodes)');\n    console.log('  üìä Data Source: Eyes Closed (EC), Special, Channels: Pz, P3, P4, O1, O2, Oz');\n    console.log('  üéØ Expected: Highest value > 9 Hz indicates good alpha peak frequency\\n');\n\n    // Get alpha peak values from Pz and below (posterior electrodes)\n    const posteriorChannels = ['Pz', 'P3', 'P4', 'O1', 'O2', 'Oz'];\n    const alphaPeakValues = [];\n\n    console.log('  üêõ DEBUG - Step 1: Extract Alpha Peak Values from Posterior Channels');\n    posteriorChannels.forEach(channel => {\n      const value = this.data.EC?.special?.[channel];\n      if (value !== null && value !== undefined && value > 0) {\n        alphaPeakValues.push({ channel, value });\n        console.log(`     ‚îú‚îÄ ${channel}: ${value.toFixed(2)} Hz`);\n      } else {\n        console.log(`     ‚îú‚îÄ ${channel}: N/A`);\n      }\n    });\n\n    // If no values found, return 0 score\n    if (alphaPeakValues.length === 0) {\n      console.log('     ‚ùå No data available from posterior channels, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    console.log('\\n  üêõ DEBUG - Step 2: Find Highest Value');\n    // Find the maximum value\n    const maxPeak = alphaPeakValues.reduce((max, current) =>\n      current.value > max.value ? current : max\n    );\n\n    console.log(`     ‚îî‚îÄ Highest Alpha Peak: ${maxPeak.value.toFixed(2)} Hz (from ${maxPeak.channel})`);\n\n    console.log('\\n  üêõ DEBUG - Step 3: Score Against Threshold');\n    console.log(`     ‚îú‚îÄ Threshold: > 9 Hz = normal`);\n    console.log(`     ‚îú‚îÄ Actual Value: ${maxPeak.value.toFixed(2)} Hz`);\n    console.log(`     ‚îú‚îÄ Comparison: ${maxPeak.value.toFixed(2)} > 9 ? ${maxPeak.value > 9}`);\n\n    const score = this.scoreMetric(maxPeak.value, 9, 'more');\n    console.log(`     ‚îî‚îÄ ‚úÖ SCORE: ${score}/1 ${score === 1 ? '(PASS - Good alpha peak)' : '(FAIL - Low alpha peak)'}`);\n\n    return {\n      value: maxPeak.value,\n      score: score,\n      description: `Alpha Peak = ${maxPeak.value.toFixed(1)} Hz at ${maxPeak.channel} (> 9 is normal)`,\n      details: {\n        channel: maxPeak.channel,\n        allValues: alphaPeakValues.map(p => `${p.channel}:${p.value.toFixed(1)}Hz`).join(', ')\n      }\n    };\n  }\n\n  /**\n   * Alpha:Theta Balance - Used in multiple parameters\n   * Eyes Closed, Absolute Power, Fz, Cz, Pz\n   * Order Fz > Cz > Pz is normal (frontal dominance)\n   * As per specification: Fz > Cz > Pz is the correct order\n   */\n  calculateAlphaThetaBalance() {\n    console.log('\\n  üîç === Calculating Alpha:Theta Balance ===');\n    const fzAlpha = this.getValue('EC', 'absolute', 'Fz', 'Alpha');\n    const fzTheta = this.getValue('EC', 'absolute', 'Fz', 'Theta');\n    const czAlpha = this.getValue('EC', 'absolute', 'Cz', 'Alpha');\n    const czTheta = this.getValue('EC', 'absolute', 'Cz', 'Theta');\n    const pzAlpha = this.getValue('EC', 'absolute', 'Pz', 'Alpha');\n    const pzTheta = this.getValue('EC', 'absolute', 'Pz', 'Theta');\n\n    console.log('     Raw Values - Fz:', { Alpha: fzAlpha, Theta: fzTheta });\n    console.log('     Raw Values - Cz:', { Alpha: czAlpha, Theta: czTheta });\n    console.log('     Raw Values - Pz:', { Alpha: pzAlpha, Theta: pzTheta });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    // Also check for zero denominators to prevent Infinity/NaN\n    if (fzAlpha == null || fzTheta == null || czAlpha == null || czTheta == null || pzAlpha == null || pzTheta == null ||\n        fzTheta === 0 || czTheta === 0 || pzTheta === 0) {\n      console.log('     ‚ùå Missing or zero Theta values (division by zero prevented), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const fzRatio = fzAlpha / fzTheta;\n    const czRatio = czAlpha / czTheta;\n    const pzRatio = pzAlpha / pzTheta;\n\n    console.log(`     Ratios - Fz: ${fzRatio.toFixed(2)}, Cz: ${czRatio.toFixed(2)}, Pz: ${pzRatio.toFixed(2)}`);\n    console.log(`     Expected Order: Fz > Cz > Pz (frontal dominant per spec)`);\n    console.log(`     Actual Order: Fz(${fzRatio.toFixed(2)}) > Cz(${czRatio.toFixed(2)}) > Pz(${pzRatio.toFixed(2)})`);\n\n    // Normal pattern: Fz > Cz > Pz (as per specification)\n    const isNormalOrder = fzRatio > czRatio && czRatio > pzRatio;\n\n    console.log(`     Check: ${fzRatio.toFixed(2)} > ${czRatio.toFixed(2)} = ${fzRatio > czRatio}`);\n    console.log(`     Check: ${czRatio.toFixed(2)} > ${pzRatio.toFixed(2)} = ${czRatio > pzRatio}`);\n    console.log(`     ‚úÖ SCORE: ${isNormalOrder ? 1 : 0}/1`);\n\n    return {\n      value: { fz: fzRatio.toFixed(2), cz: czRatio.toFixed(2), pz: pzRatio.toFixed(2) },\n      score: isNormalOrder ? 1 : 0,\n      description: `Alpha:Theta Order = ${isNormalOrder ? 'Fz > Cz > Pz (Normal per spec)' : 'Abnormal order'}`,\n      details: { fzRatio, czRatio, pzRatio, order: isNormalOrder }\n    };\n  }\n\n  /**\n   * Arousal Score (HiBeta:Beta Ratio) - Used in multiple parameters\n   * Eyes Open, Absolute Power, Fz & Cz average\n   * < 1 is normal\n   */\n  calculateArousalScore() {\n    console.log('\\n  üîç === Calculating Arousal Score (HiBeta:Beta) ===');\n    const fzBeta = this.getValue('EO', 'absolute', 'Fz', 'Beta');\n    const fzHiBeta = this.getValue('EO', 'absolute', 'Fz', 'HiBeta');\n    const czBeta = this.getValue('EO', 'absolute', 'Cz', 'Beta');\n    const czHiBeta = this.getValue('EO', 'absolute', 'Cz', 'HiBeta');\n\n    console.log('     Raw Values - Fz:', { Beta: fzBeta, HiBeta: fzHiBeta });\n    console.log('     Raw Values - Cz:', { Beta: czBeta, HiBeta: czHiBeta });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    // Also check for zero denominators to prevent Infinity/NaN\n    if (fzBeta == null || fzHiBeta == null || czBeta == null || czHiBeta == null || fzBeta === 0 || czBeta === 0) {\n      console.log('     ‚ùå Missing or zero Beta values (division by zero prevented), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const fzRatio = fzHiBeta / fzBeta;\n    const czRatio = czHiBeta / czBeta;\n    const avgRatio = (fzRatio + czRatio) / 2;\n    const score = this.scoreMetric(avgRatio, 1, 'less');\n\n    console.log(`     Fz ratio (HiBeta/Beta): ${fzRatio.toFixed(3)}`);\n    console.log(`     Cz ratio (HiBeta/Beta): ${czRatio.toFixed(3)}`);\n    console.log(`     Average: ${avgRatio.toFixed(3)}`);\n    console.log(`     Threshold: < 1 = normal (low arousal)`);\n    console.log(`     Result: ${avgRatio.toFixed(3)} < 1 = ${avgRatio < 1}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: avgRatio,\n      score: score,\n      description: `Arousal Score = ${avgRatio.toFixed(2)} (< 1 is normal)`,\n      details: { fzRatio: fzRatio.toFixed(2), czRatio: czRatio.toFixed(2) }\n    };\n  }\n\n  /**\n   * Relaxation Score - Used in multiple parameters\n   * Eyes Closed, ABSOLUTE Power, Pz, Alpha/Beta\n   * > 1 is healthy (as per specification)\n   */\n  calculateRelaxationScore() {\n    console.log('\\n  üîç === Calculating Relaxation Score ===');\n    console.log('  üìã Purpose: Measures ability to relax by comparing Alpha vs Beta waves');\n    console.log('  üìä Data Source: Eyes Closed (EC), ABSOLUTE Power (ŒºV¬≤), Pz channel (posterior)');\n    console.log('  üéØ Expected: Alpha/Beta > 1 indicates good relaxation capacity (per spec)\\n');\n\n    const pzAlpha = this.getValue('EC', 'absolute', 'Pz', 'Alpha');\n    const pzBeta = this.getValue('EC', 'absolute', 'Pz', 'Beta');\n\n    console.log('  üêõ DEBUG - Step 1: Extract Raw Values from QEEG Data');\n    console.log('     ‚îú‚îÄ EC.absolute.Pz.Alpha =', pzAlpha, 'ŒºV¬≤');\n    console.log('     ‚îî‚îÄ EC.absolute.Pz.Beta  =', pzBeta, 'ŒºV¬≤');\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    if (pzAlpha == null || pzBeta == null || pzBeta === 0) {\n      console.log('     ‚ö†Ô∏è Missing or zero Beta value, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    console.log('\\n  üêõ DEBUG - Step 2: Calculate Alpha:Beta Ratio');\n    const ratio = pzAlpha / pzBeta;\n    console.log('     ‚îî‚îÄ Ratio = Alpha/Beta = ' + pzAlpha + ' / ' + pzBeta + ' = ' + ratio.toFixed(2));\n\n    console.log('\\n  üêõ DEBUG - Step 3: Score Against Threshold');\n    console.log('     ‚îú‚îÄ Threshold: > 1.0 (per specification)');\n    console.log('     ‚îú‚îÄ Actual Value: ' + ratio.toFixed(2));\n    console.log('     ‚îú‚îÄ Comparison: ' + ratio.toFixed(2) + ' > 1.0 ? ' + (ratio > 1.0));\n\n    // As per specification: > 1 is healthy\n    const score = ratio > 1.0 ? 1 : 0;\n    console.log('     ‚îî‚îÄ ‚úÖ SCORE: ' + score + '/1 ' + (score === 1 ? '(PASS - Good relaxation)' : '(FAIL - Poor relaxation)'));\n\n    console.log('\\n  üí° Interpretation:');\n    if (ratio > 1) {\n      console.log('     ‚Üí High Alpha relative to Beta = Good relaxation capacity');\n      console.log('     ‚Üí Brain can easily shift into relaxed, calm state');\n    } else {\n      console.log('     ‚Üí Low Alpha relative to Beta = Difficulty relaxing');\n      console.log('     ‚Üí May indicate stress or hyperarousal');\n    }\n\n    return {\n      value: ratio,\n      score: score,\n      description: `Relaxation Score = ${ratio.toFixed(2)} (> 1 is healthy per spec)`\n    };\n  }\n\n  /**\n   * Regeneration (Alpha Modulation) - Used in multiple parameters\n   * EO & EC, Relative Power, Pz, (EC-EO)/EC * 100\n   * > 30% is healthy\n   */\n  calculateRegeneration() {\n    console.log('\\n  üîç === Calculating Regeneration (Alpha Modulation) ===');\n    console.log('     Using: EC vs EO relative power at Pz');\n    const ecAlpha = this.getValue('EC', 'relative', 'Pz', 'Alpha');\n    const eoAlpha = this.getValue('EO', 'relative', 'Pz', 'Alpha');\n\n    console.log('     Raw Values:', { 'EC Alpha': ecAlpha, 'EO Alpha': eoAlpha });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    if (ecAlpha == null || eoAlpha == null || ecAlpha === 0) {\n      console.log('     ‚ùå Missing or zero EC Alpha value, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const modulation = ((ecAlpha - eoAlpha) / ecAlpha) * 100;\n    const score = this.scoreMetric(modulation, 30, 'more');\n\n    console.log(`     Formula: ((EC - EO) / EC) √ó 100`);\n    console.log(`     Calculation: ((${ecAlpha} - ${eoAlpha}) / ${ecAlpha}) √ó 100`);\n    console.log(`     Modulation: ${modulation.toFixed(1)}%`);\n    console.log(`     Threshold: > 30% = healthy (good alpha reactivity)`);\n    console.log(`     Result: ${modulation.toFixed(1)}% > 30% = ${modulation > 30}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: modulation,\n      score: score,\n      description: `Alpha Modulation = ${modulation.toFixed(1)}% (> 30% is healthy)`\n    };\n  }\n\n  /**\n   * Focus Theta (Relative Power) - Used in Focus & Attention\n   * Eyes Open, Relative Power, Fz & Cz average\n   * < 20% is normal\n   */\n  calculateFocusTheta() {\n    console.log('\\n  üîç === Calculating Focus Theta ===');\n    console.log('     Using: EO relative power at Fz and Cz');\n    const fzTheta = this.getValue('EO', 'relative', 'Fz', 'Theta');\n    const czTheta = this.getValue('EO', 'relative', 'Cz', 'Theta');\n\n    console.log('     Raw Values:', { 'Fz Theta': fzTheta, 'Cz Theta': czTheta });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    if (fzTheta == null || czTheta == null) {\n      console.log('     ‚ùå Missing values, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const avgTheta = (fzTheta + czTheta) / 2;\n    const score = this.scoreMetric(avgTheta, 20, 'less');\n\n    console.log(`     Average: (${fzTheta} + ${czTheta}) / 2 = ${avgTheta.toFixed(1)}%`);\n    console.log(`     Threshold: < 20% = normal (low frontal theta)`);\n    console.log(`     Result: ${avgTheta.toFixed(1)}% < 20% = ${avgTheta < 20}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: avgTheta,\n      score: score,\n      description: `Focus Theta = ${avgTheta.toFixed(1)}% (< 20% is normal)`\n    };\n  }\n\n  /**\n   * Excessive Delta - Used in Burnout & Fatigue\n   * Eyes Open, Relative Power, avg of Fz, C3, Cz, C4, P3, Pz, P4\n   * < 70% is normal\n   */\n  calculateExcessiveDelta() {\n    console.log('\\n  üîç === Calculating Excessive Delta ===');\n    console.log('     Using: EO relative power, averaging 7 channels');\n    const channels = ['Fz', 'C3', 'Cz', 'C4', 'P3', 'Pz', 'P4'];\n    let sum = 0;\n    let count = 0;\n    const channelValues = {};\n\n    for (const channel of channels) {\n      const delta = this.getValue('EO', 'relative', channel, 'Delta');\n      channelValues[channel] = delta !== null ? delta : 'N/A';\n      if (delta !== null) {\n        sum += delta;\n        count++;\n      }\n    }\n\n    console.log('     Channel Values:', channelValues);\n    console.log(`     Valid channels: ${count}/7`);\n\n    if (count === 0) {\n      console.log('     ‚ùå No valid channel data, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const avgDelta = sum / count;\n    const score = this.scoreMetric(avgDelta, 70, 'less');\n\n    console.log(`     Sum: ${sum.toFixed(2)}, Count: ${count}`);\n    console.log(`     Average Delta: ${avgDelta.toFixed(1)}%`);\n    console.log(`     Threshold: < 70% = normal (low delta during wakefulness)`);\n    console.log(`     Result: ${avgDelta.toFixed(1)}% < 70% = ${avgDelta < 70}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: avgDelta,\n      score: score,\n      description: `Excessive Delta = ${avgDelta.toFixed(1)}% (< 70% is normal)`\n    };\n  }\n\n  /**\n   * Alpha Asymmetry (Frontal) - Used in Emotional Regulation\n   * Eyes Closed, Absolute Power, F3 & F4\n   * Formula: (AlphaF4 + AlphaF3) / (AlphaF4 - AlphaF3)\n   * < 1 is normal\n   */\n  calculateAlphaAsymmetry() {\n    console.log('\\n  üîç === Calculating Alpha Asymmetry (Frontal) ===');\n    console.log('     Using: EC absolute power at F3 and F4');\n    console.log('     Formula: (AlphaF4 + AlphaF3) / (AlphaF4 - AlphaF3)');\n    const f3Alpha = this.getValue('EC', 'absolute', 'F3', 'Alpha');\n    const f4Alpha = this.getValue('EC', 'absolute', 'F4', 'Alpha');\n\n    console.log('     Raw Values:', { 'F3 Alpha': f3Alpha, 'F4 Alpha': f4Alpha });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    if (f3Alpha == null || f4Alpha == null) {\n      console.log('     ‚ùå Missing values, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const denominator = f4Alpha - f3Alpha;\n\n    // Prevent division by zero\n    if (denominator === 0) {\n      console.log('     ‚ùå Denominator is zero (F4 - F3 = 0), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const asymmetry = (f4Alpha + f3Alpha) / denominator;\n    const score = this.scoreMetric(asymmetry, 1, 'less');\n\n    console.log(`     Numerator: F4 + F3 = ${f4Alpha} + ${f3Alpha} = ${(f4Alpha + f3Alpha).toFixed(2)}`);\n    console.log(`     Denominator: F4 - F3 = ${f4Alpha} - ${f3Alpha} = ${denominator.toFixed(2)}`);\n    console.log(`     Asymmetry: (F4 + F3) / (F4 - F3) = ${asymmetry.toFixed(3)}`);\n    console.log(`     Threshold: < 1 = normal (left frontal dominance, positive affect)`);\n    console.log(`     Result: ${asymmetry.toFixed(3)} < 1 = ${asymmetry < 1}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: asymmetry,\n      score: score,\n      description: `Alpha Asymmetry = ${asymmetry.toFixed(2)} (< 1 is normal)`\n    };\n  }\n\n  // ==================== 7 PARAMETER CALCULATIONS ====================\n\n  /**\n   * 1. Cognition\n   * - Focus Score Stimulation Control (Theta:Beta Ratio)\n   * - Alpha Peak\n   * - Alpha:Theta Balance\n   */\n  calculateCognition() {\n    console.log('\\nüìä ==================== COGNITION PARAMETER ====================');\n    console.log('üìã Input Data Verification:');\n    console.log('   EO.absolute.Fz:', this.data.EO?.absolute?.Fz);\n    console.log('   EO.absolute.Cz:', this.data.EO?.absolute?.Cz);\n    console.log('   EC.absolute.Fz:', this.data.EC?.absolute?.Fz);\n    console.log('   EC.absolute.Cz:', this.data.EC?.absolute?.Cz);\n    console.log('   EC.absolute.Pz:', this.data.EC?.absolute?.Pz);\n    console.log('   EC.special.alphaPeak:', this.data.EC?.special?.alphaPeak);\n    console.log('==============================================================\\n');\n\n    const metric1 = this.calculateFocusScoreAbsolute(); // Use ABSOLUTE power for Cognition\n    const metric2 = this.calculateAlphaPeak();\n    const metric3 = this.calculateAlphaThetaBalance();\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Cognition',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Focus Score Stimulation Control (Theta:Beta)', ...metric1 },\n        { name: 'Alpha Peak', ...metric2 },\n        { name: 'Alpha:Theta Balance', ...metric3 }\n      ]\n    };\n  }\n\n  /**\n   * 2. Stress (Note: 0/3 is healthy, 3/3 is high stress)\n   * - Arousal Score (inverted: abnormal = 1 point)\n   * - Relaxation Score (inverted: abnormal = 1 point)\n   * - Regeneration (inverted: abnormal = 1 point)\n   */\n  calculateStress() {\n    console.log('\\nüìä === STRESS PARAMETER (0/3 = Healthy, 3/3 = High Stress) ===');\n    const metric1 = this.calculateArousalScore();\n    const metric2 = this.calculateRelaxationScore();\n    const metric3 = this.calculateRegeneration();\n\n    // Invert scores: 0->1, 1->0 (so abnormal values add to stress score)\n    const invertedScore1 = 1 - metric1.score;\n    const invertedScore2 = 1 - metric2.score;\n    const invertedScore3 = 1 - metric3.score;\n\n    console.log(`\\n  üîÑ INVERTING SCORES (abnormal values = stress):`);\n    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (stress): ${invertedScore1}`);\n    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (stress): ${invertedScore2}`);\n    console.log(`     Regeneration normal score: ${metric3.score} ‚Üí Inverted (stress): ${invertedScore3}`);\n\n    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä STRESS TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Stress',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }\n      ]\n    };\n  }\n\n  /**\n   * 3. Focus & Attention\n   * - Focus Theta\n   * - Alpha:Theta Balance\n   * - Focus Score (Theta:Beta)\n   */\n  calculateFocusAttention() {\n    console.log('\\nüìä Calculating FOCUS & ATTENTION...');\n    const metric1 = this.calculateFocusTheta();\n    const metric2 = this.calculateAlphaThetaBalance();\n    const metric3 = this.calculateFocusScoreRelative(); // Use RELATIVE power\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Focus & Attention',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Focus Theta', ...metric1 },\n        { name: 'Alpha:Theta Balance', ...metric2 },\n        { name: 'Focus Score (Theta:Beta)', ...metric3 }\n      ]\n    };\n  }\n\n  /**\n   * 4. Burnout & Fatigue (Note: 0/3 is healthy)\n   * - Arousal Score (inverted: abnormal = 1 point)\n   * - Relaxation Score (inverted: abnormal = 1 point)\n   * - Excessive Delta (inverted: abnormal = 1 point)\n   */\n  calculateBurnoutFatigue() {\n    console.log('\\nüìä === BURNOUT & FATIGUE PARAMETER (0/3 = Healthy, 3/3 = High Burnout) ===');\n    const metric1 = this.calculateArousalScore();\n    const metric2 = this.calculateRelaxationScore();\n    const metric3 = this.calculateExcessiveDelta();\n\n    // Invert scores: 0->1, 1->0 (so abnormal values add to burnout score)\n    const invertedScore1 = 1 - metric1.score;\n    const invertedScore2 = 1 - metric2.score;\n    const invertedScore3 = 1 - metric3.score;\n\n    console.log(`\\n  üîÑ INVERTING SCORES (abnormal values = burnout):`);\n    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (burnout): ${invertedScore1}`);\n    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (burnout): ${invertedScore2}`);\n    console.log(`     Excessive Delta normal score: ${metric3.score} ‚Üí Inverted (burnout): ${invertedScore3}`);\n\n    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä BURNOUT TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Burnout & Fatigue',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n        { name: 'Excessive Delta', ...metric3, score: invertedScore3 }\n      ]\n    };\n  }\n\n  /**\n   * 5. Emotional Regulation\n   * - Alpha Asymmetry\n   * - Arousal Score\n   * - Regeneration\n   */\n  calculateEmotionalRegulation() {\n    console.log('\\nüìä Calculating EMOTIONAL REGULATION...');\n    const metric1 = this.calculateAlphaAsymmetry();\n    const metric2 = this.calculateArousalScore();\n    const metric3 = this.calculateRegeneration();\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Emotional Regulation',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Alpha Asymmetry (Frontal)', ...metric1 },\n        { name: 'Arousal Score', ...metric2 },\n        { name: 'Regeneration (Alpha Modulation)', ...metric3 }\n      ]\n    };\n  }\n\n  /**\n   * 6. Learning\n   * - Alpha Peak\n   * - Focus Score (Theta:Beta)\n   * - Arousal Score\n   */\n  calculateLearning() {\n    console.log('\\nüìä Calculating LEARNING...');\n    const metric1 = this.calculateAlphaPeak();\n    const metric2 = this.calculateFocusScoreRelative(); // Use RELATIVE power\n    const metric3 = this.calculateArousalScore();\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Learning',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Alpha Peak', ...metric1 },\n        { name: 'Focus Score (Theta:Beta)', ...metric2 },\n        { name: 'Arousal Score', ...metric3 }\n      ]\n    };\n  }\n\n  /**\n   * 7. Creativity\n   * - Relaxation Score\n   * - Focus Score (Theta:Beta)\n   * - Alpha Peak\n   */\n  calculateCreativity() {\n    console.log('\\nüìä Calculating CREATIVITY...');\n    const metric1 = this.calculateRelaxationScore();\n    const metric2 = this.calculateFocusScoreRelative(); // Use RELATIVE power\n    const metric3 = this.calculateAlphaPeak();\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Creativity',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Relaxation Score', ...metric1 },\n        { name: 'Focus Score (Theta:Beta)', ...metric2 },\n        { name: 'Alpha Peak', ...metric3 }\n      ]\n    };\n  }\n}\n\nmodule.exports = AlgorithmCalculator;\n","structuredPatch":[{"oldStart":670,"oldLines":9,"newStart":670,"newLines":11,"lines":["       maxScore: 3,","       classification: this.classifyScore(totalScore),","       metrics: [","-        { name: 'Arousal Score', ...metric1, score: invertedScore1 },","-        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },","-        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: invertedScore3 }","+        // Display original scores (1 = normal, 0 = abnormal) for individual metrics","+        // But use inverted scores for overall parameter calculation","+        { name: 'Arousal Score', ...metric1, score: metric1.score },","+        { name: 'Relaxation Score', ...metric2, score: metric2.score },","+        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: metric3.score }","       ]","     };","   }"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"c008ecbf-51c9-4abc-b21f-b4bff7772435","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01BrPdymzYyiCm2nQDPSm3Sk","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"‡§Ö‡§ö‡•ç‡§õ‡§æ! ‡§Ö‡§¨ Burnout & Fatigue ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä same fix ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§","signature":"Eo8CCkYIChgCKkBfLQjvxaPOS0AC6/W2giYGO1xR50ucFbwqq7WsMyKbOZZdd47VcUsuTaM5W6P5VZK0nIoYCqFuCuX5u7OpgR2OEgxK6tjXihwu7W927RkaDNaGVWX2SapUMw2ugiIwu7iHxOs76lSVQkt77O/j7AkfPexZF2SwGWHSBavA8wHC3NhvAKg3DZVKbmADJlQ+KneimRCbRwz5surY/hjCIFQiJjIHvanjQNSsrsLJIZF35L5M7QnghWuwajDuXYSF/Cb84TnOUrO+we0d7yGYb4cz3b6BGlhFHvIF1OFLUsWfwGqVvIEeIt+cty+c/2S91DJbOYGZyZNRiQquRZ0bVsvkJfak/Mo0WxgB"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":1814,"cache_read_input_tokens":81042,"cache_creation":{"ephemeral_5m_input_tokens":1814,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAJKfd8kw62mMgWxFBH","type":"assistant","uuid":"f1ab3ab1-22de-4bc6-8320-2da330619934","timestamp":"2025-12-18T12:34:59.338Z"}
{"parentUuid":"f1ab3ab1-22de-4bc6-8320-2da330619934","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01BrPdymzYyiCm2nQDPSm3Sk","type":"message","role":"assistant","content":[{"type":"text","text":"‡§Ö‡§¨ Burnout & Fatigue ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä same fix ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Ç:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":1814,"cache_read_input_tokens":81042,"cache_creation":{"ephemeral_5m_input_tokens":1814,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAJKfd8kw62mMgWxFBH","type":"assistant","uuid":"c1eef5de-708b-4360-8a7f-bada53bcdbcc","timestamp":"2025-12-18T12:34:59.771Z"}
{"parentUuid":"c1eef5de-708b-4360-8a7f-bada53bcdbcc","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01BrPdymzYyiCm2nQDPSm3Sk","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BnKnxmaSiiTKYxu9G7BroA","name":"Read","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","offset":714,"limit":35}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":1814,"cache_read_input_tokens":81042,"cache_creation":{"ephemeral_5m_input_tokens":1814,"ephemeral_1h_input_tokens":0},"output_tokens":181,"service_tier":"standard"}},"requestId":"req_011CWEAJKfd8kw62mMgWxFBH","type":"assistant","uuid":"7a401ae6-b0ba-49cf-9474-a8c05c0f1978","timestamp":"2025-12-18T12:35:00.589Z"}
{"parentUuid":"7a401ae6-b0ba-49cf-9474-a8c05c0f1978","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BnKnxmaSiiTKYxu9G7BroA","type":"tool_result","content":"   714‚Üí   * - Excessive Delta (inverted: abnormal = 1 point)\n   715‚Üí   */\n   716‚Üí  calculateBurnoutFatigue() {\n   717‚Üí    console.log('\\nüìä === BURNOUT & FATIGUE PARAMETER (0/3 = Healthy, 3/3 = High Burnout) ===');\n   718‚Üí    const metric1 = this.calculateArousalScore();\n   719‚Üí    const metric2 = this.calculateRelaxationScore();\n   720‚Üí    const metric3 = this.calculateExcessiveDelta();\n   721‚Üí\n   722‚Üí    // Invert scores: 0->1, 1->0 (so abnormal values add to burnout score)\n   723‚Üí    const invertedScore1 = 1 - metric1.score;\n   724‚Üí    const invertedScore2 = 1 - metric2.score;\n   725‚Üí    const invertedScore3 = 1 - metric3.score;\n   726‚Üí\n   727‚Üí    console.log(`\\n  üîÑ INVERTING SCORES (abnormal values = burnout):`);\n   728‚Üí    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (burnout): ${invertedScore1}`);\n   729‚Üí    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (burnout): ${invertedScore2}`);\n   730‚Üí    console.log(`     Excessive Delta normal score: ${metric3.score} ‚Üí Inverted (burnout): ${invertedScore3}`);\n   731‚Üí\n   732‚Üí    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n   733‚Üí    console.log(`\\n  üìä BURNOUT TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n   734‚Üí\n   735‚Üí    return {\n   736‚Üí      name: 'Burnout & Fatigue',\n   737‚Üí      score: totalScore,\n   738‚Üí      maxScore: 3,\n   739‚Üí      classification: this.classifyScore(totalScore),\n   740‚Üí      metrics: [\n   741‚Üí        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n   742‚Üí        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n   743‚Üí        { name: 'Excessive Delta', ...metric3, score: invertedScore3 }\n   744‚Üí      ]\n   745‚Üí    };\n   746‚Üí  }\n   747‚Üí\n   748‚Üí  /**\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"uuid":"8c81e06d-75b8-4c5d-9e71-d80a6b48bc12","timestamp":"2025-12-18T12:35:02.350Z","toolUseResult":{"type":"text","file":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","content":"   * - Excessive Delta (inverted: abnormal = 1 point)\n   */\n  calculateBurnoutFatigue() {\n    console.log('\\nüìä === BURNOUT & FATIGUE PARAMETER (0/3 = Healthy, 3/3 = High Burnout) ===');\n    const metric1 = this.calculateArousalScore();\n    const metric2 = this.calculateRelaxationScore();\n    const metric3 = this.calculateExcessiveDelta();\n\n    // Invert scores: 0->1, 1->0 (so abnormal values add to burnout score)\n    const invertedScore1 = 1 - metric1.score;\n    const invertedScore2 = 1 - metric2.score;\n    const invertedScore3 = 1 - metric3.score;\n\n    console.log(`\\n  üîÑ INVERTING SCORES (abnormal values = burnout):`);\n    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (burnout): ${invertedScore1}`);\n    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (burnout): ${invertedScore2}`);\n    console.log(`     Excessive Delta normal score: ${metric3.score} ‚Üí Inverted (burnout): ${invertedScore3}`);\n\n    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä BURNOUT TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Burnout & Fatigue',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n        { name: 'Excessive Delta', ...metric3, score: invertedScore3 }\n      ]\n    };\n  }\n\n  /**","numLines":35,"startLine":714,"totalLines":834}}}
{"parentUuid":"8c81e06d-75b8-4c5d-9e71-d80a6b48bc12","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RjfKqhdP18rqbYC9asLEJD","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Same issue ‡§Ø‡§π‡§æ‡§Ç ‡§≠‡•Ä ‡§π‡•à‡•§ Line 741-743 ‡§Æ‡•á‡§Ç inverted scores use ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§Æ‡•Å‡§ù‡•á ‡§á‡§®‡•ç‡§π‡•á‡§Ç original scores ‡§∏‡•á replace ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§","signature":"EvYCCkYIChgCKkA74aHAbqz5p2iCdJTwXjNdUst2yWtb1kFMoDt3uNGCc99Z7etjoSTKL02i5wnim00hWvxFhocDkUGK7a66GKlGEgyEe2AtNnVvIAzW3KYaDE+p8zcUddHU/cuOwCIwrKBB0T/mpRBtxQndrBgqqUzNvRPdiybjh1kYauTYYqUuqgTi6T9YHWc7Bt1gkyCtKt0Bh7O6E5yuXlAxYAGb8xGH/kwmkbiA5aTq8uOj7Z83DprXgjQUZl5OknX9E+aSpXwuY52Yd7b8tIgZLfVQRtIfQ9ymtSICcbk7sK62LfxU1u/oa3gC8vBTQ0mgY5e4FkveF//A74dc/yGVR3GATzPPJH+fPYtfvArCPLVqJvYDm/vFr+9qtSESiU32/fMBqDttuaMJmgO0nUyOw1KETQhXQRwJl8ewF1Tp5DTL6HyZ7teXbIG+3acZkkTJ9xIDbYbA5uQrBHIQxeRkghU9TMoofwVJK0qbTP1dTdIEg9wYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":928,"cache_read_input_tokens":82856,"cache_creation":{"ephemeral_5m_input_tokens":928,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAJs1XCoauw7F6yMBmr","type":"assistant","uuid":"9af0a0c5-5b65-49a3-b939-32d11bed30ed","timestamp":"2025-12-18T12:35:06.896Z"}
{"parentUuid":"9af0a0c5-5b65-49a3-b939-32d11bed30ed","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01RjfKqhdP18rqbYC9asLEJD","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01YMK31FMumcfV4p4DuXvqyB","name":"Edit","input":{"file_path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","old_string":"    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä BURNOUT TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Burnout & Fatigue',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n        { name: 'Excessive Delta', ...metric3, score: invertedScore3 }\n      ]\n    };","new_string":"    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä BURNOUT TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Burnout & Fatigue',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        // Display original scores (1 = normal, 0 = abnormal) for individual metrics\n        // But use inverted scores for overall parameter calculation\n        { name: 'Arousal Score', ...metric1, score: metric1.score },\n        { name: 'Relaxation Score', ...metric2, score: metric2.score },\n        { name: 'Excessive Delta', ...metric3, score: metric3.score }\n      ]\n    };"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":928,"cache_read_input_tokens":82856,"cache_creation":{"ephemeral_5m_input_tokens":928,"ephemeral_1h_input_tokens":0},"output_tokens":601,"service_tier":"standard"}},"requestId":"req_011CWEAJs1XCoauw7F6yMBmr","type":"assistant","uuid":"75f03ac2-0d9b-42a6-8137-d5b6e3e08fa9","timestamp":"2025-12-18T12:35:11.556Z"}
{"parentUuid":"75f03ac2-0d9b-42a6-8137-d5b6e3e08fa9","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01YMK31FMumcfV4p4DuXvqyB","type":"tool_result","content":"The file D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n   728‚Üí    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (burnout): ${invertedScore1}`);\n   729‚Üí    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (burnout): ${invertedScore2}`);\n   730‚Üí    console.log(`     Excessive Delta normal score: ${metric3.score} ‚Üí Inverted (burnout): ${invertedScore3}`);\n   731‚Üí\n   732‚Üí    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n   733‚Üí    console.log(`\\n  üìä BURNOUT TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n   734‚Üí\n   735‚Üí    return {\n   736‚Üí      name: 'Burnout & Fatigue',\n   737‚Üí      score: totalScore,\n   738‚Üí      maxScore: 3,\n   739‚Üí      classification: this.classifyScore(totalScore),\n   740‚Üí      metrics: [\n   741‚Üí        // Display original scores (1 = normal, 0 = abnormal) for individual metrics\n   742‚Üí        // But use inverted scores for overall parameter calculation\n   743‚Üí        { name: 'Arousal Score', ...metric1, score: metric1.score },\n   744‚Üí        { name: 'Relaxation Score', ...metric2, score: metric2.score },\n   745‚Üí        { name: 'Excessive Delta', ...metric3, score: metric3.score }\n   746‚Üí      ]\n   747‚Üí    };\n   748‚Üí  }\n   749‚Üí\n   750‚Üí  /**\n   751‚Üí   * 5. Emotional Regulation"}]},"uuid":"56163660-fde7-4daf-bed6-ea18256985e2","timestamp":"2025-12-18T12:35:16.544Z","toolUseResult":{"filePath":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\server\\services\\algorithmCalculator.js","oldString":"    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä BURNOUT TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Burnout & Fatigue',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n        { name: 'Excessive Delta', ...metric3, score: invertedScore3 }\n      ]\n    };","newString":"    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä BURNOUT TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Burnout & Fatigue',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        // Display original scores (1 = normal, 0 = abnormal) for individual metrics\n        // But use inverted scores for overall parameter calculation\n        { name: 'Arousal Score', ...metric1, score: metric1.score },\n        { name: 'Relaxation Score', ...metric2, score: metric2.score },\n        { name: 'Excessive Delta', ...metric3, score: metric3.score }\n      ]\n    };","originalFile":"/**\n * QEEG Algorithm Calculator\n * Based on Rhea's Report - Calculates 7 brain health parameters\n * Each parameter has 3 sub-metrics, scored 0-3, classified as Low/Medium/High\n */\n\nclass AlgorithmCalculator {\n  constructor(qeegData) {\n    this.data = qeegData;\n    this.results = {\n      parameters: [],\n      rawCalculations: {},\n      overallScore: 0\n    };\n  }\n\n  /**\n   * Main calculation method - calculates all 7 parameters\n   */\n  calculate() {\n    console.log('\\nüßÆ ========== STARTING ALGORITHM CALCULATIONS ==========');\n    console.log('üìä Input Data Structure:', JSON.stringify(this.data, null, 2));\n\n    console.log('\\nüêõ === ENHANCED DEBUG MODE ACTIVATED ===');\n    console.log('üìã This debug output will show:');\n    console.log('   1. Every raw value extracted from QEEG data');\n    console.log('   2. All mathematical formulas and calculations');\n    console.log('   3. Threshold comparisons and scoring logic');\n    console.log('   4. Final score aggregation for each parameter');\n    console.log('===========================================\\n');\n\n    const parameters = [\n      this.calculateCognition(),\n      this.calculateStress(),\n      this.calculateFocusAttention(),\n      this.calculateBurnoutFatigue(),\n      this.calculateEmotionalRegulation(),\n      this.calculateLearning(),\n      this.calculateCreativity()\n    ];\n\n    console.log('\\n‚úÖ Final 7 Parameter Scores Calculated:');\n    parameters.forEach((p, i) => {\n      console.log(`${i + 1}. ${p.name}: ${p.score}/${p.maxScore} (${p.classification}) ${this.getEmoji(p.classification)}`);\n      p.metrics.forEach(m => {\n        console.log(`   - ${m.name}: ${m.score} point (value: ${JSON.stringify(m.value)})`);\n      });\n    });\n\n    // === ENHANCED DEBUG: Show complete calculation summary ===\n    console.log('\\nüêõ === DEBUG: COMPLETE CALCULATION SUMMARY ===');\n    console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');\n    console.log('‚îÇ Parameter                   ‚îÇ Score ‚îÇ Classification‚îÇ');\n    console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§');\n    parameters.forEach(p => {\n      const padding = ' '.repeat(28 - p.name.length);\n      console.log(`‚îÇ ${p.name}${padding}‚îÇ  ${p.score}/3  ‚îÇ ${p.classification.padEnd(12)} ‚îÇ`);\n    });\n    console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò');\n    console.log(`\\nüìä OVERALL BRAIN HEALTH SCORE: ${parameters.reduce((sum, p) => sum + p.score, 0)}/21`);\n    console.log('=== END DEBUG: CALCULATION SUMMARY ===\\n');\n\n    console.log('========== CALCULATIONS COMPLETE ==========\\n');\n\n    this.results.parameters = parameters;\n    this.results.overallScore = parameters.reduce((sum, p) => sum + p.score, 0);\n\n    return this.results;\n  }\n\n  getEmoji(classification) {\n    if (classification === 'Low') return 'üî¥';\n    if (classification === 'Medium') return 'üü°';\n    return 'üü¢';\n  }\n\n  // ==================== HELPER METHODS ====================\n\n  /**\n   * Get value from QEEG data table\n   * @param {string} condition - 'EC' (Eyes Closed) or 'EO' (Eyes Open)\n   * @param {string} powerType - 'absolute' or 'relative'\n   * @param {string} channel - e.g., 'Fz', 'Cz', 'Pz'\n   * @param {string} band - e.g., 'Theta', 'Alpha', 'Beta', 'HiBeta', 'Delta'\n   */\n  getValue(condition, powerType, channel, band) {\n    try {\n      return this.data[condition][powerType][channel][band];\n    } catch (error) {\n      console.error(`Error getting value: ${condition}.${powerType}.${channel}.${band}`);\n      return null;\n    }\n  }\n\n  /**\n   * Score a metric based on threshold\n   * Returns 1 if condition is met (HEALTHY/NORMAL state by default)\n   * Use 'invert: true' for stress/problem indicators\n   */\n  scoreMetric(value, threshold, comparison = 'less', invert = false) {\n    if (value === null || value === undefined) return 0;\n\n    let result = 0;\n\n    if (comparison === 'less') {\n      result = value < threshold ? 1 : 0;\n    } else if (comparison === 'more') {\n      result = value > threshold ? 1 : 0;\n    } else if (comparison === 'equal') {\n      result = value === threshold ? 1 : 0;\n    }\n\n    // Invert for stress/problem indicators (where 1 point = problem detected)\n    return invert ? (1 - result) : result;\n  }\n\n  /**\n   * Classify score to bucket (Low/Medium/High)\n   */\n  classifyScore(score) {\n    if (score <= 1) return 'Low';\n    if (score === 2) return 'Medium';\n    return 'High';\n  }\n\n  // ==================== INDIVIDUAL METRICS ====================\n\n  /**\n   * Focus Score Stimulation Control (Theta:Beta Ratio) - ABSOLUTE POWER - For Cognition parameter\n   * Eyes Open, Absolute Power, Fz & Cz average\n   * < 1.5 is normal (as per specification)\n   */\n  calculateFocusScoreAbsolute() {\n    console.log('\\n  üîç === Calculating Focus Score Stimulation Control (Theta:Beta) - ABSOLUTE POWER ===');\n    console.log('  üìã Purpose: Measures mental focus by comparing slow (Theta) vs fast (Beta) brain waves');\n    console.log('  üìä Data Source: Eyes Open (EO), ABSOLUTE Power (ŒºV¬≤), Channels Fz & Cz');\n    console.log('  üéØ Expected: Ratio < 1.5 indicates good focus (more Beta than Theta)\\n');\n\n    const fzTheta = this.getValue('EO', 'absolute', 'Fz', 'Theta');\n    const fzBeta = this.getValue('EO', 'absolute', 'Fz', 'Beta');\n    const czTheta = this.getValue('EO', 'absolute', 'Cz', 'Theta');\n    const czBeta = this.getValue('EO', 'absolute', 'Cz', 'Beta');\n\n    console.log('  üêõ DEBUG - Step 1: Extract Raw Values from QEEG Data');\n    console.log('     ‚îú‚îÄ EO.absolute.Fz.Theta =', fzTheta, 'ŒºV¬≤');\n    console.log('     ‚îú‚îÄ EO.absolute.Fz.Beta  =', fzBeta, 'ŒºV¬≤');\n    console.log('     ‚îú‚îÄ EO.absolute.Cz.Theta =', czTheta, 'ŒºV¬≤');\n    console.log('     ‚îî‚îÄ EO.absolute.Cz.Beta  =', czBeta, 'ŒºV¬≤');\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    // Also check for zero denominators to prevent Infinity/NaN\n    if (fzTheta == null || fzBeta == null || czTheta == null || czBeta == null || fzBeta === 0 || czBeta === 0) {\n      console.log('     ‚ùå Missing or zero Beta values (division by zero prevented), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    console.log('\\n  üêõ DEBUG - Step 2: Calculate Theta:Beta Ratios');\n    const fzRatio = fzTheta / fzBeta;\n    const czRatio = czTheta / czBeta;\n    console.log('     ‚îú‚îÄ Fz Ratio = Theta/Beta = ' + fzTheta + ' / ' + fzBeta + ' = ' + fzRatio.toFixed(3));\n    console.log('     ‚îî‚îÄ Cz Ratio = Theta/Beta = ' + czTheta + ' / ' + czBeta + ' = ' + czRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 3: Calculate Average Ratio');\n    const avgRatio = (fzRatio + czRatio) / 2;\n    console.log('     ‚îî‚îÄ Average = (Fz + Cz) / 2 = (' + fzRatio.toFixed(3) + ' + ' + czRatio.toFixed(3) + ') / 2 = ' + avgRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 4: Score Against Threshold');\n    console.log('     ‚îú‚îÄ Threshold: < 1.5 = Normal (good focus, per spec)');\n    console.log('     ‚îú‚îÄ Actual Value: ' + avgRatio.toFixed(3));\n    console.log('     ‚îú‚îÄ Comparison: ' + avgRatio.toFixed(3) + ' < 1.5 ? ' + (avgRatio < 1.5));\n    const score = this.scoreMetric(avgRatio, 1.5, 'less');\n    console.log('     ‚îî‚îÄ ‚úÖ SCORE: ' + score + '/1 ' + (score === 1 ? '(PASS - Good focus)' : '(FAIL - Poor focus)'));\n\n    return {\n      value: avgRatio,\n      score: score,\n      description: `Theta:Beta Ratio = ${avgRatio.toFixed(2)} (< 1.5 is normal per spec)`,\n      details: { fzRatio: fzRatio.toFixed(2), czRatio: czRatio.toFixed(2) }\n    };\n  }\n\n  /**\n   * Focus Score (Theta:Beta Ratio) - RELATIVE POWER - For Learning, Creativity, Focus&Attention parameters\n   * Eyes Open, Relative Power, Fz & Cz average\n   * < 1.5 is normal (as per specification)\n   */\n  calculateFocusScoreRelative() {\n    console.log('\\n  üîç === Calculating Focus Score (Theta:Beta) - RELATIVE POWER ===');\n    console.log('  üìã Purpose: Measures mental focus by comparing slow (Theta) vs fast (Beta) brain waves');\n    console.log('  üìä Data Source: Eyes Open (EO), RELATIVE Power (%), Channels Fz & Cz');\n    console.log('  üéØ Expected: Ratio < 1.5 indicates good focus (more Beta than Theta)\\n');\n\n    const fzTheta = this.getValue('EO', 'relative', 'Fz', 'Theta');\n    const fzBeta = this.getValue('EO', 'relative', 'Fz', 'Beta');\n    const czTheta = this.getValue('EO', 'relative', 'Cz', 'Theta');\n    const czBeta = this.getValue('EO', 'relative', 'Cz', 'Beta');\n\n    console.log('  üêõ DEBUG - Step 1: Extract Raw Values from QEEG Data');\n    console.log('     ‚îú‚îÄ EO.relative.Fz.Theta =', fzTheta, '%');\n    console.log('     ‚îú‚îÄ EO.relative.Fz.Beta  =', fzBeta, '%');\n    console.log('     ‚îú‚îÄ EO.relative.Cz.Theta =', czTheta, '%');\n    console.log('     ‚îî‚îÄ EO.relative.Cz.Beta  =', czBeta, '%');\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    // Also check for zero denominators to prevent Infinity/NaN\n    if (fzTheta == null || fzBeta == null || czTheta == null || czBeta == null || fzBeta === 0 || czBeta === 0) {\n      console.log('     ‚ùå Missing or zero Beta values (division by zero prevented), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    console.log('\\n  üêõ DEBUG - Step 2: Calculate Theta:Beta Ratios');\n    const fzRatio = fzTheta / fzBeta;\n    const czRatio = czTheta / czBeta;\n    console.log('     ‚îú‚îÄ Fz Ratio = Theta/Beta = ' + fzTheta + ' / ' + fzBeta + ' = ' + fzRatio.toFixed(3));\n    console.log('     ‚îî‚îÄ Cz Ratio = Theta/Beta = ' + czTheta + ' / ' + czBeta + ' = ' + czRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 3: Calculate Average Ratio');\n    const avgRatio = (fzRatio + czRatio) / 2;\n    console.log('     ‚îî‚îÄ Average = (Fz + Cz) / 2 = (' + fzRatio.toFixed(3) + ' + ' + czRatio.toFixed(3) + ') / 2 = ' + avgRatio.toFixed(3));\n\n    console.log('\\n  üêõ DEBUG - Step 4: Score Against Threshold');\n    console.log('     ‚îú‚îÄ Threshold: < 1.5 = Normal (good focus, per spec)');\n    console.log('     ‚îú‚îÄ Actual Value: ' + avgRatio.toFixed(3));\n    console.log('     ‚îú‚îÄ Comparison: ' + avgRatio.toFixed(3) + ' < 1.5 ? ' + (avgRatio < 1.5));\n    const score = this.scoreMetric(avgRatio, 1.5, 'less');\n    console.log('     ‚îî‚îÄ ‚úÖ SCORE: ' + score + '/1 ' + (score === 1 ? '(PASS - Good focus)' : '(FAIL - Poor focus)'));\n\n    return {\n      value: avgRatio,\n      score: score,\n      description: `Theta:Beta Ratio = ${avgRatio.toFixed(2)} (< 1.5 is normal per spec)`,\n      details: { fzRatio: fzRatio.toFixed(2), czRatio: czRatio.toFixed(2) }\n    };\n  }\n\n  /**\n   * Alpha Peak - Used in multiple parameters\n   * Eyes Closed, Special (highest frequency at Pz or below)\n   * > 9 Hz is normal\n   * As per specification: \"Alpha peak - Eyes Closed Special PZ or below - the highest score will be taken\"\n   */\n  calculateAlphaPeak() {\n    console.log('\\n  üîç === Calculating Alpha Peak ===');\n    console.log('  üìã Purpose: Find highest alpha peak frequency at Pz or below (posterior electrodes)');\n    console.log('  üìä Data Source: Eyes Closed (EC), Special, Channels: Pz, P3, P4, O1, O2, Oz');\n    console.log('  üéØ Expected: Highest value > 9 Hz indicates good alpha peak frequency\\n');\n\n    // Get alpha peak values from Pz and below (posterior electrodes)\n    const posteriorChannels = ['Pz', 'P3', 'P4', 'O1', 'O2', 'Oz'];\n    const alphaPeakValues = [];\n\n    console.log('  üêõ DEBUG - Step 1: Extract Alpha Peak Values from Posterior Channels');\n    posteriorChannels.forEach(channel => {\n      const value = this.data.EC?.special?.[channel];\n      if (value !== null && value !== undefined && value > 0) {\n        alphaPeakValues.push({ channel, value });\n        console.log(`     ‚îú‚îÄ ${channel}: ${value.toFixed(2)} Hz`);\n      } else {\n        console.log(`     ‚îú‚îÄ ${channel}: N/A`);\n      }\n    });\n\n    // If no values found, return 0 score\n    if (alphaPeakValues.length === 0) {\n      console.log('     ‚ùå No data available from posterior channels, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    console.log('\\n  üêõ DEBUG - Step 2: Find Highest Value');\n    // Find the maximum value\n    const maxPeak = alphaPeakValues.reduce((max, current) =>\n      current.value > max.value ? current : max\n    );\n\n    console.log(`     ‚îî‚îÄ Highest Alpha Peak: ${maxPeak.value.toFixed(2)} Hz (from ${maxPeak.channel})`);\n\n    console.log('\\n  üêõ DEBUG - Step 3: Score Against Threshold');\n    console.log(`     ‚îú‚îÄ Threshold: > 9 Hz = normal`);\n    console.log(`     ‚îú‚îÄ Actual Value: ${maxPeak.value.toFixed(2)} Hz`);\n    console.log(`     ‚îú‚îÄ Comparison: ${maxPeak.value.toFixed(2)} > 9 ? ${maxPeak.value > 9}`);\n\n    const score = this.scoreMetric(maxPeak.value, 9, 'more');\n    console.log(`     ‚îî‚îÄ ‚úÖ SCORE: ${score}/1 ${score === 1 ? '(PASS - Good alpha peak)' : '(FAIL - Low alpha peak)'}`);\n\n    return {\n      value: maxPeak.value,\n      score: score,\n      description: `Alpha Peak = ${maxPeak.value.toFixed(1)} Hz at ${maxPeak.channel} (> 9 is normal)`,\n      details: {\n        channel: maxPeak.channel,\n        allValues: alphaPeakValues.map(p => `${p.channel}:${p.value.toFixed(1)}Hz`).join(', ')\n      }\n    };\n  }\n\n  /**\n   * Alpha:Theta Balance - Used in multiple parameters\n   * Eyes Closed, Absolute Power, Fz, Cz, Pz\n   * Order Fz > Cz > Pz is normal (frontal dominance)\n   * As per specification: Fz > Cz > Pz is the correct order\n   */\n  calculateAlphaThetaBalance() {\n    console.log('\\n  üîç === Calculating Alpha:Theta Balance ===');\n    const fzAlpha = this.getValue('EC', 'absolute', 'Fz', 'Alpha');\n    const fzTheta = this.getValue('EC', 'absolute', 'Fz', 'Theta');\n    const czAlpha = this.getValue('EC', 'absolute', 'Cz', 'Alpha');\n    const czTheta = this.getValue('EC', 'absolute', 'Cz', 'Theta');\n    const pzAlpha = this.getValue('EC', 'absolute', 'Pz', 'Alpha');\n    const pzTheta = this.getValue('EC', 'absolute', 'Pz', 'Theta');\n\n    console.log('     Raw Values - Fz:', { Alpha: fzAlpha, Theta: fzTheta });\n    console.log('     Raw Values - Cz:', { Alpha: czAlpha, Theta: czTheta });\n    console.log('     Raw Values - Pz:', { Alpha: pzAlpha, Theta: pzTheta });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    // Also check for zero denominators to prevent Infinity/NaN\n    if (fzAlpha == null || fzTheta == null || czAlpha == null || czTheta == null || pzAlpha == null || pzTheta == null ||\n        fzTheta === 0 || czTheta === 0 || pzTheta === 0) {\n      console.log('     ‚ùå Missing or zero Theta values (division by zero prevented), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const fzRatio = fzAlpha / fzTheta;\n    const czRatio = czAlpha / czTheta;\n    const pzRatio = pzAlpha / pzTheta;\n\n    console.log(`     Ratios - Fz: ${fzRatio.toFixed(2)}, Cz: ${czRatio.toFixed(2)}, Pz: ${pzRatio.toFixed(2)}`);\n    console.log(`     Expected Order: Fz > Cz > Pz (frontal dominant per spec)`);\n    console.log(`     Actual Order: Fz(${fzRatio.toFixed(2)}) > Cz(${czRatio.toFixed(2)}) > Pz(${pzRatio.toFixed(2)})`);\n\n    // Normal pattern: Fz > Cz > Pz (as per specification)\n    const isNormalOrder = fzRatio > czRatio && czRatio > pzRatio;\n\n    console.log(`     Check: ${fzRatio.toFixed(2)} > ${czRatio.toFixed(2)} = ${fzRatio > czRatio}`);\n    console.log(`     Check: ${czRatio.toFixed(2)} > ${pzRatio.toFixed(2)} = ${czRatio > pzRatio}`);\n    console.log(`     ‚úÖ SCORE: ${isNormalOrder ? 1 : 0}/1`);\n\n    return {\n      value: { fz: fzRatio.toFixed(2), cz: czRatio.toFixed(2), pz: pzRatio.toFixed(2) },\n      score: isNormalOrder ? 1 : 0,\n      description: `Alpha:Theta Order = ${isNormalOrder ? 'Fz > Cz > Pz (Normal per spec)' : 'Abnormal order'}`,\n      details: { fzRatio, czRatio, pzRatio, order: isNormalOrder }\n    };\n  }\n\n  /**\n   * Arousal Score (HiBeta:Beta Ratio) - Used in multiple parameters\n   * Eyes Open, Absolute Power, Fz & Cz average\n   * < 1 is normal\n   */\n  calculateArousalScore() {\n    console.log('\\n  üîç === Calculating Arousal Score (HiBeta:Beta) ===');\n    const fzBeta = this.getValue('EO', 'absolute', 'Fz', 'Beta');\n    const fzHiBeta = this.getValue('EO', 'absolute', 'Fz', 'HiBeta');\n    const czBeta = this.getValue('EO', 'absolute', 'Cz', 'Beta');\n    const czHiBeta = this.getValue('EO', 'absolute', 'Cz', 'HiBeta');\n\n    console.log('     Raw Values - Fz:', { Beta: fzBeta, HiBeta: fzHiBeta });\n    console.log('     Raw Values - Cz:', { Beta: czBeta, HiBeta: czHiBeta });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    // Also check for zero denominators to prevent Infinity/NaN\n    if (fzBeta == null || fzHiBeta == null || czBeta == null || czHiBeta == null || fzBeta === 0 || czBeta === 0) {\n      console.log('     ‚ùå Missing or zero Beta values (division by zero prevented), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const fzRatio = fzHiBeta / fzBeta;\n    const czRatio = czHiBeta / czBeta;\n    const avgRatio = (fzRatio + czRatio) / 2;\n    const score = this.scoreMetric(avgRatio, 1, 'less');\n\n    console.log(`     Fz ratio (HiBeta/Beta): ${fzRatio.toFixed(3)}`);\n    console.log(`     Cz ratio (HiBeta/Beta): ${czRatio.toFixed(3)}`);\n    console.log(`     Average: ${avgRatio.toFixed(3)}`);\n    console.log(`     Threshold: < 1 = normal (low arousal)`);\n    console.log(`     Result: ${avgRatio.toFixed(3)} < 1 = ${avgRatio < 1}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: avgRatio,\n      score: score,\n      description: `Arousal Score = ${avgRatio.toFixed(2)} (< 1 is normal)`,\n      details: { fzRatio: fzRatio.toFixed(2), czRatio: czRatio.toFixed(2) }\n    };\n  }\n\n  /**\n   * Relaxation Score - Used in multiple parameters\n   * Eyes Closed, ABSOLUTE Power, Pz, Alpha/Beta\n   * > 1 is healthy (as per specification)\n   */\n  calculateRelaxationScore() {\n    console.log('\\n  üîç === Calculating Relaxation Score ===');\n    console.log('  üìã Purpose: Measures ability to relax by comparing Alpha vs Beta waves');\n    console.log('  üìä Data Source: Eyes Closed (EC), ABSOLUTE Power (ŒºV¬≤), Pz channel (posterior)');\n    console.log('  üéØ Expected: Alpha/Beta > 1 indicates good relaxation capacity (per spec)\\n');\n\n    const pzAlpha = this.getValue('EC', 'absolute', 'Pz', 'Alpha');\n    const pzBeta = this.getValue('EC', 'absolute', 'Pz', 'Beta');\n\n    console.log('  üêõ DEBUG - Step 1: Extract Raw Values from QEEG Data');\n    console.log('     ‚îú‚îÄ EC.absolute.Pz.Alpha =', pzAlpha, 'ŒºV¬≤');\n    console.log('     ‚îî‚îÄ EC.absolute.Pz.Beta  =', pzBeta, 'ŒºV¬≤');\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    if (pzAlpha == null || pzBeta == null || pzBeta === 0) {\n      console.log('     ‚ö†Ô∏è Missing or zero Beta value, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    console.log('\\n  üêõ DEBUG - Step 2: Calculate Alpha:Beta Ratio');\n    const ratio = pzAlpha / pzBeta;\n    console.log('     ‚îî‚îÄ Ratio = Alpha/Beta = ' + pzAlpha + ' / ' + pzBeta + ' = ' + ratio.toFixed(2));\n\n    console.log('\\n  üêõ DEBUG - Step 3: Score Against Threshold');\n    console.log('     ‚îú‚îÄ Threshold: > 1.0 (per specification)');\n    console.log('     ‚îú‚îÄ Actual Value: ' + ratio.toFixed(2));\n    console.log('     ‚îú‚îÄ Comparison: ' + ratio.toFixed(2) + ' > 1.0 ? ' + (ratio > 1.0));\n\n    // As per specification: > 1 is healthy\n    const score = ratio > 1.0 ? 1 : 0;\n    console.log('     ‚îî‚îÄ ‚úÖ SCORE: ' + score + '/1 ' + (score === 1 ? '(PASS - Good relaxation)' : '(FAIL - Poor relaxation)'));\n\n    console.log('\\n  üí° Interpretation:');\n    if (ratio > 1) {\n      console.log('     ‚Üí High Alpha relative to Beta = Good relaxation capacity');\n      console.log('     ‚Üí Brain can easily shift into relaxed, calm state');\n    } else {\n      console.log('     ‚Üí Low Alpha relative to Beta = Difficulty relaxing');\n      console.log('     ‚Üí May indicate stress or hyperarousal');\n    }\n\n    return {\n      value: ratio,\n      score: score,\n      description: `Relaxation Score = ${ratio.toFixed(2)} (> 1 is healthy per spec)`\n    };\n  }\n\n  /**\n   * Regeneration (Alpha Modulation) - Used in multiple parameters\n   * EO & EC, Relative Power, Pz, (EC-EO)/EC * 100\n   * > 30% is healthy\n   */\n  calculateRegeneration() {\n    console.log('\\n  üîç === Calculating Regeneration (Alpha Modulation) ===');\n    console.log('     Using: EC vs EO relative power at Pz');\n    const ecAlpha = this.getValue('EC', 'relative', 'Pz', 'Alpha');\n    const eoAlpha = this.getValue('EO', 'relative', 'Pz', 'Alpha');\n\n    console.log('     Raw Values:', { 'EC Alpha': ecAlpha, 'EO Alpha': eoAlpha });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    if (ecAlpha == null || eoAlpha == null || ecAlpha === 0) {\n      console.log('     ‚ùå Missing or zero EC Alpha value, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const modulation = ((ecAlpha - eoAlpha) / ecAlpha) * 100;\n    const score = this.scoreMetric(modulation, 30, 'more');\n\n    console.log(`     Formula: ((EC - EO) / EC) √ó 100`);\n    console.log(`     Calculation: ((${ecAlpha} - ${eoAlpha}) / ${ecAlpha}) √ó 100`);\n    console.log(`     Modulation: ${modulation.toFixed(1)}%`);\n    console.log(`     Threshold: > 30% = healthy (good alpha reactivity)`);\n    console.log(`     Result: ${modulation.toFixed(1)}% > 30% = ${modulation > 30}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: modulation,\n      score: score,\n      description: `Alpha Modulation = ${modulation.toFixed(1)}% (> 30% is healthy)`\n    };\n  }\n\n  /**\n   * Focus Theta (Relative Power) - Used in Focus & Attention\n   * Eyes Open, Relative Power, Fz & Cz average\n   * < 20% is normal\n   */\n  calculateFocusTheta() {\n    console.log('\\n  üîç === Calculating Focus Theta ===');\n    console.log('     Using: EO relative power at Fz and Cz');\n    const fzTheta = this.getValue('EO', 'relative', 'Fz', 'Theta');\n    const czTheta = this.getValue('EO', 'relative', 'Cz', 'Theta');\n\n    console.log('     Raw Values:', { 'Fz Theta': fzTheta, 'Cz Theta': czTheta });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    if (fzTheta == null || czTheta == null) {\n      console.log('     ‚ùå Missing values, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const avgTheta = (fzTheta + czTheta) / 2;\n    const score = this.scoreMetric(avgTheta, 20, 'less');\n\n    console.log(`     Average: (${fzTheta} + ${czTheta}) / 2 = ${avgTheta.toFixed(1)}%`);\n    console.log(`     Threshold: < 20% = normal (low frontal theta)`);\n    console.log(`     Result: ${avgTheta.toFixed(1)}% < 20% = ${avgTheta < 20}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: avgTheta,\n      score: score,\n      description: `Focus Theta = ${avgTheta.toFixed(1)}% (< 20% is normal)`\n    };\n  }\n\n  /**\n   * Excessive Delta - Used in Burnout & Fatigue\n   * Eyes Open, Relative Power, avg of Fz, C3, Cz, C4, P3, Pz, P4\n   * < 70% is normal\n   */\n  calculateExcessiveDelta() {\n    console.log('\\n  üîç === Calculating Excessive Delta ===');\n    console.log('     Using: EO relative power, averaging 7 channels');\n    const channels = ['Fz', 'C3', 'Cz', 'C4', 'P3', 'Pz', 'P4'];\n    let sum = 0;\n    let count = 0;\n    const channelValues = {};\n\n    for (const channel of channels) {\n      const delta = this.getValue('EO', 'relative', channel, 'Delta');\n      channelValues[channel] = delta !== null ? delta : 'N/A';\n      if (delta !== null) {\n        sum += delta;\n        count++;\n      }\n    }\n\n    console.log('     Channel Values:', channelValues);\n    console.log(`     Valid channels: ${count}/7`);\n\n    if (count === 0) {\n      console.log('     ‚ùå No valid channel data, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const avgDelta = sum / count;\n    const score = this.scoreMetric(avgDelta, 70, 'less');\n\n    console.log(`     Sum: ${sum.toFixed(2)}, Count: ${count}`);\n    console.log(`     Average Delta: ${avgDelta.toFixed(1)}%`);\n    console.log(`     Threshold: < 70% = normal (low delta during wakefulness)`);\n    console.log(`     Result: ${avgDelta.toFixed(1)}% < 70% = ${avgDelta < 70}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: avgDelta,\n      score: score,\n      description: `Excessive Delta = ${avgDelta.toFixed(1)}% (< 70% is normal)`\n    };\n  }\n\n  /**\n   * Alpha Asymmetry (Frontal) - Used in Emotional Regulation\n   * Eyes Closed, Absolute Power, F3 & F4\n   * Formula: (AlphaF4 + AlphaF3) / (AlphaF4 - AlphaF3)\n   * < 1 is normal\n   */\n  calculateAlphaAsymmetry() {\n    console.log('\\n  üîç === Calculating Alpha Asymmetry (Frontal) ===');\n    console.log('     Using: EC absolute power at F3 and F4');\n    console.log('     Formula: (AlphaF4 + AlphaF3) / (AlphaF4 - AlphaF3)');\n    const f3Alpha = this.getValue('EC', 'absolute', 'F3', 'Alpha');\n    const f4Alpha = this.getValue('EC', 'absolute', 'F4', 'Alpha');\n\n    console.log('     Raw Values:', { 'F3 Alpha': f3Alpha, 'F4 Alpha': f4Alpha });\n\n    // Fix: Use == null to allow 0 values (valid EEG readings)\n    if (f3Alpha == null || f4Alpha == null) {\n      console.log('     ‚ùå Missing values, returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const denominator = f4Alpha - f3Alpha;\n\n    // Prevent division by zero\n    if (denominator === 0) {\n      console.log('     ‚ùå Denominator is zero (F4 - F3 = 0), returning 0');\n      return { value: null, score: 0 };\n    }\n\n    const asymmetry = (f4Alpha + f3Alpha) / denominator;\n    const score = this.scoreMetric(asymmetry, 1, 'less');\n\n    console.log(`     Numerator: F4 + F3 = ${f4Alpha} + ${f3Alpha} = ${(f4Alpha + f3Alpha).toFixed(2)}`);\n    console.log(`     Denominator: F4 - F3 = ${f4Alpha} - ${f3Alpha} = ${denominator.toFixed(2)}`);\n    console.log(`     Asymmetry: (F4 + F3) / (F4 - F3) = ${asymmetry.toFixed(3)}`);\n    console.log(`     Threshold: < 1 = normal (left frontal dominance, positive affect)`);\n    console.log(`     Result: ${asymmetry.toFixed(3)} < 1 = ${asymmetry < 1}`);\n    console.log(`     ‚úÖ SCORE: ${score}/1`);\n\n    return {\n      value: asymmetry,\n      score: score,\n      description: `Alpha Asymmetry = ${asymmetry.toFixed(2)} (< 1 is normal)`\n    };\n  }\n\n  // ==================== 7 PARAMETER CALCULATIONS ====================\n\n  /**\n   * 1. Cognition\n   * - Focus Score Stimulation Control (Theta:Beta Ratio)\n   * - Alpha Peak\n   * - Alpha:Theta Balance\n   */\n  calculateCognition() {\n    console.log('\\nüìä ==================== COGNITION PARAMETER ====================');\n    console.log('üìã Input Data Verification:');\n    console.log('   EO.absolute.Fz:', this.data.EO?.absolute?.Fz);\n    console.log('   EO.absolute.Cz:', this.data.EO?.absolute?.Cz);\n    console.log('   EC.absolute.Fz:', this.data.EC?.absolute?.Fz);\n    console.log('   EC.absolute.Cz:', this.data.EC?.absolute?.Cz);\n    console.log('   EC.absolute.Pz:', this.data.EC?.absolute?.Pz);\n    console.log('   EC.special.alphaPeak:', this.data.EC?.special?.alphaPeak);\n    console.log('==============================================================\\n');\n\n    const metric1 = this.calculateFocusScoreAbsolute(); // Use ABSOLUTE power for Cognition\n    const metric2 = this.calculateAlphaPeak();\n    const metric3 = this.calculateAlphaThetaBalance();\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Cognition',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Focus Score Stimulation Control (Theta:Beta)', ...metric1 },\n        { name: 'Alpha Peak', ...metric2 },\n        { name: 'Alpha:Theta Balance', ...metric3 }\n      ]\n    };\n  }\n\n  /**\n   * 2. Stress (Note: 0/3 is healthy, 3/3 is high stress)\n   * - Arousal Score (inverted: abnormal = 1 point)\n   * - Relaxation Score (inverted: abnormal = 1 point)\n   * - Regeneration (inverted: abnormal = 1 point)\n   */\n  calculateStress() {\n    console.log('\\nüìä === STRESS PARAMETER (0/3 = Healthy, 3/3 = High Stress) ===');\n    const metric1 = this.calculateArousalScore();\n    const metric2 = this.calculateRelaxationScore();\n    const metric3 = this.calculateRegeneration();\n\n    // Invert scores: 0->1, 1->0 (so abnormal values add to stress score)\n    const invertedScore1 = 1 - metric1.score;\n    const invertedScore2 = 1 - metric2.score;\n    const invertedScore3 = 1 - metric3.score;\n\n    console.log(`\\n  üîÑ INVERTING SCORES (abnormal values = stress):`);\n    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (stress): ${invertedScore1}`);\n    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (stress): ${invertedScore2}`);\n    console.log(`     Regeneration normal score: ${metric3.score} ‚Üí Inverted (stress): ${invertedScore3}`);\n\n    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä STRESS TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Stress',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        // Display original scores (1 = normal, 0 = abnormal) for individual metrics\n        // But use inverted scores for overall parameter calculation\n        { name: 'Arousal Score', ...metric1, score: metric1.score },\n        { name: 'Relaxation Score', ...metric2, score: metric2.score },\n        { name: 'Regeneration (Alpha Modulation)', ...metric3, score: metric3.score }\n      ]\n    };\n  }\n\n  /**\n   * 3. Focus & Attention\n   * - Focus Theta\n   * - Alpha:Theta Balance\n   * - Focus Score (Theta:Beta)\n   */\n  calculateFocusAttention() {\n    console.log('\\nüìä Calculating FOCUS & ATTENTION...');\n    const metric1 = this.calculateFocusTheta();\n    const metric2 = this.calculateAlphaThetaBalance();\n    const metric3 = this.calculateFocusScoreRelative(); // Use RELATIVE power\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Focus & Attention',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Focus Theta', ...metric1 },\n        { name: 'Alpha:Theta Balance', ...metric2 },\n        { name: 'Focus Score (Theta:Beta)', ...metric3 }\n      ]\n    };\n  }\n\n  /**\n   * 4. Burnout & Fatigue (Note: 0/3 is healthy)\n   * - Arousal Score (inverted: abnormal = 1 point)\n   * - Relaxation Score (inverted: abnormal = 1 point)\n   * - Excessive Delta (inverted: abnormal = 1 point)\n   */\n  calculateBurnoutFatigue() {\n    console.log('\\nüìä === BURNOUT & FATIGUE PARAMETER (0/3 = Healthy, 3/3 = High Burnout) ===');\n    const metric1 = this.calculateArousalScore();\n    const metric2 = this.calculateRelaxationScore();\n    const metric3 = this.calculateExcessiveDelta();\n\n    // Invert scores: 0->1, 1->0 (so abnormal values add to burnout score)\n    const invertedScore1 = 1 - metric1.score;\n    const invertedScore2 = 1 - metric2.score;\n    const invertedScore3 = 1 - metric3.score;\n\n    console.log(`\\n  üîÑ INVERTING SCORES (abnormal values = burnout):`);\n    console.log(`     Arousal normal score: ${metric1.score} ‚Üí Inverted (burnout): ${invertedScore1}`);\n    console.log(`     Relaxation normal score: ${metric2.score} ‚Üí Inverted (burnout): ${invertedScore2}`);\n    console.log(`     Excessive Delta normal score: ${metric3.score} ‚Üí Inverted (burnout): ${invertedScore3}`);\n\n    const totalScore = invertedScore1 + invertedScore2 + invertedScore3;\n    console.log(`\\n  üìä BURNOUT TOTAL: ${invertedScore1} + ${invertedScore2} + ${invertedScore3} = ${totalScore}/3`);\n\n    return {\n      name: 'Burnout & Fatigue',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Arousal Score', ...metric1, score: invertedScore1 },\n        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },\n        { name: 'Excessive Delta', ...metric3, score: invertedScore3 }\n      ]\n    };\n  }\n\n  /**\n   * 5. Emotional Regulation\n   * - Alpha Asymmetry\n   * - Arousal Score\n   * - Regeneration\n   */\n  calculateEmotionalRegulation() {\n    console.log('\\nüìä Calculating EMOTIONAL REGULATION...');\n    const metric1 = this.calculateAlphaAsymmetry();\n    const metric2 = this.calculateArousalScore();\n    const metric3 = this.calculateRegeneration();\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Emotional Regulation',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Alpha Asymmetry (Frontal)', ...metric1 },\n        { name: 'Arousal Score', ...metric2 },\n        { name: 'Regeneration (Alpha Modulation)', ...metric3 }\n      ]\n    };\n  }\n\n  /**\n   * 6. Learning\n   * - Alpha Peak\n   * - Focus Score (Theta:Beta)\n   * - Arousal Score\n   */\n  calculateLearning() {\n    console.log('\\nüìä Calculating LEARNING...');\n    const metric1 = this.calculateAlphaPeak();\n    const metric2 = this.calculateFocusScoreRelative(); // Use RELATIVE power\n    const metric3 = this.calculateArousalScore();\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Learning',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Alpha Peak', ...metric1 },\n        { name: 'Focus Score (Theta:Beta)', ...metric2 },\n        { name: 'Arousal Score', ...metric3 }\n      ]\n    };\n  }\n\n  /**\n   * 7. Creativity\n   * - Relaxation Score\n   * - Focus Score (Theta:Beta)\n   * - Alpha Peak\n   */\n  calculateCreativity() {\n    console.log('\\nüìä Calculating CREATIVITY...');\n    const metric1 = this.calculateRelaxationScore();\n    const metric2 = this.calculateFocusScoreRelative(); // Use RELATIVE power\n    const metric3 = this.calculateAlphaPeak();\n\n    const totalScore = metric1.score + metric2.score + metric3.score;\n    console.log(`   Total: ${metric1.score} + ${metric2.score} + ${metric3.score} = ${totalScore}/3`);\n\n    return {\n      name: 'Creativity',\n      score: totalScore,\n      maxScore: 3,\n      classification: this.classifyScore(totalScore),\n      metrics: [\n        { name: 'Relaxation Score', ...metric1 },\n        { name: 'Focus Score (Theta:Beta)', ...metric2 },\n        { name: 'Alpha Peak', ...metric3 }\n      ]\n    };\n  }\n}\n\nmodule.exports = AlgorithmCalculator;\n","structuredPatch":[{"oldStart":738,"oldLines":9,"newStart":738,"newLines":11,"lines":["       maxScore: 3,","       classification: this.classifyScore(totalScore),","       metrics: [","-        { name: 'Arousal Score', ...metric1, score: invertedScore1 },","-        { name: 'Relaxation Score', ...metric2, score: invertedScore2 },","-        { name: 'Excessive Delta', ...metric3, score: invertedScore3 }","+        // Display original scores (1 = normal, 0 = abnormal) for individual metrics","+        // But use inverted scores for overall parameter calculation","+        { name: 'Arousal Score', ...metric1, score: metric1.score },","+        { name: 'Relaxation Score', ...metric2, score: metric2.score },","+        { name: 'Excessive Delta', ...metric3, score: metric3.score }","       ]","     };","   }"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"56163660-fde7-4daf-bed6-ea18256985e2","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01SRyqqfsEYMXXtpSZPxmZR4","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Perfect! ‡§Ö‡§¨ build ‡§ï‡§∞‡§ï‡•á test ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§","signature":"EuwBCkYIChgCKkAG1Gi9V1Z+xyVTiDlCvUEAdEZNd3xe2xqeRUVw4ryZrsMovupGeOYg9ZSRkjvgVMEC3odLauAlii/oKynTdeGREgyFdwIiL4tEtVDwXjAaDO+uxTMUSr0jssOAhiIwcsCec+a9t1MJbPECqRuvGnLgY9LFhkIHoCYoeyxG47gzRkMT+KZRy+CM/mz3WkBIKlSfOCtoNsVnqTaJOJZGzw+LKkU7QOIPmvjchBiiQMoBSAh0yFToEl0D7oQvyOmBmLpoBDxIyjzCbU8s8oWPFWX0Ou0EOyvn91HQj1QdANjJsz00Zf8YAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1100,"cache_read_input_tokens":83784,"cache_creation":{"ephemeral_5m_input_tokens":1100,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAKv2sDxm1jtBqPH3vH","type":"assistant","uuid":"3eb12662-5381-4cbd-a754-64ed79e2d76b","timestamp":"2025-12-18T12:35:20.979Z"}
{"parentUuid":"3eb12662-5381-4cbd-a754-64ed79e2d76b","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01SRyqqfsEYMXXtpSZPxmZR4","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01D4p9UQU6UokVWAXeZJsGzz","name":"TodoWrite","input":{"todos":[{"content":"Find where metric scores are being calculated incorrectly","status":"completed","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Stress metrics to show original scores instead of inverted","status":"completed","activeForm":"Fixing Stress metric display scores"},{"content":"Fix Burnout & Fatigue metrics similarly","status":"completed","activeForm":"Fixing Burnout metric display scores"},{"content":"Build and test the corrected calculations","status":"in_progress","activeForm":"Building and testing corrections"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1100,"cache_read_input_tokens":83784,"cache_creation":{"ephemeral_5m_input_tokens":1100,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAKv2sDxm1jtBqPH3vH","type":"assistant","uuid":"50a50d30-8a25-45d5-9b27-2439ba6ec9c6","timestamp":"2025-12-18T12:35:24.301Z"}
{"parentUuid":"50a50d30-8a25-45d5-9b27-2439ba6ec9c6","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01SRyqqfsEYMXXtpSZPxmZR4","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01JYYmc8L2oV8wis76HUUYt1","name":"Bash","input":{"command":"cd \"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\" && npm run build 2>&1 | tail -25","description":"Build to verify server-side changes","timeout":60000}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1100,"cache_read_input_tokens":83784,"cache_creation":{"ephemeral_5m_input_tokens":1100,"ephemeral_1h_input_tokens":0},"output_tokens":325,"service_tier":"standard"}},"requestId":"req_011CWEAKv2sDxm1jtBqPH3vH","type":"assistant","uuid":"4e19617d-4659-4ea0-8e8a-119a10dfb2d9","timestamp":"2025-12-18T12:35:25.413Z"}
{"parentUuid":"4e19617d-4659-4ea0-8e8a-119a10dfb2d9","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01D4p9UQU6UokVWAXeZJsGzz","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"05db4d3f-7308-4a6d-9421-8a8337d8c2b0","timestamp":"2025-12-18T12:35:25.548Z","toolUseResult":{"oldTodos":[{"content":"Find where metric scores are being calculated incorrectly","status":"completed","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Stress metrics to show original scores instead of inverted","status":"in_progress","activeForm":"Fixing Stress metric display scores"},{"content":"Fix Burnout & Fatigue metrics similarly","status":"pending","activeForm":"Fixing Burnout metric display scores"},{"content":"Test the corrected calculations","status":"pending","activeForm":"Testing corrected calculations"}],"newTodos":[{"content":"Find where metric scores are being calculated incorrectly","status":"completed","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Stress metrics to show original scores instead of inverted","status":"completed","activeForm":"Fixing Stress metric display scores"},{"content":"Fix Burnout & Fatigue metrics similarly","status":"completed","activeForm":"Fixing Burnout metric display scores"},{"content":"Build and test the corrected calculations","status":"in_progress","activeForm":"Building and testing corrections"}]}}
{"parentUuid":"05db4d3f-7308-4a6d-9421-8a8337d8c2b0","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01JYYmc8L2oV8wis76HUUYt1","type":"tool_result","content":"\u001b[36mvite v4.5.14 \u001b[32mbuilding for production...\u001b[36m\u001b[39m\ntransforming...\n[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`\n\u001b[32m‚úì\u001b[39m 1619 modules transformed.\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminAssignmentModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AgreementManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AlgorithmDataProcessor.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AnalyticsDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/BrandingConfiguration.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/ClinicManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PaymentHistory.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PersonalizedCarePlan.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/SuperAdminPanel.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/auth/ForgotPasswordForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/SubscriptionManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/contexts/AuthContext.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/alertService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseBackupService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/neuroSenseService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/paymentService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/razorpayService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/storageService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/layout/ProfileModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/emailService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, dynamic import will not move module into another chunk.\n\u001b[39m\nrendering chunks...\ncomputing gzip size...\n\u001b[2mdist/\u001b[22m\u001b[32mindex.html                 \u001b[39m\u001b[1m\u001b[2m    1.68 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:   0.80 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[35massets/index-2324ea4d.css  \u001b[39m\u001b[1m\u001b[2m  122.98 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:  17.74 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[36massets/index-7f69d9b8.js   \u001b[39m\u001b[1m\u001b[33m2,667.09 kB\u001b[39m\u001b[22m\u001b[2m ‚îÇ gzip: 477.32 kB\u001b[22m\u001b[2m ‚îÇ map: 5,769.85 kB\u001b[22m\n\u001b[33m\n(!) Some chunks are larger than 500 kBs after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\u001b[39m\n\u001b[32m‚úì built in 11.33s\u001b[39m","is_error":false}]},"uuid":"2f7237b3-2ded-4a56-9bae-8090a37b6f29","timestamp":"2025-12-18T12:35:43.757Z","toolUseResult":{"stdout":"\u001b[36mvite v4.5.14 \u001b[32mbuilding for production...\u001b[36m\u001b[39m\ntransforming...\n[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`\n\u001b[32m‚úì\u001b[39m 1619 modules transformed.\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminAssignmentModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdminDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AgreementManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AlgorithmDataProcessor.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/AnalyticsDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/BrandingConfiguration.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/ClinicManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PaymentHistory.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PersonalizedCarePlan.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/SuperAdminPanel.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/auth/ForgotPasswordForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/AdvancedAnalytics.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/SubscriptionManager.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/contexts/AuthContext.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/alertService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/databaseBackupService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/neuroSenseService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/paymentService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/razorpayService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/storageService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ReportViewer.jsx but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PatientReports.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/ClinicalReportForm.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/PatientManagement.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/clinic/UploadReportModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/layout/ProfileModal.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/patient/PatientDashboard.jsx, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/reportWorkflowService.js, dynamic import will not move module into another chunk.\n\u001b[39m\n\u001b[1m\u001b[33m[plugin:vite:reporter]\u001b[39m\u001b[22m \u001b[33m\n(!) D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/emailService.js is dynamically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js, D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/services/authService.js but also statically imported by D:/Neuro360-10-12-2025-15.47pm/Neuro360/src/components/admin/PendingClinicsNotification.jsx, dynamic import will not move module into another chunk.\n\u001b[39m\nrendering chunks...\ncomputing gzip size...\n\u001b[2mdist/\u001b[22m\u001b[32mindex.html                 \u001b[39m\u001b[1m\u001b[2m    1.68 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:   0.80 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[35massets/index-2324ea4d.css  \u001b[39m\u001b[1m\u001b[2m  122.98 kB\u001b[22m\u001b[1m\u001b[22m\u001b[2m ‚îÇ gzip:  17.74 kB\u001b[22m\n\u001b[2mdist/\u001b[22m\u001b[36massets/index-7f69d9b8.js   \u001b[39m\u001b[1m\u001b[33m2,667.09 kB\u001b[39m\u001b[22m\u001b[2m ‚îÇ gzip: 477.32 kB\u001b[22m\u001b[2m ‚îÇ map: 5,769.85 kB\u001b[22m\n\u001b[33m\n(!) Some chunks are larger than 500 kBs after minification. Consider:\n- Using dynamic import() to code-split the application\n- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks\n- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\u001b[39m\n\u001b[32m‚úì built in 11.33s\u001b[39m\r","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"2f7237b3-2ded-4a56-9bae-8090a37b6f29","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_014g8XdpB4SutYsCSSCKF39Y","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Build successful! ‡§Ö‡§¨ ‡§Æ‡•Å‡§ù‡•á verify ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ ‡§ï‡§ø ‡§Ø‡§π change ‡§∏‡§π‡•Ä direction ‡§Æ‡•á‡§Ç ‡§π‡•à‡•§ ‡§≤‡•á‡§ï‡§ø‡§® ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•ã - ‡§Ø‡§π server-side code ‡§π‡•à ‡§ú‡•ã Node.js ‡§Æ‡•á‡§Ç run ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§ Frontend build ‡§Æ‡•á‡§Ç ‡§Ø‡§π directly include ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§ó‡§æ‡•§\n\n‡§Æ‡•Å‡§ù‡•á ‡§è‡§ï ‡§¨‡§æ‡§§ ‡§î‡§∞ check ‡§ï‡§∞‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è - ‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π server-side code ‡§π‡•à ‡§Ø‡§æ client-side? Let me check the file path again: `server\\services\\algorithmCalculator.js` - ‡§π‡§æ‡§Ç, ‡§Ø‡§π server folder ‡§Æ‡•á‡§Ç ‡§π‡•à‡•§\n\n‡§≤‡•á‡§ï‡§ø‡§® ‡§á‡§∏ application ‡§ï‡•ã ‡§¶‡•á‡§ñ‡§ï‡§∞ ‡§≤‡§ó‡§§‡§æ ‡§π‡•à ‡§ï‡§ø ‡§Ø‡§π local storage based application ‡§π‡•à ‡§ú‡•ã client-side ‡§π‡•Ä ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§ï‡§∞ ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§§‡•ã ‡§∂‡§æ‡§Ø‡§¶ ‡§Ø‡§π algorithm calculator client-side ‡§≠‡•Ä imported ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•ã‡§ó‡§æ‡•§\n\nLet me check if this file is being used on client-side.","signature":"EvAICkYIChgCKkAk2K3qa8IY+LeI5KvZAujkD9zDw4vesAZ3nxiOtgord/y+b+CXECnrADfd9JgnrVsZG8RIm1VhP2Zj/g60qghyEgyFfFdbfznzXuunOWkaDFmFJFCvNIU9+5I77CIwndx/Unx/DbCBA/2dtlqVT91SZBJeI3+vKuh0roqJhkwT45qEO6ayRCdqrzI8cSUfKtcHFRQ3z90GXN3Xlnc/vlBvQE7GRANjNBh34eZMy5qEXXuj571y9L1iIy6zc7FbiG4fT8EDeomqq4ZQuRnnrMPlKnG0KfJYxlrWYaETkM/TBtk+9Q6neBisZyoYT/kmDpqLJTO8SAn6PJ0ygd1lg1Bd5MS6p7qYoPtLakFu7EDhmcgok73FrWT4OeGAkylVlJIrmwmqgpdxJqAXBJS+LQwy3C828AMDkvj3CnqvmXQee/0uBcC9E0KmLWlvw6uFIo9HZcuy9aE0syAEIrgvOlf33bcKIe9rqZVmsfY1GB/9zIpgpqU13ChxPV3t3YbeUKAKyldXWILM15qrIifDBG0LyxhnkQJ+Ch9IfiLC0VFobSmbT0oTva+GPVVyYTXnjjyDSkif1xHH3wLA0dM6hinB/UAr9rVlVrfLu1eutmo/KvSmfmrcEobfl0fir0Q2ccu3PsVjkUwOWZpu7n7nE+wqWlzk9va2Ptc9ovYoytPYWbNKrlHH+H2lW5+OfCBTClL0sraxw6HP/rQgqADI4wEEm9I+xRYfEpV19OTJGd3K1Reb+yiOmlEEn8w7k5dCWF59Y4Ld1wD2uTUe495EWGtE0/d/szx9iKcbGv7UvEX0yTYONRJt0zZvJlztQDmFS8JJAWhbmHB73VsCoPh02qdREZZ2GICtKdoB7X2fFiPw4rgvWWl6gLycMDJ9cLBwk6b7KjA6/kvvctITiVlZ0jVZmL9vM/1gJE+/EFF3vxntClp/HMX+JXmZ5u3AsYb7ttZIHIuw5yD6dHnRU1k+PzTSkgBnoeo6q2Tpdeud1yUJiUZqzCRYAWwL9xIcZB3mneb5g6CGTZmJTvRmzagBg2EOnoTO+r50gC/20EzSa1eZWiBllvu80n93E6IOIIqxZcPECd4iONUK8d/EVytKQeHUeO9BV/iSm+UJkpea7KVQ+qAggjUcQ5hGeshYXMDKvFP/4gUhHzS5RyaBily0udOTgjSkJlJ+L7L/KU/w32Scts9lFqVkn4GmPrWkZAb+9VYiY998vDdR/CjDn5o4sZcrLL6+bE2tgSRifVRwjNnqIm3rnGWMDJr5SrXzbJIg4bq3FQOcVH+iEat7jHLg6UJ4ZrxouKPpfss1udE5u6zAfh/f6ORx8yhOGHEmJuTQm923Wm72G8s18qL7TpHtTwNO3wvf66Hl2vmwJZwLeBqqf1NdBNnX5PedEr+JBIEUPHw7E1CE+RzANziTwiFLBG4yKKDWv6wBYgcbXcL6eBY+3sDaajUvczSqESIQj4VO8yxLEGPZX28gsjbTiWeuhIOYUqgF88l2WosYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":2763,"cache_read_input_tokens":84884,"cache_creation":{"ephemeral_5m_input_tokens":2763,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAMwAdqvxobvz4JM3LF","type":"assistant","uuid":"aab03b32-f8aa-4711-aaf6-6daa92209a6c","timestamp":"2025-12-18T12:35:53.065Z"}
{"parentUuid":"aab03b32-f8aa-4711-aaf6-6daa92209a6c","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_014g8XdpB4SutYsCSSCKF39Y","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01J3Nz73e9wzBZef5kKMp9nc","name":"Grep","input":{"pattern":"algorithmCalculator","glob":"src/**/*.{js,jsx}","output_mode":"files_with_matches"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":14,"cache_creation_input_tokens":2763,"cache_read_input_tokens":84884,"cache_creation":{"ephemeral_5m_input_tokens":2763,"ephemeral_1h_input_tokens":0},"output_tokens":332,"service_tier":"standard"}},"requestId":"req_011CWEAMwAdqvxobvz4JM3LF","type":"assistant","uuid":"367cbf8a-52c9-4a45-8040-2223b02cca2e","timestamp":"2025-12-18T12:35:54.224Z"}
{"parentUuid":"367cbf8a-52c9-4a45-8040-2223b02cca2e","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01J3Nz73e9wzBZef5kKMp9nc","type":"tool_result","content":"No files found"}]},"uuid":"88909260-c834-423e-a0a1-1bf62948844a","timestamp":"2025-12-18T12:35:56.192Z","toolUseResult":{"mode":"files_with_matches","filenames":[],"numFiles":0}}
{"parentUuid":"88909260-c834-423e-a0a1-1bf62948844a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_016P8saeGNkapsHC31bPhFSP","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"Hmm, client-side ‡§Æ‡•á‡§Ç algorithmCalculator import ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∞‡§π‡§æ‡•§ Let me check AlgorithmDataProcessor component ‡§Æ‡•á‡§Ç ‡§ï‡•à‡§∏‡•á calculation ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§","signature":"EusCCkYIChgCKkAxEpXWdkMkRNdIDAarxTyZidhqhnXwOP/X28RhD0+JQHkDe1xhQtP60fGcdDKiM5PX4SXbiy4A+YK1OCjQr76aEgzS0GI10+NcUsefVvoaDAw9T++QDqvZ/ramuiIwFxtSOf8tmMhLaiHwSu1Px1VJ+ae/AKfMm0dO9DxbCeTkUtMQ0H02n+j0z6j5mQAFKtIBKfltoB8actWFizxjUwLtU9peUa4VfB0Ug1Zj3bhEUWreocTpril1yJZyaKEj8XKde7Y0gdbVqR+v2fePsTmyAU/vDBtagQ6f+YXAFDGAarQpt7oOcQz2fCOjGTd81EWtf/hBZikPxVUE8NtaWlWr2q7jioeY+4aR4IyQNE+xYeSrVVKQmokfLV9DGaKNGWf17OCOB/fogsbR/1hFONH9hrIR2lioYJFH2R6z1dQ1ofUtqKzrOF2AffxDaB+FplLRZee6jaMdPVVCQ6s7xYGs3x4SGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":354,"cache_read_input_tokens":87647,"cache_creation":{"ephemeral_5m_input_tokens":354,"ephemeral_1h_input_tokens":0},"output_tokens":5,"service_tier":"standard"}},"requestId":"req_011CWEANr5ab6Grc4ymLvBm5","type":"assistant","uuid":"0a539660-157c-4788-8091-a4cbf6188c19","timestamp":"2025-12-18T12:36:00.723Z"}
{"parentUuid":"0a539660-157c-4788-8091-a4cbf6188c19","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_016P8saeGNkapsHC31bPhFSP","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01SVEApsidGt6RSubEftuyfT","name":"Grep","input":{"pattern":"calculateStress|processAlgorithm|algorithm.*calculate","path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","output_mode":"content","-n":true,"-C":3,"-i":true}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":354,"cache_read_input_tokens":87647,"cache_creation":{"ephemeral_5m_input_tokens":354,"ephemeral_1h_input_tokens":0},"output_tokens":243,"service_tier":"standard"}},"requestId":"req_011CWEANr5ab6Grc4ymLvBm5","type":"assistant","uuid":"a64b964a-d490-423f-a3ec-e2c40341049a","timestamp":"2025-12-18T12:36:02.818Z"}
{"parentUuid":"a64b964a-d490-423f-a3ec-e2c40341049a","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01SVEApsidGt6RSubEftuyfT","type":"tool_result","content":"No matches found"}]},"uuid":"152fb262-6c9b-4bd1-a330-e39a179e4b43","timestamp":"2025-12-18T12:36:13.489Z","toolUseResult":{"mode":"content","numFiles":0,"filenames":[],"content":"","numLines":0}}
{"parentUuid":"152fb262-6c9b-4bd1-a330-e39a179e4b43","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01K4deEJkMHXXU4ik7c7c9AY","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"‡§Æ‡•Å‡§ù‡•á AlgorithmDataProcessor component ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§ñ‡§®‡§æ ‡§π‡•ã‡§ó‡§æ ‡§ï‡§ø ‡§µ‡§π algorithm ‡§ï‡•ã ‡§ï‡•à‡§∏‡•á call ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ Let me check ‡§ï‡§ø ‡§Ø‡§π API call ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à ‡§Ø‡§æ locally import ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à‡•§","signature":"ErYDCkYIChgCKkDGSlF4AKAaZxZevgRGU/Z7AyoXYjaVL/c93z92p18XtuGPCiBVvY9Mxwvcr0vJzRk0s+23W9F/N6Z3JEcyFDqtEgxnTrfrgzdCCyZud2UaDICaGBfR+Qhl6YOMACIwGObja9lnTuQZu9fDNaMahxKYjug0v4HCFbDpvdDmacg3ANCBG+yHQggxxJyEuEAkKp0CUdmLyNOsABBR8D9c0mgJfLfFis8N3TU0yAazuloFp1EhrqWQsLez/cEms8fNdjxG6EILYa9V8bYbZAOStrpSlBSwKjaWFtzwgwkPhThj8biJo/m83BOwiNW7hALiQ/jfMZAk2B/ULB8kZZ7JO0jsKEAz3sTIh1q//uGyJenD4c2zXUXXI7bFVACFnHN8L0IjCgcFWRRVmAPWZk6AVJ+ardbTxh0hjZLFH6vVEaNs3R1c7SePyjuVGd3AcJR3jZppxp+XYKl2+eMLwvmEMpAZ9d+GRmPSYSI+QWIsFNHSQjaVuuPyQzWgErWs70x+fcE39Nfd/yTLtnktbt0cP1iOy2xz4QefsfX2VEuo5Ekix85pe+jcwd1ucqEkifASGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":265,"cache_read_input_tokens":88001,"cache_creation":{"ephemeral_5m_input_tokens":265,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEAQA84V2Ni7E9ez3BFY","type":"assistant","uuid":"3c9273e2-db34-4051-9d83-40f3547647be","timestamp":"2025-12-18T12:36:19.138Z"}
{"parentUuid":"3c9273e2-db34-4051-9d83-40f3547647be","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01K4deEJkMHXXU4ik7c7c9AY","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01DpUKcMwRejkdgVtUMfvBQL","name":"Grep","input":{"pattern":"import.*from|fetch|axios|api","path":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360\\src\\components\\admin\\AlgorithmDataProcessor.jsx","output_mode":"content","-n":true,"head_limit":50}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":265,"cache_read_input_tokens":88001,"cache_creation":{"ephemeral_5m_input_tokens":265,"ephemeral_1h_input_tokens":0},"output_tokens":237,"service_tier":"standard"}},"requestId":"req_011CWEAQA84V2Ni7E9ez3BFY","type":"assistant","uuid":"0b163c73-7e5f-405e-8c83-cea83033df59","timestamp":"2025-12-18T12:36:20.734Z"}
{"parentUuid":"0b163c73-7e5f-405e-8c83-cea83033df59","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01DpUKcMwRejkdgVtUMfvBQL","type":"tool_result","content":"1:import React, { useState, useEffect } from 'react';\r\n2:import { Upload, Play, Download, FileText, CheckCircle, Activity, User, Building2, Calendar, History, X, ArrowLeft, Search, Filter } from 'lucide-react';\r\n3:import DatabaseService from '../../services/databaseService';\r\n4:import toast from 'react-hot-toast';\r\n118:        // Step 1: Try to fetch PDFs from Supabase bucket\r\n120:          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n121:          const response = await fetch(`${apiUrl}/qeeg/supabase-pdfs`);\r\n184:          console.log('‚ö†Ô∏è Could not fetch from Supabase, trying local storage...');\r\n197:            const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n198:            const backendBaseUrl = apiUrl.replace('/api', '');\r\n202:            const response = await fetch(testUrl, { method: 'HEAD' });\r\n390:      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n396:        response = await fetch(`${apiUrl}/qeeg/process`, {\r\n402:      } catch (fetchError) {\r\n404:        if (fetchError.name === 'AbortError') {\r\n408:        if (fetchError.message.includes('Failed to fetch') || fetchError.message.includes('fetch')) {\r\n411:        throw fetchError;\r\n866:      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n867:      const pdfEndpoint = `${apiUrl}/qeeg/generate-pdf`;\r\n876:      const response = await fetch(pdfEndpoint, {\r\n892:        if (error.message.includes('Failed to fetch')) {\r\n947:      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\r\n973:      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\r\n974:      const backendBaseUrl = apiUrl.replace('/api', ''); // Remove /api to get base URL\r\n1011:      // For Supabase URLs, use fetch method\r\n1012:      console.log('üì• Using fetch method for Supabase URL');\r\n1014:      const response = await fetch(fullPdfUrl);\r\n1032:      console.log('‚úÖ PDF fetched successfully, size:', (blob.size / 1024).toFixed(2), 'KB');\r\n1063:      } else if (error.message.includes('Failed to fetch')) {\r\n1901:                          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n1902:                          const backendBaseUrl = apiUrl.replace('/api', '');\r\n1908:                          const response = await fetch(fullPdfUrl);\r\n1909:                          if (!response.ok) throw new Error('Failed to fetch PDF');\n\n[Showing results with pagination = limit: 50, offset: 0]"}]},"uuid":"35708ef2-c7c3-4c14-b696-c9784b89e459","timestamp":"2025-12-18T12:36:27.880Z","toolUseResult":{"mode":"content","numFiles":0,"filenames":[],"content":"1:import React, { useState, useEffect } from 'react';\r\n2:import { Upload, Play, Download, FileText, CheckCircle, Activity, User, Building2, Calendar, History, X, ArrowLeft, Search, Filter } from 'lucide-react';\r\n3:import DatabaseService from '../../services/databaseService';\r\n4:import toast from 'react-hot-toast';\r\n118:        // Step 1: Try to fetch PDFs from Supabase bucket\r\n120:          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n121:          const response = await fetch(`${apiUrl}/qeeg/supabase-pdfs`);\r\n184:          console.log('‚ö†Ô∏è Could not fetch from Supabase, trying local storage...');\r\n197:            const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n198:            const backendBaseUrl = apiUrl.replace('/api', '');\r\n202:            const response = await fetch(testUrl, { method: 'HEAD' });\r\n390:      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n396:        response = await fetch(`${apiUrl}/qeeg/process`, {\r\n402:      } catch (fetchError) {\r\n404:        if (fetchError.name === 'AbortError') {\r\n408:        if (fetchError.message.includes('Failed to fetch') || fetchError.message.includes('fetch')) {\r\n411:        throw fetchError;\r\n866:      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n867:      const pdfEndpoint = `${apiUrl}/qeeg/generate-pdf`;\r\n876:      const response = await fetch(pdfEndpoint, {\r\n892:        if (error.message.includes('Failed to fetch')) {\r\n947:      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\r\n973:      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';\r\n974:      const backendBaseUrl = apiUrl.replace('/api', ''); // Remove /api to get base URL\r\n1011:      // For Supabase URLs, use fetch method\r\n1012:      console.log('üì• Using fetch method for Supabase URL');\r\n1014:      const response = await fetch(fullPdfUrl);\r\n1032:      console.log('‚úÖ PDF fetched successfully, size:', (blob.size / 1024).toFixed(2), 'KB');\r\n1063:      } else if (error.message.includes('Failed to fetch')) {\r\n1901:                          const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\r\n1902:                          const backendBaseUrl = apiUrl.replace('/api', '');\r\n1908:                          const response = await fetch(fullPdfUrl);\r\n1909:                          if (!response.ok) throw new Error('Failed to fetch PDF');","numLines":33,"appliedLimit":50}}
{"parentUuid":"35708ef2-c7c3-4c14-b696-c9784b89e459","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Huys5Ca4BbidcZGFrJfhPh","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"‡§¶‡•á‡§ñ‡§æ! Line 396 ‡§Æ‡•á‡§Ç `fetch(\\`${apiUrl}/qeeg/process\\`, ...)` call ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§§‡•ã ‡§Ø‡§π backend API ‡§ï‡•ã call ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à ‡§ú‡•ã server-side algorithm calculate ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§\n\n‡§§‡•ã ‡§Æ‡•á‡§∞‡§æ fix ‡§∏‡§π‡•Ä ‡§π‡•à! Server-side code ‡§Æ‡•á‡§Ç ‡§Æ‡•à‡§Ç‡§®‡•á individual metric scores ‡§ï‡•ã original ‡§∞‡§ñ‡§æ ‡§π‡•à, ‡§î‡§∞ overall parameter score ‡§ï‡•á ‡§≤‡§ø‡§è inverted scores use ‡§ï‡•Ä ‡§π‡•à‡§Ç‡•§\n\n‡§Ö‡§¨ backend server ‡§ï‡•ã restart ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ ‡§§‡§æ‡§ï‡§ø changes reflect ‡§π‡•ã‡§Ç‡•§ ‡§≤‡•á‡§ï‡§ø‡§® ‡§ö‡•Ç‡§Ç‡§ï‡§ø ‡§Ø‡§π development environment ‡§Æ‡•á‡§Ç ‡§π‡•à, user ‡§ï‡•ã manually restart ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§\n\n‡§Æ‡•Å‡§ù‡•á todo update ‡§ï‡§∞‡§ï‡•á summary ‡§¶‡•á‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§","signature":"ErcHCkYIChgCKkC55zH0zQ4MLcSUx34Ap/ju1bAqFjlyo3+4UcqTOZSoS59rFcD6R3Qo7/V1Hen1Y2MAb2NWfExZu8sR2eArmmN8EgxYXOToUv8Xd3JYdTwaDOGE4kpPhZvPeMBEuCIwPvBBcR0KLFKCyfWOa0VWv1cpmqzkEdeuZxZ36a4ZyGDf5+KH4G1Ty1PZsXI6G3/WKp4GgQXUyREmEQHQxpa3p09BU5STat4CnVyf8kliHnGhvADathC0XiRsfYa+qLAUnltBk4tNNMU7FOuga2AEAhneguG+TxpO60cK7XmOXy49o3dEZ3pFo7xQzBZAyEsQyksr0LwoLcTBEG0Irp/7h4YZyDWtyinaqkA9KZFmVbOqQO6nf/I8gedMt3FeqiZhVf1ZDOL9XVumQml8ye/CY36TV8hA/gyH4D4OC2rtAQqrUIWJYrAKF+lGJ23lEuJ/0Rg40tPpE5GAmUoKB/fvTyC04IzdYInqSZsYwU4U8AR/HyuGTkIcWKcasLcKva4QSRPjoXOTytjTgYRDeb9aZwk+WVj44bO0Nn1VziXMhjJcdZMdLwf0d3E50YdAUlpHE3CmYpY/4mxT0eW9k+f6ijLhrKkvFTpjBGZELSk4R/uzaM4JXS6Q/6UU3KwHMKHEevryKskxqKWsIW/34kFzOzJSbDv2s/QsoZCwaFEzfwHEeWw34hG5hZj8XhsCsp0JwZRH48gEOceQNMBMjV1aZM0lFhI3a+L7WwH34RKfx2IxWNjtBIWxZWQrWzDxDSaUQwy11OSl45fEXd+tFUk34pbeRm+frDvpT1cagLWKPcg+ytqllLllfFs6PB/PDpgsrWhZwBVzT5fKSP7vEU8eyJCxv+ThGxIftnu6+V/U3q+nZaF1HP1WwjUsboGjHE/V71uLXwPAwhXJ8pJs2TvvvSKm/N/GqoOEyInyOBpEr6FSvInjOwUfVRX4qGjq/oWwdLif9b3HPmXLENgcxzqmLeqb9/Fn+TATihKp6GIbaj7rfEqqqu6ru0uYeR1liC/hz8gmHNE+zZ3iit0/e4tzaujNqfDN299NY+h+6EeBlDnQhvwbsOaM1WAhZ80zPR2tULXQ6EA2ISSfbNhk8OrTcF0p5ygJpFRC+4aJbwzOseu3fKzepuJZqSLmubo5C2KW2tRRoEMJ6QL+pW9IlN72vcM4xj1gokVEKxj7Xhv90zwCVQg4DFyV17rnkKJ/iPZo/tKlUmTARO2sDB0K/C9eM3y0n6epubM3jIF6MZMR+FbHGAE="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1043,"cache_read_input_tokens":88266,"cache_creation":{"ephemeral_5m_input_tokens":1043,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEARC7tUzN6QEywGRHLg","type":"assistant","uuid":"fa709433-5fc4-403e-828a-0ec5db3c5781","timestamp":"2025-12-18T12:36:35.822Z"}
{"parentUuid":"fa709433-5fc4-403e-828a-0ec5db3c5781","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Huys5Ca4BbidcZGFrJfhPh","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! ‡§Æ‡•à‡§Ç‡§®‡•á ‡§¶‡•á‡§ñ ‡§≤‡§ø‡§Ø‡§æ ‡§ï‡§ø ‡§Ø‡§π backend API (`/qeeg/process`) ‡§ï‡•ã call ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à ‡§ú‡•ã server-side algorithm calculator use ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1043,"cache_read_input_tokens":88266,"cache_creation":{"ephemeral_5m_input_tokens":1043,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEARC7tUzN6QEywGRHLg","type":"assistant","uuid":"f4f4ca84-0ff7-4bb0-a947-517365cfcf54","timestamp":"2025-12-18T12:36:36.782Z"}
{"parentUuid":"f4f4ca84-0ff7-4bb0-a947-517365cfcf54","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Huys5Ca4BbidcZGFrJfhPh","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_019MmowMrx1TBozq3RC7XXWR","name":"TodoWrite","input":{"todos":[{"content":"Find where metric scores are being calculated incorrectly","status":"completed","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Stress metrics to show original scores instead of inverted","status":"completed","activeForm":"Fixing Stress metric display scores"},{"content":"Fix Burnout & Fatigue metrics similarly","status":"completed","activeForm":"Fixing Burnout metric display scores"},{"content":"Build and test the corrected calculations","status":"completed","activeForm":"Building and testing corrections"}]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":1043,"cache_read_input_tokens":88266,"cache_creation":{"ephemeral_5m_input_tokens":1043,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CWEARC7tUzN6QEywGRHLg","type":"assistant","uuid":"9c58e829-3f60-4ac5-851d-ba0f0e987d4f","timestamp":"2025-12-18T12:36:39.905Z"}
{"parentUuid":"9c58e829-3f60-4ac5-851d-ba0f0e987d4f","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_019MmowMrx1TBozq3RC7XXWR","type":"tool_result","content":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}]},"uuid":"f1373f1a-afed-4130-9766-8378a436bcf7","timestamp":"2025-12-18T12:36:40.123Z","toolUseResult":{"oldTodos":[{"content":"Find where metric scores are being calculated incorrectly","status":"completed","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Stress metrics to show original scores instead of inverted","status":"completed","activeForm":"Fixing Stress metric display scores"},{"content":"Fix Burnout & Fatigue metrics similarly","status":"completed","activeForm":"Fixing Burnout metric display scores"},{"content":"Build and test the corrected calculations","status":"in_progress","activeForm":"Building and testing corrections"}],"newTodos":[{"content":"Find where metric scores are being calculated incorrectly","status":"completed","activeForm":"Finding incorrect score calculation logic"},{"content":"Fix Stress metrics to show original scores instead of inverted","status":"completed","activeForm":"Fixing Stress metric display scores"},{"content":"Fix Burnout & Fatigue metrics similarly","status":"completed","activeForm":"Fixing Burnout metric display scores"},{"content":"Build and test the corrected calculations","status":"completed","activeForm":"Building and testing corrections"}]}}
{"parentUuid":"f1373f1a-afed-4130-9766-8378a436bcf7","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Npy42CcZSqoWNCTn44fDNf","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"‡§Ö‡§¨ ‡§Æ‡•Å‡§ù‡•á server restart ‡§ï‡•á instructions ‡§¶‡•á‡§®‡•á ‡§π‡•ã‡§Ç‡§ó‡•á‡•§","signature":"Ev4BCkYIChgCKkDVrvM0Yt5WbThsdqeTU/FXZDvOrOBh6+jd4jFYgAEhZDUMBk89MI623zi0j2uoq3QR8mAX9S1Qr+pqNPOHLfF5EgzcgeSQ1mNIBXk+hLkaDCkyw5+9M/y6OqZgqyIwyd8z8N9t/eQGJnZHZzabyh87ccqlI2knqvKIVq7Vxij85STTFRw0wiJGVSGwY2SeKmafG2bp0KFX0OlPf2CRZvLpAyAoFV7UG0jMPkv8Pc9Irr8ulq5NGOCex6oZAnww5ev6umNbpWFySV3bbFTHFc1tCWI/sQlxUQfBmMTekHA2iIJoqDthbinGMsaOuSNREDxbNsI4suEYAQ=="}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":462,"cache_read_input_tokens":89309,"cache_creation":{"ephemeral_5m_input_tokens":462,"ephemeral_1h_input_tokens":0},"output_tokens":7,"service_tier":"standard"}},"requestId":"req_011CWEAS4Kro2eTvn5bsrqvZ","type":"assistant","uuid":"86169cce-0ab4-4476-91ee-6edfa61893a4","timestamp":"2025-12-18T12:36:43.131Z"}
{"parentUuid":"86169cce-0ab4-4476-91ee-6edfa61893a4","isSidechain":false,"userType":"external","cwd":"D:\\Neuro360-10-12-2025-15.47pm\\Neuro360","sessionId":"53da7c37-d346-4650-8477-8f1e7805e70f","version":"2.0.33","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Npy42CcZSqoWNCTn44fDNf","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! ‚úÖ ‡§∏‡§≠‡•Ä changes successfully implement ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§¨ ‡§Ü‡§™‡§ï‡•ã **backend server ‡§ï‡•ã restart** ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§\n\n## üéØ Complete Fix Summary\n\n### 1Ô∏è‚É£ **Frontend Color Indicators** (Already Done ‚úÖ)\n`src/components/admin/AlgorithmDataProcessor.jsx`\n- Stress & Burnout main cards: 1/3=GREEN, 2/3=YELLOW, 3/3=RED\n- Sub-parameters: 1/1=GREEN, 0/1=RED background\n\n### 2Ô∏è‚É£ **Backend Score Calculation** (Just Fixed ‚úÖ)\n`server/services/algorithmCalculator.js`\n\n**Changes Made:**\n\n**Line 673-677 (Stress):**\n```javascript\nmetrics: [\n  { name: 'Arousal Score', ...metric1, score: metric1.score },  // ‚úÖ Original score\n  { name: 'Relaxation Score', ...metric2, score: metric2.score },  // ‚úÖ Original score\n  { name: 'Regeneration (Alpha Modulation)', ...metric3, score: metric3.score }  // ‚úÖ Original score\n]\n```\n\n**Line 741-745 (Burnout & Fatigue):**\n```javascript\nmetrics: [\n  { name: 'Arousal Score', ...metric1, score: metric1.score },  // ‚úÖ Original score\n  { name: 'Relaxation Score', ...metric2, score: metric2.score },  // ‚úÖ Original score\n  { name: 'Excessive Delta', ...metric3, score: metric3.score }  // ‚úÖ Original score\n]\n```\n\n### üìã What This Fixes:\n\n**Before (Incorrect):**\n- Arousal Score value `0.59 < 1` (normal) ‚Üí Displayed as **0/1 RED** ‚ùå\n\n**After (Correct):**\n- Arousal Score value `0.59 < 1` (normal) ‚Üí Will display as **1/1 GREEN** ‚úÖ\n- Relaxation Score value `3.13 < 10` (abnormal) ‚Üí Will display as **0/1 RED** ‚úÖ\n- Regeneration value `11.4% < 30%` (abnormal) ‚Üí Will display as **0/1 RED** ‚úÖ\n\n### üöÄ Next Step - RESTART BACKEND SERVER:\n\n‡§Ö‡§ó‡§∞ ‡§Ü‡§™ server ‡§ö‡§≤‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç ‡§§‡•ã:\n```bash\n# Terminal ‡§Æ‡•á‡§Ç ‡§ú‡§π‡§æ‡§Ç server ‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à, Ctrl+C ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§´‡§ø‡§∞ restart ‡§ï‡§∞‡•á‡§Ç\nnpm run server\n# ‡§Ø‡§æ\nnode server/index.js\n```\n\nServer restart ‡§ï‡•á ‡§¨‡§æ‡§¶, ‡§Ö‡§¨ ‡§ú‡§¨ ‡§≠‡•Ä algorithm process ‡§π‡•ã‡§ó‡§æ, ‡§∏‡§π‡•Ä scores ‡§¶‡§ø‡§ñ‡•á‡§Ç‡§ó‡•á! üéâ"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":13,"cache_creation_input_tokens":462,"cache_read_input_tokens":89309,"cache_creation":{"ephemeral_5m_input_tokens":462,"ephemeral_1h_input_tokens":0},"output_tokens":724,"service_tier":"standard"}},"requestId":"req_011CWEAS4Kro2eTvn5bsrqvZ","type":"assistant","uuid":"3bba32ec-f1cb-4651-abb0-583f791ca306","timestamp":"2025-12-18T12:36:55.897Z"}
