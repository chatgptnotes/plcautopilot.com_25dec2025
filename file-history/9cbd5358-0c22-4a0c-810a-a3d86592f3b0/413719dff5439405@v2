import React, { useEffect, useRef, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import NavBar from '../components/NavBar';
import Footer from '../components/Footer';

const LBWProjectUpdates = () => {
  const navigate = useNavigate();
  const [visibleSections, setVisibleSections] = useState(new Set());
  const observerRefs = useRef([]);

  // Scroll-triggered animations for all sections
  useEffect(() => {
    const scrollObserver = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const sectionId = entry.target.getAttribute('data-scroll-section');
            if (sectionId) {
              setVisibleSections((prev) => new Set([...prev, sectionId]));
              entry.target.classList.add('animate-in');
            }
          }
        });
      },
      {
        threshold: 0.15,
        rootMargin: '0px 0px -50px 0px'
      }
    );

    // Observe all elements with data-scroll-section attribute
    const elements = document.querySelectorAll('[data-scroll-section]');
    elements.forEach((el) => {
      scrollObserver.observe(el);
      observerRefs.current.push(el);
    });

    return () => {
      observerRefs.current.forEach((el) => {
        if (el) scrollObserver.unobserve(el);
      });
    };
  }, []);

  const steps = [
    {
      number: 1,
      title: "Measure your brain activity",
      description: "Electrical signals generated in the brain reflect your current mental state. Neurosense uses proprietary technology to study and measure your brain activity",
      image: "/neuro1.mp4",
      isVideo: true
    },
    {
      number: 2,
      title: "Understand your brain",
      description: "NeuroSense scans and decodes your brain activity to give you deep, actionable insights into how your brain truly functions, your Brain Map, explained. The NeuroSense report analyzes 13 key brain health parameters, including attention, emotional regulation, connectivity, energy balance, flexibility, and executive control.",
      image: "/neuro2.mp4",
      isVideo: true
    },
    {
      number: 3,
      title: "Get a personalized brain training plan",
      description: "We create a personalized, holistic frequency modulation plan based on your brain activity, brain type, and goals, helping your brain reach its ultimate capacity.",
      image: "/neuro3.mp4",
      isVideo: true
    },
    {
      number: 4,
      title: "Practice for best results",
      description: "We turn your data into clear next steps. You implement, we adapt. Personalized insights, targeted changes, measurable gains. Get the exact changes in your brain, stay consistent, and watch progress stack tracked with metrics in the NeuroSense webapp.",
      image: "/neuro4.mp4",
      isVideo: true
    }
  ];

  return (
    <div className="min-h-screen bg-white">
      <NavBar />

      <style>{`
        /* Scroll-triggered animations */
        .scroll-fade-left {
          opacity: 0;
          transform: translateX(-100px) translateY(20px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scroll-fade-left.animate-in {
          opacity: 1;
          transform: translateX(0) translateY(0);
        }

        .scroll-fade-right {
          opacity: 0;
          transform: translateX(100px) translateY(20px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scroll-fade-right.animate-in {
          opacity: 1;
          transform: translateX(0) translateY(0);
        }

        .scroll-fade-up {
          opacity: 0;
          transform: translateY(60px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scroll-fade-up.animate-in {
          opacity: 1;
          transform: translateY(0);
        }

        .scroll-fade-down {
          opacity: 0;
          transform: translateY(-60px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scroll-fade-down.animate-in {
          opacity: 1;
          transform: translateY(0);
        }

        .card-slide-alternate:nth-child(odd) {
          opacity: 0;
          transform: translateX(-120px) translateY(40px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-slide-alternate:nth-child(even) {
          opacity: 0;
          transform: translateX(120px) translateY(40px);
          transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .animate-in .card-slide-alternate:nth-child(odd) {
          opacity: 1;
          transform: translateX(0) translateY(0);
        }

        .animate-in .card-slide-alternate:nth-child(even) {
          opacity: 1;
          transform: translateX(0) translateY(0);
        }

        .animate-in .card-slide-alternate:nth-child(1) {
          transition-delay: 0.15s;
        }

        .animate-in .card-slide-alternate:nth-child(2) {
          transition-delay: 0.3s;
        }

        .animate-in .card-slide-alternate:nth-child(3) {
          transition-delay: 0.45s;
        }

        .animate-in .card-slide-alternate:nth-child(4) {
          transition-delay: 0.6s;
        }
      `}</style>

      {/* Main Content */}
      <div className="pt-20">
      <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        {/* Title Section */}
        <div className="text-center mb-16 scroll-fade-down" data-scroll-section="title">
          <h1 className="text-4xl md:text-5xl font-normal text-gray-900 mb-4">
            A Step By Step Guide To Using <span className="text-[#F5D05D]">NeuroSense</span>
          </h1>
        </div>

        {/* Steps Section */}
        <div className="space-y-12" data-scroll-section="steps">
          {steps.map((step, index) => (
            <div
              key={step.number}
              className="bg-gray-50 rounded-2xl p-8 md:p-12 card-slide-alternate"
            >
              <div className="flex flex-col md:flex-row items-center gap-8">
                {/* Left Content */}
                <div className="flex-1">
                  <h2 className="text-3xl font-normal text-gray-900 mb-4">
                    {step.number}. {step.title}
                  </h2>
                  <p className="text-sm text-gray-700 mb-6 leading-relaxed">
                    {step.description}
                  </p>
                </div>

                {/* Right Image/Video */}
                <div className="w-full md:w-[500px] flex justify-center">
                  <div className={`rounded-lg p-6 w-full h-80 flex items-center justify-center ${step.isVideo ? '' : 'bg-black'}`}>
                    {step.isVideo ? (
                      <video
                        src={step.image}
                        autoPlay
                        loop
                        muted
                        playsInline
                        className="w-full h-full object-contain"
                      />
                    ) : (
                      <img
                        src={step.image}
                        alt={step.title}
                        className="w-full h-full object-contain"
                      />
                    )}
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>

        {/* Why is NeuroSense better for you Section */}
        <div className="mt-20 mb-16 scroll-fade-up" data-scroll-section="why-better">
          <div className="text-center mb-16">
            <h2 className="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-12">
              Why Should You Choose Neurosense?
            </h2>

            <div className="relative">
              <div className="bg-gray-50 rounded-3xl p-8 sm:p-10 md:p-12 mx-auto max-w-5xl shadow-lg border border-gray-200">
                <h3 className="text-2xl sm:text-3xl font-semibold text-gray-900 mb-6">
                  Evidence Based Research
                </h3>

                <div className="text-sm text-gray-700 leading-relaxed space-y-4 text-left">
                  <p>
                    Quantitative EEG (qEEG) has emerged as a scientifically validated tool in brain wellness and care, enabling the visualization and measurement of electrical activity patterns that reflect cognitive performance, emotional regulation, and mental resilience. Unlike conventional EEG, qEEG maps the brain's functional networks using advanced analytics and normative databases, allowing clinicians to identify dysregulated circuits linked to stress, focus, sleep, and mood.
                  </p>

                  <p>
                    At NeuroSense, we have harnessed this evidence backed technology to create an integrative, clinical grade brain assessment system that translates complex neurodata into clear, actionable insights for personalized brain optimization. By combining qEEG findings with lifestyle, nutrition, and neuro modulation strategies, NeuroSense bridges the gap between medical neuroscience and everyday brain care.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
      </div>

      <Footer />
    </div>
  );
};

export default LBWProjectUpdates;
