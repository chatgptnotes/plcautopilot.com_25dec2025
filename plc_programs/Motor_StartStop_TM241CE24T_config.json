{
  "project_name": "Motor_StartStop",
  "controller": "TM241CE24T",
  "output_path": "C:\\Projects\\M241",
  "task_interval": "T#20ms",
  "task_priority": 1,

  "expansion_modules": [],

  "global_variables": [
    {"name": "StartPB", "type": "BOOL", "address": "%IX0.0", "comment": "Start Pushbutton (NO)"},
    {"name": "StopPB", "type": "BOOL", "address": "%IX0.1", "comment": "Stop Pushbutton (NC)"},
    {"name": "OverloadTrip", "type": "BOOL", "address": "%IX0.2", "comment": "Thermal Overload Relay (NC)"},
    {"name": "EmergencyStop", "type": "BOOL", "address": "%IX0.3", "comment": "Emergency Stop (NC)"},
    {"name": "MotorContactor", "type": "BOOL", "address": "%QX0.0", "comment": "Main Contactor K1"},
    {"name": "RunIndicator", "type": "BOOL", "address": "%QX0.1", "comment": "Run Indicator Lamp"},
    {"name": "FaultIndicator", "type": "BOOL", "address": "%QX0.2", "comment": "Fault Indicator Lamp"}
  ],

  "programs": [
    {
      "name": "Motor_Control",
      "language": "ST",
      "declaration": "VAR\n    MotorRunning : BOOL;\n    MotorFault : BOOL;\n    SafetyOK : BOOL;\n    StartupTimer : TON;\nEND_VAR",
      "implementation": "// Motor Start/Stop Control for TM241CE24T\n// Generated by PLCAutoPilot\n\n// Safety interlock check\nSafetyOK := GVL.EmergencyStop AND NOT GVL.OverloadTrip;\n\n// Fault latching\nIF GVL.OverloadTrip THEN\n    MotorFault := TRUE;\nEND_IF;\n\nIF GVL.StartPB AND NOT GVL.OverloadTrip THEN\n    MotorFault := FALSE;\nEND_IF;\n\n// Startup timer (3 second anti-chatter delay)\nStartupTimer(\n    IN := GVL.StartPB AND SafetyOK AND NOT MotorFault AND NOT MotorRunning,\n    PT := T#3S\n);\n\n// Motor running logic\nIF StartupTimer.Q THEN\n    MotorRunning := TRUE;\nEND_IF;\n\nIF NOT GVL.StopPB OR NOT SafetyOK OR MotorFault THEN\n    MotorRunning := FALSE;\nEND_IF;\n\n// Write outputs\nGVL.MotorContactor := MotorRunning;\nGVL.RunIndicator := MotorRunning;\nGVL.FaultIndicator := MotorFault;"
    }
  ]
}
