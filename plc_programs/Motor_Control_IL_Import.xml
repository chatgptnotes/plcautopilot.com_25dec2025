<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0201">
  <fileHeader companyName="PLCAutoPilot" productName="M241 Motor Control" productVersion="1.0" creationDateTime="2025-12-30T02:00:00"/>
  <contentHeader name="Motor_Control_IL" modificationDateTime="2025-12-30T02:00:00">
    <coordinateInfo>
      <fbd><scaling x="1" y="1"/></fbd>
      <ld><scaling x="1" y="1"/></ld>
      <sfc><scaling x="1" y="1"/></sfc>
    </coordinateInfo>
  </contentHeader>
  <types>
    <dataTypes/>
    <pous>
      <!-- Motor Control - Instruction List (Ladder Equivalent) -->
      <pou name="Motor_Control_IL" pouType="program">
        <interface>
          <localVars>
            <variable name="MotorRunning">
              <type><BOOL/></type>
            </variable>
            <variable name="MotorFault">
              <type><BOOL/></type>
            </variable>
            <variable name="SafetyOK">
              <type><BOOL/></type>
            </variable>
            <variable name="StartCondition">
              <type><BOOL/></type>
            </variable>
            <variable name="StopCondition">
              <type><BOOL/></type>
            </variable>
            <variable name="StartupTimer">
              <type><derived name="TON"/></type>
            </variable>
          </localVars>
        </interface>
        <body>
          <IL>
            <xhtml xmlns="http://www.w3.org/1999/xhtml"><![CDATA[(* ============================================
   MOTOR START/STOP CONTROL - Instruction List
   TM241CE24T - PLCAutoPilot Generated
   Equivalent to Ladder Diagram
   ============================================

   INPUTS:
     %IX0.0 - Start Pushbutton (NO)
     %IX0.1 - Stop Pushbutton (NC)
     %IX0.2 - Thermal Overload (NC)
     %IX0.3 - Emergency Stop (NC)

   OUTPUTS:
     %QX0.0 - Motor Contactor
     %QX0.1 - Run Indicator
     %QX0.2 - Fault Indicator
   ============================================ *)

(* RUNG 1: Safety Interlock *)
(* E-Stop OK AND Overload NOT tripped *)
LD    %IX0.3
ANDN  %IX0.2
ST    SafetyOK

(* RUNG 2: Fault Latch SET *)
(* Overload trip sets fault *)
LD    %IX0.2
S     MotorFault

(* RUNG 3: Fault Latch RESET *)
(* Start pressed AND overload clear resets fault *)
LD    %IX0.0
ANDN  %IX0.2
R     MotorFault

(* RUNG 4: Start Conditions *)
(* Start AND Safe AND NOT Fault AND NOT Running *)
LD    %IX0.0
AND   SafetyOK
ANDN  MotorFault
ANDN  MotorRunning
ST    StartCondition

(* RUNG 5: Startup Timer - 3 second delay *)
CAL   StartupTimer(IN := StartCondition, PT := T#3S)

(* RUNG 6: Motor Latch SET *)
(* Timer complete sets motor running *)
LD    StartupTimer.Q
S     MotorRunning

(* RUNG 7: Stop Condition *)
(* Stop pressed (NC so FALSE = pressed) *)
LDN   %IX0.1
ORN   SafetyOK
OR    MotorFault
ST    StopCondition

(* RUNG 8: Motor Latch RESET *)
(* Stop condition resets motor *)
LD    StopCondition
R     MotorRunning

(* RUNG 9: Motor Contactor Output *)
LD    MotorRunning
ST    %QX0.0

(* RUNG 10: Run Indicator Output *)
LD    MotorRunning
ST    %QX0.1

(* RUNG 11: Fault Indicator Output *)
LD    MotorFault
ST    %QX0.2]]></xhtml>
          </IL>
        </body>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations>
      <configuration name="TM241CE24T_Config">
        <resource name="Application">
          <task name="MAST" priority="1" interval="T#20ms">
            <pouInstance name="Motor_Control_IL_Inst" typeName="Motor_Control_IL"/>
          </task>
        </resource>
      </configuration>
    </configurations>
  </instances>
</project>
